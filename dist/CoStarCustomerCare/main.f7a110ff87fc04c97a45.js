(self.webpackChunkco_star_customer_care=self.webpackChunkco_star_customer_care||[]).push([[179],{255:Zo=>{function Vr(eo){return Promise.resolve().then(()=>{var Dn=new Error("Cannot find module '"+eo+"'");throw Dn.code="MODULE_NOT_FOUND",Dn})}Vr.keys=()=>[],Vr.resolve=Vr,Vr.id=255,Zo.exports=Vr},925:(Zo,Vr,eo)=>{var Dn;!function N(P,V,v){function w(f,c){if(!V[f]){if(!P[f]){if(E)return E(f,!0);var u=new Error("Cannot find module '"+f+"'");throw u.code="MODULE_NOT_FOUND",u}var l=V[f]={exports:{}};P[f][0].call(l.exports,function(g){return w(P[f][1][g]||g)},l,l.exports,N,P,V,v)}return V[f].exports}for(var E=void 0,m=0;m<v.length;m++)w(v[m]);return w}({1:[function(N,P,V){P.exports={version:"2.0",metadata:{apiVersion:"2014-06-30",endpointPrefix:"cognito-identity",jsonVersion:"1.1",protocol:"json",serviceFullName:"Amazon Cognito Identity",serviceId:"Cognito Identity",signatureVersion:"v4",targetPrefix:"AWSCognitoIdentityService",uid:"cognito-identity-2014-06-30"},operations:{CreateIdentityPool:{input:{type:"structure",required:["IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},SupportedLoginProviders:{shape:"S4"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S8"},CognitoIdentityProviders:{shape:"Sa"},SamlProviderARNs:{shape:"Sf"},IdentityPoolTags:{shape:"Sg"}}},output:{shape:"Sj"}},DeleteIdentities:{input:{type:"structure",required:["IdentityIdsToDelete"],members:{IdentityIdsToDelete:{type:"list",member:{}}}},output:{type:"structure",members:{UnprocessedIdentityIds:{type:"list",member:{type:"structure",members:{IdentityId:{},ErrorCode:{}}}}}}},DeleteIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}}},DescribeIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{}}},output:{shape:"Su"}},DescribeIdentityPool:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{shape:"Sj"}},GetCredentialsForIdentity:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"Sz"},CustomRoleArn:{}}},output:{type:"structure",members:{IdentityId:{},Credentials:{type:"structure",members:{AccessKeyId:{},SecretKey:{},SessionToken:{},Expiration:{type:"timestamp"}}}}}},GetId:{input:{type:"structure",required:["IdentityPoolId"],members:{AccountId:{},IdentityPoolId:{},Logins:{shape:"Sz"}}},output:{type:"structure",members:{IdentityId:{}}}},GetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{}}},output:{type:"structure",members:{IdentityPoolId:{},Roles:{shape:"S1b"},RoleMappings:{shape:"S1d"}}}},GetOpenIdToken:{input:{type:"structure",required:["IdentityId"],members:{IdentityId:{},Logins:{shape:"Sz"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}}},GetOpenIdTokenForDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId","Logins"],members:{IdentityPoolId:{},IdentityId:{},Logins:{shape:"Sz"},TokenDuration:{type:"long"}}},output:{type:"structure",members:{IdentityId:{},Token:{}}}},ListIdentities:{input:{type:"structure",required:["IdentityPoolId","MaxResults"],members:{IdentityPoolId:{},MaxResults:{type:"integer"},NextToken:{},HideDisabled:{type:"boolean"}}},output:{type:"structure",members:{IdentityPoolId:{},Identities:{type:"list",member:{shape:"Su"}},NextToken:{}}}},ListIdentityPools:{input:{type:"structure",required:["MaxResults"],members:{MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityPools:{type:"list",member:{type:"structure",members:{IdentityPoolId:{},IdentityPoolName:{}}}},NextToken:{}}}},ListTagsForResource:{input:{type:"structure",required:["ResourceArn"],members:{ResourceArn:{}}},output:{type:"structure",members:{Tags:{shape:"Sg"}}}},LookupDeveloperIdentity:{input:{type:"structure",required:["IdentityPoolId"],members:{IdentityPoolId:{},IdentityId:{},DeveloperUserIdentifier:{},MaxResults:{type:"integer"},NextToken:{}}},output:{type:"structure",members:{IdentityId:{},DeveloperUserIdentifierList:{type:"list",member:{}},NextToken:{}}}},MergeDeveloperIdentities:{input:{type:"structure",required:["SourceUserIdentifier","DestinationUserIdentifier","DeveloperProviderName","IdentityPoolId"],members:{SourceUserIdentifier:{},DestinationUserIdentifier:{},DeveloperProviderName:{},IdentityPoolId:{}}},output:{type:"structure",members:{IdentityId:{}}}},SetIdentityPoolRoles:{input:{type:"structure",required:["IdentityPoolId","Roles"],members:{IdentityPoolId:{},Roles:{shape:"S1b"},RoleMappings:{shape:"S1d"}}}},TagResource:{input:{type:"structure",required:["ResourceArn"],members:{ResourceArn:{},Tags:{shape:"Sg"}}},output:{type:"structure",members:{}}},UnlinkDeveloperIdentity:{input:{type:"structure",required:["IdentityId","IdentityPoolId","DeveloperProviderName","DeveloperUserIdentifier"],members:{IdentityId:{},IdentityPoolId:{},DeveloperProviderName:{},DeveloperUserIdentifier:{}}}},UnlinkIdentity:{input:{type:"structure",required:["IdentityId","Logins","LoginsToRemove"],members:{IdentityId:{},Logins:{shape:"Sz"},LoginsToRemove:{shape:"Sv"}}}},UntagResource:{input:{type:"structure",required:["ResourceArn"],members:{ResourceArn:{},TagKeys:{type:"list",member:{}}}},output:{type:"structure",members:{}}},UpdateIdentityPool:{input:{shape:"Sj"},output:{shape:"Sj"}}},shapes:{S4:{type:"map",key:{},value:{}},S8:{type:"list",member:{}},Sa:{type:"list",member:{type:"structure",members:{ProviderName:{},ClientId:{},ServerSideTokenCheck:{type:"boolean"}}}},Sf:{type:"list",member:{}},Sg:{type:"map",key:{},value:{}},Sj:{type:"structure",required:["IdentityPoolId","IdentityPoolName","AllowUnauthenticatedIdentities"],members:{IdentityPoolId:{},IdentityPoolName:{},AllowUnauthenticatedIdentities:{type:"boolean"},SupportedLoginProviders:{shape:"S4"},DeveloperProviderName:{},OpenIdConnectProviderARNs:{shape:"S8"},CognitoIdentityProviders:{shape:"Sa"},SamlProviderARNs:{shape:"Sf"},IdentityPoolTags:{shape:"Sg"}}},Su:{type:"structure",members:{IdentityId:{},Logins:{shape:"Sv"},CreationDate:{type:"timestamp"},LastModifiedDate:{type:"timestamp"}}},Sv:{type:"list",member:{}},Sz:{type:"map",key:{},value:{}},S1b:{type:"map",key:{},value:{}},S1d:{type:"map",key:{},value:{type:"structure",required:["Type"],members:{Type:{},AmbiguousRoleResolution:{},RulesConfiguration:{type:"structure",required:["Rules"],members:{Rules:{type:"list",member:{type:"structure",required:["Claim","MatchType","Value","RoleARN"],members:{Claim:{},MatchType:{},Value:{},RoleARN:{}}}}}}}}}}}},{}],2:[function(N,P,V){P.exports={pagination:{}}},{}],3:[function(N,P,V){P.exports={version:"2.0",metadata:{apiVersion:"2017-02-15",endpointPrefix:"connect",jsonVersion:"1.0",protocol:"json",serviceAbbreviation:"Connect",serviceFullName:"AmazonConnectCTIService",signatureVersion:"",targetPrefix:"AmazonConnectCTIService",uid:"connect-2017-02-15"},operations:{AcceptContact:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{}}},output:{type:"structure",members:{}}},ClearContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},CompleteContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},ConferenceConnections:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{}}},output:{type:"structure",members:{}}},CreateAdditionalConnection:{input:{type:"structure",required:["authentication","contactId","endpoint"],members:{authentication:{shape:"S2"},contactId:{},endpoint:{shape:"Se"}}},output:{type:"structure",members:{}}},CreateOutboundContact:{input:{type:"structure",required:["authentication","endpoint"],members:{authentication:{shape:"S2"},endpoint:{shape:"Se"},queueARN:{}}},output:{type:"structure",members:{}}},CreateTaskContact:{input:{type:"structure",required:["endpoint","name"],members:{endpoint:{shape:"Se"},previousContactId:{},name:{},description:{},references:{shape:"Sr"},idempotencyToken:{},scheduledTime:{type:"long"}}},output:{type:"structure",members:{contactId:{}}}},CreateTransport:{input:{type:"structure",required:["transportType","authentication"],members:{transportType:{},participantId:{},contactId:{},softphoneClientId:{},authentication:{shape:"S2"}}},output:{type:"structure",members:{webSocketTransport:{type:"structure",required:["url","transportLifeTimeInSeconds"],members:{url:{},transportLifeTimeInSeconds:{type:"long"},expiry:{}}},chatTokenTransport:{type:"structure",required:["participantToken","expiry"],members:{participantToken:{},expiry:{}}},softphoneTransport:{type:"structure",required:["softphoneMediaConnections"],members:{softphoneMediaConnections:{type:"list",member:{type:"structure",required:["username","credential","urls"],members:{username:{},credential:{},urls:{type:"list",member:{}}}}}}}}}},DestroyConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},GetAgentConfiguration:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"}}},output:{type:"structure",required:["configuration"],members:{configuration:{shape:"S1h"}}}},GetAgentPermissions:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["permissions"],members:{permissions:{type:"list",member:{}},nextToken:{}}}},GetAgentSnapshot:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},timeout:{type:"long"}}},output:{type:"structure",required:["snapshot","nextToken"],members:{snapshot:{type:"structure",required:["state","contacts","snapshotTimestamp"],members:{state:{shape:"S20"},nextState:{shape:"S20"},agentAvailabilityState:{type:"structure",members:{state:{},timeStamp:{type:"timestamp"}}},contacts:{type:"list",member:{type:"structure",required:["contactId","type","state","connections","attributes"],members:{contactId:{},initialContactId:{},type:{},state:{type:"structure",required:["type","timestamp"],members:{type:{},timestamp:{type:"timestamp"}}},queue:{shape:"Sk"},queueTimestamp:{type:"timestamp"},connections:{type:"list",member:{type:"structure",required:["connectionId","state","type","initial"],members:{connectionId:{},endpoint:{shape:"Se"},state:{type:"structure",required:["type","timestamp"],members:{type:{},timestamp:{type:"timestamp"}}},type:{},initial:{type:"boolean"},softphoneMediaInfo:{type:"structure",members:{callType:{},autoAccept:{type:"boolean"},mediaLegContextToken:{},callContextToken:{},callConfigJson:{}}},chatMediaInfo:{type:"structure",members:{chatAutoAccept:{type:"boolean"},connectionData:{},customerName:{}}},monitoringInfo:{type:"structure",members:{agent:{type:"structure",members:{agentName:{}}},joinTimeStamp:{type:"timestamp"}}},mute:{type:"boolean"}}}},attributes:{type:"map",key:{},value:{type:"structure",required:["name"],members:{name:{},value:{}}}},contactDuration:{},name:{},description:{},references:{shape:"Sr"},initiationMethod:{},contactFeatures:{type:"structure",members:{attachmentsEnabled:{type:"boolean"}}}}}},snapshotTimestamp:{type:"timestamp"}}},nextToken:{}}}},GetAgentStates:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["states"],members:{states:{type:"list",member:{shape:"S20"}},nextToken:{}}}},GetDialableCountryCodes:{input:{type:"structure",required:["authentication"],members:{authentication:{shape:"S2"},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["countryCodes"],members:{countryCodes:{type:"list",member:{}},nextToken:{}}}},GetEndpoints:{input:{type:"structure",required:["authentication","queueARNs"],members:{authentication:{shape:"S2"},queueARNs:{type:"list",member:{}},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",members:{endpoints:{type:"list",member:{shape:"Se"}},nextToken:{}}}},GetNewAuthToken:{input:{type:"structure",required:["authentication","refreshToken"],members:{authentication:{shape:"S2"},refreshToken:{}}},output:{type:"structure",members:{newAuthToken:{},expirationDateTime:{type:"timestamp"}}}},GetRoutingProfileQueues:{input:{type:"structure",required:["authentication","routingProfileARN"],members:{authentication:{shape:"S2"},routingProfileARN:{},nextToken:{},maxResults:{type:"integer"}}},output:{type:"structure",required:["queues"],members:{queues:{type:"list",member:{shape:"Sk"}},nextToken:{}}}},HoldConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},MuteParticipant:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},NotifyContactIssue:{input:{type:"structure",required:["authentication","contactId"],members:{authentication:{shape:"S2"},contactId:{},issueCode:{},description:{},clientLogs:{}}},output:{type:"structure",members:{}}},PutAgentState:{input:{type:"structure",required:["authentication","state"],members:{authentication:{shape:"S2"},state:{shape:"S20"},enqueueNextState:{type:"boolean"}}},output:{type:"structure",members:{}}},RejectContact:{input:{type:"structure",required:["contactId"],members:{contactId:{}}},output:{type:"structure",members:{}}},ResumeConnection:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},SendClientLogs:{input:{type:"structure",required:["authentication","logEvents"],members:{authentication:{shape:"S2"},logEvents:{type:"list",member:{type:"structure",members:{timestamp:{type:"timestamp"},component:{},message:{}}}}}},output:{type:"structure",members:{}}},SendDigits:{input:{type:"structure",required:["authentication","contactId","connectionId","digits"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{},digits:{}}},output:{type:"structure",members:{}}},SendSoftphoneCallMetrics:{input:{type:"structure",required:["authentication","contactId","softphoneStreamStatistics"],members:{authentication:{shape:"S2"},contactId:{},ccpVersion:{},softphoneStreamStatistics:{shape:"S3r"}}},output:{type:"structure",members:{}}},SendSoftphoneCallReport:{input:{type:"structure",required:["authentication","contactId","report"],members:{authentication:{shape:"S2"},contactId:{},ccpVersion:{},report:{type:"structure",members:{callStartTime:{type:"timestamp"},callEndTime:{type:"timestamp"},softphoneStreamStatistics:{shape:"S3r"},gumTimeMillis:{type:"long"},initializationTimeMillis:{type:"long"},iceCollectionTimeMillis:{type:"long"},signallingConnectTimeMillis:{type:"long"},handshakeTimeMillis:{type:"long"},preTalkTimeMillis:{type:"long"},talkTimeMillis:{type:"long"},cleanupTimeMillis:{type:"long"},iceCollectionFailure:{type:"boolean"},signallingConnectionFailure:{type:"boolean"},handshakeFailure:{type:"boolean"},gumOtherFailure:{type:"boolean"},gumTimeoutFailure:{type:"boolean"},createOfferFailure:{type:"boolean"},setLocalDescriptionFailure:{type:"boolean"},userBusyFailure:{type:"boolean"},invalidRemoteSDPFailure:{type:"boolean"},noRemoteIceCandidateFailure:{type:"boolean"},setRemoteDescriptionFailure:{type:"boolean"}}}}},output:{type:"structure",members:{}}},ToggleActiveConnections:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},UnmuteParticipant:{input:{type:"structure",required:["authentication","contactId","connectionId"],members:{authentication:{shape:"S2"},contactId:{},connectionId:{}}},output:{type:"structure",members:{}}},UpdateAgentConfiguration:{input:{type:"structure",required:["authentication","configuration"],members:{authentication:{shape:"S2"},configuration:{shape:"S1h"}}},output:{type:"structure",members:{}}}},shapes:{S2:{type:"structure",members:{agentARN:{},authToken:{}}},Se:{type:"structure",required:["type"],members:{endpointARN:{},type:{},name:{},phoneNumber:{},agentLogin:{},queue:{shape:"Sk"}}},Sk:{type:"structure",members:{queueARN:{},name:{}}},Sr:{type:"map",key:{},value:{type:"structure",required:["value","type"],members:{value:{},type:{}}}},S1h:{type:"structure",required:["name","softphoneEnabled","softphoneAutoAccept","extension","routingProfile"],members:{name:{},username:{},softphoneEnabled:{type:"boolean"},softphoneAutoAccept:{type:"boolean"},extension:{},routingProfile:{type:"structure",members:{name:{},routingProfileARN:{},defaultOutboundQueue:{shape:"Sk"},channelConcurrencyMap:{type:"map",key:{},value:{type:"long"}}}},agentPreferences:{type:"map",key:{},value:{}}}},S20:{type:"structure",required:["type","name"],members:{agentStateARN:{},type:{},name:{},startTimestamp:{type:"timestamp"}}},S3r:{type:"list",member:{type:"structure",members:{timestamp:{type:"timestamp"},softphoneStreamType:{},packetCount:{type:"long"},packetsLost:{type:"long"},audioLevel:{type:"double"},jitterBufferMillis:{type:"long"},roundTripTimeMillis:{type:"long"}}}}}}},{}],4:[function(N,P,V){P.exports={acm:{name:"ACM",cors:!0},apigateway:{name:"APIGateway",cors:!0},applicationautoscaling:{prefix:"application-autoscaling",name:"ApplicationAutoScaling",cors:!0},appstream:{name:"AppStream"},autoscaling:{name:"AutoScaling",cors:!0},batch:{name:"Batch"},budgets:{name:"Budgets"},clouddirectory:{name:"CloudDirectory",versions:["2016-05-10*"]},cloudformation:{name:"CloudFormation",cors:!0},cloudfront:{name:"CloudFront",versions:["2013-05-12*","2013-11-11*","2014-05-31*","2014-10-21*","2014-11-06*","2015-04-17*","2015-07-27*","2015-09-17*","2016-01-13*","2016-01-28*","2016-08-01*","2016-08-20*","2016-09-07*","2016-09-29*","2016-11-25*","2017-03-25*","2017-10-30*","2018-06-18*","2018-11-05*"],cors:!0},cloudhsm:{name:"CloudHSM",cors:!0},cloudsearch:{name:"CloudSearch"},cloudsearchdomain:{name:"CloudSearchDomain"},cloudtrail:{name:"CloudTrail",cors:!0},cloudwatch:{prefix:"monitoring",name:"CloudWatch",cors:!0},cloudwatchevents:{prefix:"events",name:"CloudWatchEvents",versions:["2014-02-03*"],cors:!0},cloudwatchlogs:{prefix:"logs",name:"CloudWatchLogs",cors:!0},codebuild:{name:"CodeBuild",cors:!0},codecommit:{name:"CodeCommit",cors:!0},codedeploy:{name:"CodeDeploy",cors:!0},codepipeline:{name:"CodePipeline",cors:!0},cognitoidentity:{prefix:"cognito-identity",name:"CognitoIdentity",cors:!0},cognitoidentityserviceprovider:{prefix:"cognito-idp",name:"CognitoIdentityServiceProvider",cors:!0},cognitosync:{prefix:"cognito-sync",name:"CognitoSync",cors:!0},configservice:{prefix:"config",name:"ConfigService",cors:!0},connect:{name:"Connect",cors:!0},cur:{name:"CUR",cors:!0},datapipeline:{name:"DataPipeline"},devicefarm:{name:"DeviceFarm",cors:!0},directconnect:{name:"DirectConnect",cors:!0},directoryservice:{prefix:"ds",name:"DirectoryService"},discovery:{name:"Discovery"},dms:{name:"DMS"},dynamodb:{name:"DynamoDB",cors:!0},dynamodbstreams:{prefix:"streams.dynamodb",name:"DynamoDBStreams",cors:!0},ec2:{name:"EC2",versions:["2013-06-15*","2013-10-15*","2014-02-01*","2014-05-01*","2014-06-15*","2014-09-01*","2014-10-01*","2015-03-01*","2015-04-15*","2015-10-01*","2016-04-01*","2016-09-15*"],cors:!0},ecr:{name:"ECR",cors:!0},ecs:{name:"ECS",cors:!0},efs:{prefix:"elasticfilesystem",name:"EFS",cors:!0},elasticache:{name:"ElastiCache",versions:["2012-11-15*","2014-03-24*","2014-07-15*","2014-09-30*"],cors:!0},elasticbeanstalk:{name:"ElasticBeanstalk",cors:!0},elb:{prefix:"elasticloadbalancing",name:"ELB",cors:!0},elbv2:{prefix:"elasticloadbalancingv2",name:"ELBv2",cors:!0},emr:{prefix:"elasticmapreduce",name:"EMR",cors:!0},es:{name:"ES"},elastictranscoder:{name:"ElasticTranscoder",cors:!0},firehose:{name:"Firehose",cors:!0},gamelift:{name:"GameLift",cors:!0},glacier:{name:"Glacier"},health:{name:"Health"},iam:{name:"IAM",cors:!0},importexport:{name:"ImportExport"},inspector:{name:"Inspector",versions:["2015-08-18*"],cors:!0},iot:{name:"Iot",cors:!0},iotdata:{prefix:"iot-data",name:"IotData",cors:!0},kinesis:{name:"Kinesis",cors:!0},kinesisanalytics:{name:"KinesisAnalytics"},kms:{name:"KMS",cors:!0},lambda:{name:"Lambda",cors:!0},lexruntime:{prefix:"runtime.lex",name:"LexRuntime",cors:!0},lightsail:{name:"Lightsail"},machinelearning:{name:"MachineLearning",cors:!0},marketplacecommerceanalytics:{name:"MarketplaceCommerceAnalytics",cors:!0},marketplacemetering:{prefix:"meteringmarketplace",name:"MarketplaceMetering"},mturk:{prefix:"mturk-requester",name:"MTurk",cors:!0},mobileanalytics:{name:"MobileAnalytics",cors:!0},opsworks:{name:"OpsWorks",cors:!0},opsworkscm:{name:"OpsWorksCM"},organizations:{name:"Organizations"},pinpoint:{name:"Pinpoint"},polly:{name:"Polly",cors:!0},rds:{name:"RDS",versions:["2014-09-01*"],cors:!0},redshift:{name:"Redshift",cors:!0},rekognition:{name:"Rekognition",cors:!0},resourcegroupstaggingapi:{name:"ResourceGroupsTaggingAPI"},route53:{name:"Route53",cors:!0},route53domains:{name:"Route53Domains",cors:!0},s3:{name:"S3",dualstackAvailable:!0,cors:!0},s3control:{name:"S3Control",dualstackAvailable:!0},servicecatalog:{name:"ServiceCatalog",cors:!0},ses:{prefix:"email",name:"SES",cors:!0},shield:{name:"Shield"},simpledb:{prefix:"sdb",name:"SimpleDB"},sms:{name:"SMS"},snowball:{name:"Snowball"},sns:{name:"SNS",cors:!0},sqs:{name:"SQS",cors:!0},ssm:{name:"SSM",cors:!0},storagegateway:{name:"StorageGateway",cors:!0},stepfunctions:{prefix:"states",name:"StepFunctions"},sts:{name:"STS",cors:!0},support:{name:"Support"},swf:{name:"SWF"},xray:{name:"XRay",cors:!0},waf:{name:"WAF",cors:!0},wafregional:{prefix:"waf-regional",name:"WAFRegional"},workdocs:{name:"WorkDocs",cors:!0},workspaces:{name:"WorkSpaces"},codestar:{name:"CodeStar"},lexmodelbuildingservice:{prefix:"lex-models",name:"LexModelBuildingService",cors:!0},marketplaceentitlementservice:{prefix:"entitlement.marketplace",name:"MarketplaceEntitlementService"},athena:{name:"Athena"},greengrass:{name:"Greengrass"},dax:{name:"DAX"},migrationhub:{prefix:"AWSMigrationHub",name:"MigrationHub"},cloudhsmv2:{name:"CloudHSMV2"},glue:{name:"Glue"},mobile:{name:"Mobile"},pricing:{name:"Pricing",cors:!0},costexplorer:{prefix:"ce",name:"CostExplorer",cors:!0},mediaconvert:{name:"MediaConvert"},medialive:{name:"MediaLive"},mediapackage:{name:"MediaPackage"},mediastore:{name:"MediaStore"},mediastoredata:{prefix:"mediastore-data",name:"MediaStoreData",cors:!0},appsync:{name:"AppSync"},guardduty:{name:"GuardDuty"},mq:{name:"MQ"},comprehend:{name:"Comprehend",cors:!0},iotjobsdataplane:{prefix:"iot-jobs-data",name:"IoTJobsDataPlane"},kinesisvideoarchivedmedia:{prefix:"kinesis-video-archived-media",name:"KinesisVideoArchivedMedia",cors:!0},kinesisvideomedia:{prefix:"kinesis-video-media",name:"KinesisVideoMedia",cors:!0},kinesisvideo:{name:"KinesisVideo",cors:!0},sagemakerruntime:{prefix:"runtime.sagemaker",name:"SageMakerRuntime"},sagemaker:{name:"SageMaker"},translate:{name:"Translate",cors:!0},resourcegroups:{prefix:"resource-groups",name:"ResourceGroups",cors:!0},alexaforbusiness:{name:"AlexaForBusiness"},cloud9:{name:"Cloud9"},serverlessapplicationrepository:{prefix:"serverlessrepo",name:"ServerlessApplicationRepository"},servicediscovery:{name:"ServiceDiscovery"},workmail:{name:"WorkMail"},autoscalingplans:{prefix:"autoscaling-plans",name:"AutoScalingPlans"},transcribeservice:{prefix:"transcribe",name:"TranscribeService"},acmpca:{prefix:"acm-pca",name:"ACMPCA"},fms:{name:"FMS"},secretsmanager:{name:"SecretsManager",cors:!0},iotanalytics:{name:"IoTAnalytics",cors:!0},iot1clickdevicesservice:{prefix:"iot1click-devices",name:"IoT1ClickDevicesService"},iot1clickprojects:{prefix:"iot1click-projects",name:"IoT1ClickProjects"},pi:{name:"PI"},neptune:{name:"Neptune"},mediatailor:{name:"MediaTailor"},eks:{name:"EKS"},macie:{name:"Macie"},dlm:{name:"DLM"},signer:{name:"Signer"},chime:{name:"Chime"},pinpointemail:{prefix:"pinpoint-email",name:"PinpointEmail"},ram:{name:"RAM"},route53resolver:{name:"Route53Resolver"},pinpointsmsvoice:{prefix:"sms-voice",name:"PinpointSMSVoice"},quicksight:{name:"QuickSight"},rdsdataservice:{prefix:"rds-data",name:"RDSDataService"},amplify:{name:"Amplify"},datasync:{name:"DataSync"},robomaker:{name:"RoboMaker"},transfer:{name:"Transfer"},globalaccelerator:{name:"GlobalAccelerator"},comprehendmedical:{name:"ComprehendMedical",cors:!0},kinesisanalyticsv2:{name:"KinesisAnalyticsV2"},mediaconnect:{name:"MediaConnect"},fsx:{name:"FSx"},securityhub:{name:"SecurityHub"},appmesh:{name:"AppMesh",versions:["2018-10-01*"]},licensemanager:{prefix:"license-manager",name:"LicenseManager"},kafka:{name:"Kafka"},apigatewaymanagementapi:{name:"ApiGatewayManagementApi"},apigatewayv2:{name:"ApiGatewayV2"},docdb:{name:"DocDB"},backup:{name:"Backup"},worklink:{name:"WorkLink"},textract:{name:"Textract"},managedblockchain:{name:"ManagedBlockchain"},mediapackagevod:{prefix:"mediapackage-vod",name:"MediaPackageVod"},groundstation:{name:"GroundStation"},iotthingsgraph:{name:"IoTThingsGraph"},iotevents:{name:"IoTEvents"},ioteventsdata:{prefix:"iotevents-data",name:"IoTEventsData"},personalize:{name:"Personalize",cors:!0},personalizeevents:{prefix:"personalize-events",name:"PersonalizeEvents",cors:!0},personalizeruntime:{prefix:"personalize-runtime",name:"PersonalizeRuntime",cors:!0},applicationinsights:{prefix:"application-insights",name:"ApplicationInsights"},servicequotas:{prefix:"service-quotas",name:"ServiceQuotas"},ec2instanceconnect:{prefix:"ec2-instance-connect",name:"EC2InstanceConnect"},eventbridge:{name:"EventBridge"},lakeformation:{name:"LakeFormation"},forecastservice:{prefix:"forecast",name:"ForecastService",cors:!0},forecastqueryservice:{prefix:"forecastquery",name:"ForecastQueryService",cors:!0},qldb:{name:"QLDB"},qldbsession:{prefix:"qldb-session",name:"QLDBSession"},workmailmessageflow:{name:"WorkMailMessageFlow"}}},{}],5:[function(N,P,V){P.exports={version:"2.0",metadata:{apiVersion:"2011-06-15",endpointPrefix:"sts",globalEndpoint:"sts.amazonaws.com",protocol:"query",serviceAbbreviation:"AWS STS",serviceFullName:"AWS Security Token Service",serviceId:"STS",signatureVersion:"v4",uid:"sts-2011-06-15",xmlNamespace:"https://sts.amazonaws.com/doc/2011-06-15/"},operations:{AssumeRole:{input:{type:"structure",required:["RoleArn","RoleSessionName"],members:{RoleArn:{},RoleSessionName:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"},ExternalId:{},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"AssumeRoleResult",type:"structure",members:{Credentials:{shape:"Sc"},AssumedRoleUser:{shape:"Sh"},PackedPolicySize:{type:"integer"}}}},AssumeRoleWithSAML:{input:{type:"structure",required:["RoleArn","PrincipalArn","SAMLAssertion"],members:{RoleArn:{},PrincipalArn:{},SAMLAssertion:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithSAMLResult",type:"structure",members:{Credentials:{shape:"Sc"},AssumedRoleUser:{shape:"Sh"},PackedPolicySize:{type:"integer"},Subject:{},SubjectType:{},Issuer:{},Audience:{},NameQualifier:{}}}},AssumeRoleWithWebIdentity:{input:{type:"structure",required:["RoleArn","RoleSessionName","WebIdentityToken"],members:{RoleArn:{},RoleSessionName:{},WebIdentityToken:{},ProviderId:{},PolicyArns:{shape:"S4"},Policy:{},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"AssumeRoleWithWebIdentityResult",type:"structure",members:{Credentials:{shape:"Sc"},SubjectFromWebIdentityToken:{},AssumedRoleUser:{shape:"Sh"},PackedPolicySize:{type:"integer"},Provider:{},Audience:{}}}},DecodeAuthorizationMessage:{input:{type:"structure",required:["EncodedMessage"],members:{EncodedMessage:{}}},output:{resultWrapper:"DecodeAuthorizationMessageResult",type:"structure",members:{DecodedMessage:{}}}},GetAccessKeyInfo:{input:{type:"structure",required:["AccessKeyId"],members:{AccessKeyId:{}}},output:{resultWrapper:"GetAccessKeyInfoResult",type:"structure",members:{Account:{}}}},GetCallerIdentity:{input:{type:"structure",members:{}},output:{resultWrapper:"GetCallerIdentityResult",type:"structure",members:{UserId:{},Account:{},Arn:{}}}},GetFederationToken:{input:{type:"structure",required:["Name"],members:{Name:{},Policy:{},PolicyArns:{shape:"S4"},DurationSeconds:{type:"integer"}}},output:{resultWrapper:"GetFederationTokenResult",type:"structure",members:{Credentials:{shape:"Sc"},FederatedUser:{type:"structure",required:["FederatedUserId","Arn"],members:{FederatedUserId:{},Arn:{}}},PackedPolicySize:{type:"integer"}}}},GetSessionToken:{input:{type:"structure",members:{DurationSeconds:{type:"integer"},SerialNumber:{},TokenCode:{}}},output:{resultWrapper:"GetSessionTokenResult",type:"structure",members:{Credentials:{shape:"Sc"}}}}},shapes:{S4:{type:"list",member:{type:"structure",members:{arn:{}}}},Sc:{type:"structure",required:["AccessKeyId","SecretAccessKey","SessionToken","Expiration"],members:{AccessKeyId:{},SecretAccessKey:{},SessionToken:{},Expiration:{type:"timestamp"}}},Sh:{type:"structure",required:["AssumedRoleId","Arn"],members:{AssumedRoleId:{},Arn:{}}}}}},{}],6:[function(N,P,V){arguments[4][2][0].apply(V,arguments)},{dup:2}],7:[function(N,P,V){N("../lib/node_loader");var v=N("../lib/core"),w=v.Service,E=v.apiLoader;E.services.cognitoidentity={},v.CognitoIdentity=w.defineService("cognitoidentity",["2014-06-30"]),N("../lib/services/cognitoidentity"),Object.defineProperty(E.services.cognitoidentity,"2014-06-30",{get:function(){var f=N("../apis/cognito-identity-2014-06-30.min.json");return f.paginators=N("../apis/cognito-identity-2014-06-30.paginators.json").pagination,f},enumerable:!0,configurable:!0}),P.exports=v.CognitoIdentity},{"../apis/cognito-identity-2014-06-30.min.json":1,"../apis/cognito-identity-2014-06-30.paginators.json":2,"../lib/core":18,"../lib/node_loader":16,"../lib/services/cognitoidentity":60}],8:[function(N,P,V){N("../lib/node_loader");var v=N("../lib/core"),w=v.Service,E=v.apiLoader;E.services.sts={},v.STS=w.defineService("sts",["2011-06-15"]),N("../lib/services/sts"),Object.defineProperty(E.services.sts,"2011-06-15",{get:function(){var f=N("../apis/sts-2011-06-15.min.json");return f.paginators=N("../apis/sts-2011-06-15.paginators.json").pagination,f},enumerable:!0,configurable:!0}),P.exports=v.STS},{"../apis/sts-2011-06-15.min.json":5,"../apis/sts-2011-06-15.paginators.json":6,"../lib/core":18,"../lib/node_loader":16,"../lib/services/sts":61}],9:[function(N,P,V){function v(w,E){if(!v.services.hasOwnProperty(w))throw new Error("InvalidService: Failed to load api for "+w);return v.services[w][E]}v.services={},P.exports=v},{}],10:[function(N,P,V){var v=N("./browserHmac"),w=N("./browserMd5"),E=N("./browserSha1"),m=N("./browserSha256");P.exports={createHash:function(c){if("md5"===(c=c.toLowerCase()))return new w;if("sha256"===c)return new m;if("sha1"===c)return new E;throw new Error("Hash algorithm "+c+" is not supported in the browser SDK")},createHmac:function(c,h){if("md5"===(c=c.toLowerCase()))return new v(w,h);if("sha256"===c)return new v(m,h);if("sha1"===c)return new v(E,h);throw new Error("HMAC algorithm "+c+" is not supported in the browser SDK")},createSign:function(){throw new Error("createSign is not implemented in the browser")}}},{"./browserHmac":12,"./browserMd5":13,"./browserSha1":14,"./browserSha256":15}],11:[function(N,P,V){var v=N("buffer/").Buffer;"undefined"!=typeof ArrayBuffer&&void 0===ArrayBuffer.isView&&(ArrayBuffer.isView=function(f){return w.indexOf(Object.prototype.toString.call(f))>-1});var w=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]","[object DataView]"];P.exports={isEmptyData:function(f){return"string"==typeof f?0===f.length:0===f.byteLength},convertToBuffer:function(f){return"string"==typeof f&&(f=new v(f,"utf8")),ArrayBuffer.isView(f)?new Uint8Array(f.buffer,f.byteOffset,f.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(f)}}},{"buffer/":81}],12:[function(N,P,V){var v=N("./browserHashUtils");function w(m,f){this.hash=new m,this.outer=new m;var c=function(m,f){var c=v.convertToBuffer(f);if(c.byteLength>m.BLOCK_SIZE){var h=new m;h.update(c),c=h.digest()}var u=new Uint8Array(m.BLOCK_SIZE);return u.set(c),u}(m,f),h=new Uint8Array(m.BLOCK_SIZE);h.set(c);for(var u=0;u<m.BLOCK_SIZE;u++)c[u]^=54,h[u]^=92;for(this.hash.update(c),this.outer.update(h),u=0;u<c.byteLength;u++)c[u]=0}P.exports=w,w.prototype.update=function(m){if(v.isEmptyData(m)||this.error)return this;try{this.hash.update(v.convertToBuffer(m))}catch(f){this.error=f}return this},w.prototype.digest=function(m){return this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest(m)}},{"./browserHashUtils":11}],13:[function(N,P,V){var v=N("./browserHashUtils"),w=N("buffer/").Buffer;function c(){this.state=[1732584193,4023233417,2562383102,271733878],this.buffer=new DataView(new ArrayBuffer(64)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}function h(y,_,S,D,b,T){return((_=(_+y&4294967295)+(D+T&4294967295)&4294967295)<<b|_>>>32-b)+S&4294967295}function u(y,_,S,D,b,T,R){return h(_&S|~_&D,y,_,b,T,R)}function l(y,_,S,D,b,T,R){return h(_&D|S&~D,y,_,b,T,R)}function g(y,_,S,D,b,T,R){return h(_^S^D,y,_,b,T,R)}function d(y,_,S,D,b,T,R){return h(S^(_|~D),y,_,b,T,R)}P.exports=c,c.BLOCK_SIZE=64,c.prototype.update=function(y){if(v.isEmptyData(y))return this;if(this.finished)throw new Error("Attempted to update an already finished hash.");var _=v.convertToBuffer(y),S=0,D=_.byteLength;for(this.bytesHashed+=D;D>0;)this.buffer.setUint8(this.bufferLength++,_[S++]),D--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0);return this},c.prototype.digest=function(y){if(!this.finished){var _=this,S=_.buffer,D=_.bufferLength,T=8*_.bytesHashed;if(S.setUint8(this.bufferLength++,128),D%64>=56){for(var R=this.bufferLength;R<64;R++)S.setUint8(R,0);this.hashBuffer(),this.bufferLength=0}for(R=this.bufferLength;R<56;R++)S.setUint8(R,0);S.setUint32(56,T>>>0,!0),S.setUint32(60,Math.floor(T/4294967296),!0),this.hashBuffer(),this.finished=!0}var q=new DataView(new ArrayBuffer(16));for(R=0;R<4;R++)q.setUint32(4*R,this.state[R],!0);var K=new w(q.buffer,q.byteOffset,q.byteLength);return y?K.toString(y):K},c.prototype.hashBuffer=function(){var _=this.buffer,S=this.state,D=S[0],b=S[1],T=S[2],R=S[3];D=u(D,b,T,R,_.getUint32(0,!0),7,3614090360),R=u(R,D,b,T,_.getUint32(4,!0),12,3905402710),T=u(T,R,D,b,_.getUint32(8,!0),17,606105819),b=u(b,T,R,D,_.getUint32(12,!0),22,3250441966),D=u(D,b,T,R,_.getUint32(16,!0),7,4118548399),R=u(R,D,b,T,_.getUint32(20,!0),12,1200080426),T=u(T,R,D,b,_.getUint32(24,!0),17,2821735955),b=u(b,T,R,D,_.getUint32(28,!0),22,4249261313),D=u(D,b,T,R,_.getUint32(32,!0),7,1770035416),R=u(R,D,b,T,_.getUint32(36,!0),12,2336552879),T=u(T,R,D,b,_.getUint32(40,!0),17,4294925233),b=u(b,T,R,D,_.getUint32(44,!0),22,2304563134),D=u(D,b,T,R,_.getUint32(48,!0),7,1804603682),R=u(R,D,b,T,_.getUint32(52,!0),12,4254626195),T=u(T,R,D,b,_.getUint32(56,!0),17,2792965006),D=l(D,b=u(b,T,R,D,_.getUint32(60,!0),22,1236535329),T,R,_.getUint32(4,!0),5,4129170786),R=l(R,D,b,T,_.getUint32(24,!0),9,3225465664),T=l(T,R,D,b,_.getUint32(44,!0),14,643717713),b=l(b,T,R,D,_.getUint32(0,!0),20,3921069994),D=l(D,b,T,R,_.getUint32(20,!0),5,3593408605),R=l(R,D,b,T,_.getUint32(40,!0),9,38016083),T=l(T,R,D,b,_.getUint32(60,!0),14,3634488961),b=l(b,T,R,D,_.getUint32(16,!0),20,3889429448),D=l(D,b,T,R,_.getUint32(36,!0),5,568446438),R=l(R,D,b,T,_.getUint32(56,!0),9,3275163606),T=l(T,R,D,b,_.getUint32(12,!0),14,4107603335),b=l(b,T,R,D,_.getUint32(32,!0),20,1163531501),D=l(D,b,T,R,_.getUint32(52,!0),5,2850285829),R=l(R,D,b,T,_.getUint32(8,!0),9,4243563512),T=l(T,R,D,b,_.getUint32(28,!0),14,1735328473),D=g(D,b=l(b,T,R,D,_.getUint32(48,!0),20,2368359562),T,R,_.getUint32(20,!0),4,4294588738),R=g(R,D,b,T,_.getUint32(32,!0),11,2272392833),T=g(T,R,D,b,_.getUint32(44,!0),16,1839030562),b=g(b,T,R,D,_.getUint32(56,!0),23,4259657740),D=g(D,b,T,R,_.getUint32(4,!0),4,2763975236),R=g(R,D,b,T,_.getUint32(16,!0),11,1272893353),T=g(T,R,D,b,_.getUint32(28,!0),16,4139469664),b=g(b,T,R,D,_.getUint32(40,!0),23,3200236656),D=g(D,b,T,R,_.getUint32(52,!0),4,681279174),R=g(R,D,b,T,_.getUint32(0,!0),11,3936430074),T=g(T,R,D,b,_.getUint32(12,!0),16,3572445317),b=g(b,T,R,D,_.getUint32(24,!0),23,76029189),D=g(D,b,T,R,_.getUint32(36,!0),4,3654602809),R=g(R,D,b,T,_.getUint32(48,!0),11,3873151461),T=g(T,R,D,b,_.getUint32(60,!0),16,530742520),D=d(D,b=g(b,T,R,D,_.getUint32(8,!0),23,3299628645),T,R,_.getUint32(0,!0),6,4096336452),R=d(R,D,b,T,_.getUint32(28,!0),10,1126891415),T=d(T,R,D,b,_.getUint32(56,!0),15,2878612391),b=d(b,T,R,D,_.getUint32(20,!0),21,4237533241),D=d(D,b,T,R,_.getUint32(48,!0),6,1700485571),R=d(R,D,b,T,_.getUint32(12,!0),10,2399980690),T=d(T,R,D,b,_.getUint32(40,!0),15,4293915773),b=d(b,T,R,D,_.getUint32(4,!0),21,2240044497),D=d(D,b,T,R,_.getUint32(32,!0),6,1873313359),R=d(R,D,b,T,_.getUint32(60,!0),10,4264355552),T=d(T,R,D,b,_.getUint32(24,!0),15,2734768916),b=d(b,T,R,D,_.getUint32(52,!0),21,1309151649),D=d(D,b,T,R,_.getUint32(16,!0),6,4149444226),R=d(R,D,b,T,_.getUint32(44,!0),10,3174756917),T=d(T,R,D,b,_.getUint32(8,!0),15,718787259),b=d(b,T,R,D,_.getUint32(36,!0),21,3951481745),S[0]=D+S[0]&4294967295,S[1]=b+S[1]&4294967295,S[2]=T+S[2]&4294967295,S[3]=R+S[3]&4294967295}},{"./browserHashUtils":11,"buffer/":81}],14:[function(N,P,V){var v=N("buffer/").Buffer,w=N("./browserHashUtils");function u(){this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=new Uint32Array(80),this.offset=0,this.shift=24,this.totalLength=0}new Uint32Array([1518500249,1859775393,-1894007588,-899497514]),Math.pow(2,53),P.exports=u,u.BLOCK_SIZE=64,u.prototype.update=function(l){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(w.isEmptyData(l))return this;var g=(l=w.convertToBuffer(l)).length;this.totalLength+=8*g;for(var d=0;d<g;d++)this.write(l[d]);return this},u.prototype.write=function(g){this.block[this.offset]|=(255&g)<<this.shift,this.shift?this.shift-=8:(this.offset++,this.shift=24),16===this.offset&&this.processBlock()},u.prototype.digest=function(l){this.write(128),(this.offset>14||14===this.offset&&this.shift<24)&&this.processBlock(),this.offset=14,this.shift=24,this.write(0),this.write(0),this.write(this.totalLength>0xffffffffff?this.totalLength/1099511627776:0),this.write(this.totalLength>4294967295?this.totalLength/4294967296:0);for(var g=24;g>=0;g-=8)this.write(this.totalLength>>g);var d=new v(20),y=new DataView(d.buffer);return y.setUint32(0,this.h0,!1),y.setUint32(4,this.h1,!1),y.setUint32(8,this.h2,!1),y.setUint32(12,this.h3,!1),y.setUint32(16,this.h4,!1),l?d.toString(l):d},u.prototype.processBlock=function(){for(var g=16;g<80;g++){var d=this.block[g-3]^this.block[g-8]^this.block[g-14]^this.block[g-16];this.block[g]=d<<1|d>>>31}var T,R,y=this.h0,_=this.h1,S=this.h2,D=this.h3,b=this.h4;for(g=0;g<80;g++){g<20?(T=D^_&(S^D),R=1518500249):g<40?(T=_^S^D,R=1859775393):g<60?(T=_&S|D&(_|S),R=2400959708):(T=_^S^D,R=3395469782);var q=(y<<5|y>>>27)+T+b+R+(0|this.block[g]);b=D,D=S,S=_<<30|_>>>2,_=y,y=q}for(this.h0=this.h0+y|0,this.h1=this.h1+_|0,this.h2=this.h2+S|0,this.h3=this.h3+D|0,this.h4=this.h4+b|0,this.offset=0,g=0;g<16;g++)this.block[g]=0}},{"./browserHashUtils":11,"buffer/":81}],15:[function(N,P,V){var v=N("buffer/").Buffer,w=N("./browserHashUtils"),f=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),h=Math.pow(2,53)-1;function u(){this.state=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}P.exports=u,u.BLOCK_SIZE=64,u.prototype.update=function(l){if(this.finished)throw new Error("Attempted to update an already finished hash.");if(w.isEmptyData(l))return this;var g=0,d=(l=w.convertToBuffer(l)).byteLength;if(this.bytesHashed+=d,8*this.bytesHashed>h)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;d>0;)this.buffer[this.bufferLength++]=l[g++],d--,64===this.bufferLength&&(this.hashBuffer(),this.bufferLength=0);return this},u.prototype.digest=function(l){if(!this.finished){var g=8*this.bytesHashed,d=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),y=this.bufferLength;if(d.setUint8(this.bufferLength++,128),y%64>=56){for(var _=this.bufferLength;_<64;_++)d.setUint8(_,0);this.hashBuffer(),this.bufferLength=0}for(_=this.bufferLength;_<56;_++)d.setUint8(_,0);d.setUint32(56,Math.floor(g/4294967296),!0),d.setUint32(60,g),this.hashBuffer(),this.finished=!0}var S=new v(32);for(_=0;_<8;_++)S[4*_]=this.state[_]>>>24&255,S[4*_+1]=this.state[_]>>>16&255,S[4*_+2]=this.state[_]>>>8&255,S[4*_+3]=this.state[_]>>>0&255;return l?S.toString(l):S},u.prototype.hashBuffer=function(){for(var g=this.buffer,d=this.state,y=d[0],_=d[1],S=d[2],D=d[3],b=d[4],T=d[5],R=d[6],q=d[7],K=0;K<64;K++){if(K<16)this.temp[K]=(255&g[4*K])<<24|(255&g[4*K+1])<<16|(255&g[4*K+2])<<8|255&g[4*K+3];else{var U=this.temp[K-2];this.temp[K]=(((U>>>17|U<<15)^(U>>>19|U<<13)^U>>>10)+this.temp[K-7]|0)+((((U=this.temp[K-15])>>>7|U<<25)^(U>>>18|U<<14)^U>>>3)+this.temp[K-16]|0)}var se=(((b>>>6|b<<26)^(b>>>11|b<<21)^(b>>>25|b<<7))+(b&T^~b&R)|0)+(q+(f[K]+this.temp[K]|0)|0)|0,G=((y>>>2|y<<30)^(y>>>13|y<<19)^(y>>>22|y<<10))+(y&_^y&S^_&S)|0;q=R,R=T,T=b,b=D+se|0,D=S,S=_,_=y,y=se+G|0}d[0]+=y,d[1]+=_,d[2]+=S,d[3]+=D,d[4]+=b,d[5]+=T,d[6]+=R,d[7]+=q}},{"./browserHashUtils":11,"buffer/":81}],16:[function(N,P,V){(function(v){(function(){var w=N("./util");w.crypto.lib=N("./browserCryptoLib"),w.Buffer=N("buffer/").Buffer,w.url=N("url/"),w.querystring=N("querystring/"),w.realClock=N("./realclock/browserClock"),w.environment="js",w.createEventStream=N("./event-stream/buffered-create-event-stream").createEventStream,w.isBrowser=function(){return!0},w.isNode=function(){return!1};var E=N("./core");if(P.exports=E,N("./credentials"),N("./credentials/credential_provider_chain"),N("./credentials/temporary_credentials"),N("./credentials/chainable_temporary_credentials"),N("./credentials/web_identity_credentials"),N("./credentials/cognito_identity_credentials"),N("./credentials/saml_credentials"),E.XML.Parser=N("./xml/browser_parser"),N("./http/xhr"),void 0===m)var m={browser:!0}}).call(this)}).call(this,N("_process"))},{"./browserCryptoLib":10,"./core":18,"./credentials":19,"./credentials/chainable_temporary_credentials":20,"./credentials/cognito_identity_credentials":21,"./credentials/credential_provider_chain":22,"./credentials/saml_credentials":23,"./credentials/temporary_credentials":24,"./credentials/web_identity_credentials":25,"./event-stream/buffered-create-event-stream":27,"./http/xhr":35,"./realclock/browserClock":52,"./util":71,"./xml/browser_parser":72,_process:86,"buffer/":81,"querystring/":92,"url/":94}],17:[function(N,P,V){var w,v=N("./core");N("./credentials"),N("./credentials/credential_provider_chain"),v.Config=v.util.inherit({constructor:function(m){void 0===m&&(m={}),m=this.extractCredentials(m),v.util.each.call(this,this.keys,function(f,c){this.set(f,m[f],c)})},getCredentials:function(m){var g,f=this;function c(g){m(g,g?null:f.credentials)}function h(g,d){return new v.util.error(d||new Error,{code:"CredentialsError",message:g,name:"CredentialsError"})}f.credentials?"function"==typeof f.credentials.get?f.credentials.get(function(g){g&&(g=h("Could not load credentials from "+f.credentials.constructor.name,g)),c(g)}):(g=null,(!f.credentials.accessKeyId||!f.credentials.secretAccessKey)&&(g=h("Missing credentials")),c(g)):f.credentialProvider?f.credentialProvider.resolve(function(g,d){g&&(g=h("Could not load credentials from any providers",g)),f.credentials=d,c(g)}):c(h("No credentials to load"))},update:function(m,f){f=f||!1,m=this.extractCredentials(m),v.util.each.call(this,m,function(c,h){(f||Object.prototype.hasOwnProperty.call(this.keys,c)||v.Service.hasService(c))&&this.set(c,h)})},loadFromPath:function(m){this.clear();var f=JSON.parse(v.util.readFileSync(m)),c=new v.FileSystemCredentials(m),h=new v.CredentialProviderChain;return h.providers.unshift(c),h.resolve(function(u,l){if(u)throw u;f.credentials=l}),this.constructor(f),this},clear:function(){v.util.each.call(this,this.keys,function(m){delete this[m]}),this.set("credentials",void 0),this.set("credentialProvider",void 0)},set:function(m,f,c){void 0===f?(void 0===c&&(c=this.keys[m]),this[m]="function"==typeof c?c.call(this):c):this[m]="httpOptions"===m&&this[m]?v.util.merge(this[m],f):f},keys:{credentials:null,credentialProvider:null,region:null,logger:null,apiVersions:{},apiVersion:null,endpoint:void 0,httpOptions:{timeout:12e4},maxRetries:void 0,maxRedirects:10,paramValidation:!0,sslEnabled:!0,s3ForcePathStyle:!1,s3BucketEndpoint:!1,s3DisableBodySigning:!0,computeChecksums:!0,convertResponseTypes:!0,correctClockSkew:!1,customUserAgent:null,dynamoDbCrc32:!0,systemClockOffset:0,signatureVersion:null,signatureCache:!0,retryDelayOptions:{},useAccelerateEndpoint:!1,clientSideMonitoring:!1,endpointDiscoveryEnabled:!1,endpointCacheSize:1e3,hostPrefixEnabled:!0,stsRegionalEndpoints:null},extractCredentials:function(m){return m.accessKeyId&&m.secretAccessKey&&((m=v.util.copy(m)).credentials=new v.Credentials(m)),m},setPromisesDependency:function(m){w=m,null===m&&"function"==typeof Promise&&(w=Promise);var f=[v.Request,v.Credentials,v.CredentialProviderChain];v.S3&&(f.push(v.S3),v.S3.ManagedUpload&&f.push(v.S3.ManagedUpload)),v.util.addPromises(f,w)},getPromisesDependency:function(){return w}}),v.config=new v.Config},{"./core":18,"./credentials":19,"./credentials/credential_provider_chain":22}],18:[function(N,P,V){var v={util:N("./util")};({}).toString(),P.exports=v,v.util.update(v,{VERSION:"2.553.0",Signers:{},Protocol:{Json:N("./protocol/json"),Query:N("./protocol/query"),Rest:N("./protocol/rest"),RestJson:N("./protocol/rest_json"),RestXml:N("./protocol/rest_xml")},XML:{Builder:N("./xml/builder"),Parser:null},JSON:{Builder:N("./json/builder"),Parser:N("./json/parser")},Model:{Api:N("./model/api"),Operation:N("./model/operation"),Shape:N("./model/shape"),Paginator:N("./model/paginator"),ResourceWaiter:N("./model/resource_waiter")},apiLoader:N("./api_loader"),EndpointCache:N("../vendor/endpoint-cache").EndpointCache}),N("./sequential_executor"),N("./service"),N("./config"),N("./http"),N("./event_listeners"),N("./request"),N("./response"),N("./resource_waiter"),N("./signers/request_signer"),N("./param_validator"),v.events=new v.SequentialExecutor,v.util.memoizedProperty(v,"endpointCache",function(){return new v.EndpointCache(v.config.endpointCacheSize)},!0)},{"../vendor/endpoint-cache":103,"./api_loader":9,"./config":17,"./event_listeners":33,"./http":34,"./json/builder":36,"./json/parser":37,"./model/api":38,"./model/operation":40,"./model/paginator":41,"./model/resource_waiter":42,"./model/shape":43,"./param_validator":44,"./protocol/json":46,"./protocol/query":47,"./protocol/rest":48,"./protocol/rest_json":49,"./protocol/rest_xml":50,"./request":55,"./resource_waiter":56,"./response":57,"./sequential_executor":58,"./service":59,"./signers/request_signer":63,"./util":71,"./xml/builder":73}],19:[function(N,P,V){var v=N("./core");v.Credentials=v.util.inherit({constructor:function(){if(v.util.hideProperties(this,["secretAccessKey"]),this.expired=!1,this.expireTime=null,this.refreshCallbacks=[],1===arguments.length&&"object"==typeof arguments[0]){var E=arguments[0].credentials||arguments[0];this.accessKeyId=E.accessKeyId,this.secretAccessKey=E.secretAccessKey,this.sessionToken=E.sessionToken}else this.accessKeyId=arguments[0],this.secretAccessKey=arguments[1],this.sessionToken=arguments[2]},expiryWindow:15,needsRefresh:function(){var E=v.util.date.getDate().getTime(),m=new Date(E+1e3*this.expiryWindow);return!!(this.expireTime&&m>this.expireTime)||this.expired||!this.accessKeyId||!this.secretAccessKey},get:function(E){var m=this;this.needsRefresh()?this.refresh(function(f){f||(m.expired=!1),E&&E(f)}):E&&E()},refresh:function(E){this.expired=!1,E()},coalesceRefresh:function(E,m){var f=this;1===f.refreshCallbacks.push(E)&&f.load(function(h){v.util.arrayEach(f.refreshCallbacks,function(u){m?u(h):v.util.defer(function(){u(h)})}),f.refreshCallbacks.length=0})},load:function(E){E()}}),v.Credentials.addPromisesToClass=function(E){this.prototype.getPromise=v.util.promisifyMethod("get",E),this.prototype.refreshPromise=v.util.promisifyMethod("refresh",E)},v.Credentials.deletePromisesFromClass=function(){delete this.prototype.getPromise,delete this.prototype.refreshPromise},v.util.addPromises(v.Credentials)},{"./core":18}],20:[function(N,P,V){var v=N("../core"),w=N("../../clients/sts");v.ChainableTemporaryCredentials=v.util.inherit(v.Credentials,{constructor:function(m){v.Credentials.call(this),m=m||{},this.errorCode="ChainableTemporaryCredentialsProviderFailure",this.expired=!0,this.tokenCodeFn=null;var f=v.util.copy(m.params)||{};if(f.RoleArn&&(f.RoleSessionName=f.RoleSessionName||"temporary-credentials"),f.SerialNumber){if(!m.tokenCodeFn||"function"!=typeof m.tokenCodeFn)throw new v.util.error(new Error("tokenCodeFn must be a function when params.SerialNumber is given"),{code:this.errorCode});this.tokenCodeFn=m.tokenCodeFn}var c=v.util.merge({params:f,credentials:m.masterCredentials||v.config.credentials},m.stsConfig||{});this.service=new w(c)},refresh:function(m){this.coalesceRefresh(m||v.util.fn.callback)},load:function(m){var f=this,c=f.service.config.params.RoleArn?"assumeRole":"getSessionToken";this.getTokenCode(function(h,u){var l={};h?m(h):(u&&(l.TokenCode=u),f.service[c](l,function(g,d){g||f.service.credentialsFrom(d,f),m(g)}))})},getTokenCode:function(m){var f=this;this.tokenCodeFn?this.tokenCodeFn(this.service.config.params.SerialNumber,function(c,h){if(c){var u=c;return c instanceof Error&&(u=c.message),void m(v.util.error(new Error("Error fetching MFA token: "+u),{code:f.errorCode}))}m(null,h)}):m(null)}})},{"../../clients/sts":8,"../core":18}],21:[function(N,P,V){var v=N("../core"),w=N("../../clients/cognitoidentity"),E=N("../../clients/sts");v.CognitoIdentityCredentials=v.util.inherit(v.Credentials,{localStorageKey:{id:"aws.cognito.identity-id.",providers:"aws.cognito.identity-providers."},constructor:function(f,c){v.Credentials.call(this),this.expired=!0,this.params=f,this.data=null,this._identityId=null,this._clientConfig=v.util.copy(c||{}),this.loadCachedId();var h=this;Object.defineProperty(this,"identityId",{get:function(){return h.loadCachedId(),h._identityId||h.params.IdentityId},set:function(u){h._identityId=u}})},refresh:function(f){this.coalesceRefresh(f||v.util.fn.callback)},load:function(f){var c=this;c.createClients(),c.data=null,c._identityId=null,c.getId(function(h){h?(c.clearIdOnNotAuthorized(h),f(h)):c.params.RoleArn?c.getCredentialsFromSTS(f):c.getCredentialsForIdentity(f)})},clearCachedId:function(){this._identityId=null,delete this.params.IdentityId;var f=this.params.IdentityPoolId,c=this.params.LoginId||"";delete this.storage[this.localStorageKey.id+f+c],delete this.storage[this.localStorageKey.providers+f+c]},clearIdOnNotAuthorized:function(f){"NotAuthorizedException"==f.code&&this.clearCachedId()},getId:function(f){var c=this;if("string"==typeof c.params.IdentityId)return f(null,c.params.IdentityId);c.cognito.getId(function(h,u){!h&&u.IdentityId?(c.params.IdentityId=u.IdentityId,f(null,u.IdentityId)):f(h)})},loadCredentials:function(f,c){!f||!c||(c.expired=!1,c.accessKeyId=f.Credentials.AccessKeyId,c.secretAccessKey=f.Credentials.SecretKey,c.sessionToken=f.Credentials.SessionToken,c.expireTime=f.Credentials.Expiration)},getCredentialsForIdentity:function(f){var c=this;c.cognito.getCredentialsForIdentity(function(h,u){h?c.clearIdOnNotAuthorized(h):(c.cacheId(u),c.data=u,c.loadCredentials(c.data,c)),f(h)})},getCredentialsFromSTS:function(f){var c=this;c.cognito.getOpenIdToken(function(h,u){h?(c.clearIdOnNotAuthorized(h),f(h)):(c.cacheId(u),c.params.WebIdentityToken=u.Token,c.webIdentityCredentials.refresh(function(l){l||(c.data=c.webIdentityCredentials.data,c.sts.credentialsFrom(c.data,c)),f(l)}))})},loadCachedId:function(){var f=this;if(v.util.isBrowser()&&!f.params.IdentityId){var c=f.getStorage("id");if(c&&f.params.Logins){var h=Object.keys(f.params.Logins);0!==(f.getStorage("providers")||"").split(",").filter(function(g){return-1!==h.indexOf(g)}).length&&(f.params.IdentityId=c)}else c&&(f.params.IdentityId=c)}},createClients:function(){var m=this._clientConfig;if(this.webIdentityCredentials=this.webIdentityCredentials||new v.WebIdentityCredentials(this.params,m),!this.cognito){var f=v.util.merge({},m);f.params=this.params,this.cognito=new w(f)}this.sts=this.sts||new E(m)},cacheId:function(f){this._identityId=f.IdentityId,this.params.IdentityId=this._identityId,v.util.isBrowser()&&(this.setStorage("id",f.IdentityId),this.params.Logins&&this.setStorage("providers",Object.keys(this.params.Logins).join(",")))},getStorage:function(f){return this.storage[this.localStorageKey[f]+this.params.IdentityPoolId+(this.params.LoginId||"")]},setStorage:function(f,c){try{this.storage[this.localStorageKey[f]+this.params.IdentityPoolId+(this.params.LoginId||"")]=c}catch(h){}},storage:function(){try{var m=v.util.isBrowser()&&null!==window.localStorage&&"object"==typeof window.localStorage?window.localStorage:{};return m["aws.test-storage"]="foobar",delete m["aws.test-storage"],m}catch(f){return{}}}()})},{"../../clients/cognitoidentity":7,"../../clients/sts":8,"../core":18}],22:[function(N,P,V){var v=N("../core");v.CredentialProviderChain=v.util.inherit(v.Credentials,{constructor:function(E){this.providers=E||v.CredentialProviderChain.defaultProviders.slice(0),this.resolveCallbacks=[]},resolve:function(E){var m=this;if(0===m.providers.length)return E(new Error("No providers")),m;if(1===m.resolveCallbacks.push(E)){let u=function(l,g){if(!l&&g||f===c.length)return v.util.arrayEach(m.resolveCallbacks,function(y){y(l,g)}),void(m.resolveCallbacks.length=0);var d=c[f++];(g="function"==typeof d?d.call():d).get?g.get(function(y){u(y,y?null:g)}):u(null,g)};var f=0,c=m.providers.slice(0);u()}return m}}),v.CredentialProviderChain.defaultProviders=[],v.CredentialProviderChain.addPromisesToClass=function(E){this.prototype.resolvePromise=v.util.promisifyMethod("resolve",E)},v.CredentialProviderChain.deletePromisesFromClass=function(){delete this.prototype.resolvePromise},v.util.addPromises(v.CredentialProviderChain)},{"../core":18}],23:[function(N,P,V){var v=N("../core"),w=N("../../clients/sts");v.SAMLCredentials=v.util.inherit(v.Credentials,{constructor:function(m){v.Credentials.call(this),this.expired=!0,this.params=m},refresh:function(m){this.coalesceRefresh(m||v.util.fn.callback)},load:function(m){var f=this;f.createClients(),f.service.assumeRoleWithSAML(function(c,h){c||f.service.credentialsFrom(h,f),m(c)})},createClients:function(){this.service=this.service||new w({params:this.params})}})},{"../../clients/sts":8,"../core":18}],24:[function(N,P,V){var v=N("../core"),w=N("../../clients/sts");v.TemporaryCredentials=v.util.inherit(v.Credentials,{constructor:function(m,f){v.Credentials.call(this),this.loadMasterCredentials(f),this.expired=!0,this.params=m||{},this.params.RoleArn&&(this.params.RoleSessionName=this.params.RoleSessionName||"temporary-credentials")},refresh:function(m){this.coalesceRefresh(m||v.util.fn.callback)},load:function(m){var f=this;f.createClients(),f.masterCredentials.get(function(){f.service.config.credentials=f.masterCredentials,(f.params.RoleArn?f.service.assumeRole:f.service.getSessionToken).call(f.service,function(h,u){h||f.service.credentialsFrom(u,f),m(h)})})},loadMasterCredentials:function(m){for(this.masterCredentials=m||v.config.credentials;this.masterCredentials.masterCredentials;)this.masterCredentials=this.masterCredentials.masterCredentials;"function"!=typeof this.masterCredentials.get&&(this.masterCredentials=new v.Credentials(this.masterCredentials))},createClients:function(){this.service=this.service||new w({params:this.params})}})},{"../../clients/sts":8,"../core":18}],25:[function(N,P,V){var v=N("../core"),w=N("../../clients/sts");v.WebIdentityCredentials=v.util.inherit(v.Credentials,{constructor:function(m,f){v.Credentials.call(this),this.expired=!0,this.params=m,this.params.RoleSessionName=this.params.RoleSessionName||"web-identity",this.data=null,this._clientConfig=v.util.copy(f||{})},refresh:function(m){this.coalesceRefresh(m||v.util.fn.callback)},load:function(m){var f=this;f.createClients(),f.service.assumeRoleWithWebIdentity(function(c,h){f.data=null,c||(f.data=h,f.service.credentialsFrom(h,f)),m(c)})},createClients:function(){if(!this.service){var E=v.util.merge({},this._clientConfig);E.params=this.params,this.service=new w(E)}}})},{"../../clients/sts":8,"../core":18}],26:[function(N,P,V){(function(v){(function(){var w=N("./core"),E=N("./util"),m=["AWS_ENABLE_ENDPOINT_DISCOVERY","AWS_ENDPOINT_DISCOVERY_ENABLED"];function f(T){var R=T.service,q=R.api||{},U={};return R.config.region&&(U.region=R.config.region),q.serviceId&&(U.serviceId=q.serviceId),R.config.credentials.accessKeyId&&(U.accessKeyId=R.config.credentials.accessKeyId),U}function c(T,R,q){!q||null==R||"structure"===q.type&&q.required&&q.required.length>0&&E.arrayEach(q.required,function(K){var U=q.members[K];!0===U.endpointDiscoveryId?T[U.isLocationName?U.name:K]=String(R[K]):c(T,R[K],U)})}function h(T,R){var q={};return c(q,T.params,R),q}function u(T){var R=T.service,q=R.api,K=q.operations?q.operations[T.operation]:void 0,J=h(T,K?K.input:void 0),z=f(T);Object.keys(J).length>0&&(z=E.update(z,J),K&&(z.operation=K.name));var se=w.endpointCache.get(z);if(!se||1!==se.length||""!==se[0].Address)if(se&&se.length>0)T.httpRequest.updateEndpoint(se[0].Address);else{var G=R.makeRequest(q.endpointOperation,{Operation:K.name,Identifiers:J});d(G),G.removeListener("validate",w.EventListeners.Core.VALIDATE_PARAMETERS),G.removeListener("retry",w.EventListeners.Core.RETRY_CHECK),w.endpointCache.put(z,[{Address:"",CachePeriodInMinutes:1}]),G.send(function(pe,Q){Q&&Q.Endpoints?w.endpointCache.put(z,Q.Endpoints):pe&&w.endpointCache.put(z,[{Address:"",CachePeriodInMinutes:1}])})}}var l={};function g(T,R){var q=T.service,K=q.api,U=K.operations?K.operations[T.operation]:void 0,z=h(T,U?U.input:void 0),se=f(T);Object.keys(z).length>0&&(se=E.update(se,z),U&&(se.operation=U.name));var G=w.EndpointCache.getKeyString(se),pe=w.endpointCache.get(G);if(pe&&1===pe.length&&""===pe[0].Address)return l[G]||(l[G]=[]),void l[G].push({request:T,callback:R});if(pe&&pe.length>0)T.httpRequest.updateEndpoint(pe[0].Address),R();else{var Q=q.makeRequest(K.endpointOperation,{Operation:U.name,Identifiers:z});Q.removeListener("validate",w.EventListeners.Core.VALIDATE_PARAMETERS),d(Q),w.endpointCache.put(G,[{Address:"",CachePeriodInMinutes:60}]),Q.send(function(ge,Pe){if(ge){var Ne={code:"EndpointDiscoveryException",message:"Request cannot be fulfilled without specifying an endpoint",retryable:!1};T.response.error=E.error(ge,Ne),w.endpointCache.remove(se),l[G]&&(E.arrayEach(l[G],function(xe){xe.request.response.error=E.error(ge,Ne),xe.callback()}),delete l[G])}else Pe&&(w.endpointCache.put(G,Pe.Endpoints),T.httpRequest.updateEndpoint(Pe.Endpoints[0].Address),l[G])&&(E.arrayEach(l[G],function(te){te.request.httpRequest.updateEndpoint(Pe.Endpoints[0].Address),te.callback()}),delete l[G]);R()})}}function d(T){var q=T.service.api.apiVersion;q&&!T.httpRequest.headers["x-amz-api-version"]&&(T.httpRequest.headers["x-amz-api-version"]=q)}function y(T){var R=T.error;if(R&&("InvalidEndpointException"===R.code||421===T.httpResponse.statusCode)){var K=T.request,U=K.service.api.operations||{},z=h(K,U[K.operation]?U[K.operation].input:void 0),se=f(K);Object.keys(z).length>0&&(se=E.update(se,z),U[K.operation]&&(se.operation=U[K.operation].name)),w.endpointCache.remove(se)}}function S(T){return["false","0"].indexOf(T)>=0}P.exports={discoverEndpoint:function(T,R){var q=T.service||{};if(function(T){if(T._originalConfig&&T._originalConfig.endpoint&&!0===T._originalConfig.endpointDiscoveryEnabled)throw E.error(new Error,{code:"ConfigurationException",message:"Custom endpoint is supplied; endpointDiscoveryEnabled must not be true."});return Boolean(w.config.endpoint||(w.config[T.serviceIdentifier]||{}).endpoint||T._originalConfig&&T._originalConfig.endpoint)}(q)||T.isPresigned()||!function(T){if(!0===(T.service||{}).config.endpointDiscoveryEnabled)return!0;if(E.isBrowser())return!1;for(var q=0;q<m.length;q++){var K=m[q];if(Object.prototype.hasOwnProperty.call(v.env,K)){if(""===v.env[K]||void 0===v.env[K])throw E.error(new Error,{code:"ConfigurationException",message:"environmental variable "+K+" cannot be set to nothing"});if(!S(v.env[K]))return!0}}var U={};try{U=w.util.iniLoader?w.util.iniLoader.loadFrom({isConfig:!0,filename:v.env[w.util.sharedConfigFileEnv]}):{}}catch(z){}var J=U[v.env.AWS_PROFILE||w.util.defaultProfile]||{};if(Object.prototype.hasOwnProperty.call(J,"endpoint_discovery_enabled")){if(void 0===J.endpoint_discovery_enabled)throw E.error(new Error,{code:"ConfigurationException",message:"config file entry 'endpoint_discovery_enabled' cannot be set to nothing"});if(!S(J.endpoint_discovery_enabled))return!0}return!1}(T))return R();T.httpRequest.appendToUserAgent("endpoint-discovery");var U=(q.api.operations||{})[T.operation];switch(U?U.endpointDiscoveryRequired:"NULL"){case"OPTIONAL":u(T),T.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",y),R();break;case"REQUIRED":T.addNamedListener("INVALIDATE_CACHED_ENDPOINTS","extractError",y),g(T,R);break;case"NULL":default:R()}},requiredDiscoverEndpoint:g,optionalDiscoverEndpoint:u,marshallCustomIdentifiers:h,getCacheKey:f,invalidateCachedEndpoint:y}}).call(this)}).call(this,N("_process"))},{"./core":18,"./util":71,_process:86}],27:[function(N,P,V){var v=N("../event-stream/event-message-chunker").eventMessageChunker,w=N("./parse-event").parseEvent;P.exports={createEventStream:function(m,f,c){for(var h=v(m),u=[],l=0;l<h.length;l++)u.push(w(f,h[l],c));return u}}},{"../event-stream/event-message-chunker":28,"./parse-event":30}],28:[function(N,P,V){P.exports={eventMessageChunker:function(w){for(var E=[],m=0;m<w.length;){var f=w.readInt32BE(m),c=w.slice(m,f+m);m+=f,E.push(c)}return E}}},{}],29:[function(N,P,V){var v=N("../core").util,w=v.buffer.toBuffer;function E(f){if(8!==f.length)throw new Error("Int64 buffers must be exactly 8 bytes");v.Buffer.isBuffer(f)||(f=w(f)),this.bytes=f}function m(f){for(var c=0;c<8;c++)f[c]^=255;for(c=7;c>-1&&(f[c]++,0===f[c]);c--);}E.fromNumber=function(f){if(f>0x8000000000000000||f<-0x8000000000000000)throw new Error(f+" is too large (or, if negative, too small) to represent as an Int64");for(var c=new Uint8Array(8),h=7,u=Math.abs(Math.round(f));h>-1&&u>0;h--,u/=256)c[h]=u;return f<0&&m(c),new E(c)},E.prototype.valueOf=function(){var f=this.bytes.slice(0),c=128&f[0];return c&&m(f),parseInt(f.toString("hex"),16)*(c?-1:1)},E.prototype.toString=function(){return String(this.valueOf())},P.exports={Int64:E}},{"../core":18}],30:[function(N,P,V){var v=N("./parse-message").parseMessage;P.exports={parseEvent:function(m,f,c){var h=v(f),u=h.headers[":message-type"];if(u){if("error"===u.value)throw function(m){var f=m.headers[":error-code"],c=m.headers[":error-message"],h=new Error(c.value||c);return h.code=h.name=f.value||f,h}(h);if("event"!==u.value)return}var l=h.headers[":event-type"],g=c.members[l.value];if(g){var d={},y=g.eventPayloadMemberName;if(y){var _=g.members[y];d[y]="binary"===_.type?h.body:m.parse(h.body.toString(),_)}for(var S=g.eventHeaderMemberNames,D=0;D<S.length;D++){var b=S[D];h.headers[b]&&(d[b]=g.members[b].toType(h.headers[b].value))}var T={};return T[l.value]=d,T}}}},{"./parse-message":31}],31:[function(N,P,V){var v=N("./int64").Int64,w=N("./split-message").splitMessage,E="boolean";function y(S){for(var D={},b=0;b<S.length;){var T=S.readUInt8(b++),R=S.slice(b,b+T).toString();switch(b+=T,S.readUInt8(b++)){case 0:D[R]={type:E,value:!0};break;case 1:D[R]={type:E,value:!1};break;case 2:D[R]={type:"byte",value:S.readInt8(b++)};break;case 3:D[R]={type:"short",value:S.readInt16BE(b)},b+=2;break;case 4:D[R]={type:"integer",value:S.readInt32BE(b)},b+=4;break;case 5:D[R]={type:"long",value:new v(S.slice(b,b+8))},b+=8;break;case 6:var q=S.readUInt16BE(b);D[R]={type:"binary",value:S.slice(b+=2,b+q)},b+=q;break;case 7:var K=S.readUInt16BE(b);D[R]={type:"string",value:S.slice(b+=2,b+K).toString()},b+=K;break;case 8:D[R]={type:"timestamp",value:new Date(new v(S.slice(b,b+8)).valueOf())},b+=8;break;case 9:var U=S.slice(b,b+16).toString("hex");b+=16,D[R]={type:"uuid",value:U.substr(0,8)+"-"+U.substr(8,4)+"-"+U.substr(12,4)+"-"+U.substr(16,4)+"-"+U.substr(20)};break;default:throw new Error("Unrecognized header type tag")}}return D}P.exports={parseMessage:function(S){var D=w(S);return{headers:y(D.headers),body:D.body}}}},{"./int64":29,"./split-message":32}],32:[function(N,P,V){var v=N("../core").util,w=v.buffer.toBuffer;P.exports={splitMessage:function(u){if(v.Buffer.isBuffer(u)||(u=w(u)),u.length<16)throw new Error("Provided message too short to accommodate event stream message overhead");if(u.length!==u.readUInt32BE(0))throw new Error("Reported message length does not match received message length");var l=u.readUInt32BE(8);if(l!==v.crypto.crc32(u.slice(0,8)))throw new Error("The prelude checksum specified in the message ("+l+") does not match the calculated CRC32 checksum.");var g=u.readUInt32BE(u.length-4);if(g!==v.crypto.crc32(u.slice(0,u.length-4)))throw new Error("The message checksum did not match the expected value of "+g);var y=12+u.readUInt32BE(4);return{headers:u.slice(12,y),body:u.slice(y,u.length-4)}}}},{"../core":18}],33:[function(N,P,V){var v=N("./core"),w=N("./sequential_executor"),E=N("./discover_endpoint").discoverEndpoint;v.EventListeners={Core:{}},v.EventListeners={Core:(new w).addNamedListeners(function(f,c){c("VALIDATE_CREDENTIALS","validate",function(l,g){if(!l.service.api.signatureVersion&&!l.service.config.signatureVersion)return g();l.service.config.getCredentials(function(d){d&&(l.response.error=v.util.error(d,{code:"CredentialsError",message:"Missing credentials in config"})),g()})}),f("VALIDATE_REGION","validate",function(l){!l.service.config.region&&!l.service.isGlobalEndpoint&&(l.response.error=v.util.error(new Error,{code:"ConfigError",message:"Missing region in config"}))}),f("BUILD_IDEMPOTENCY_TOKENS","validate",function(l){if(l.service.api.operations){var g=l.service.api.operations[l.operation];if(g){var d=g.idempotentMembers;if(d.length){for(var y=v.util.copy(l.params),_=0,S=d.length;_<S;_++)y[d[_]]||(y[d[_]]=v.util.uuid.v4());l.params=y}}}}),f("VALIDATE_PARAMETERS","validate",function(l){if(l.service.api.operations){var g=l.service.api.operations[l.operation].input;new v.ParamValidator(l.service.config.paramValidation).validate(g,l.params)}}),c("COMPUTE_SHA256","afterBuild",function(l,g){if(l.haltHandlersOnError(),l.service.api.operations){var d=l.service.api.operations[l.operation],y=d?d.authtype:"";if(!l.service.api.signatureVersion&&!y&&!l.service.config.signatureVersion)return g();if(l.service.getSignerClass(l)===v.Signers.V4){var _=l.httpRequest.body||"";if(y.indexOf("unsigned-body")>=0)return l.httpRequest.headers["X-Amz-Content-Sha256"]="UNSIGNED-PAYLOAD",g();v.util.computeSha256(_,function(S,D){S?g(S):(l.httpRequest.headers["X-Amz-Content-Sha256"]=D,g())})}else g()}}),f("SET_CONTENT_LENGTH","afterBuild",function(l){var g=function(f){if(!f.service.api.operations)return"";var c=f.service.api.operations[f.operation];return c?c.authtype:""}(l),d=v.util.getRequestPayloadShape(l);if(void 0===l.httpRequest.headers["Content-Length"])try{var y=v.util.string.byteLength(l.httpRequest.body);l.httpRequest.headers["Content-Length"]=y}catch(_){if(d&&d.isStreaming){if(d.requiresLength)throw _;if(g.indexOf("unsigned-body")>=0)return void(l.httpRequest.headers["Transfer-Encoding"]="chunked");throw _}throw _}}),f("SET_HTTP_HOST","afterBuild",function(l){l.httpRequest.headers.Host=l.httpRequest.endpoint.host}),f("RESTART","restart",function(){var l=this.response.error;!l||!l.retryable||(this.httpRequest=new v.HttpRequest(this.service.endpoint,this.service.region),this.response.retryCount<this.service.config.maxRetries?this.response.retryCount++:this.response.error=null)}),c("DISCOVER_ENDPOINT","sign",E,!0),c("SIGN","sign",function(l,g){var d=l.service,_=(l.service.api.operations||{})[l.operation];if(!(d.api.signatureVersion||_&&_.authtype||d.config.signatureVersion))return g();d.config.getCredentials(function(D,b){if(D)return l.response.error=D,g();try{var T=d.getSkewCorrectedDate(),q=new(d.getSignerClass(l))(l.httpRequest,d.api.signingName||d.api.endpointPrefix,{signatureCache:d.config.signatureCache,operation:_,signatureVersion:d.api.signatureVersion});q.setServiceClientId(d._clientId),delete l.httpRequest.headers.Authorization,delete l.httpRequest.headers.Date,delete l.httpRequest.headers["X-Amz-Date"],q.addAuthorization(b,T),l.signedAt=T}catch(K){l.response.error=K}g()})}),f("VALIDATE_RESPONSE","validateResponse",function(l){this.service.successfulResponse(l,this)?(l.data={},l.error=null):(l.data=null,l.error=v.util.error(new Error,{code:"UnknownError",message:"An unknown error occurred."}))}),c("SEND","send",function(l,g){function d(b){l.httpResponse.stream=b;var T=l.request.httpRequest.stream,R=l.request.service,U=R.api.operations[l.request.operation]||{};b.on("headers",function(z,se,G){if(l.request.emit("httpHeaders",[z,se,l,G]),!l.httpResponse.streaming)if(2===v.HttpClient.streamsApiVersion){if(U.hasEventOutput&&R.successfulResponse(l))return l.request.emit("httpDone"),void g();b.on("readable",function(){var Q=b.read();null!==Q&&l.request.emit("httpData",[Q,l])})}else b.on("data",function(Q){l.request.emit("httpData",[Q,l])})}),b.on("end",function(){if(!T||!T.didCallback){if(2===v.HttpClient.streamsApiVersion&&U.hasEventOutput&&R.successfulResponse(l))return;l.request.emit("httpDone"),g()}})}function _(b){"RequestAbortedError"!==b.code&&(b=v.util.error(b,{code:"TimeoutError"===b.code?b.code:"NetworkingError",region:l.request.httpRequest.region,hostname:l.request.httpRequest.endpoint.hostname,retryable:!0})),l.error=b,l.request.emit("httpError",[l.error,l],function(){g()})}function S(){var b=v.HttpClient.getInstance(),T=l.request.service.config.httpOptions||{};try{!function(b){b.on("sendProgress",function(R){l.request.emit("httpUploadProgress",[R,l])}),b.on("receiveProgress",function(R){l.request.emit("httpDownloadProgress",[R,l])})}(b.handleRequest(l.request.httpRequest,T,d,_))}catch(q){_(q)}}l.httpResponse._abortCallback=g,l.error=null,l.data=null,(l.request.service.getSkewCorrectedDate()-this.signedAt)/1e3>=600?this.emit("sign",[this],function(b){b?g(b):S()}):S()}),f("HTTP_HEADERS","httpHeaders",function(l,g,d,y){d.httpResponse.statusCode=l,d.httpResponse.statusMessage=y,d.httpResponse.headers=g,d.httpResponse.body=v.util.buffer.toBuffer(""),d.httpResponse.buffers=[],d.httpResponse.numBytes=0;var _=g.date||g.Date,S=d.request.service;if(_){var D=Date.parse(_);S.config.correctClockSkew&&S.isClockSkewed(D)&&S.applyClockOffset(D)}}),f("HTTP_DATA","httpData",function(l,g){l&&(v.util.isNode()&&(g.httpResponse.numBytes+=l.length,g.request.emit("httpDownloadProgress",[{loaded:g.httpResponse.numBytes,total:g.httpResponse.headers["content-length"]},g])),g.httpResponse.buffers.push(v.util.buffer.toBuffer(l)))}),f("HTTP_DONE","httpDone",function(l){if(l.httpResponse.buffers&&l.httpResponse.buffers.length>0){var g=v.util.buffer.concat(l.httpResponse.buffers);l.httpResponse.body=g}delete l.httpResponse.numBytes,delete l.httpResponse.buffers}),f("FINALIZE_ERROR","retry",function(l){l.httpResponse.statusCode&&(l.error.statusCode=l.httpResponse.statusCode,void 0===l.error.retryable&&(l.error.retryable=this.service.retryableError(l.error,this)))}),f("INVALIDATE_CREDENTIALS","retry",function(l){if(l.error)switch(l.error.code){case"RequestExpired":case"ExpiredTokenException":case"ExpiredToken":l.error.retryable=!0,l.request.service.config.credentials.expired=!0}}),f("EXPIRED_SIGNATURE","retry",function(l){var g=l.error;!g||"string"==typeof g.code&&"string"==typeof g.message&&g.code.match(/Signature/)&&g.message.match(/expired/)&&(l.error.retryable=!0)}),f("CLOCK_SKEWED","retry",function(l){!l.error||this.service.clockSkewError(l.error)&&this.service.config.correctClockSkew&&(l.error.retryable=!0)}),f("REDIRECT","retry",function(l){l.error&&l.error.statusCode>=300&&l.error.statusCode<400&&l.httpResponse.headers.location&&(this.httpRequest.endpoint=new v.Endpoint(l.httpResponse.headers.location),this.httpRequest.headers.Host=this.httpRequest.endpoint.host,l.error.redirect=!0,l.error.retryable=!0)}),f("RETRY_CHECK","retry",function(l){l.error&&(l.error.redirect&&l.redirectCount<l.maxRedirects?l.error.retryDelay=0:l.retryCount<l.maxRetries&&(l.error.retryDelay=this.service.retryDelays(l.retryCount)||0))}),c("RESET_RETRY_STATE","afterRetry",function(l,g){var d,y=!1;l.error&&(d=l.error.retryDelay||0,l.error.retryable&&l.retryCount<l.maxRetries?(l.retryCount++,y=!0):l.error.redirect&&l.redirectCount<l.maxRedirects&&(l.redirectCount++,y=!0)),y?(l.error=null,setTimeout(g,d)):g()})}),CorePost:(new w).addNamedListeners(function(f){f("EXTRACT_REQUEST_ID","extractData",v.util.extractRequestId),f("EXTRACT_REQUEST_ID","extractError",v.util.extractRequestId),f("ENOTFOUND_ERROR","httpError",function(h){"NetworkingError"===h.code&&"ENOTFOUND"===h.errno&&(this.response.error=v.util.error(new Error("Inaccessible host: `"+h.hostname+"'. This service may not be available in the `"+h.region+"' region."),{code:"UnknownEndpoint",region:h.region,hostname:h.hostname,retryable:!0,originalError:h}))})}),Logger:(new w).addNamedListeners(function(f){f("LOG_REQUEST","complete",function(h){var u=h.request,l=u.service.config.logger;if(l){var y=function(){var S=(h.request.service.getSkewCorrectedDate().getTime()-u.startTime.getTime())/1e3,D=!!l.isTTY,b=h.httpResponse.statusCode,T=u.params;u.service.api.operations&&u.service.api.operations[u.operation]&&u.service.api.operations[u.operation].input&&(T=g(u.service.api.operations[u.operation].input,u.params));var q=N("util").inspect(T,!0,null),K="";return D&&(K+="\x1b[33m"),K+="[AWS "+u.service.serviceIdentifier+" "+b,K+=" "+S.toString()+"s "+h.retryCount+" retries]",D&&(K+="\x1b[0;1m"),K+=" "+v.util.string.lowerFirst(u.operation),K+="("+q+")",D&&(K+="\x1b[0m"),K}();"function"==typeof l.log?l.log(y):"function"==typeof l.write&&l.write(y+"\n")}function g(_,S){if(!S)return S;switch(_.type){case"structure":var D={};return v.util.each(S,function(R,q){D[R]=Object.prototype.hasOwnProperty.call(_.members,R)?g(_.members[R],q):q}),D;case"list":var b=[];return v.util.arrayEach(S,function(R,q){b.push(g(_.member,R))}),b;case"map":var T={};return v.util.each(S,function(R,q){T[R]=g(_.value,q)}),T;default:return _.isSensitive?"***SensitiveInformation***":S}}})}),Json:(new w).addNamedListeners(function(f){var c=N("./protocol/json");f("BUILD","build",c.buildRequest),f("EXTRACT_DATA","extractData",c.extractData),f("EXTRACT_ERROR","extractError",c.extractError)}),Rest:(new w).addNamedListeners(function(f){var c=N("./protocol/rest");f("BUILD","build",c.buildRequest),f("EXTRACT_DATA","extractData",c.extractData),f("EXTRACT_ERROR","extractError",c.extractError)}),RestJson:(new w).addNamedListeners(function(f){var c=N("./protocol/rest_json");f("BUILD","build",c.buildRequest),f("EXTRACT_DATA","extractData",c.extractData),f("EXTRACT_ERROR","extractError",c.extractError)}),RestXml:(new w).addNamedListeners(function(f){var c=N("./protocol/rest_xml");f("BUILD","build",c.buildRequest),f("EXTRACT_DATA","extractData",c.extractData),f("EXTRACT_ERROR","extractError",c.extractError)}),Query:(new w).addNamedListeners(function(f){var c=N("./protocol/query");f("BUILD","build",c.buildRequest),f("EXTRACT_DATA","extractData",c.extractData),f("EXTRACT_ERROR","extractError",c.extractError)})}},{"./core":18,"./discover_endpoint":26,"./protocol/json":46,"./protocol/query":47,"./protocol/rest":48,"./protocol/rest_json":49,"./protocol/rest_xml":50,"./sequential_executor":58,util:97}],34:[function(N,P,V){var v=N("./core"),w=v.util.inherit;v.Endpoint=w({constructor:function(m,f){if(v.util.hideProperties(this,["slashes","auth","hash","search","query"]),null==m)throw new Error("Invalid endpoint: "+m);if("string"!=typeof m)return v.util.copy(m);m.match(/^http/)||(m=((f&&void 0!==f.sslEnabled?f.sslEnabled:v.config.sslEnabled)?"https":"http")+"://"+m),v.util.update(this,v.util.urlParse(m)),this.port=this.port?parseInt(this.port,10):"https:"===this.protocol?443:80}}),v.HttpRequest=w({constructor:function(m,f){m=new v.Endpoint(m),this.method="POST",this.path=m.path||"/",this.headers={},this.body="",this.endpoint=m,this.region=f,this._userAgent="",this.setUserAgent()},setUserAgent:function(){this._userAgent=this.headers[this.getUserAgentHeaderName()]=v.util.userAgent()},getUserAgentHeaderName:function(){return(v.util.isBrowser()?"X-Amz-":"")+"User-Agent"},appendToUserAgent:function(m){"string"==typeof m&&m&&(this._userAgent+=" "+m),this.headers[this.getUserAgentHeaderName()]=this._userAgent},getUserAgent:function(){return this._userAgent},pathname:function(){return this.path.split("?",1)[0]},search:function(){var m=this.path.split("?",2)[1];return m?(m=v.util.queryStringParse(m),v.util.queryParamsToString(m)):""},updateEndpoint:function(m){var f=new v.Endpoint(m);this.endpoint=f,this.path=f.path||"/"}}),v.HttpResponse=w({constructor:function(){this.statusCode=void 0,this.headers={},this.body=void 0,this.streaming=!1,this.stream=null},createUnbufferedStream:function(){return this.streaming=!0,this.stream}}),v.HttpClient=w({}),v.HttpClient.getInstance=function(){return void 0===this.singleton&&(this.singleton=new this),this.singleton}},{"./core":18}],35:[function(N,P,V){var v=N("../core"),w=N("events").EventEmitter;N("../http"),v.XHRClient=v.util.inherit({handleRequest:function(m,f,c,h){var u=this,l=m.endpoint,g=new w,d=l.protocol+"//"+l.hostname;80!==l.port&&443!==l.port&&(d+=":"+l.port),d+=m.path;var y=new XMLHttpRequest,_=!1;m.stream=y,y.addEventListener("readystatechange",function(){try{if(0===y.status)return}catch(S){return}this.readyState>=this.HEADERS_RECEIVED&&!_&&(g.statusCode=y.status,g.headers=u.parseHeaders(y.getAllResponseHeaders()),g.emit("headers",g.statusCode,g.headers,y.statusText),_=!0),this.readyState===this.DONE&&u.finishRequest(y,g)},!1),y.upload.addEventListener("progress",function(S){g.emit("sendProgress",S)}),y.addEventListener("progress",function(S){g.emit("receiveProgress",S)},!1),y.addEventListener("timeout",function(){h(v.util.error(new Error("Timeout"),{code:"TimeoutError"}))},!1),y.addEventListener("error",function(){h(v.util.error(new Error("Network Failure"),{code:"NetworkingError"}))},!1),y.addEventListener("abort",function(){h(v.util.error(new Error("Request aborted"),{code:"RequestAbortedError"}))},!1),c(g),y.open(m.method,d,!1!==f.xhrAsync),v.util.each(m.headers,function(S,D){"Content-Length"!==S&&"User-Agent"!==S&&"Host"!==S&&y.setRequestHeader(S,D)}),f.timeout&&!1!==f.xhrAsync&&(y.timeout=f.timeout),f.xhrWithCredentials&&(y.withCredentials=!0);try{y.responseType="arraybuffer"}catch(S){}try{m.body?y.send(m.body):y.send()}catch(S){if(!m.body||"object"!=typeof m.body.buffer)throw S;y.send(m.body.buffer)}return g},parseHeaders:function(m){var f={};return v.util.arrayEach(m.split(/\r?\n/),function(c){var h=c.split(":",1)[0],u=c.substring(h.length+2);h.length>0&&(f[h.toLowerCase()]=u)}),f},finishRequest:function(m,f){var c;if("arraybuffer"===m.responseType&&m.response){var h=m.response;c=new v.util.Buffer(h.byteLength);for(var u=new Uint8Array(h),l=0;l<c.length;++l)c[l]=u[l]}try{!c&&"string"==typeof m.responseText&&(c=new v.util.Buffer(m.responseText))}catch(g){}c&&f.emit("data",c),f.emit("end")}}),v.HttpClient.prototype=v.XHRClient.prototype,v.HttpClient.streamsApiVersion=1},{"../core":18,"../http":34,events:82}],36:[function(N,P,V){var v=N("../util");function w(){}function E(u,l){if(l&&null!=u)switch(l.type){case"structure":return function(u,l){var g={};return v.each(u,function(d,y){var _=l.members[d];if(_){if("body"!==_.location)return;var S=_.isLocationName?_.name:d,D=E(y,_);void 0!==D&&(g[S]=D)}}),g}(u,l);case"map":return function(u,l){var g={};return v.each(u,function(d,y){var _=E(y,l.value);void 0!==_&&(g[d]=_)}),g}(u,l);case"list":return function(u,l){var g=[];return v.arrayEach(u,function(d){var y=E(d,l.member);void 0!==y&&g.push(y)}),g}(u,l);default:return function(u,l){return l.toWireFormat(u)}(u,l)}}w.prototype.build=function(u,l){return JSON.stringify(E(u,l))},P.exports=w},{"../util":71}],37:[function(N,P,V){var v=N("../util");function w(){}function E(u,l){if(l&&void 0!==u)switch(l.type){case"structure":return function(u,l){if(null!=u){var g={};return v.each(l.members,function(y,_){var S=_.isLocationName?_.name:y;if(Object.prototype.hasOwnProperty.call(u,S)){var b=E(u[S],_);void 0!==b&&(g[y]=b)}}),g}}(u,l);case"map":return function(u,l){if(null!=u){var g={};return v.each(u,function(d,y){var _=E(y,l.value);g[d]=void 0===_?null:_}),g}}(u,l);case"list":return function(u,l){if(null!=u){var g=[];return v.arrayEach(u,function(d){var y=E(d,l.member);g.push(void 0===y?null:y)}),g}}(u,l);default:return function(u,l){return l.toType(u)}(u,l)}}w.prototype.parse=function(u,l){return E(JSON.parse(u),l)},P.exports=w},{"../util":71}],38:[function(N,P,V){var v=N("./collection"),w=N("./operation"),E=N("./shape"),m=N("./paginator"),f=N("./resource_waiter"),c=N("../util"),h=c.property,u=c.memoizedProperty;P.exports=function(g,d){var y=this;g=g||{},(d=d||{}).api=this,g.metadata=g.metadata||{},h(this,"isApi",!0,!1),h(this,"apiVersion",g.metadata.apiVersion),h(this,"endpointPrefix",g.metadata.endpointPrefix),h(this,"signingName",g.metadata.signingName),h(this,"globalEndpoint",g.metadata.globalEndpoint),h(this,"signatureVersion",g.metadata.signatureVersion),h(this,"jsonVersion",g.metadata.jsonVersion),h(this,"targetPrefix",g.metadata.targetPrefix),h(this,"protocol",g.metadata.protocol),h(this,"timestampFormat",g.metadata.timestampFormat),h(this,"xmlNamespaceUri",g.metadata.xmlNamespace),h(this,"abbreviation",g.metadata.serviceAbbreviation),h(this,"fullName",g.metadata.serviceFullName),h(this,"serviceId",g.metadata.serviceId),u(this,"className",function(){var S=g.metadata.serviceAbbreviation||g.metadata.serviceFullName;return S?("ElasticLoadBalancing"===(S=S.replace(/^Amazon|AWS\s*|\(.*|\s+|\W+/g,""))&&(S="ELB"),S):null}),h(this,"operations",new v(g.operations,d,function(S,D){return new w(S,D,d)},c.string.lowerFirst,function(S,D){!0===D.endpointoperation&&h(y,"endpointOperation",c.string.lowerFirst(S))})),h(this,"shapes",new v(g.shapes,d,function(S,D){return E.create(D,d)})),h(this,"paginators",new v(g.paginators,d,function(S,D){return new m(S,D,d)})),h(this,"waiters",new v(g.waiters,d,function(S,D){return new f(S,D,d)},c.string.lowerFirst)),d.documentation&&(h(this,"documentation",g.documentation),h(this,"documentationUrl",g.documentationUrl))}},{"../util":71,"./collection":39,"./operation":40,"./paginator":41,"./resource_waiter":42,"./shape":43}],39:[function(N,P,V){var v=N("../util").memoizedProperty;function w(m,f,c,h){v(this,h(m),function(){return c(m,f)})}P.exports=function(m,f,c,h,u){for(var g in h=h||String,m)Object.prototype.hasOwnProperty.call(m,g)&&(w.call(this,g,m[g],c,h),u&&u(g,m[g]))}},{"../util":71}],40:[function(N,P,V){var v=N("./shape"),w=N("../util"),E=w.property,m=w.memoizedProperty;P.exports=function(h,u,l){var g=this;l=l||{},E(this,"name",u.name||h),E(this,"api",l.api,!1),u.http=u.http||{},E(this,"endpoint",u.endpoint),E(this,"httpMethod",u.http.method||"POST"),E(this,"httpPath",u.http.requestUri||"/"),E(this,"authtype",u.authtype||""),E(this,"endpointDiscoveryRequired",u.endpointdiscovery?u.endpointdiscovery.required?"REQUIRED":"OPTIONAL":"NULL"),m(this,"input",function(){return u.input?v.create(u.input,l):new v.create({type:"structure"},l)}),m(this,"output",function(){return u.output?v.create(u.output,l):new v.create({type:"structure"},l)}),m(this,"errors",function(){var d=[];if(!u.errors)return null;for(var y=0;y<u.errors.length;y++)d.push(v.create(u.errors[y],l));return d}),m(this,"paginator",function(){return l.api.paginators[h]}),l.documentation&&(E(this,"documentation",u.documentation),E(this,"documentationUrl",u.documentationUrl)),m(this,"idempotentMembers",function(){var d=[],y=g.input,_=y.members;if(!y.members)return d;for(var S in _)!_.hasOwnProperty(S)||!0===_[S].isIdempotent&&d.push(S);return d}),m(this,"hasEventOutput",function(){return function(h){var u=h.members,l=h.payload;if(!h.members)return!1;if(l)return u[l].isEventStream;for(var d in u)if(!u.hasOwnProperty(d)&&!0===u[d].isEventStream)return!0;return!1}(g.output)})}},{"../util":71,"./shape":43}],41:[function(N,P,V){var v=N("../util").property;P.exports=function(E,m){v(this,"inputToken",m.input_token),v(this,"limitKey",m.limit_key),v(this,"moreResults",m.more_results),v(this,"outputToken",m.output_token),v(this,"resultKey",m.result_key)}},{"../util":71}],42:[function(N,P,V){var v=N("../util"),w=v.property;P.exports=function(m,f,c){c=c||{},w(this,"name",m),w(this,"api",c.api,!1),f.operation&&w(this,"operation",v.string.lowerFirst(f.operation));var h=this;["type","description","delay","maxAttempts","acceptors"].forEach(function(l){var g=f[l];g&&w(h,l,g)})}},{"../util":71}],43:[function(N,P,V){var v=N("./collection"),w=N("../util");function E(T,R,q){null!=q&&w.property.apply(this,arguments)}function m(T,R){T.constructor.prototype[R]||w.memoizedProperty.apply(this,arguments)}function f(T,R,q){R=R||{},E(this,"shape",T.shape),E(this,"api",R.api,!1),E(this,"type",T.type),E(this,"enum",T.enum),E(this,"min",T.min),E(this,"max",T.max),E(this,"pattern",T.pattern),E(this,"location",T.location||this.location||"body"),E(this,"name",this.name||T.xmlName||T.queryName||T.locationName||q),E(this,"isStreaming",T.streaming||this.isStreaming||!1),E(this,"requiresLength",T.requiresLength,!1),E(this,"isComposite",T.isComposite||!1),E(this,"isShape",!0,!1),E(this,"isQueryName",Boolean(T.queryName),!1),E(this,"isLocationName",Boolean(T.locationName),!1),E(this,"isIdempotent",!0===T.idempotencyToken),E(this,"isJsonValue",!0===T.jsonvalue),E(this,"isSensitive",!0===T.sensitive||T.prototype&&!0===T.prototype.sensitive),E(this,"isEventStream",Boolean(T.eventstream),!1),E(this,"isEvent",Boolean(T.event),!1),E(this,"isEventPayload",Boolean(T.eventpayload),!1),E(this,"isEventHeader",Boolean(T.eventheader),!1),E(this,"isTimestampFormatSet",Boolean(T.timestampFormat)||T.prototype&&!0===T.prototype.isTimestampFormatSet,!1),E(this,"endpointDiscoveryId",Boolean(T.endpointdiscoveryid),!1),E(this,"hostLabel",Boolean(T.hostLabel),!1),R.documentation&&(E(this,"documentation",T.documentation),E(this,"documentationUrl",T.documentationUrl)),T.xmlAttribute&&E(this,"isXmlAttribute",T.xmlAttribute||!1),E(this,"defaultValue",null),this.toWireFormat=function(K){return null==K?"":K},this.toType=function(K){return K}}function c(T){f.apply(this,arguments),E(this,"isComposite",!0),T.flattened&&E(this,"flattened",T.flattened||!1)}function h(T,R){var q=this,K=null,U=!this.isShape;c.apply(this,arguments),U&&(E(this,"defaultValue",function(){return{}}),E(this,"members",{}),E(this,"memberNames",[]),E(this,"required",[]),E(this,"isRequired",function(){return!1})),T.members&&(E(this,"members",new v(T.members,R,function(J,z){return f.create(z,R,J)})),m(this,"memberNames",function(){return T.xmlOrder||Object.keys(T.members)}),T.event&&(m(this,"eventPayloadMemberName",function(){for(var J=q.members,z=q.memberNames,se=0,G=z.length;se<G;se++)if(J[z[se]].isEventPayload)return z[se]}),m(this,"eventHeaderMemberNames",function(){for(var J=q.members,z=q.memberNames,se=[],G=0,pe=z.length;G<pe;G++)J[z[G]].isEventHeader&&se.push(z[G]);return se}))),T.required&&(E(this,"required",T.required),E(this,"isRequired",function(J){if(!K){K={};for(var z=0;z<T.required.length;z++)K[T.required[z]]=!0}return K[J]},!1,!0)),E(this,"resultWrapper",T.resultWrapper||null),T.payload&&E(this,"payload",T.payload),"string"==typeof T.xmlNamespace?E(this,"xmlNamespaceUri",T.xmlNamespace):"object"==typeof T.xmlNamespace&&(E(this,"xmlNamespacePrefix",T.xmlNamespace.prefix),E(this,"xmlNamespaceUri",T.xmlNamespace.uri))}function u(T,R){var q=this,K=!this.isShape;if(c.apply(this,arguments),K&&E(this,"defaultValue",function(){return[]}),T.member&&m(this,"member",function(){return f.create(T.member,R)}),this.flattened){var U=this.name;m(this,"name",function(){return q.member.name||U})}}function l(T,R){var q=!this.isShape;c.apply(this,arguments),q&&(E(this,"defaultValue",function(){return{}}),E(this,"key",f.create({type:"string"},R)),E(this,"value",f.create({type:"string"},R))),T.key&&m(this,"key",function(){return f.create(T.key,R)}),T.value&&m(this,"value",function(){return f.create(T.value,R)})}function d(){f.apply(this,arguments);var T=["rest-xml","query","ec2"];this.toType=function(R){return R=this.api&&T.indexOf(this.api.protocol)>-1?R||"":R,this.isJsonValue?JSON.parse(R):R&&"function"==typeof R.toString?R.toString():R},this.toWireFormat=function(R){return this.isJsonValue?JSON.stringify(R):R}}function S(){f.apply(this,arguments),this.toType=function(T){var R=w.base64.decode(T);if(this.isSensitive&&w.isNode()&&"function"==typeof w.Buffer.alloc){var q=w.Buffer.alloc(R.length,R);R.fill(0),R=q}return R},this.toWireFormat=w.base64.encode}function D(){S.apply(this,arguments)}function b(){f.apply(this,arguments),this.toType=function(T){return"boolean"==typeof T?T:null==T?null:"true"===T}}f.normalizedTypes={character:"string",double:"float",long:"integer",short:"integer",biginteger:"integer",bigdecimal:"float",blob:"binary"},f.types={structure:h,list:u,map:l,boolean:b,timestamp:function(T){var R=this;if(f.apply(this,arguments),T.timestampFormat)E(this,"timestampFormat",T.timestampFormat);else if(R.isTimestampFormatSet&&this.timestampFormat)E(this,"timestampFormat",this.timestampFormat);else if("header"===this.location)E(this,"timestampFormat","rfc822");else if("querystring"===this.location)E(this,"timestampFormat","iso8601");else if(this.api)switch(this.api.protocol){case"json":case"rest-json":E(this,"timestampFormat","unixTimestamp");break;case"rest-xml":case"query":case"ec2":E(this,"timestampFormat","iso8601")}this.toType=function(q){return null==q?null:"function"==typeof q.toUTCString?q:"string"==typeof q||"number"==typeof q?w.date.parseTimestamp(q):null},this.toWireFormat=function(q){return w.date.format(q,R.timestampFormat)}},float:function(){f.apply(this,arguments),this.toType=function(T){return null==T?null:parseFloat(T)},this.toWireFormat=this.toType},integer:function(){f.apply(this,arguments),this.toType=function(T){return null==T?null:parseInt(T,10)},this.toWireFormat=this.toType},string:d,base64:D,binary:S},f.resolve=function(R,q){if(R.shape){var K=q.api.shapes[R.shape];if(!K)throw new Error("Cannot find shape reference: "+R.shape);return K}return null},f.create=function(R,q,K){if(R.isShape)return R;var U=f.resolve(R,q);if(U){var J=Object.keys(R);q.documentation||(J=J.filter(function(G){return!G.match(/documentation/)}));var z=function(){U.constructor.call(this,R,q,K)};return z.prototype=U,new z}R.type||(R.type=R.members?"structure":R.member?"list":R.key?"map":"string");var se=R.type;if(f.normalizedTypes[R.type]&&(R.type=f.normalizedTypes[R.type]),f.types[R.type])return new f.types[R.type](R,q,K);throw new Error("Unrecognized shape type: "+se)},f.shapes={StructureShape:h,ListShape:u,MapShape:l,StringShape:d,BooleanShape:b,Base64Shape:D},P.exports=f},{"../util":71,"./collection":39}],44:[function(N,P,V){var v=N("./core");v.ParamValidator=v.util.inherit({constructor:function(E){(!0===E||void 0===E)&&(E={min:!0}),this.validation=E},validate:function(E,m,f){if(this.errors=[],this.validateMember(E,m||{},f||"params"),this.errors.length>1){var c=this.errors.join("\n* ");throw c="There were "+this.errors.length+" validation errors:\n* "+c,v.util.error(new Error(c),{code:"MultipleValidationErrors",errors:this.errors})}if(1===this.errors.length)throw this.errors[0];return!0},fail:function(E,m){this.errors.push(v.util.error(new Error(m),{code:E}))},validateStructure:function(E,m,f){this.validateType(m,f,["object"],"structure");for(var c,h=0;E.required&&h<E.required.length;h++)null==m[c=E.required[h]]&&this.fail("MissingRequiredParameter","Missing required key '"+c+"' in "+f);for(c in m)if(Object.prototype.hasOwnProperty.call(m,c)){var l=m[c],g=E.members[c];if(void 0!==g){var d=[f,c].join(".");this.validateMember(g,l,d)}else this.fail("UnexpectedParameter","Unexpected key '"+c+"' found in "+f)}return!0},validateMember:function(E,m,f){switch(E.type){case"structure":return this.validateStructure(E,m,f);case"list":return this.validateList(E,m,f);case"map":return this.validateMap(E,m,f);default:return this.validateScalar(E,m,f)}},validateList:function(E,m,f){if(this.validateType(m,f,[Array])){this.validateRange(E,m.length,f,"list member count");for(var c=0;c<m.length;c++)this.validateMember(E.member,m[c],f+"["+c+"]")}},validateMap:function(E,m,f){if(this.validateType(m,f,["object"],"map")){var c=0;for(var h in m)!Object.prototype.hasOwnProperty.call(m,h)||(this.validateMember(E.key,h,f+"[key='"+h+"']"),this.validateMember(E.value,m[h],f+"['"+h+"']"),c++);this.validateRange(E,c,f,"map member count")}},validateScalar:function(E,m,f){switch(E.type){case null:case void 0:case"string":return this.validateString(E,m,f);case"base64":case"binary":return this.validatePayload(m,f);case"integer":case"float":return this.validateNumber(E,m,f);case"boolean":return this.validateType(m,f,["boolean"]);case"timestamp":return this.validateType(m,f,[Date,/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d+)?Z$/,"number"],"Date object, ISO-8601 string, or a UNIX timestamp");default:return this.fail("UnkownType","Unhandled type "+E.type+" for "+f)}},validateString:function(E,m,f){var c=["string"];E.isJsonValue&&(c=c.concat(["number","object","boolean"])),null!==m&&this.validateType(m,f,c)&&(this.validateEnum(E,m,f),this.validateRange(E,m.length,f,"string length"),this.validatePattern(E,m,f),this.validateUri(E,m,f))},validateUri:function(E,m,f){"uri"===E.location&&0===m.length&&this.fail("UriParameterError",'Expected uri parameter to have length >= 1, but found "'+m+'" for '+f)},validatePattern:function(E,m,f){this.validation.pattern&&void 0!==E.pattern&&(new RegExp(E.pattern).test(m)||this.fail("PatternMatchError",'Provided value "'+m+'" does not match regex pattern /'+E.pattern+"/ for "+f))},validateRange:function(E,m,f,c){this.validation.min&&void 0!==E.min&&m<E.min&&this.fail("MinRangeError","Expected "+c+" >= "+E.min+", but found "+m+" for "+f),this.validation.max&&void 0!==E.max&&m>E.max&&this.fail("MaxRangeError","Expected "+c+" <= "+E.max+", but found "+m+" for "+f)},validateEnum:function(E,m,f){this.validation.enum&&void 0!==E.enum&&-1===E.enum.indexOf(m)&&this.fail("EnumError","Found string value of "+m+", but expected "+E.enum.join("|")+" for "+f)},validateType:function(E,m,f,c){if(null==E)return!1;for(var h=!1,u=0;u<f.length;u++){if("string"==typeof f[u]){if(typeof E===f[u])return!0}else if(f[u]instanceof RegExp){if((E||"").toString().match(f[u]))return!0}else{if(E instanceof f[u]||v.util.isType(E,f[u]))return!0;!c&&!h&&(f=f.slice()),f[u]=v.util.typeName(f[u])}h=!0}var l=c;l||(l=f.join(", ").replace(/,([^,]+)$/,", or$1"));var g=l.match(/^[aeiou]/i)?"n":"";return this.fail("InvalidParameterType","Expected "+m+" to be a"+g+" "+l),!1},validateNumber:function(E,m,f){if(null!=m){if("string"==typeof m){var c=parseFloat(m);c.toString()===m&&(m=c)}this.validateType(m,f,["number"])&&this.validateRange(E,m,f,"numeric value")}},validatePayload:function(E,m){if(null!=E&&"string"!=typeof E&&(!E||"number"!=typeof E.byteLength)){if(v.util.isNode()){var f=v.util.stream.Stream;if(v.util.Buffer.isBuffer(E)||E instanceof f)return}else if(void 0!==typeof Blob&&E instanceof Blob)return;var c=["Buffer","Stream","File","Blob","ArrayBuffer","DataView"];if(E)for(var h=0;h<c.length;h++)if(v.util.isType(E,c[h])||v.util.typeName(E.constructor)===c[h])return;this.fail("InvalidParameterType","Expected "+m+" to be a string, Buffer, Stream, Blob, or typed array object")}}})},{"./core":18}],45:[function(N,P,V){var v=N("../util"),w=N("../core");P.exports={populateHostPrefix:function(u){if(!u.service.config.hostPrefixEnabled)return u;var g=u.service.api.operations[u.operation];if(function(u){var l=u.service.api,g=l.operations[u.operation],d=l.endpointOperation&&l.endpointOperation===v.string.lowerFirst(g.name);return"NULL"!==g.endpointDiscoveryRequired||!0===d}(u))return u;if(g.endpoint&&g.endpoint.hostPrefix){var y=function(u,l,g){return v.each(g.members,function(d,y){if(!0===y.hostLabel){if("string"!=typeof l[d]||""===l[d])throw v.error(new Error,{message:"Parameter "+d+" should be a non-empty string.",code:"InvalidParameter"});var _=new RegExp("\\{"+d+"\\}","g");u=u.replace(_,l[d])}}),u}(g.endpoint.hostPrefix,u.params,g.input);(function(u,l){u.host&&(u.host=l+u.host),u.hostname&&(u.hostname=l+u.hostname)})(u.httpRequest.endpoint,y),function(u){var l=u.split("."),g=/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/;v.arrayEach(l,function(d){if(!d.length||d.length<1||d.length>63)throw v.error(new Error,{code:"ValidationError",message:"Hostname label length should be between 1 to 63 characters, inclusive."});if(!g.test(d))throw w.util.error(new Error,{code:"ValidationError",message:d+" is not hostname compatible."})})}(u.httpRequest.endpoint.hostname)}return u}}},{"../core":18,"../util":71}],46:[function(N,P,V){var v=N("../util"),w=N("../json/builder"),E=N("../json/parser"),m=N("./helpers").populateHostPrefix;P.exports={buildRequest:function(u){var l=u.httpRequest,g=u.service.api,d=g.targetPrefix+"."+g.operations[u.operation].name,y=g.jsonVersion||"1.0",_=g.operations[u.operation].input,S=new w;1===y&&(y="1.0"),l.body=S.build(u.params||{},_),l.headers["Content-Type"]="application/x-amz-json-"+y,l.headers["X-Amz-Target"]=d,m(u)},extractError:function(u){var l={},g=u.httpResponse;if(l.code=g.headers["x-amzn-errortype"]||"UnknownError","string"==typeof l.code&&(l.code=l.code.split(":")[0]),g.body.length>0)try{var d=JSON.parse(g.body.toString());(d.__type||d.code)&&(l.code=(d.__type||d.code).split("#").pop()),l.message="RequestEntityTooLarge"===l.code?"Request body must be less than 1 MB":d.message||d.Message||null}catch(y){l.statusCode=g.statusCode,l.message=g.statusMessage}else l.statusCode=g.statusCode,l.message=g.statusCode.toString();u.error=v.error(new Error,l)},extractData:function(u){var l=u.httpResponse.body.toString()||"{}";if(!1===u.request.service.config.convertResponseTypes)u.data=JSON.parse(l);else{var d=u.request.service.api.operations[u.request.operation].output||{},y=new E;u.data=y.parse(l,d)}}}},{"../json/builder":36,"../json/parser":37,"../util":71,"./helpers":45}],47:[function(N,P,V){var v=N("../core"),w=N("../util"),E=N("../query/query_param_serializer"),m=N("../model/shape"),f=N("./helpers").populateHostPrefix;P.exports={buildRequest:function(l){var g=l.service.api.operations[l.operation],d=l.httpRequest;d.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",d.params={Version:l.service.api.apiVersion,Action:g.name},(new E).serialize(l.params,g.input,function(_,S){d.params[_]=S}),d.body=w.queryParamsToString(d.params),f(l)},extractError:function(l){var g,d=l.httpResponse.body.toString();if(d.match("<UnknownOperationException"))g={Code:"UnknownOperation",Message:"Unknown operation "+l.request.operation};else try{g=(new v.XML.Parser).parse(d)}catch(y){g={Code:l.httpResponse.statusCode,Message:l.httpResponse.statusMessage}}g.requestId&&!l.requestId&&(l.requestId=g.requestId),g.Errors&&(g=g.Errors),g.Error&&(g=g.Error),l.error=w.error(new Error,g.Code?{code:g.Code,message:g.Message}:{code:l.httpResponse.statusCode,message:null})},extractData:function(l){var g=l.request,y=g.service.api.operations[g.operation].output||{},_=y;if(_.resultWrapper){var S=m.create({type:"structure"});S.members[_.resultWrapper]=y,S.memberNames=[_.resultWrapper],w.property(y,"name",y.resultWrapper),y=S}var D=new v.XML.Parser;if(y&&y.members&&!y.members._XAMZRequestId){var b=m.create({type:"string"},{api:{protocol:"query"}},"requestId");y.members._XAMZRequestId=b}var T=D.parse(l.httpResponse.body.toString(),y);l.requestId=T._XAMZRequestId||T.requestId,T._XAMZRequestId&&delete T._XAMZRequestId,_.resultWrapper&&T[_.resultWrapper]&&(w.update(T,T[_.resultWrapper]),delete T[_.resultWrapper]),l.data=T}}},{"../core":18,"../model/shape":43,"../query/query_param_serializer":51,"../util":71,"./helpers":45}],48:[function(N,P,V){var v=N("../util"),w=N("./helpers").populateHostPrefix;function m(g,d,y,_){var S=[g,d].join("/");S=S.replace(/\/+/g,"/");var D={},b=!1;if(v.each(y.members,function(R,q){var K=_[R];if(null!=K)if("uri"===q.location){var U=new RegExp("\\{"+q.name+"(\\+)?\\}");S=S.replace(U,function(J,z){return(z?v.uriEscapePath:v.uriEscape)(String(K))})}else"querystring"===q.location&&(b=!0,"list"===q.type?D[q.name]=K.map(function(J){return v.uriEscape(q.member.toWireFormat(J).toString())}):"map"===q.type?v.each(K,function(J,z){D[J]=Array.isArray(z)?z.map(function(se){return v.uriEscape(String(se))}):v.uriEscape(String(z))}):D[q.name]=v.uriEscape(q.toWireFormat(K).toString()))}),b){S+=S.indexOf("?")>=0?"&":"?";var T=[];v.arrayEach(Object.keys(D).sort(),function(R){Array.isArray(D[R])||(D[R]=[D[R]]);for(var q=0;q<D[R].length;q++)T.push(v.uriEscape(String(R))+"="+D[R][q])}),S+=T.join("&")}return S}P.exports={buildRequest:function(g){(function(g){g.httpRequest.method=g.service.api.operations[g.operation].httpMethod})(g),function(g){var d=g.service.api.operations[g.operation],_=m(g.httpRequest.endpoint.path,d.httpPath,d.input,g.params);g.httpRequest.path=_}(g),function(g){v.each(g.service.api.operations[g.operation].input.members,function(y,_){var S=g.params[y];null!=S&&("headers"===_.location&&"map"===_.type?v.each(S,function(D,b){g.httpRequest.headers[_.name+D]=b}):"header"===_.location&&(S=_.toWireFormat(S).toString(),_.isJsonValue&&(S=v.base64.encode(S)),g.httpRequest.headers[_.name]=S))})}(g),w(g)},extractError:function(){},extractData:function(g){var d=g.request,y={},_=g.httpResponse,D=d.service.api.operations[d.operation].output,b={};v.each(_.headers,function(T,R){b[T.toLowerCase()]=R}),v.each(D.members,function(T,R){var q=(R.name||T).toLowerCase();if("headers"===R.location&&"map"===R.type){y[T]={};var U=new RegExp("^"+(R.isLocationName?R.name:"")+"(.+)","i");v.each(_.headers,function(z,se){var G=z.match(U);null!==G&&(y[T][G[1]]=se)})}else if("header"===R.location){if(void 0!==b[q]){var J=R.isJsonValue?v.base64.decode(b[q]):b[q];y[T]=R.toType(J)}}else"statusCode"===R.location&&(y[T]=parseInt(_.statusCode,10))}),g.data=y},generateURI:m}},{"../util":71,"./helpers":45}],49:[function(N,P,V){var v=N("../util"),w=N("./rest"),E=N("./json"),m=N("../json/builder"),f=N("../json/parser");function h(d,y){d.httpRequest.headers["Content-Type"]||(d.httpRequest.headers["Content-Type"]=y?"binary/octet-stream":"application/json")}P.exports={buildRequest:function(d){w.buildRequest(d),["HEAD","DELETE"].indexOf(d.httpRequest.method)<0&&function(d){var y=new m,_=d.service.api.operations[d.operation].input;if(_.payload){var S,D=_.members[_.payload];if(void 0===(S=d.params[_.payload]))return;"structure"===D.type?(d.httpRequest.body=y.build(S,D),h(d)):(d.httpRequest.body=S,("binary"===D.type||D.isStreaming)&&h(d,!0))}else{var b=y.build(d.params,_);("{}"!==b||"GET"!==d.httpRequest.method)&&(d.httpRequest.body=b),h(d)}}(d)},extractError:function(d){E.extractError(d)},extractData:function(d){w.extractData(d);var y=d.request,S=y.service.api.operations[y.operation].output||{};if(S.payload){var T=S.members[S.payload],R=d.httpResponse.body;if(T.isEventStream)D=new f,d.data[payload]=v.createEventStream(2===AWS.HttpClient.streamsApiVersion?d.httpResponse.stream:R,D,T);else if("structure"===T.type||"list"===T.type){var D=new f;d.data[S.payload]=D.parse(R,T)}else d.data[S.payload]="binary"===T.type||T.isStreaming?R:T.toType(R)}else{var q=d.data;E.extractData(d),d.data=v.merge(q,d.data)}}}},{"../json/builder":36,"../json/parser":37,"../util":71,"./json":46,"./rest":48}],50:[function(N,P,V){var v=N("../core"),w=N("../util"),E=N("./rest");P.exports={buildRequest:function(u){E.buildRequest(u),["GET","HEAD"].indexOf(u.httpRequest.method)<0&&function(u){var l=u.service.api.operations[u.operation].input,g=new v.XML.Builder,d=u.params,y=l.payload;if(y){var _=l.members[y];if(void 0===(d=d[y]))return;u.httpRequest.body="structure"===_.type?g.toXML(d,_,_.name,!0):d}else u.httpRequest.body=g.toXML(d,l,l.name||l.shape||w.string.upperFirst(u.operation)+"Request")}(u)},extractError:function(u){var l;E.extractError(u);try{l=(new v.XML.Parser).parse(u.httpResponse.body.toString())}catch(g){l={Code:u.httpResponse.statusCode,Message:u.httpResponse.statusMessage}}l.Errors&&(l=l.Errors),l.Error&&(l=l.Error),u.error=w.error(new Error,l.Code?{code:l.Code,message:l.Message}:{code:u.httpResponse.statusCode,message:null})},extractData:function(u){E.extractData(u);var l,g=u.request,d=u.httpResponse.body,_=g.service.api.operations[g.operation].output,D=_.payload;if(D){var b=_.members[D];b.isEventStream?(l=new v.XML.Parser,u.data[D]=w.createEventStream(2===v.HttpClient.streamsApiVersion?u.httpResponse.stream:u.httpResponse.body,l,b)):"structure"===b.type?(l=new v.XML.Parser,u.data[D]=l.parse(d.toString(),b)):u.data[D]="binary"===b.type||b.isStreaming?d:b.toType(d)}else if(d.length>0){var T=(l=new v.XML.Parser).parse(d.toString(),_);w.update(u.data,T)}}}},{"../core":18,"../util":71,"./rest":48}],51:[function(N,P,V){var v=N("../util");function w(){}function E(u){return u.isQueryName||"ec2"!==u.api.protocol?u.name:u.name[0].toUpperCase()+u.name.substr(1)}function m(u,l,g,d){v.each(g.members,function(y,_){var S=l[y];if(null!=S){var D=E(_);h(D=u?u+"."+D:D,S,_,d)}})}function h(u,l,g,d){null!=l&&("structure"===g.type?m(u,l,g,d):"list"===g.type?function(u,l,g,d){var y=g.member||{};0!==l.length?v.arrayEach(l,function(_,S){var D="."+(S+1);if("ec2"===g.api.protocol)D+="";else if(g.flattened){if(y.name){var b=u.split(".");b.pop(),b.push(E(y)),u=b.join(".")}}else D="."+(y.name?y.name:"member")+D;h(u+D,_,y,d)}):d.call(this,u,null)}(u,l,g,d):"map"===g.type?function(u,l,g,d){var y=1;v.each(l,function(_,S){var b=(g.flattened?".":".entry.")+y+++".",R=b+(g.value.name||"value");h(u+(b+(g.key.name||"key")),_,g.key,d),h(u+R,S,g.value,d)})}(u,l,g,d):d(u,g.toWireFormat(l).toString()))}w.prototype.serialize=function(u,l,g){m("",u,l,g)},P.exports=w},{"../util":71}],52:[function(N,P,V){P.exports={now:function(){return"undefined"!=typeof performance&&"function"==typeof performance.now?performance.now():Date.now()}}},{}],53:[function(N,P,V){var v=N("./util"),w=N("./region_config_data.json");function f(h,u){v.each(u,function(l,g){"globalEndpoint"!==l&&null==h.config[l]&&(h.config[l]=g)})}P.exports=function(h){for(var u=function(h){var u=h.config.region,l=function(h){if(!h)return null;var u=h.split("-");return u.length<3?null:u.slice(0,u.length-2).join("-")+"-*"}(u),g=h.api.endpointPrefix;return[[u,g],[l,g],[u,"*"],[l,"*"],["*",g],["*","*"]].map(function(d){return d[0]&&d[1]?d.join("/"):null})}(h),l=0;l<u.length;l++){var g=u[l];if(g&&Object.prototype.hasOwnProperty.call(w.rules,g)){var d=w.rules[g];return"string"==typeof d&&(d=w.patterns[d]),h.config.useDualstack&&v.isDualstackAvailable(h)&&((d=v.copy(d)).endpoint="{service}.dualstack.{region}.amazonaws.com"),h.isGlobalEndpoint=!!d.globalEndpoint,d.signatureVersion||(d.signatureVersion="v4"),void f(h,d)}}}},{"./region_config_data.json":54,"./util":71}],54:[function(N,P,V){P.exports={rules:{"*/*":{endpoint:"{service}.{region}.amazonaws.com"},"cn-*/*":{endpoint:"{service}.{region}.amazonaws.com.cn"},"*/budgets":"globalSSL","*/cloudfront":"globalSSL","*/iam":"globalSSL","*/sts":"globalSSL","*/importexport":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2",globalEndpoint:!0},"*/route53":{endpoint:"https://{service}.amazonaws.com",signatureVersion:"v3https",globalEndpoint:!0},"*/waf":"globalSSL","us-gov-*/iam":"globalGovCloud","us-gov-*/sts":{endpoint:"{service}.{region}.amazonaws.com"},"us-gov-west-1/s3":"s3signature","us-west-1/s3":"s3signature","us-west-2/s3":"s3signature","eu-west-1/s3":"s3signature","ap-southeast-1/s3":"s3signature","ap-southeast-2/s3":"s3signature","ap-northeast-1/s3":"s3signature","sa-east-1/s3":"s3signature","us-east-1/s3":{endpoint:"{service}.amazonaws.com",signatureVersion:"s3"},"us-east-1/sdb":{endpoint:"{service}.amazonaws.com",signatureVersion:"v2"},"*/sdb":{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"v2"}},patterns:{globalSSL:{endpoint:"https://{service}.amazonaws.com",globalEndpoint:!0},globalGovCloud:{endpoint:"{service}.us-gov.amazonaws.com"},s3signature:{endpoint:"{service}.{region}.amazonaws.com",signatureVersion:"s3"}}}},{}],55:[function(N,P,V){(function(v){(function(){var w=N("./core"),E=N("./state_machine"),m=w.util.inherit,f=w.util.domain,c=N("jmespath"),h={success:1,error:1,complete:1},l=new E;l.setupStates=function(){var g=function(d,y){var _=this;_._haltHandlersOnError=!1,_.emit(_._asm.currentState,function(S){if(S)if(function(g){return Object.prototype.hasOwnProperty.call(h,g._asm.currentState)}(_)){if(!(f&&_.domain instanceof f.Domain))throw S;S.domainEmitter=_,S.domain=_.domain,S.domainThrown=!1,_.domain.emit("error",S)}else _.response.error=S,y(S);else y(_.response.error)})};this.addState("validate","build","error",g),this.addState("build","afterBuild","restart",g),this.addState("afterBuild","sign","restart",g),this.addState("sign","send","retry",g),this.addState("retry","afterRetry","afterRetry",g),this.addState("afterRetry","sign","error",g),this.addState("send","validateResponse","retry",g),this.addState("validateResponse","extractData","extractError",g),this.addState("extractError","extractData","retry",g),this.addState("extractData","success","retry",g),this.addState("restart","build","error",g),this.addState("success","complete","complete",g),this.addState("error","complete","complete",g),this.addState("complete",null,null,g)},l.setupStates(),w.Request=m({constructor:function(d,y,_){var S=d.endpoint,D=d.config.region,b=d.config.customUserAgent;d.isGlobalEndpoint&&(D="us-east-1"),this.domain=f&&f.active,this.service=d,this.operation=y,this.params=_||{},this.httpRequest=new w.HttpRequest(S,D),this.httpRequest.appendToUserAgent(b),this.startTime=d.getSkewCorrectedDate(),this.response=new w.Response(this),this._asm=new E(l.states,"validate"),this._haltHandlersOnError=!1,w.SequentialExecutor.call(this),this.emit=this.emitEvent},send:function(d){return d&&(this.httpRequest.appendToUserAgent("callback"),this.on("complete",function(y){d.call(y,y.error,y.data)})),this.runTo(),this.response},build:function(d){return this.runTo("send",d)},runTo:function(d,y){return this._asm.runTo(d,y,this),this},abort:function(){return this.removeAllListeners("validateResponse"),this.removeAllListeners("extractError"),this.on("validateResponse",function(y){y.error=w.util.error(new Error("Request aborted by user"),{code:"RequestAbortedError",retryable:!1})}),this.httpRequest.stream&&!this.httpRequest.stream.didCallback&&(this.httpRequest.stream.abort(),this.httpRequest._abortCallback?this.httpRequest._abortCallback():this.removeAllListeners("send")),this},eachPage:function(d){d=w.util.fn.makeAsync(d,3),this.on("complete",function y(_){d.call(_,_.error,_.data,function(S){!1!==S&&(_.hasNextPage()?_.nextPage().on("complete",y).send():d.call(_,null,null,w.util.fn.noop))})}).send()},eachItem:function(d){var y=this;this.eachPage(function(S,D){if(S)return d(S,null);if(null===D)return d(null,null);var T=y.service.paginationConfig(y.operation).resultKey;Array.isArray(T)&&(T=T[0]);var R=c.search(D,T),q=!0;return w.util.arrayEach(R,function(K){if(!1===(q=d(null,K)))return w.util.abort}),q})},isPageable:function(){return!!this.service.paginationConfig(this.operation)},createReadStream:function(){var d=w.util.stream,y=this,_=null;return 2===w.HttpClient.streamsApiVersion?(_=new d.PassThrough,v.nextTick(function(){y.send()})):((_=new d.Stream).readable=!0,_.sent=!1,_.on("newListener",function(S){!_.sent&&"data"===S&&(_.sent=!0,v.nextTick(function(){y.send()}))})),this.on("error",function(S){_.emit("error",S)}),this.on("httpHeaders",function(D,b,T){if(D<300){y.removeListener("httpData",w.EventListeners.Core.HTTP_DATA),y.removeListener("httpError",w.EventListeners.Core.HTTP_ERROR),y.on("httpError",function(G){T.error=G,T.error.retryable=!1});var q,R=!1;if("HEAD"!==y.httpRequest.method&&(q=parseInt(b["content-length"],10)),void 0!==q&&!isNaN(q)&&q>=0){R=!0;var K=0}var U=function(){R&&K!==q?_.emit("error",w.util.error(new Error("Stream content length mismatch. Received "+K+" of "+q+" bytes."),{code:"StreamContentLengthMismatch"})):2===w.HttpClient.streamsApiVersion?_.end():_.emit("end")},J=T.httpResponse.createUnbufferedStream();if(2===w.HttpClient.streamsApiVersion)if(R){var z=new d.PassThrough;z._write=function(se){return se&&se.length&&(K+=se.length),d.PassThrough.prototype._write.apply(this,arguments)},z.on("end",U),_.on("error",function(se){R=!1,J.unpipe(z),z.emit("end"),z.end()}),J.pipe(z).pipe(_,{end:!1})}else J.pipe(_);else R&&J.on("data",function(se){se&&se.length&&(K+=se.length)}),J.on("data",function(se){_.emit("data",se)}),J.on("end",U);J.on("error",function(se){R=!1,_.emit("error",se)})}}),_},emitEvent:function(d,y,_){"function"==typeof y&&(_=y,y=null),_||(_=function(){}),y||(y=this.eventParameters(d,this.response)),w.SequentialExecutor.prototype.emit.call(this,d,y,function(D){D&&(this.response.error=D),_.call(this,D)})},eventParameters:function(d){switch(d){case"restart":case"validate":case"sign":case"build":case"afterValidate":case"afterBuild":return[this];case"error":return[this.response.error,this.response];default:return[this.response]}},presign:function(d,y){return!y&&"function"==typeof d&&(y=d,d=null),(new w.Signers.Presign).sign(this.toGet(),d,y)},isPresigned:function(){return Object.prototype.hasOwnProperty.call(this.httpRequest.headers,"presigned-expires")},toUnauthenticated:function(){return this._unAuthenticated=!0,this.removeListener("validate",w.EventListeners.Core.VALIDATE_CREDENTIALS),this.removeListener("sign",w.EventListeners.Core.SIGN),this},toGet:function(){return("query"===this.service.api.protocol||"ec2"===this.service.api.protocol)&&(this.removeListener("build",this.buildAsGet),this.addListener("build",this.buildAsGet)),this},buildAsGet:function(d){d.httpRequest.method="GET",d.httpRequest.path=d.service.endpoint.path+"?"+d.httpRequest.body,d.httpRequest.body="",delete d.httpRequest.headers["Content-Length"],delete d.httpRequest.headers["Content-Type"]},haltHandlersOnError:function(){this._haltHandlersOnError=!0}}),w.Request.addPromisesToClass=function(d){this.prototype.promise=function(){var _=this;return this.httpRequest.appendToUserAgent("promise"),new d(function(S,D){_.on("complete",function(b){b.error?D(b.error):S(Object.defineProperty(b.data||{},"$response",{value:b}))}),_.runTo()})}},w.Request.deletePromisesFromClass=function(){delete this.prototype.promise},w.util.addPromises(w.Request),w.util.mixin(w.Request,w.SequentialExecutor)}).call(this)}).call(this,N("_process"))},{"./core":18,"./state_machine":70,_process:86,jmespath:85}],56:[function(N,P,V){var v=N("./core"),w=v.util.inherit,E=N("jmespath");function m(f){var c=f.request._waiter,u=!1,l="retry";c.config.acceptors.forEach(function(g){if(!u){var d=c.matchers[g.matcher];d&&d(f,g.expected,g.argument)&&(u=!0,l=g.state)}}),!u&&f.error&&(l="failure"),"success"===l?c.setSuccess(f):c.setError(f,"retry"===l)}v.ResourceWaiter=w({constructor:function(c,h){this.service=c,this.state=h,this.loadWaiterConfig(this.state)},service:null,state:null,config:null,matchers:{path:function(f,c,h){try{var u=E.search(f.data,h)}catch(l){return!1}return E.strictDeepEqual(u,c)},pathAll:function(f,c,h){try{var u=E.search(f.data,h)}catch(d){return!1}Array.isArray(u)||(u=[u]);var l=u.length;if(!l)return!1;for(var g=0;g<l;g++)if(!E.strictDeepEqual(u[g],c))return!1;return!0},pathAny:function(f,c,h){try{var u=E.search(f.data,h)}catch(d){return!1}Array.isArray(u)||(u=[u]);for(var l=u.length,g=0;g<l;g++)if(E.strictDeepEqual(u[g],c))return!0;return!1},status:function(f,c){var h=f.httpResponse.statusCode;return"number"==typeof h&&h===c},error:function(f,c){return"string"==typeof c&&f.error?c===f.error.code:c===!!f.error}},listeners:(new v.SequentialExecutor).addNamedListeners(function(f){f("RETRY_CHECK","retry",function(c){c.error&&"ResourceNotReady"===c.error.code&&(c.error.retryDelay=1e3*(c.request._waiter.config.delay||0))}),f("CHECK_OUTPUT","extractData",m),f("CHECK_ERROR","extractError",m)}),wait:function(c,h){"function"==typeof c&&(h=c,c=void 0),c&&c.$waiter&&("number"==typeof(c=v.util.copy(c)).$waiter.delay&&(this.config.delay=c.$waiter.delay),"number"==typeof c.$waiter.maxAttempts&&(this.config.maxAttempts=c.$waiter.maxAttempts),delete c.$waiter);var u=this.service.makeRequest(this.config.operation,c);return u._waiter=this,u.response.maxRetries=this.config.maxAttempts,u.addListeners(this.listeners),h&&u.send(h),u},setSuccess:function(c){c.error=null,c.data=c.data||{},c.request.removeAllListeners("extractData")},setError:function(c,h){c.data=null,c.error=v.util.error(c.error||new Error,{code:"ResourceNotReady",message:"Resource is not in the state "+this.state,retryable:h})},loadWaiterConfig:function(c){if(!this.service.api.waiters[c])throw new v.util.error(new Error,{code:"StateNotFoundError",message:"State "+c+" not found."});this.config=v.util.copy(this.service.api.waiters[c])}})},{"./core":18,jmespath:85}],57:[function(N,P,V){var v=N("./core"),w=v.util.inherit,E=N("jmespath");v.Response=w({constructor:function(f){this.request=f,this.data=null,this.error=null,this.retryCount=0,this.redirectCount=0,this.httpResponse=new v.HttpResponse,f&&(this.maxRetries=f.service.numRetries(),this.maxRedirects=f.service.config.maxRedirects)},nextPage:function(f){var c,h=this.request.service,u=this.request.operation;try{c=h.paginationConfig(u,!0)}catch(y){this.error=y}if(!this.hasNextPage()){if(f)f(this.error,null);else if(this.error)throw this.error;return null}var l=v.util.copy(this.request.params);if(this.nextPageTokens){var g=c.inputToken;"string"==typeof g&&(g=[g]);for(var d=0;d<g.length;d++)l[g[d]]=this.nextPageTokens[d];return h.makeRequest(this.request.operation,l,f)}return f?f(null,null):null},hasNextPage:function(){return this.cacheNextPageTokens(),!!this.nextPageTokens||void 0===this.nextPageTokens&&void 0},cacheNextPageTokens:function(){if(Object.prototype.hasOwnProperty.call(this,"nextPageTokens"))return this.nextPageTokens;this.nextPageTokens=void 0;var f=this.request.service.paginationConfig(this.request.operation);if(!f)return this.nextPageTokens;if(this.nextPageTokens=null,f.moreResults&&!E.search(this.data,f.moreResults))return this.nextPageTokens;var c=f.outputToken;return"string"==typeof c&&(c=[c]),v.util.arrayEach.call(this,c,function(h){var u=E.search(this.data,h);u&&(this.nextPageTokens=this.nextPageTokens||[],this.nextPageTokens.push(u))}),this.nextPageTokens}})},{"./core":18,jmespath:85}],58:[function(N,P,V){var v=N("./core");v.SequentialExecutor=v.util.inherit({constructor:function(){this._events={}},listeners:function(E){return this._events[E]?this._events[E].slice(0):[]},on:function(E,m,f){return this._events[E]?f?this._events[E].unshift(m):this._events[E].push(m):this._events[E]=[m],this},onAsync:function(E,m,f){return m._isAsync=!0,this.on(E,m,f)},removeListener:function(E,m){var f=this._events[E];if(f){for(var c=f.length,h=-1,u=0;u<c;++u)f[u]===m&&(h=u);h>-1&&f.splice(h,1)}return this},removeAllListeners:function(E){return E?delete this._events[E]:this._events={},this},emit:function(E,m,f){f||(f=function(){});var c=this.listeners(E),h=c.length;return this.callListeners(c,m,f),h>0},callListeners:function(E,m,f,c){var h=this,u=c||null;function l(d){if(d&&(u=v.util.error(u||new Error,d),h._haltHandlersOnError))return f.call(h,u);h.callListeners(E,m,f,u)}for(;E.length>0;){var g=E.shift();if(g._isAsync)return void g.apply(h,m.concat([l]));try{g.apply(h,m)}catch(d){u=v.util.error(u||new Error,d)}if(u&&h._haltHandlersOnError)return void f.call(h,u)}f.call(h,u)},addListeners:function(E){var m=this;return E._events&&(E=E._events),v.util.each(E,function(f,c){"function"==typeof c&&(c=[c]),v.util.arrayEach(c,function(h){m.on(f,h)})}),m},addNamedListener:function(E,m,f,c){return this[E]=f,this.addListener(m,f,c),this},addNamedAsyncListener:function(E,m,f,c){return f._isAsync=!0,this.addNamedListener(E,m,f,c)},addNamedListeners:function(E){var m=this;return E(function(){m.addNamedListener.apply(m,arguments)},function(){m.addNamedAsyncListener.apply(m,arguments)}),this}}),v.SequentialExecutor.prototype.addListener=v.SequentialExecutor.prototype.on,P.exports=v.SequentialExecutor},{"./core":18}],59:[function(N,P,V){(function(v){(function(){var w=N("./core"),E=N("./model/api"),m=N("./region_config"),f=w.util.inherit,c=0;w.Service=f({constructor:function(u){if(!this.loadServiceClass)throw w.util.error(new Error,"Service must be constructed with `new' operator");var l=this.loadServiceClass(u||{});if(l){var g=w.util.copy(u),d=new l(u);return Object.defineProperty(d,"_originalConfig",{get:function(){return g},enumerable:!1,configurable:!0}),d._clientId=++c,d}this.initialize(u)},initialize:function(u){var l=w.config[this.serviceIdentifier];if(this.config=new w.Config(w.config),l&&this.config.update(l,!0),u&&this.config.update(u,!0),this.validateService(),this.config.endpoint||m(this),this.config.endpoint=this.endpointFromTemplate(this.config.endpoint),this.setEndpoint(this.config.endpoint),w.SequentialExecutor.call(this),w.Service.addDefaultMonitoringListeners(this),(this.config.clientSideMonitoring||w.Service._clientSideMonitoring)&&this.publisher){var g=this.publisher;this.addNamedListener("PUBLISH_API_CALL","apiCall",function(y){v.nextTick(function(){g.eventHandler(y)})}),this.addNamedListener("PUBLISH_API_ATTEMPT","apiCallAttempt",function(y){v.nextTick(function(){g.eventHandler(y)})})}},validateService:function(){},loadServiceClass:function(u){var l=u;if(w.util.isEmpty(this.api)){if(l.apiConfig)return w.Service.defineServiceApi(this.constructor,l.apiConfig);if(this.constructor.services){(l=new w.Config(w.config)).update(u,!0);var g=l.apiVersions[this.constructor.serviceIdentifier];return this.getLatestServiceClass(g=g||l.apiVersion)}return null}return null},getLatestServiceClass:function(u){return u=this.getLatestServiceVersion(u),null===this.constructor.services[u]&&w.Service.defineServiceApi(this.constructor,u),this.constructor.services[u]},getLatestServiceVersion:function(u){if(!this.constructor.services||0===this.constructor.services.length)throw new Error("No services defined on "+this.constructor.serviceIdentifier);if(u?w.util.isType(u,Date)&&(u=w.util.date.iso8601(u).split("T")[0]):u="latest",Object.hasOwnProperty(this.constructor.services,u))return u;for(var l=Object.keys(this.constructor.services).sort(),g=null,d=l.length-1;d>=0;d--)if("*"!==l[d][l[d].length-1]&&(g=l[d]),l[d].substr(0,10)<=u)return g;throw new Error("Could not find "+this.constructor.serviceIdentifier+" API to satisfy version constraint `"+u+"'")},api:{},defaultRetryCount:3,customizeRequests:function(u){if(u){if("function"!=typeof u)throw new Error("Invalid callback type '"+typeof u+"' provided in customizeRequests");this.customRequestHandler=u}else this.customRequestHandler=null},makeRequest:function(u,l,g){if("function"==typeof l&&(g=l,l=null),l=l||{},this.config.params){var d=this.api.operations[u];d&&(l=w.util.copy(l),w.util.each(this.config.params,function(_,S){d.input.members[_]&&null==l[_]&&(l[_]=S)}))}var y=new w.Request(this,u,l);return this.addAllRequestListeners(y),this.attachMonitoringEmitter(y),g&&y.send(g),y},makeUnauthenticatedRequest:function(u,l,g){"function"==typeof l&&(g=l,l={});var d=this.makeRequest(u,l).toUnauthenticated();return g?d.send(g):d},waitFor:function(u,l,g){return new w.ResourceWaiter(this,u).wait(l,g)},addAllRequestListeners:function(u){for(var l=[w.events,w.EventListeners.Core,this.serviceInterface(),w.EventListeners.CorePost],g=0;g<l.length;g++)l[g]&&u.addListeners(l[g]);this.config.paramValidation||u.removeListener("validate",w.EventListeners.Core.VALIDATE_PARAMETERS),this.config.logger&&u.addListeners(w.EventListeners.Logger),this.setupRequestListeners(u),"function"==typeof this.constructor.prototype.customRequestHandler&&this.constructor.prototype.customRequestHandler(u),Object.prototype.hasOwnProperty.call(this,"customRequestHandler")&&"function"==typeof this.customRequestHandler&&this.customRequestHandler(u)},apiCallEvent:function(u){var l=u.service.api.operations[u.operation],g={Type:"ApiCall",Api:l?l.name:u.operation,Version:1,Service:u.service.api.serviceId||u.service.api.endpointPrefix,Region:u.httpRequest.region,MaxRetriesExceeded:0,UserAgent:u.httpRequest.getUserAgent()},d=u.response;if(d.httpResponse.statusCode&&(g.FinalHttpStatusCode=d.httpResponse.statusCode),d.error){var y=d.error;d.httpResponse.statusCode>299?(y.code&&(g.FinalAwsException=y.code),y.message&&(g.FinalAwsExceptionMessage=y.message)):((y.code||y.name)&&(g.FinalSdkException=y.code||y.name),y.message&&(g.FinalSdkExceptionMessage=y.message))}return g},apiAttemptEvent:function(u){var l=u.service.api.operations[u.operation],g={Type:"ApiCallAttempt",Api:l?l.name:u.operation,Version:1,Service:u.service.api.serviceId||u.service.api.endpointPrefix,Fqdn:u.httpRequest.endpoint.hostname,UserAgent:u.httpRequest.getUserAgent()},d=u.response;return d.httpResponse.statusCode&&(g.HttpStatusCode=d.httpResponse.statusCode),!u._unAuthenticated&&u.service.config.credentials&&u.service.config.credentials.accessKeyId&&(g.AccessKey=u.service.config.credentials.accessKeyId),d.httpResponse.headers&&(u.httpRequest.headers["x-amz-security-token"]&&(g.SessionToken=u.httpRequest.headers["x-amz-security-token"]),d.httpResponse.headers["x-amzn-requestid"]&&(g.XAmznRequestId=d.httpResponse.headers["x-amzn-requestid"]),d.httpResponse.headers["x-amz-request-id"]&&(g.XAmzRequestId=d.httpResponse.headers["x-amz-request-id"]),d.httpResponse.headers["x-amz-id-2"]&&(g.XAmzId2=d.httpResponse.headers["x-amz-id-2"])),g},attemptFailEvent:function(u){var l=this.apiAttemptEvent(u),g=u.response,d=g.error;return g.httpResponse.statusCode>299?(d.code&&(l.AwsException=d.code),d.message&&(l.AwsExceptionMessage=d.message)):((d.code||d.name)&&(l.SdkException=d.code||d.name),d.message&&(l.SdkExceptionMessage=d.message)),l},attachMonitoringEmitter:function(u){var l,g,d,y,S,D,_=0,b=this;u.on("validate",function(){y=w.util.realClock.now(),D=Date.now()},!0),u.on("sign",function(){g=w.util.realClock.now(),l=Date.now(),S=u.httpRequest.region,_++},!0),u.on("validateResponse",function(){d=Math.round(w.util.realClock.now()-g)}),u.addNamedListener("API_CALL_ATTEMPT","success",function(){var q=b.apiAttemptEvent(u);q.Timestamp=l,q.AttemptLatency=d>=0?d:0,q.Region=S,b.emit("apiCallAttempt",[q])}),u.addNamedListener("API_CALL_ATTEMPT_RETRY","retry",function(){var q=b.attemptFailEvent(u);q.Timestamp=l,d=d||Math.round(w.util.realClock.now()-g),q.AttemptLatency=d>=0?d:0,q.Region=S,b.emit("apiCallAttempt",[q])}),u.addNamedListener("API_CALL","complete",function(){var q=b.apiCallEvent(u);if(q.AttemptCount=_,!(q.AttemptCount<=0)){q.Timestamp=D;var K=Math.round(w.util.realClock.now()-y);q.Latency=K>=0?K:0;var U=u.response;"number"==typeof U.retryCount&&"number"==typeof U.maxRetries&&U.retryCount>=U.maxRetries&&(q.MaxRetriesExceeded=1),b.emit("apiCall",[q])}})},setupRequestListeners:function(u){},getSignerClass:function(u){var g=null,d="";return u&&(d=(g=(u.service.api.operations||{})[u.operation]||null)?g.authtype:""),w.Signers.RequestSigner.getVersion(this.config.signatureVersion?this.config.signatureVersion:"v4"===d||"v4-unsigned-body"===d?"v4":this.api.signatureVersion)},serviceInterface:function(){switch(this.api.protocol){case"ec2":case"query":return w.EventListeners.Query;case"json":return w.EventListeners.Json;case"rest-json":return w.EventListeners.RestJson;case"rest-xml":return w.EventListeners.RestXml}if(this.api.protocol)throw new Error("Invalid service `protocol' "+this.api.protocol+" in API config")},successfulResponse:function(u){return u.httpResponse.statusCode<300},numRetries:function(){return void 0!==this.config.maxRetries?this.config.maxRetries:this.defaultRetryCount},retryDelays:function(u){return w.util.calculateRetryDelay(u,this.config.retryDelayOptions)},retryableError:function(u){return!!(this.timeoutError(u)||this.networkingError(u)||this.expiredCredentialsError(u)||this.throttledError(u)||u.statusCode>=500)},networkingError:function(u){return"NetworkingError"===u.code},timeoutError:function(u){return"TimeoutError"===u.code},expiredCredentialsError:function(u){return"ExpiredTokenException"===u.code},clockSkewError:function(u){switch(u.code){case"RequestTimeTooSkewed":case"RequestExpired":case"InvalidSignatureException":case"SignatureDoesNotMatch":case"AuthFailure":case"RequestInTheFuture":return!0;default:return!1}},getSkewCorrectedDate:function(){return new Date(Date.now()+this.config.systemClockOffset)},applyClockOffset:function(u){u&&(this.config.systemClockOffset=u-Date.now())},isClockSkewed:function(u){if(u)return Math.abs(this.getSkewCorrectedDate().getTime()-u)>=3e4},throttledError:function(u){if(429===u.statusCode)return!0;switch(u.code){case"ProvisionedThroughputExceededException":case"Throttling":case"ThrottlingException":case"RequestLimitExceeded":case"RequestThrottled":case"RequestThrottledException":case"TooManyRequestsException":case"TransactionInProgressException":return!0;default:return!1}},endpointFromTemplate:function(u){if("string"!=typeof u)return u;var l=u;return(l=(l=l.replace(/\{service\}/g,this.api.endpointPrefix)).replace(/\{region\}/g,this.config.region)).replace(/\{scheme\}/g,this.config.sslEnabled?"https":"http")},setEndpoint:function(u){this.endpoint=new w.Endpoint(u,this.config)},paginationConfig:function(u,l){var g=this.api.operations[u].paginator;if(!g){if(l){var d=new Error;throw w.util.error(d,"No pagination configuration for "+u)}return null}return g}}),w.util.update(w.Service,{defineMethods:function(u){w.util.each(u.prototype.api.operations,function(g){u.prototype[g]||(u.prototype[g]="none"===u.prototype.api.operations[g].authtype?function(y,_){return this.makeUnauthenticatedRequest(g,y,_)}:function(y,_){return this.makeRequest(g,y,_)})})},defineService:function(u,l,g){w.Service._serviceMap[u]=!0,Array.isArray(l)||(g=l,l=[]);var d=f(w.Service,g||{});if("string"==typeof u?(w.Service.addVersions(d,l),d.serviceIdentifier=d.serviceIdentifier||u):(d.prototype.api=u,w.Service.defineMethods(d)),w.SequentialExecutor.call(this.prototype),!this.prototype.publisher&&w.util.clientSideMonitoring){var _=w.util.clientSideMonitoring.Publisher,D=(0,w.util.clientSideMonitoring.configProvider)();this.prototype.publisher=new _(D),D.enabled&&(w.Service._clientSideMonitoring=!0)}return w.SequentialExecutor.call(d.prototype),w.Service.addDefaultMonitoringListeners(d.prototype),d},addVersions:function(u,l){Array.isArray(l)||(l=[l]),u.services=u.services||{};for(var g=0;g<l.length;g++)void 0===u.services[l[g]]&&(u.services[l[g]]=null);u.apiVersions=Object.keys(u.services).sort()},defineServiceApi:function(u,l,g){var d=f(u,{serviceIdentifier:u.serviceIdentifier});function y(_){d.prototype.api=_.isApi?_:new E(_)}if("string"==typeof l){if(g)y(g);else try{y(w.apiLoader(u.serviceIdentifier,l))}catch(_){throw w.util.error(_,{message:"Could not find API configuration "+u.serviceIdentifier+"-"+l})}Object.prototype.hasOwnProperty.call(u.services,l)||(u.apiVersions=u.apiVersions.concat(l).sort()),u.services[l]=d}else y(l);return w.Service.defineMethods(d),d},hasService:function(h){return Object.prototype.hasOwnProperty.call(w.Service._serviceMap,h)},addDefaultMonitoringListeners:function(u){u.addNamedListener("MONITOR_EVENTS_BUBBLE","apiCallAttempt",function(g){var d=Object.getPrototypeOf(u);d._events&&d.emit("apiCallAttempt",[g])}),u.addNamedListener("CALL_EVENTS_BUBBLE","apiCall",function(g){var d=Object.getPrototypeOf(u);d._events&&d.emit("apiCall",[g])})},_serviceMap:{}}),w.util.mixin(w.Service,w.SequentialExecutor),P.exports=w.Service}).call(this)}).call(this,N("_process"))},{"./core":18,"./model/api":38,"./region_config":53,_process:86}],60:[function(N,P,V){var v=N("../core");v.util.update(v.CognitoIdentity.prototype,{getOpenIdToken:function(E,m){return this.makeUnauthenticatedRequest("getOpenIdToken",E,m)},getId:function(E,m){return this.makeUnauthenticatedRequest("getId",E,m)},getCredentialsForIdentity:function(E,m){return this.makeUnauthenticatedRequest("getCredentialsForIdentity",E,m)}})},{"../core":18}],61:[function(N,P,V){(function(v){(function(){var w=N("../core"),E=N("../region_config"),m="AWS_STS_REGIONAL_ENDPOINTS",f="sts_regional_endpoints";w.util.update(w.STS.prototype,{credentialsFrom:function(h,u){return h?(u||(u=new w.TemporaryCredentials),u.expired=!1,u.accessKeyId=h.Credentials.AccessKeyId,u.secretAccessKey=h.Credentials.SecretAccessKey,u.sessionToken=h.Credentials.SessionToken,u.expireTime=h.Credentials.Expiration,u):null},assumeRoleWithWebIdentity:function(h,u){return this.makeUnauthenticatedRequest("assumeRoleWithWebIdentity",h,u)},assumeRoleWithSAML:function(h,u){return this.makeUnauthenticatedRequest("assumeRoleWithSAML",h,u)},validateRegionalEndpointsFlagValue:function(h,u){if(!("string"==typeof h&&["legacy","regional"].indexOf(h.toLowerCase())>=0))throw w.util.error(new Error,u);this.config.stsRegionalEndpoints=h.toLowerCase()},validateRegionalEndpointsFlag:function(){var h=this.config;if(h.stsRegionalEndpoints&&this.validateRegionalEndpointsFlagValue(h.stsRegionalEndpoints,{code:"InvalidConfiguration",message:'invalid "stsRegionalEndpoints" configuration. Expect "legacy"  or "regional". Got "'+h.stsRegionalEndpoints+'".'}),w.util.isNode()){Object.prototype.hasOwnProperty.call(v.env,m)&&this.validateRegionalEndpointsFlagValue(v.env[m],{code:"InvalidEnvironmentalVariable",message:"invalid "+m+' environmental variable. Expect "legacy"  or "regional". Got "'+v.env[m]+'".'});var l={};try{l=w.util.getProfilesFromSharedConfig(w.util.iniLoader)[v.env.AWS_PROFILE||w.util.defaultProfile]}catch(y){}l&&Object.prototype.hasOwnProperty.call(l,f)&&this.validateRegionalEndpointsFlagValue(l[f],{code:"InvalidConfiguration",message:"invalid "+f+' profile config. Expect "legacy"  or "regional". Got "'+l[f]+'".'})}},optInRegionalEndpoint:function(){this.validateRegionalEndpointsFlag();var h=this.config;if("regional"===h.stsRegionalEndpoints){if(E(this),!this.isGlobalEndpoint)return;if(this.isGlobalEndpoint=!1,!h.region)throw w.util.error(new Error,{code:"ConfigError",message:"Missing region in config"});var u=h.endpoint.indexOf(".amazonaws.com");h.endpoint=h.endpoint.substring(0,u)+"."+h.region+h.endpoint.substring(u)}},validateService:function(){this.optInRegionalEndpoint()}})}).call(this)}).call(this,N("_process"))},{"../core":18,"../region_config":53,_process:86}],62:[function(N,P,V){var v=N("../core"),E="presigned-expires";function m(c){var h=c.httpRequest.headers[E],u=c.service.getSignerClass(c);if(delete c.httpRequest.headers["User-Agent"],delete c.httpRequest.headers["X-Amz-User-Agent"],u===v.Signers.V4){if(h>604800)throw v.util.error(new Error,{code:"InvalidExpiryTime",message:"Presigning does not support expiry time greater than a week with SigV4 signing.",retryable:!1});c.httpRequest.headers[E]=h}else{if(u!==v.Signers.S3)throw v.util.error(new Error,{message:"Presigning only supports S3 or SigV4 signing.",code:"UnsupportedSigner",retryable:!1});var g=c.service?c.service.getSkewCorrectedDate():v.util.date.getDate();c.httpRequest.headers[E]=parseInt(v.util.date.unixTimestamp(g)+h,10).toString()}}function f(c){var h=c.httpRequest.endpoint,u=v.util.urlParse(c.httpRequest.path),l={};u.search&&(l=v.util.queryStringParse(u.search.substr(1)));var g=c.httpRequest.headers.Authorization.split(" ");if("AWS"===g[0])g=g[1].split(":"),l.AWSAccessKeyId=g[0],l.Signature=g[1],v.util.each(c.httpRequest.headers,function(_,S){_===E&&(_="Expires"),0===_.indexOf("x-amz-meta-")&&(delete l[_],_=_.toLowerCase()),l[_]=S}),delete c.httpRequest.headers[E],delete l.Authorization,delete l.Host;else if("AWS4-HMAC-SHA256"===g[0]){g.shift();var y=g.join(" ").match(/Signature=(.*?)(?:,|\s|\r?\n|$)/)[1];l["X-Amz-Signature"]=y,delete l.Expires}h.pathname=u.pathname,h.search=v.util.queryParamsToString(l)}v.Signers.Presign=(0,v.util.inherit)({sign:function(h,u,l){if(h.httpRequest.headers[E]=u||3600,h.on("build",m),h.on("sign",f),h.removeListener("afterBuild",v.EventListeners.Core.SET_CONTENT_LENGTH),h.removeListener("afterBuild",v.EventListeners.Core.COMPUTE_SHA256),h.emit("beforePresign",[h]),!l){if(h.build(),h.response.error)throw h.response.error;return v.util.urlFormat(h.httpRequest.endpoint)}h.build(function(){this.response.error?l(this.response.error):l(null,v.util.urlFormat(h.httpRequest.endpoint))})}}),P.exports=v.Signers.Presign},{"../core":18}],63:[function(N,P,V){var v=N("../core");v.Signers.RequestSigner=(0,v.util.inherit)({constructor:function(m){this.request=m},setServiceClientId:function(m){this.serviceClientId=m},getServiceClientId:function(){return this.serviceClientId}}),v.Signers.RequestSigner.getVersion=function(m){switch(m){case"v2":return v.Signers.V2;case"v3":return v.Signers.V3;case"s3v4":case"v4":return v.Signers.V4;case"s3":return v.Signers.S3;case"v3https":return v.Signers.V3Https}throw new Error("Unknown signing version "+m)},N("./v2"),N("./v3"),N("./v3https"),N("./v4"),N("./s3"),N("./presign")},{"../core":18,"./presign":62,"./s3":64,"./v2":65,"./v3":66,"./v3https":67,"./v4":68}],64:[function(N,P,V){var v=N("../core");v.Signers.S3=(0,v.util.inherit)(v.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,analytics:1,cors:1,lifecycle:1,delete:1,inventory:1,location:1,logging:1,metrics:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(m,f){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=v.util.date.rfc822(f)),m.sessionToken&&(this.request.headers["x-amz-security-token"]=m.sessionToken);var c=this.sign(m.secretAccessKey,this.stringToSign());this.request.headers.Authorization="AWS "+m.accessKeyId+":"+c},stringToSign:function(){var m=this.request,f=[];f.push(m.method),f.push(m.headers["Content-MD5"]||""),f.push(m.headers["Content-Type"]||""),f.push(m.headers["presigned-expires"]||"");var c=this.canonicalizedAmzHeaders();return c&&f.push(c),f.push(this.canonicalizedResource()),f.join("\n")},canonicalizedAmzHeaders:function(){var m=[];v.util.each(this.request.headers,function(c){c.match(/^x-amz-/i)&&m.push(c)}),m.sort(function(c,h){return c.toLowerCase()<h.toLowerCase()?-1:1});var f=[];return v.util.arrayEach.call(this,m,function(c){f.push(c.toLowerCase()+":"+String(this.request.headers[c]))}),f.join("\n")},canonicalizedResource:function(){var m=this.request,f=m.path.split("?"),h=f[1],u="";if(m.virtualHostedBucket&&(u+="/"+m.virtualHostedBucket),u+=f[0],h){var l=[];v.util.arrayEach.call(this,h.split("&"),function(g){var d=g.split("=")[0],y=g.split("=")[1];if(this.subResources[d]||this.responseHeaders[d]){var _={name:d};void 0!==y&&(_.value=this.subResources[d]?y:decodeURIComponent(y)),l.push(_)}}),l.sort(function(g,d){return g.name<d.name?-1:1}),l.length&&(h=[],v.util.arrayEach(l,function(g){h.push(void 0===g.value?g.name:g.name+"="+g.value)}),u+="?"+h.join("&"))}return u},sign:function(m,f){return v.util.crypto.hmac(m,f,"base64","sha1")}}),P.exports=v.Signers.S3},{"../core":18}],65:[function(N,P,V){var v=N("../core");v.Signers.V2=(0,v.util.inherit)(v.Signers.RequestSigner,{addAuthorization:function(m,f){f||(f=v.util.date.getDate());var c=this.request;c.params.Timestamp=v.util.date.iso8601(f),c.params.SignatureVersion="2",c.params.SignatureMethod="HmacSHA256",c.params.AWSAccessKeyId=m.accessKeyId,m.sessionToken&&(c.params.SecurityToken=m.sessionToken),delete c.params.Signature,c.params.Signature=this.signature(m),c.body=v.util.queryParamsToString(c.params),c.headers["Content-Length"]=c.body.length},signature:function(m){return v.util.crypto.hmac(m.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var m=[];return m.push(this.request.method),m.push(this.request.endpoint.host.toLowerCase()),m.push(this.request.pathname()),m.push(v.util.queryParamsToString(this.request.params)),m.join("\n")}}),P.exports=v.Signers.V2},{"../core":18}],66:[function(N,P,V){var v=N("../core");v.Signers.V3=(0,v.util.inherit)(v.Signers.RequestSigner,{addAuthorization:function(m,f){var c=v.util.date.rfc822(f);this.request.headers["X-Amz-Date"]=c,m.sessionToken&&(this.request.headers["x-amz-security-token"]=m.sessionToken),this.request.headers["X-Amzn-Authorization"]=this.authorization(m,c)},authorization:function(m){return"AWS3 AWSAccessKeyId="+m.accessKeyId+",Algorithm=HmacSHA256,SignedHeaders="+this.signedHeaders()+",Signature="+this.signature(m)},signedHeaders:function(){var m=[];return v.util.arrayEach(this.headersToSign(),function(c){m.push(c.toLowerCase())}),m.sort().join(";")},canonicalHeaders:function(){var m=this.request.headers,f=[];return v.util.arrayEach(this.headersToSign(),function(h){f.push(h.toLowerCase().trim()+":"+String(m[h]).trim())}),f.sort().join("\n")+"\n"},headersToSign:function(){var m=[];return v.util.each(this.request.headers,function(c){("Host"===c||"Content-Encoding"===c||c.match(/^X-Amz/i))&&m.push(c)}),m},signature:function(m){return v.util.crypto.hmac(m.secretAccessKey,this.stringToSign(),"base64")},stringToSign:function(){var m=[];return m.push(this.request.method),m.push("/"),m.push(""),m.push(this.canonicalHeaders()),m.push(this.request.body),v.util.crypto.sha256(m.join("\n"))}}),P.exports=v.Signers.V3},{"../core":18}],67:[function(N,P,V){var v=N("../core"),w=v.util.inherit;N("./v3"),v.Signers.V3Https=w(v.Signers.V3,{authorization:function(m){return"AWS3-HTTPS AWSAccessKeyId="+m.accessKeyId+",Algorithm=HmacSHA256,Signature="+this.signature(m)},stringToSign:function(){return this.request.headers["X-Amz-Date"]}}),P.exports=v.Signers.V3Https},{"../core":18,"./v3":66}],68:[function(N,P,V){var v=N("../core"),w=N("./v4_credentials"),m="presigned-expires";v.Signers.V4=(0,v.util.inherit)(v.Signers.RequestSigner,{constructor:function(c,h,u){v.Signers.RequestSigner.call(this,c),this.serviceName=h,this.signatureCache="boolean"!=typeof(u=u||{}).signatureCache||u.signatureCache,this.operation=u.operation,this.signatureVersion=u.signatureVersion},algorithm:"AWS4-HMAC-SHA256",addAuthorization:function(c,h){var u=v.util.date.iso8601(h).replace(/[:\-]|\.\d{3}/g,"");this.isPresigned()?this.updateForPresigned(c,u):this.addHeaders(c,u),this.request.headers.Authorization=this.authorization(c,u)},addHeaders:function(c,h){this.request.headers["X-Amz-Date"]=h,c.sessionToken&&(this.request.headers["x-amz-security-token"]=c.sessionToken)},updateForPresigned:function(c,h){var u=this.credentialString(h),l={"X-Amz-Date":h,"X-Amz-Algorithm":this.algorithm,"X-Amz-Credential":c.accessKeyId+"/"+u,"X-Amz-Expires":this.request.headers[m],"X-Amz-SignedHeaders":this.signedHeaders()};c.sessionToken&&(l["X-Amz-Security-Token"]=c.sessionToken),this.request.headers["Content-Type"]&&(l["Content-Type"]=this.request.headers["Content-Type"]),this.request.headers["Content-MD5"]&&(l["Content-MD5"]=this.request.headers["Content-MD5"]),this.request.headers["Cache-Control"]&&(l["Cache-Control"]=this.request.headers["Cache-Control"]),v.util.each.call(this,this.request.headers,function(d,y){if(d!==m&&this.isSignableHeader(d)){var _=d.toLowerCase();0===_.indexOf("x-amz-meta-")?l[_]=y:0===_.indexOf("x-amz-")&&(l[d]=y)}});var g=this.request.path.indexOf("?")>=0?"&":"?";this.request.path+=g+v.util.queryParamsToString(l)},authorization:function(c,h){var u=[],l=this.credentialString(h);return u.push(this.algorithm+" Credential="+c.accessKeyId+"/"+l),u.push("SignedHeaders="+this.signedHeaders()),u.push("Signature="+this.signature(c,h)),u.join(", ")},signature:function(c,h){var u=w.getSigningKey(c,h.substr(0,8),this.request.region,this.serviceName,this.signatureCache);return v.util.crypto.hmac(u,this.stringToSign(h),"hex")},stringToSign:function(c){var h=[];return h.push("AWS4-HMAC-SHA256"),h.push(c),h.push(this.credentialString(c)),h.push(this.hexEncodedHash(this.canonicalString())),h.join("\n")},canonicalString:function(){var c=[],h=this.request.pathname();return"s3"!==this.serviceName&&"s3v4"!==this.signatureVersion&&(h=v.util.uriEscapePath(h)),c.push(this.request.method),c.push(h),c.push(this.request.search()),c.push(this.canonicalHeaders()+"\n"),c.push(this.signedHeaders()),c.push(this.hexEncodedBodyHash()),c.join("\n")},canonicalHeaders:function(){var c=[];v.util.each.call(this,this.request.headers,function(u,l){c.push([u,l])}),c.sort(function(u,l){return u[0].toLowerCase()<l[0].toLowerCase()?-1:1});var h=[];return v.util.arrayEach.call(this,c,function(u){var l=u[0].toLowerCase();if(this.isSignableHeader(l)){var g=u[1];if(null==g||"function"!=typeof g.toString)throw v.util.error(new Error("Header "+l+" contains invalid value"),{code:"InvalidHeader"});h.push(l+":"+this.canonicalHeaderValues(g.toString()))}}),h.join("\n")},canonicalHeaderValues:function(c){return c.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"")},signedHeaders:function(){var c=[];return v.util.each.call(this,this.request.headers,function(h){h=h.toLowerCase(),this.isSignableHeader(h)&&c.push(h)}),c.sort().join(";")},credentialString:function(c){return w.createScope(c.substr(0,8),this.request.region,this.serviceName)},hexEncodedHash:function(c){return v.util.crypto.sha256(c,"hex")},hexEncodedBodyHash:function(){var c=this.request;return this.isPresigned()&&"s3"===this.serviceName&&!c.body?"UNSIGNED-PAYLOAD":c.headers["X-Amz-Content-Sha256"]?c.headers["X-Amz-Content-Sha256"]:this.hexEncodedHash(this.request.body||"")},unsignableHeaders:["authorization","content-type","content-length","user-agent",m,"expect","x-amzn-trace-id"],isSignableHeader:function(c){return 0===c.toLowerCase().indexOf("x-amz-")||this.unsignableHeaders.indexOf(c)<0},isPresigned:function(){return!!this.request.headers[m]}}),P.exports=v.Signers.V4},{"../core":18,"./v4_credentials":69}],69:[function(N,P,V){var v=N("../core"),w={},E=[],f="aws4_request";P.exports={createScope:function(h,u,l){return[h.substr(0,8),u,l,f].join("/")},getSigningKey:function(h,u,l,g,d){var _=[v.util.crypto.hmac(h.secretAccessKey,h.accessKeyId,"base64"),u,l,g].join("_");if((d=!1!==d)&&_ in w)return w[_];var S=v.util.crypto.hmac("AWS4"+h.secretAccessKey,u,"buffer"),D=v.util.crypto.hmac(S,l,"buffer"),b=v.util.crypto.hmac(D,g,"buffer"),T=v.util.crypto.hmac(b,f,"buffer");return d&&(w[_]=T,E.push(_),E.length>50&&delete w[E.shift()]),T},emptyCache:function(){w={},E=[]}}},{"../core":18}],70:[function(N,P,V){function v(w,E){this.currentState=E||null,this.states=w||{}}v.prototype.runTo=function(E,m,f,c){"function"==typeof E&&(c=f,f=m,m=E,E=null);var h=this,u=h.states[h.currentState];u.fn.call(f||h,c,function(l){if(l){if(!u.fail)return m?m.call(f,l):null;h.currentState=u.fail}else{if(!u.accept)return m?m.call(f):null;h.currentState=u.accept}if(h.currentState===E)return m?m.call(f,l):null;h.runTo(E,m,f,l)})},v.prototype.addState=function(E,m,f,c){return"function"==typeof m?(c=m,m=null,f=null):"function"==typeof f&&(c=f,f=null),this.currentState||(this.currentState=E),this.states[E]={accept:m,fail:f,fn:c},this},P.exports=v},{}],71:[function(N,P,V){(function(v,w){(function(){var E,m={environment:"nodejs",engine:function(){if(m.isBrowser()&&"undefined"!=typeof navigator)return navigator.userAgent;var c=v.platform+"/"+v.version;return v.env.AWS_EXECUTION_ENV&&(c+=" exec-env/"+v.env.AWS_EXECUTION_ENV),c},userAgent:function(){var c=m.environment,h="aws-sdk-"+c+"/"+N("./core").VERSION;return"nodejs"===c&&(h+=" "+m.engine()),h},uriEscape:function(c){var h=encodeURIComponent(c);return(h=h.replace(/[^A-Za-z0-9_.~\-%]+/g,escape)).replace(/[*]/g,function(u){return"%"+u.charCodeAt(0).toString(16).toUpperCase()})},uriEscapePath:function(c){var h=[];return m.arrayEach(c.split("/"),function(u){h.push(m.uriEscape(u))}),h.join("/")},urlParse:function(c){return m.url.parse(c)},urlFormat:function(c){return m.url.format(c)},queryStringParse:function(c){return m.querystring.parse(c)},queryParamsToString:function(c){var h=[],u=m.uriEscape,l=Object.keys(c).sort();return m.arrayEach(l,function(g){var d=c[g],y=u(g),_=y+"=";if(Array.isArray(d)){var S=[];m.arrayEach(d,function(D){S.push(u(D))}),_=y+"="+S.sort().join("&"+y+"=")}else null!=d&&(_=y+"="+u(d));h.push(_)}),h.join("&")},readFileSync:function(c){return m.isBrowser()?null:N("fs").readFileSync(c,"utf-8")},base64:{encode:function(c){if("number"==typeof c)throw m.error(new Error("Cannot base64 encode number "+c));return null==c?c:m.buffer.toBuffer(c).toString("base64")},decode:function(c){if("number"==typeof c)throw m.error(new Error("Cannot base64 decode number "+c));return null==c?c:m.buffer.toBuffer(c,"base64")}},buffer:{toBuffer:function(f,c){return"function"==typeof m.Buffer.from&&m.Buffer.from!==Uint8Array.from?m.Buffer.from(f,c):new m.Buffer(f,c)},alloc:function(f,c,h){if("number"!=typeof f)throw new Error("size passed to alloc must be a number.");if("function"==typeof m.Buffer.alloc)return m.Buffer.alloc(f,c,h);var u=new m.Buffer(f);return void 0!==c&&"function"==typeof u.fill&&u.fill(c,void 0,void 0,h),u},toStream:function(c){m.Buffer.isBuffer(c)||(c=m.buffer.toBuffer(c));var h=new m.stream.Readable,u=0;return h._read=function(l){if(u>=c.length)return h.push(null);var g=u+l;g>c.length&&(g=c.length),h.push(c.slice(u,g)),u=g},h},concat:function(f){var u,l,c=0,h=0;for(l=0;l<f.length;l++)c+=f[l].length;for(u=m.buffer.alloc(c),l=0;l<f.length;l++)f[l].copy(u,h),h+=f[l].length;return u}},string:{byteLength:function(c){if(null==c)return 0;if("string"==typeof c&&(c=m.buffer.toBuffer(c)),"number"==typeof c.byteLength)return c.byteLength;if("number"==typeof c.length)return c.length;if("number"==typeof c.size)return c.size;if("string"==typeof c.path)return N("fs").lstatSync(c.path).size;throw m.error(new Error("Cannot determine length of "+c),{object:c})},upperFirst:function(c){return c[0].toUpperCase()+c.substr(1)},lowerFirst:function(c){return c[0].toLowerCase()+c.substr(1)}},ini:{parse:function(c){var h,u={};return m.arrayEach(c.split(/\r?\n/),function(l){var g=(l=l.split(/(^|\s)[;#]/)[0]).match(/^\s*\[([^\[\]]+)\]\s*$/);if(g)h=g[1];else if(h){var d=l.match(/^\s*(.+?)\s*=\s*(.+?)\s*$/);d&&(u[h]=u[h]||{},u[h][d[1]]=d[2])}}),u}},fn:{noop:function(){},callback:function(f){if(f)throw f},makeAsync:function(c,h){return h&&h<=c.length?c:function(){var u=Array.prototype.slice.call(arguments,0),l=u.pop(),g=c.apply(null,u);l(g)}}},date:{getDate:function(){return E||(E=N("./core")),E.config.systemClockOffset?new Date((new Date).getTime()+E.config.systemClockOffset):new Date},iso8601:function(c){return void 0===c&&(c=m.date.getDate()),c.toISOString().replace(/\.\d{3}Z$/,"Z")},rfc822:function(c){return void 0===c&&(c=m.date.getDate()),c.toUTCString()},unixTimestamp:function(c){return void 0===c&&(c=m.date.getDate()),c.getTime()/1e3},from:function(c){return"number"==typeof c?new Date(1e3*c):new Date(c)},format:function(c,h){return h||(h="iso8601"),m.date[h](m.date.from(c))},parseTimestamp:function(c){if("number"==typeof c)return new Date(1e3*c);if(c.match(/^\d+$/))return new Date(1e3*c);if(c.match(/^\d{4}/))return new Date(c);if(c.match(/^\w{3},/))return new Date(c);throw m.error(new Error("unhandled timestamp format: "+c),{code:"TimestampParserError"})}},crypto:{crc32Table:[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],crc32:function(c){var h=m.crypto.crc32Table,u=-1;"string"==typeof c&&(c=m.buffer.toBuffer(c));for(var l=0;l<c.length;l++)u=u>>>8^h[255&(u^c.readUInt8(l))];return(-1^u)>>>0},hmac:function(c,h,u,l){return u||(u="binary"),"buffer"===u&&(u=void 0),l||(l="sha256"),"string"==typeof h&&(h=m.buffer.toBuffer(h)),m.crypto.lib.createHmac(l,c).update(h).digest(u)},md5:function(c,h,u){return m.crypto.hash("md5",c,h,u)},sha256:function(c,h,u){return m.crypto.hash("sha256",c,h,u)},hash:function(f,c,h,u){var l=m.crypto.createHash(f);h||(h="binary"),"buffer"===h&&(h=void 0),"string"==typeof c&&(c=m.buffer.toBuffer(c));var g=m.arraySliceFn(c),d=m.Buffer.isBuffer(c);if(m.isBrowser()&&"undefined"!=typeof ArrayBuffer&&c&&c.buffer instanceof ArrayBuffer&&(d=!0),u&&"object"==typeof c&&"function"==typeof c.on&&!d)c.on("data",function(b){l.update(b)}),c.on("error",function(b){u(b)}),c.on("end",function(){u(null,l.digest(h))});else{if(!u||!g||d||"undefined"==typeof FileReader){m.isBrowser()&&"object"==typeof c&&!d&&(c=new m.Buffer(new Uint8Array(c)));var D=l.update(c).digest(h);return u&&u(null,D),D}var y=0,S=new FileReader;S.onerror=function(){u(new Error("Failed to read data."))},S.onload=function(){var b=new m.Buffer(new Uint8Array(S.result));l.update(b),y+=b.length,S._continueReading()},S._continueReading=function(){if(y>=c.size)u(null,l.digest(h));else{var b=y+524288;b>c.size&&(b=c.size),S.readAsArrayBuffer(g.call(c,y,b))}},S._continueReading()}},toHex:function(c){for(var h=[],u=0;u<c.length;u++)h.push(("0"+c.charCodeAt(u).toString(16)).substr(-2,2));return h.join("")},createHash:function(c){return m.crypto.lib.createHash(c)}},abort:{},each:function(c,h){for(var u in c)if(Object.prototype.hasOwnProperty.call(c,u)&&h.call(this,u,c[u])===m.abort)break},arrayEach:function(c,h){for(var u in c)if(Object.prototype.hasOwnProperty.call(c,u)&&h.call(this,c[u],parseInt(u,10))===m.abort)break},update:function(c,h){return m.each(h,function(l,g){c[l]=g}),c},merge:function(c,h){return m.update(m.copy(c),h)},copy:function(c){if(null==c)return c;var h={};for(var u in c)h[u]=c[u];return h},isEmpty:function(c){for(var h in c)if(Object.prototype.hasOwnProperty.call(c,h))return!1;return!0},arraySliceFn:function(c){var h=c.slice||c.webkitSlice||c.mozSlice;return"function"==typeof h?h:null},isType:function(c,h){return"function"==typeof h&&(h=m.typeName(h)),Object.prototype.toString.call(c)==="[object "+h+"]"},typeName:function(c){if(Object.prototype.hasOwnProperty.call(c,"name"))return c.name;var h=c.toString(),u=h.match(/^\s*function (.+)\(/);return u?u[1]:h},error:function(c,h){var u=null;return"string"==typeof c.message&&""!==c.message&&("string"==typeof h||h&&h.message)&&((u=m.copy(c)).message=c.message),c.message=c.message||null,"string"==typeof h?c.message=h:"object"==typeof h&&null!==h&&(m.update(c,h),h.message&&(c.message=h.message),(h.code||h.name)&&(c.code=h.code||h.name),h.stack&&(c.stack=h.stack)),"function"==typeof Object.defineProperty&&(Object.defineProperty(c,"name",{writable:!0,enumerable:!1}),Object.defineProperty(c,"message",{enumerable:!0})),c.name=h&&h.name||c.name||c.code||"Error",c.time=new Date,u&&(c.originalError=u),c},inherit:function(c,h){var u=null;if(void 0===h)h=c,c=Object,u={};else{var l=function(){};l.prototype=c.prototype,u=new l}return h.constructor===Object&&(h.constructor=function(){if(c!==Object)return c.apply(this,arguments)}),h.constructor.prototype=u,m.update(h.constructor.prototype,h),h.constructor.__super__=c,h.constructor},mixin:function(){for(var c=arguments[0],h=1;h<arguments.length;h++)for(var u in arguments[h].prototype){var l=arguments[h].prototype[u];"constructor"!==u&&(c.prototype[u]=l)}return c},hideProperties:function(c,h){"function"==typeof Object.defineProperty&&m.arrayEach(h,function(u){Object.defineProperty(c,u,{enumerable:!1,writable:!0,configurable:!0})})},property:function(c,h,u,l,g){var d={configurable:!0,enumerable:void 0===l||l};"function"!=typeof u||g?(d.value=u,d.writable=!0):d.get=u,Object.defineProperty(c,h,d)},memoizedProperty:function(c,h,u,l){var g=null;m.property(c,h,function(){return null===g&&(g=u()),g},l)},hoistPayloadMember:function(c){var h=c.request,l=h.service.api.operations[h.operation],g=l.output;g.payload&&!l.hasEventOutput&&"structure"===g.members[g.payload].type&&m.each(c.data[g.payload],function(_,S){m.property(c.data,_,S,!1)})},computeSha256:function(c,h){if(m.isNode()){var u=m.stream.Stream,l=N("fs");if("function"==typeof u&&c instanceof u){if("string"!=typeof c.path)return h(new Error("Non-file stream objects are not supported with SigV4"));var g={};"number"==typeof c.start&&(g.start=c.start),"number"==typeof c.end&&(g.end=c.end),c=l.createReadStream(c.path,g)}}m.crypto.sha256(c,"hex",function(d,y){d?h(d):h(null,y)})},isClockSkewed:function(c){if(c)return m.property(E.config,"isClockSkewed",Math.abs((new Date).getTime()-c)>=3e5,!1),E.config.isClockSkewed},applyClockOffset:function(c){c&&(E.config.systemClockOffset=c-(new Date).getTime())},extractRequestId:function(c){var h=c.httpResponse.headers["x-amz-request-id"]||c.httpResponse.headers["x-amzn-requestid"];!h&&c.data&&c.data.ResponseMetadata&&(h=c.data.ResponseMetadata.RequestId),h&&(c.requestId=h),c.error&&(c.error.requestId=h)},addPromises:function(c,h){var u=!1;void 0===h&&E&&E.config&&(h=E.config.getPromisesDependency()),void 0===h&&"undefined"!=typeof Promise&&(h=Promise),"function"!=typeof h&&(u=!0),Array.isArray(c)||(c=[c]);for(var l=0;l<c.length;l++){var g=c[l];u?g.deletePromisesFromClass&&g.deletePromisesFromClass():g.addPromisesToClass&&g.addPromisesToClass(h)}},promisifyMethod:function(c,h){return function(){var l=this,g=Array.prototype.slice.call(arguments);return new h(function(d,y){g.push(function(_,S){_?y(_):d(S)}),l[c].apply(l,g)})}},isDualstackAvailable:function(c){if(!c)return!1;var h=N("../apis/metadata.json");return"string"!=typeof c&&(c=c.serviceIdentifier),!("string"!=typeof c||!h.hasOwnProperty(c)||!h[c].dualstackAvailable)},calculateRetryDelay:function(c,h){h||(h={});var u=h.customBackoff||null;if("function"==typeof u)return u(c);var l="number"==typeof h.base?h.base:100;return Math.random()*(Math.pow(2,c)*l)},handleRequestWithRetries:function(c,h,u){h||(h={});var l=E.HttpClient.getInstance(),g=h.httpOptions||{},d=0,y=function(S){var D=h.maxRetries||0;if(S&&"TimeoutError"===S.code&&(S.retryable=!0),S&&S.retryable&&d<D){d++;var b=m.calculateRetryDelay(d,h.retryDelayOptions);setTimeout(_,b+(S.retryAfter||0))}else u(S)},_=function(){var S="";l.handleRequest(c,g,function(D){D.on("data",function(b){S+=b.toString()}),D.on("end",function(){var b=D.statusCode;if(b<300)u(null,S);else{var T=1e3*parseInt(D.headers["retry-after"],10)||0,R=m.error(new Error,{retryable:b>=500||429===b});T&&R.retryable&&(R.retryAfter=T),y(R)}})},y)};E.util.defer(_)},uuid:{v4:function(){return N("uuid").v4()}},convertPayloadToString:function(c){var h=c.request,l=h.service.api.operations[h.operation].output||{};l.payload&&c.data[l.payload]&&(c.data[l.payload]=c.data[l.payload].toString())},defer:function(c){"object"==typeof v&&"function"==typeof v.nextTick?v.nextTick(c):"function"==typeof w?w(c):setTimeout(c,0)},getRequestPayloadShape:function(c){var h=c.service.api.operations;if(h){var u=(h||{})[c.operation];if(u&&u.input&&u.input.payload)return u.input.members[u.input.payload]}},getProfilesFromSharedConfig:function(c,h){var u={},l={};v.env[m.configOptInEnv]&&(l=c.loadFrom({isConfig:!0,filename:v.env[m.sharedConfigFileEnv]}));for(var g=c.loadFrom({filename:h||v.env[m.configOptInEnv]&&v.env[m.sharedCredentialsFileEnv]}),d=0,y=Object.keys(l);d<y.length;d++)u[y[d]]=l[y[d]];for(d=0,y=Object.keys(g);d<y.length;d++)u[y[d]]=g[y[d]];return u},defaultProfile:"default",configOptInEnv:"AWS_SDK_LOAD_CONFIG",sharedCredentialsFileEnv:"AWS_SHARED_CREDENTIALS_FILE",sharedConfigFileEnv:"AWS_CONFIG_FILE",imdsDisabledEnv:"AWS_EC2_METADATA_DISABLED"};P.exports=m}).call(this)}).call(this,N("_process"),N("timers").setImmediate)},{"../apis/metadata.json":4,"./core":18,_process:86,fs:79,timers:93,uuid:98}],72:[function(N,P,V){var v=N("../util"),w=N("../model/shape");function E(){}function m(d,y){for(var _=d.getElementsByTagName(y),S=0,D=_.length;S<D;S++)if(_[S].parentNode===d)return _[S]}function f(d,y){switch(y||(y={}),y.type){case"structure":return c(d,y);case"map":return function(d,y){for(var _={},S=y.key.name||"key",D=y.value.name||"value",b=y.flattened?y.name:"entry",T=d.firstElementChild;T;){if(T.nodeName===b){var R=m(T,S).textContent,q=m(T,D);_[R]=f(q,y.value)}T=T.nextElementSibling}return _}(d,y);case"list":return function(d,y){for(var _=[],S=y.flattened?y.name:y.member.name||"member",D=d.firstElementChild;D;)D.nodeName===S&&_.push(f(D,y.member)),D=D.nextElementSibling;return _}(d,y);case void 0:case null:return function(d){if(null==d)return"";if(!d.firstElementChild)return null===d.parentNode.parentNode?{}:0===d.childNodes.length?"":d.textContent;for(var y={type:"structure",members:{}},_=d.firstElementChild;_;){var S=_.nodeName;Object.prototype.hasOwnProperty.call(y.members,S)?y.members[S].type="list":y.members[S]={name:S},_=_.nextElementSibling}return c(d,y)}(d);default:return function(d,y){if(d.getAttribute){var _=d.getAttribute("encoding");"base64"===_&&(y=new w.create({type:_}))}var S=d.textContent;return""===S&&(S=null),"function"==typeof y.toType?y.toType(S):S}(d,y)}}function c(d,y){var _={};return null===d||v.each(y.members,function(S,D){if(D.isXmlAttribute)Object.prototype.hasOwnProperty.call(d.attributes,D.name)&&(_[S]=f({textContent:d.attributes[D.name].value},D));else{var T=D.flattened?d:m(d,D.name);T?_[S]=f(T,D):!D.flattened&&"list"===D.type&&(_[S]=D.defaultValue)}}),_}E.prototype.parse=function(d,y){if(""===d.replace(/^\s+/,""))return{};var _,S;try{if(window.DOMParser){try{_=(new DOMParser).parseFromString(d,"text/xml")}catch(K){throw v.error(new Error("Parse error in document"),{originalError:K,code:"XMLParserError",retryable:!0})}if(null===_.documentElement)throw v.error(new Error("Cannot parse empty document."),{code:"XMLParserError",retryable:!0});var b=_.getElementsByTagName("parsererror")[0];if(b&&(b.parentNode===_||"body"===b.parentNode.nodeName||b.parentNode.parentNode===_||"body"===b.parentNode.parentNode.nodeName)){var T=b.getElementsByTagName("div")[0]||b;throw v.error(new Error(T.textContent||"Parser error in document"),{code:"XMLParserError",retryable:!0})}}else{if(!window.ActiveXObject)throw new Error("Cannot load XML parser");if((_=new window.ActiveXObject("Microsoft.XMLDOM")).async=!1,!_.loadXML(d))throw v.error(new Error("Parse error in document"),{code:"XMLParserError",retryable:!0})}}catch(K){S=K}if(_&&_.documentElement&&!S){var R=f(_.documentElement,y),q=m(_.documentElement,"ResponseMetadata");return q&&(R.ResponseMetadata=f(q,{})),R}if(S)throw v.error(S||new Error,{code:"XMLParserError",retryable:!0});return{}},P.exports=E},{"../model/shape":43,"../util":71}],73:[function(N,P,V){var v=N("../util"),w=N("./xml-node").XmlNode,E=N("./xml-text").XmlText;function m(){}function f(d,y,_){switch(_.type){case"structure":return function(d,y,_){v.arrayEach(_.memberNames,function(S){var D=_.members[S];if("body"===D.location){var b=y[S],T=D.name;if(null!=b)if(D.isXmlAttribute)d.addAttribute(T,b);else if(D.flattened)f(d,b,D);else{var R=new w(T);d.addChildNode(R),g(R,D),f(R,b,D)}}})}(d,y,_);case"map":return function(d,y,_){var S=_.key.name||"key",D=_.value.name||"value";v.each(y,function(b,T){var R=new w(_.flattened?_.name:"entry");d.addChildNode(R);var q=new w(S),K=new w(D);R.addChildNode(q),R.addChildNode(K),f(q,b,_.key),f(K,T,_.value)})}(d,y,_);case"list":return function(d,y,_){v.arrayEach(y,_.flattened?function(S){var b=new w(_.member.name||_.name);d.addChildNode(b),f(b,S,_.member)}:function(S){var b=new w(_.member.name||"member");d.addChildNode(b),f(b,S,_.member)})}(d,y,_);default:return function(d,y,_){d.addChildNode(new E(_.toWireFormat(y)))}(d,y,_)}}function g(d,y,_){var S,D="xmlns";y.xmlNamespaceUri?(S=y.xmlNamespaceUri,y.xmlNamespacePrefix&&(D+=":"+y.xmlNamespacePrefix)):_&&y.api.xmlNamespaceUri&&(S=y.api.xmlNamespaceUri),S&&d.addAttribute(D,S)}m.prototype.toXML=function(d,y,_,S){var D=new w(_);return g(D,y,!0),f(D,d,y),D.children.length>0||S?D.toString():""},P.exports=m},{"../util":71,"./xml-node":76,"./xml-text":77}],74:[function(N,P,V){P.exports={escapeAttribute:function(w){return w.replace(/&/g,"&amp;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}},{}],75:[function(N,P,V){P.exports={escapeElement:function(w){return w.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}},{}],76:[function(N,P,V){var v=N("./escape-attribute").escapeAttribute;function w(E,m){void 0===m&&(m=[]),this.name=E,this.children=m,this.attributes={}}w.prototype.addAttribute=function(E,m){return this.attributes[E]=m,this},w.prototype.addChildNode=function(E){return this.children.push(E),this},w.prototype.removeAttribute=function(E){return delete this.attributes[E],this},w.prototype.toString=function(){for(var E=Boolean(this.children.length),m="<"+this.name,f=this.attributes,c=0,h=Object.keys(f);c<h.length;c++){var u=h[c],l=f[u];null!=l&&(m+=" "+u+'="'+v(""+l)+'"')}return m+(E?">"+this.children.map(function(g){return g.toString()}).join("")+"</"+this.name+">":"/>")},P.exports={XmlNode:w}},{"./escape-attribute":74}],77:[function(N,P,V){var v=N("./escape-element").escapeElement;function w(E){this.value=E}w.prototype.toString=function(){return v(""+this.value)},P.exports={XmlText:w}},{"./escape-element":75}],78:[function(N,P,V){"use strict";V.byteLength=function(S){var D=h(S),T=D[1];return 3*(D[0]+T)/4-T},V.toByteArray=function(S){var D,J,b=h(S),T=b[0],R=b[1],q=new E(function(S,D,b){return 3*(D+b)/4-b}(0,T,R)),K=0,U=R>0?T-4:T;for(J=0;J<U;J+=4)D=w[S.charCodeAt(J)]<<18|w[S.charCodeAt(J+1)]<<12|w[S.charCodeAt(J+2)]<<6|w[S.charCodeAt(J+3)],q[K++]=D>>16&255,q[K++]=D>>8&255,q[K++]=255&D;return 2===R&&(D=w[S.charCodeAt(J)]<<2|w[S.charCodeAt(J+1)]>>4,q[K++]=255&D),1===R&&(D=w[S.charCodeAt(J)]<<10|w[S.charCodeAt(J+1)]<<4|w[S.charCodeAt(J+2)]>>2,q[K++]=D>>8&255,q[K++]=255&D),q},V.fromByteArray=function(S){for(var D,b=S.length,T=b%3,R=[],q=16383,K=0,U=b-T;K<U;K+=q)R.push(y(S,K,K+q>U?U:K+q));return 1===T?R.push(v[(D=S[b-1])>>2]+v[D<<4&63]+"=="):2===T&&R.push(v[(D=(S[b-2]<<8)+S[b-1])>>10]+v[D>>4&63]+v[D<<2&63]+"="),R.join("")};for(var v=[],w=[],E="undefined"!=typeof Uint8Array?Uint8Array:Array,m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",f=0,c=m.length;f<c;++f)v[f]=m[f],w[m.charCodeAt(f)]=f;function h(S){var D=S.length;if(D%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=S.indexOf("=");return-1===b&&(b=D),[b,b===D?0:4-b%4]}function d(S){return v[S>>18&63]+v[S>>12&63]+v[S>>6&63]+v[63&S]}function y(S,D,b){for(var R=[],q=D;q<b;q+=3)R.push(d((S[q]<<16&16711680)+(S[q+1]<<8&65280)+(255&S[q+2])));return R.join("")}w["-".charCodeAt(0)]=62,w["_".charCodeAt(0)]=63},{}],79:[function(N,P,V){},{}],80:[function(N,P,V){(function(v){(function(){!function(w){var c,h=2147483647,u=36,b=/^xn--/,T=/[^\x20-\x7E]/,R=/[\x2E\u3002\uFF0E\uFF61]/g,q={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},U=Math.floor,J=String.fromCharCode;function se(Y){throw RangeError(q[Y])}function G(Y,ne){for(var Ce=Y.length,fe=[];Ce--;)fe[Ce]=ne(Y[Ce]);return fe}function pe(Y,ne){var Ce=Y.split("@"),fe="";return Ce.length>1&&(fe=Ce[0]+"@",Y=Ce[1]),fe+G((Y=Y.replace(R,".")).split("."),ne).join(".")}function Q(Y){for(var ye,be,ne=[],Ce=0,fe=Y.length;Ce<fe;)(ye=Y.charCodeAt(Ce++))>=55296&&ye<=56319&&Ce<fe?56320==(64512&(be=Y.charCodeAt(Ce++)))?ne.push(((1023&ye)<<10)+(1023&be)+65536):(ne.push(ye),Ce--):ne.push(ye);return ne}function ge(Y){return G(Y,function(ne){var Ce="";return ne>65535&&(Ce+=J((ne-=65536)>>>10&1023|55296),ne=56320|1023&ne),Ce+J(ne)}).join("")}function Pe(Y){return Y-48<10?Y-22:Y-65<26?Y-65:Y-97<26?Y-97:u}function Ne(Y,ne){return Y+22+75*(Y<26)-((0!=ne)<<5)}function He(Y,ne,Ce){var fe=0;for(Y=Ce?U(Y/700):Y>>1,Y+=U(Y/ne);Y>455;fe+=u)Y=U(Y/35);return U(fe+36*Y/(Y+38))}function xe(Y){var fe,Le,ot,it,et,ce,le,we,Re,Be,ne=[],Ce=Y.length,ye=0,be=128,Se=72;for((Le=Y.lastIndexOf("-"))<0&&(Le=0),ot=0;ot<Le;++ot)Y.charCodeAt(ot)>=128&&se("not-basic"),ne.push(Y.charCodeAt(ot));for(it=Le>0?Le+1:0;it<Ce;){for(et=ye,ce=1,le=u;it>=Ce&&se("invalid-input"),((we=Pe(Y.charCodeAt(it++)))>=u||we>U((h-ye)/ce))&&se("overflow"),ye+=we*ce,!(we<(Re=le<=Se?1:le>=Se+26?26:le-Se));le+=u)ce>U(h/(Be=u-Re))&&se("overflow"),ce*=Be;Se=He(ye-et,fe=ne.length+1,0==et),U(ye/fe)>h-be&&se("overflow"),be+=U(ye/fe),ye%=fe,ne.splice(ye++,0,be)}return ge(ne)}function te(Y){var ne,Ce,fe,ye,be,Se,Le,ot,it,et,ce,we,Re,Be,$e,le=[];for(we=(Y=Q(Y)).length,ne=128,Ce=0,be=72,Se=0;Se<we;++Se)(ce=Y[Se])<128&&le.push(J(ce));for(fe=ye=le.length,ye&&le.push("-");fe<we;){for(Le=h,Se=0;Se<we;++Se)(ce=Y[Se])>=ne&&ce<Le&&(Le=ce);for(Le-ne>U((h-Ce)/(Re=fe+1))&&se("overflow"),Ce+=(Le-ne)*Re,ne=Le,Se=0;Se<we;++Se)if((ce=Y[Se])<ne&&++Ce>h&&se("overflow"),ce==ne){for(ot=Ce,it=u;!(ot<(et=it<=be?1:it>=be+26?26:it-be));it+=u)le.push(J(Ne(et+($e=ot-et)%(Be=u-et),0))),ot=U($e/Be);le.push(J(Ne(ot,0))),be=He(Ce,Re,fe==ye),Ce=0,++fe}++Ce,++ne}return le.join("")}c={version:"1.3.2",ucs2:{decode:Q,encode:ge},decode:xe,encode:te,toASCII:function(Y){return pe(Y,function(ne){return T.test(ne)?"xn--"+te(ne):ne})},toUnicode:function(Y){return pe(Y,function(ne){return b.test(ne)?xe(ne.slice(4).toLowerCase()):ne})}},void 0!==(Dn=function(){return c}.call(V,eo,V,P))&&(P.exports=Dn)}()}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],81:[function(N,P,V){(function(v,w){(function(){"use strict";var E=N("base64-js"),m=N("ieee754"),f=N("isarray");function h(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(B,A){if(h()<A)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(B=new Uint8Array(A)).__proto__=l.prototype:(null===B&&(B=new l(A)),B.length=A),B}function l(B,A,x){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(B,A,x);if("number"==typeof B){if("string"==typeof A)throw new Error("If encoding is specified then the first argument must be a string");return _(this,B)}return g(this,B,A,x)}function g(B,A,x,H){if("number"==typeof A)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&A instanceof ArrayBuffer?function(B,A,x,H){if(x<0||A.byteLength<x)throw new RangeError("'offset' is out of bounds");if(A.byteLength<x+(H||0))throw new RangeError("'length' is out of bounds");return A=void 0===x&&void 0===H?new Uint8Array(A):void 0===H?new Uint8Array(A,x):new Uint8Array(A,x,H),l.TYPED_ARRAY_SUPPORT?(B=A).__proto__=l.prototype:B=D(B,A),B}(B,A,x,H):"string"==typeof A?function(B,A,x){if(("string"!=typeof x||""===x)&&(x="utf8"),!l.isEncoding(x))throw new TypeError('"encoding" must be a valid string encoding');var H=0|K(A,x),re=(B=u(B,H)).write(A,x);return re!==H&&(B=B.slice(0,re)),B}(B,A,x):function(B,A){if(l.isBuffer(A)){var x=0|R(A.length);return 0===(B=u(B,x)).length||A.copy(B,0,0,x),B}if(A){if("undefined"!=typeof ArrayBuffer&&A.buffer instanceof ArrayBuffer||"length"in A)return"number"!=typeof A.length||function(B){return B!=B}(A.length)?u(B,0):D(B,A);if("Buffer"===A.type&&f(A.data))return D(B,A.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(B,A)}function d(B){if("number"!=typeof B)throw new TypeError('"size" argument must be a number');if(B<0)throw new RangeError('"size" argument must not be negative')}function _(B,A){if(d(A),B=u(B,A<0?0:0|R(A)),!l.TYPED_ARRAY_SUPPORT)for(var x=0;x<A;++x)B[x]=0;return B}function D(B,A){var x=A.length<0?0:0|R(A.length);B=u(B,x);for(var H=0;H<x;H+=1)B[H]=255&A[H];return B}function R(B){if(B>=h())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+h().toString(16)+" bytes");return 0|B}function K(B,A){if(l.isBuffer(B))return B.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(B)||B instanceof ArrayBuffer))return B.byteLength;"string"!=typeof B&&(B=""+B);var x=B.length;if(0===x)return 0;for(var H=!1;;)switch(A){case"ascii":case"latin1":case"binary":return x;case"utf8":case"utf-8":case void 0:return Re(B).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*x;case"hex":return x>>>1;case"base64":return ct(B).length;default:if(H)return Re(B).length;A=(""+A).toLowerCase(),H=!0}}function U(B,A,x){var H=!1;if((void 0===A||A<0)&&(A=0),A>this.length||((void 0===x||x>this.length)&&(x=this.length),x<=0)||(x>>>=0)<=(A>>>=0))return"";for(B||(B="utf8");;)switch(B){case"hex":return ne(this,A,x);case"utf8":case"utf-8":return xe(this,A,x);case"ascii":return j(this,A,x);case"latin1":case"binary":return Y(this,A,x);case"base64":return He(this,A,x);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ce(this,A,x);default:if(H)throw new TypeError("Unknown encoding: "+B);B=(B+"").toLowerCase(),H=!0}}function J(B,A,x){var H=B[A];B[A]=B[x],B[x]=H}function z(B,A,x,H,re){if(0===B.length)return-1;if("string"==typeof x?(H=x,x=0):x>2147483647?x=2147483647:x<-2147483648&&(x=-2147483648),x=+x,isNaN(x)&&(x=re?0:B.length-1),x<0&&(x=B.length+x),x>=B.length){if(re)return-1;x=B.length-1}else if(x<0){if(!re)return-1;x=0}if("string"==typeof A&&(A=l.from(A,H)),l.isBuffer(A))return 0===A.length?-1:se(B,A,x,H,re);if("number"==typeof A)return A&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?re?Uint8Array.prototype.indexOf.call(B,A,x):Uint8Array.prototype.lastIndexOf.call(B,A,x):se(B,[A],x,H,re);throw new TypeError("val must be string, number or Buffer")}function se(B,A,x,H,re){var ee,he=1,O=B.length,L=A.length;if(void 0!==H&&("ucs2"===(H=String(H).toLowerCase())||"ucs-2"===H||"utf16le"===H||"utf-16le"===H)){if(B.length<2||A.length<2)return-1;he=2,O/=2,L/=2,x/=2}function W(Ze,pt){return 1===he?Ze[pt]:Ze.readUInt16BE(pt*he)}if(re){var ae=-1;for(ee=x;ee<O;ee++)if(W(B,ee)===W(A,-1===ae?0:ee-ae)){if(-1===ae&&(ae=ee),ee-ae+1===L)return ae*he}else-1!==ae&&(ee-=ee-ae),ae=-1}else for(x+L>O&&(x=O-L),ee=x;ee>=0;ee--){for(var Ee=!0,Fe=0;Fe<L;Fe++)if(W(B,ee+Fe)!==W(A,Fe)){Ee=!1;break}if(Ee)return ee}return-1}function G(B,A,x,H){x=Number(x)||0;var re=B.length-x;H?(H=Number(H))>re&&(H=re):H=re;var he=A.length;if(he%2!=0)throw new TypeError("Invalid hex string");H>he/2&&(H=he/2);for(var O=0;O<H;++O){var L=parseInt(A.substr(2*O,2),16);if(isNaN(L))return O;B[x+O]=L}return O}function pe(B,A,x,H){return xt(Re(A,B.length-x),B,x,H)}function Q(B,A,x,H){return xt(function(B){for(var A=[],x=0;x<B.length;++x)A.push(255&B.charCodeAt(x));return A}(A),B,x,H)}function ge(B,A,x,H){return Q(B,A,x,H)}function Pe(B,A,x,H){return xt(ct(A),B,x,H)}function Ne(B,A,x,H){return xt(function(B,A){for(var x,H,he=[],O=0;O<B.length&&!((A-=2)<0);++O)H=(x=B.charCodeAt(O))>>8,he.push(x%256),he.push(H);return he}(A,B.length-x),B,x,H)}function He(B,A,x){return E.fromByteArray(0===A&&x===B.length?B:B.slice(A,x))}function xe(B,A,x){x=Math.min(B.length,x);for(var H=[],re=A;re<x;){var W,ee,ae,Ee,he=B[re],O=null,L=he>239?4:he>223?3:he>191?2:1;if(re+L<=x)switch(L){case 1:he<128&&(O=he);break;case 2:128==(192&(W=B[re+1]))&&(Ee=(31&he)<<6|63&W)>127&&(O=Ee);break;case 3:ee=B[re+2],128==(192&(W=B[re+1]))&&128==(192&ee)&&(Ee=(15&he)<<12|(63&W)<<6|63&ee)>2047&&(Ee<55296||Ee>57343)&&(O=Ee);break;case 4:ee=B[re+2],ae=B[re+3],128==(192&(W=B[re+1]))&&128==(192&ee)&&128==(192&ae)&&(Ee=(15&he)<<18|(63&W)<<12|(63&ee)<<6|63&ae)>65535&&Ee<1114112&&(O=Ee)}null===O?(O=65533,L=1):O>65535&&(H.push((O-=65536)>>>10&1023|55296),O=56320|1023&O),H.push(O),re+=L}return function(B){var A=B.length;if(A<=4096)return String.fromCharCode.apply(String,B);for(var x="",H=0;H<A;)x+=String.fromCharCode.apply(String,B.slice(H,H+=4096));return x}(H)}function j(B,A,x){var H="";x=Math.min(B.length,x);for(var re=A;re<x;++re)H+=String.fromCharCode(127&B[re]);return H}function Y(B,A,x){var H="";x=Math.min(B.length,x);for(var re=A;re<x;++re)H+=String.fromCharCode(B[re]);return H}function ne(B,A,x){var H=B.length;(!A||A<0)&&(A=0),(!x||x<0||x>H)&&(x=H);for(var re="",he=A;he<x;++he)re+=we(B[he]);return re}function Ce(B,A,x){for(var H=B.slice(A,x),re="",he=0;he<H.length;he+=2)re+=String.fromCharCode(H[he]+256*H[he+1]);return re}function fe(B,A,x){if(B%1!=0||B<0)throw new RangeError("offset is not uint");if(B+A>x)throw new RangeError("Trying to access beyond buffer length")}function ye(B,A,x,H,re,he){if(!l.isBuffer(B))throw new TypeError('"buffer" argument must be a Buffer instance');if(A>re||A<he)throw new RangeError('"value" argument is out of bounds');if(x+H>B.length)throw new RangeError("Index out of range")}function be(B,A,x,H){A<0&&(A=65535+A+1);for(var re=0,he=Math.min(B.length-x,2);re<he;++re)B[x+re]=(A&255<<8*(H?re:1-re))>>>8*(H?re:1-re)}function Se(B,A,x,H){A<0&&(A=4294967295+A+1);for(var re=0,he=Math.min(B.length-x,4);re<he;++re)B[x+re]=A>>>8*(H?re:3-re)&255}function Le(B,A,x,H,re,he){if(x+H>B.length)throw new RangeError("Index out of range");if(x<0)throw new RangeError("Index out of range")}function ot(B,A,x,H,re){return re||Le(B,0,x,4),m.write(B,A,x,H,23,4),x+4}function it(B,A,x,H,re){return re||Le(B,0,x,8),m.write(B,A,x,H,52,8),x+8}V.Buffer=l,V.SlowBuffer=function(B){return+B!=B&&(B=0),l.alloc(+B)},V.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==v.TYPED_ARRAY_SUPPORT?v.TYPED_ARRAY_SUPPORT:function(){try{var B=new Uint8Array(1);return B.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===B.foo()&&"function"==typeof B.subarray&&0===B.subarray(1,1).byteLength}catch(A){return!1}}(),V.kMaxLength=h(),l.poolSize=8192,l._augment=function(B){return B.__proto__=l.prototype,B},l.from=function(B,A,x){return g(null,B,A,x)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(B,A,x){return function(B,A,x,H){return d(A),A<=0?u(B,A):void 0!==x?"string"==typeof H?u(B,A).fill(x,H):u(B,A).fill(x):u(B,A)}(null,B,A,x)},l.allocUnsafe=function(B){return _(null,B)},l.allocUnsafeSlow=function(B){return _(null,B)},l.isBuffer=function(A){return!(null==A||!A._isBuffer)},l.compare=function(A,x){if(!l.isBuffer(A)||!l.isBuffer(x))throw new TypeError("Arguments must be Buffers");if(A===x)return 0;for(var H=A.length,re=x.length,he=0,O=Math.min(H,re);he<O;++he)if(A[he]!==x[he]){H=A[he],re=x[he];break}return H<re?-1:re<H?1:0},l.isEncoding=function(A){switch(String(A).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(A,x){if(!f(A))throw new TypeError('"list" argument must be an Array of Buffers');if(0===A.length)return l.alloc(0);var H;if(void 0===x)for(x=0,H=0;H<A.length;++H)x+=A[H].length;var re=l.allocUnsafe(x),he=0;for(H=0;H<A.length;++H){var O=A[H];if(!l.isBuffer(O))throw new TypeError('"list" argument must be an Array of Buffers');O.copy(re,he),he+=O.length}return re},l.byteLength=K,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var A=this.length;if(A%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var x=0;x<A;x+=2)J(this,x,x+1);return this},l.prototype.swap32=function(){var A=this.length;if(A%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var x=0;x<A;x+=4)J(this,x,x+3),J(this,x+1,x+2);return this},l.prototype.swap64=function(){var A=this.length;if(A%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var x=0;x<A;x+=8)J(this,x,x+7),J(this,x+1,x+6),J(this,x+2,x+5),J(this,x+3,x+4);return this},l.prototype.toString=function(){var A=0|this.length;return 0===A?"":0===arguments.length?xe(this,0,A):U.apply(this,arguments)},l.prototype.equals=function(A){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");return this===A||0===l.compare(this,A)},l.prototype.inspect=function(){var A="",x=V.INSPECT_MAX_BYTES;return this.length>0&&(A=this.toString("hex",0,x).match(/.{2}/g).join(" "),this.length>x&&(A+=" ... ")),"<Buffer "+A+">"},l.prototype.compare=function(A,x,H,re,he){if(!l.isBuffer(A))throw new TypeError("Argument must be a Buffer");if(void 0===x&&(x=0),void 0===H&&(H=A?A.length:0),void 0===re&&(re=0),void 0===he&&(he=this.length),x<0||H>A.length||re<0||he>this.length)throw new RangeError("out of range index");if(re>=he&&x>=H)return 0;if(re>=he)return-1;if(x>=H)return 1;if(this===A)return 0;for(var O=(he>>>=0)-(re>>>=0),L=(H>>>=0)-(x>>>=0),W=Math.min(O,L),ee=this.slice(re,he),ae=A.slice(x,H),Ee=0;Ee<W;++Ee)if(ee[Ee]!==ae[Ee]){O=ee[Ee],L=ae[Ee];break}return O<L?-1:L<O?1:0},l.prototype.includes=function(A,x,H){return-1!==this.indexOf(A,x,H)},l.prototype.indexOf=function(A,x,H){return z(this,A,x,H,!0)},l.prototype.lastIndexOf=function(A,x,H){return z(this,A,x,H,!1)},l.prototype.write=function(A,x,H,re){if(void 0===x)re="utf8",H=this.length,x=0;else if(void 0===H&&"string"==typeof x)re=x,H=this.length,x=0;else{if(!isFinite(x))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");x|=0,isFinite(H)?(H|=0,void 0===re&&(re="utf8")):(re=H,H=void 0)}var he=this.length-x;if((void 0===H||H>he)&&(H=he),A.length>0&&(H<0||x<0)||x>this.length)throw new RangeError("Attempt to write outside buffer bounds");re||(re="utf8");for(var O=!1;;)switch(re){case"hex":return G(this,A,x,H);case"utf8":case"utf-8":return pe(this,A,x,H);case"ascii":return Q(this,A,x,H);case"latin1":case"binary":return ge(this,A,x,H);case"base64":return Pe(this,A,x,H);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ne(this,A,x,H);default:if(O)throw new TypeError("Unknown encoding: "+re);re=(""+re).toLowerCase(),O=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},l.prototype.slice=function(A,x){var re,H=this.length;if((A=~~A)<0?(A+=H)<0&&(A=0):A>H&&(A=H),(x=void 0===x?H:~~x)<0?(x+=H)<0&&(x=0):x>H&&(x=H),x<A&&(x=A),l.TYPED_ARRAY_SUPPORT)(re=this.subarray(A,x)).__proto__=l.prototype;else{var he=x-A;re=new l(he,void 0);for(var O=0;O<he;++O)re[O]=this[O+A]}return re},l.prototype.readUIntLE=function(A,x,H){A|=0,x|=0,H||fe(A,x,this.length);for(var re=this[A],he=1,O=0;++O<x&&(he*=256);)re+=this[A+O]*he;return re},l.prototype.readUIntBE=function(A,x,H){A|=0,x|=0,H||fe(A,x,this.length);for(var re=this[A+--x],he=1;x>0&&(he*=256);)re+=this[A+--x]*he;return re},l.prototype.readUInt8=function(A,x){return x||fe(A,1,this.length),this[A]},l.prototype.readUInt16LE=function(A,x){return x||fe(A,2,this.length),this[A]|this[A+1]<<8},l.prototype.readUInt16BE=function(A,x){return x||fe(A,2,this.length),this[A]<<8|this[A+1]},l.prototype.readUInt32LE=function(A,x){return x||fe(A,4,this.length),(this[A]|this[A+1]<<8|this[A+2]<<16)+16777216*this[A+3]},l.prototype.readUInt32BE=function(A,x){return x||fe(A,4,this.length),16777216*this[A]+(this[A+1]<<16|this[A+2]<<8|this[A+3])},l.prototype.readIntLE=function(A,x,H){A|=0,x|=0,H||fe(A,x,this.length);for(var re=this[A],he=1,O=0;++O<x&&(he*=256);)re+=this[A+O]*he;return re>=(he*=128)&&(re-=Math.pow(2,8*x)),re},l.prototype.readIntBE=function(A,x,H){A|=0,x|=0,H||fe(A,x,this.length);for(var re=x,he=1,O=this[A+--re];re>0&&(he*=256);)O+=this[A+--re]*he;return O>=(he*=128)&&(O-=Math.pow(2,8*x)),O},l.prototype.readInt8=function(A,x){return x||fe(A,1,this.length),128&this[A]?-1*(255-this[A]+1):this[A]},l.prototype.readInt16LE=function(A,x){x||fe(A,2,this.length);var H=this[A]|this[A+1]<<8;return 32768&H?4294901760|H:H},l.prototype.readInt16BE=function(A,x){x||fe(A,2,this.length);var H=this[A+1]|this[A]<<8;return 32768&H?4294901760|H:H},l.prototype.readInt32LE=function(A,x){return x||fe(A,4,this.length),this[A]|this[A+1]<<8|this[A+2]<<16|this[A+3]<<24},l.prototype.readInt32BE=function(A,x){return x||fe(A,4,this.length),this[A]<<24|this[A+1]<<16|this[A+2]<<8|this[A+3]},l.prototype.readFloatLE=function(A,x){return x||fe(A,4,this.length),m.read(this,A,!0,23,4)},l.prototype.readFloatBE=function(A,x){return x||fe(A,4,this.length),m.read(this,A,!1,23,4)},l.prototype.readDoubleLE=function(A,x){return x||fe(A,8,this.length),m.read(this,A,!0,52,8)},l.prototype.readDoubleBE=function(A,x){return x||fe(A,8,this.length),m.read(this,A,!1,52,8)},l.prototype.writeUIntLE=function(A,x,H,re){A=+A,x|=0,H|=0,re||ye(this,A,x,H,Math.pow(2,8*H)-1,0);var O=1,L=0;for(this[x]=255&A;++L<H&&(O*=256);)this[x+L]=A/O&255;return x+H},l.prototype.writeUIntBE=function(A,x,H,re){A=+A,x|=0,H|=0,re||ye(this,A,x,H,Math.pow(2,8*H)-1,0);var O=H-1,L=1;for(this[x+O]=255&A;--O>=0&&(L*=256);)this[x+O]=A/L&255;return x+H},l.prototype.writeUInt8=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,1,255,0),l.TYPED_ARRAY_SUPPORT||(A=Math.floor(A)),this[x]=255&A,x+1},l.prototype.writeUInt16LE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[x]=255&A,this[x+1]=A>>>8):be(this,A,x,!0),x+2},l.prototype.writeUInt16BE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[x]=A>>>8,this[x+1]=255&A):be(this,A,x,!1),x+2},l.prototype.writeUInt32LE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[x+3]=A>>>24,this[x+2]=A>>>16,this[x+1]=A>>>8,this[x]=255&A):Se(this,A,x,!0),x+4},l.prototype.writeUInt32BE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[x]=A>>>24,this[x+1]=A>>>16,this[x+2]=A>>>8,this[x+3]=255&A):Se(this,A,x,!1),x+4},l.prototype.writeIntLE=function(A,x,H,re){if(A=+A,x|=0,!re){var he=Math.pow(2,8*H-1);ye(this,A,x,H,he-1,-he)}var O=0,L=1,W=0;for(this[x]=255&A;++O<H&&(L*=256);)A<0&&0===W&&0!==this[x+O-1]&&(W=1),this[x+O]=(A/L>>0)-W&255;return x+H},l.prototype.writeIntBE=function(A,x,H,re){if(A=+A,x|=0,!re){var he=Math.pow(2,8*H-1);ye(this,A,x,H,he-1,-he)}var O=H-1,L=1,W=0;for(this[x+O]=255&A;--O>=0&&(L*=256);)A<0&&0===W&&0!==this[x+O+1]&&(W=1),this[x+O]=(A/L>>0)-W&255;return x+H},l.prototype.writeInt8=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,1,127,-128),l.TYPED_ARRAY_SUPPORT||(A=Math.floor(A)),A<0&&(A=255+A+1),this[x]=255&A,x+1},l.prototype.writeInt16LE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[x]=255&A,this[x+1]=A>>>8):be(this,A,x,!0),x+2},l.prototype.writeInt16BE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[x]=A>>>8,this[x+1]=255&A):be(this,A,x,!1),x+2},l.prototype.writeInt32LE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[x]=255&A,this[x+1]=A>>>8,this[x+2]=A>>>16,this[x+3]=A>>>24):Se(this,A,x,!0),x+4},l.prototype.writeInt32BE=function(A,x,H){return A=+A,x|=0,H||ye(this,A,x,4,2147483647,-2147483648),A<0&&(A=4294967295+A+1),l.TYPED_ARRAY_SUPPORT?(this[x]=A>>>24,this[x+1]=A>>>16,this[x+2]=A>>>8,this[x+3]=255&A):Se(this,A,x,!1),x+4},l.prototype.writeFloatLE=function(A,x,H){return ot(this,A,x,!0,H)},l.prototype.writeFloatBE=function(A,x,H){return ot(this,A,x,!1,H)},l.prototype.writeDoubleLE=function(A,x,H){return it(this,A,x,!0,H)},l.prototype.writeDoubleBE=function(A,x,H){return it(this,A,x,!1,H)},l.prototype.copy=function(A,x,H,re){if(H||(H=0),!re&&0!==re&&(re=this.length),x>=A.length&&(x=A.length),x||(x=0),re>0&&re<H&&(re=H),re===H||0===A.length||0===this.length)return 0;if(x<0)throw new RangeError("targetStart out of bounds");if(H<0||H>=this.length)throw new RangeError("sourceStart out of bounds");if(re<0)throw new RangeError("sourceEnd out of bounds");re>this.length&&(re=this.length),A.length-x<re-H&&(re=A.length-x+H);var O,he=re-H;if(this===A&&H<x&&x<re)for(O=he-1;O>=0;--O)A[O+x]=this[O+H];else if(he<1e3||!l.TYPED_ARRAY_SUPPORT)for(O=0;O<he;++O)A[O+x]=this[O+H];else Uint8Array.prototype.set.call(A,this.subarray(H,H+he),x);return he},l.prototype.fill=function(A,x,H,re){if("string"==typeof A){if("string"==typeof x?(re=x,x=0,H=this.length):"string"==typeof H&&(re=H,H=this.length),1===A.length){var he=A.charCodeAt(0);he<256&&(A=he)}if(void 0!==re&&"string"!=typeof re)throw new TypeError("encoding must be a string");if("string"==typeof re&&!l.isEncoding(re))throw new TypeError("Unknown encoding: "+re)}else"number"==typeof A&&(A&=255);if(x<0||this.length<x||this.length<H)throw new RangeError("Out of range index");if(H<=x)return this;var O;if(x>>>=0,H=void 0===H?this.length:H>>>0,A||(A=0),"number"==typeof A)for(O=x;O<H;++O)this[O]=A;else{var L=l.isBuffer(A)?A:Re(new l(A,re).toString()),W=L.length;for(O=0;O<H-x;++O)this[O+x]=L[O%W]}return this};var et=/[^+\/0-9A-Za-z-_]/g;function we(B){return B<16?"0"+B.toString(16):B.toString(16)}function Re(B,A){A=A||1/0;for(var x,H=B.length,re=null,he=[],O=0;O<H;++O){if((x=B.charCodeAt(O))>55295&&x<57344){if(!re){if(x>56319){(A-=3)>-1&&he.push(239,191,189);continue}if(O+1===H){(A-=3)>-1&&he.push(239,191,189);continue}re=x;continue}if(x<56320){(A-=3)>-1&&he.push(239,191,189),re=x;continue}x=65536+(re-55296<<10|x-56320)}else re&&(A-=3)>-1&&he.push(239,191,189);if(re=null,x<128){if((A-=1)<0)break;he.push(x)}else if(x<2048){if((A-=2)<0)break;he.push(x>>6|192,63&x|128)}else if(x<65536){if((A-=3)<0)break;he.push(x>>12|224,x>>6&63|128,63&x|128)}else{if(!(x<1114112))throw new Error("Invalid code point");if((A-=4)<0)break;he.push(x>>18|240,x>>12&63|128,x>>6&63|128,63&x|128)}}return he}function ct(B){return E.toByteArray(function(B){if((B=function(B){return B.trim?B.trim():B.replace(/^\s+|\s+$/g,"")}(B).replace(et,"")).length<2)return"";for(;B.length%4!=0;)B+="=";return B}(B))}function xt(B,A,x,H){for(var re=0;re<H&&!(re+x>=A.length||re>=B.length);++re)A[re+x]=B[re];return re}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},N("buffer").Buffer)},{"base64-js":78,buffer:81,ieee754:83,isarray:84}],82:[function(N,P,V){function v(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function w(c){return"function"==typeof c}function m(c){return"object"==typeof c&&null!==c}function f(c){return void 0===c}P.exports=v,v.EventEmitter=v,v.prototype._events=void 0,v.prototype._maxListeners=void 0,v.defaultMaxListeners=10,v.prototype.setMaxListeners=function(c){if(!function(c){return"number"==typeof c}(c)||c<0||isNaN(c))throw TypeError("n must be a positive number");return this._maxListeners=c,this},v.prototype.emit=function(c){var h,u,l,g,d,y;if(this._events||(this._events={}),"error"===c&&(!this._events.error||m(this._events.error)&&!this._events.error.length)){if((h=arguments[1])instanceof Error)throw h;var _=new Error('Uncaught, unspecified "error" event. ('+h+")");throw _.context=h,_}if(f(u=this._events[c]))return!1;if(w(u))switch(arguments.length){case 1:u.call(this);break;case 2:u.call(this,arguments[1]);break;case 3:u.call(this,arguments[1],arguments[2]);break;default:g=Array.prototype.slice.call(arguments,1),u.apply(this,g)}else if(m(u))for(g=Array.prototype.slice.call(arguments,1),l=(y=u.slice()).length,d=0;d<l;d++)y[d].apply(this,g);return!0},v.prototype.on=v.prototype.addListener=function(c,h){var u;if(!w(h))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",c,w(h.listener)?h.listener:h),this._events[c]?m(this._events[c])?this._events[c].push(h):this._events[c]=[this._events[c],h]:this._events[c]=h,m(this._events[c])&&!this._events[c].warned&&(u=f(this._maxListeners)?v.defaultMaxListeners:this._maxListeners)&&u>0&&this._events[c].length>u&&(this._events[c].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[c].length),"function"==typeof console.trace&&console.trace()),this},v.prototype.once=function(c,h){if(!w(h))throw TypeError("listener must be a function");var u=!1;function l(){this.removeListener(c,l),u||(u=!0,h.apply(this,arguments))}return l.listener=h,this.on(c,l),this},v.prototype.removeListener=function(c,h){var u,l,g,d;if(!w(h))throw TypeError("listener must be a function");if(!this._events||!this._events[c])return this;if(g=(u=this._events[c]).length,l=-1,u===h||w(u.listener)&&u.listener===h)delete this._events[c],this._events.removeListener&&this.emit("removeListener",c,h);else if(m(u)){for(d=g;d-- >0;)if(u[d]===h||u[d].listener&&u[d].listener===h){l=d;break}if(l<0)return this;1===u.length?(u.length=0,delete this._events[c]):u.splice(l,1),this._events.removeListener&&this.emit("removeListener",c,h)}return this},v.prototype.removeAllListeners=function(c){var h,u;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[c]&&delete this._events[c],this;if(0===arguments.length){for(h in this._events)"removeListener"!==h&&this.removeAllListeners(h);return this.removeAllListeners("removeListener"),this._events={},this}if(w(u=this._events[c]))this.removeListener(c,u);else if(u)for(;u.length;)this.removeListener(c,u[u.length-1]);return delete this._events[c],this},v.prototype.listeners=function(c){return this._events&&this._events[c]?w(this._events[c])?[this._events[c]]:this._events[c].slice():[]},v.prototype.listenerCount=function(c){if(this._events){var h=this._events[c];if(w(h))return 1;if(h)return h.length}return 0},v.listenerCount=function(c,h){return c.listenerCount(h)}},{}],83:[function(N,P,V){V.read=function(v,w,E,m,f){var c,h,u=8*f-m-1,l=(1<<u)-1,g=l>>1,d=-7,y=E?f-1:0,_=E?-1:1,S=v[w+y];for(y+=_,c=S&(1<<-d)-1,S>>=-d,d+=u;d>0;c=256*c+v[w+y],y+=_,d-=8);for(h=c&(1<<-d)-1,c>>=-d,d+=m;d>0;h=256*h+v[w+y],y+=_,d-=8);if(0===c)c=1-g;else{if(c===l)return h?NaN:1/0*(S?-1:1);h+=Math.pow(2,m),c-=g}return(S?-1:1)*h*Math.pow(2,c-m)},V.write=function(v,w,E,m,f,c){var h,u,l,g=8*c-f-1,d=(1<<g)-1,y=d>>1,_=23===f?Math.pow(2,-24)-Math.pow(2,-77):0,S=m?0:c-1,D=m?1:-1,b=w<0||0===w&&1/w<0?1:0;for(w=Math.abs(w),isNaN(w)||w===1/0?(u=isNaN(w)?1:0,h=d):(h=Math.floor(Math.log(w)/Math.LN2),w*(l=Math.pow(2,-h))<1&&(h--,l*=2),(w+=h+y>=1?_/l:_*Math.pow(2,1-y))*l>=2&&(h++,l/=2),h+y>=d?(u=0,h=d):h+y>=1?(u=(w*l-1)*Math.pow(2,f),h+=y):(u=w*Math.pow(2,y-1)*Math.pow(2,f),h=0));f>=8;v[E+S]=255&u,S+=D,u/=256,f-=8);for(h=h<<f|u,g+=f;g>0;v[E+S]=255&h,S+=D,h/=256,g-=8);v[E+S-D]|=128*b}},{}],84:[function(N,P,V){var v={}.toString;P.exports=Array.isArray||function(w){return"[object Array]"==v.call(w)}},{}],85:[function(N,P,V){!function(v){"use strict";function w(O){return null!==O&&"[object Array]"===Object.prototype.toString.call(O)}function E(O){return null!==O&&"[object Object]"===Object.prototype.toString.call(O)}function m(O,L){if(O===L)return!0;if(Object.prototype.toString.call(O)!==Object.prototype.toString.call(L))return!1;if(!0===w(O)){if(O.length!==L.length)return!1;for(var ee=0;ee<O.length;ee++)if(!1===m(O[ee],L[ee]))return!1;return!0}if(!0===E(O)){var ae={};for(var Ee in O)if(hasOwnProperty.call(O,Ee)){if(!1===m(O[Ee],L[Ee]))return!1;ae[Ee]=!0}for(var Fe in L)if(hasOwnProperty.call(L,Fe)&&!0!==ae[Fe])return!1;return!0}return!1}function f(O){if(""===O||!1===O||null===O)return!0;if(w(O)&&0===O.length)return!0;if(E(O)){for(var L in O)if(O.hasOwnProperty(L))return!1;return!0}return!1}var u;u="function"==typeof String.prototype.trimLeft?function(O){return O.trimLeft()}:function(O){return O.match(/^\s*(.*)/)[1]};var l=0,d=2,q="EOF",K="UnquotedIdentifier",U="QuotedIdentifier",J="Rbracket",z="Rparen",se="Comma",G="Colon",pe="Rbrace",Q="Number",ge="Current",Pe="Expref",Ne="Pipe",j="LT",Y="GTE",fe="Flatten",ye="Star",be="Filter",Se="Dot",ot="Lbrace",it="Lbracket",et="Lparen",ce="Literal",le={".":Se,"*":ye,",":se,":":G,"{":ot,"}":pe,"]":J,"(":et,")":z,"@":ge},we={"<":!0,">":!0,"=":!0,"!":!0},Re={" ":!0,"\t":!0,"\n":!0};function Be(O){return O>="a"&&O<="z"||O>="A"&&O<="Z"||"_"===O}function $e(O){return O>="0"&&O<="9"||"-"===O}function ct(O){return O>="a"&&O<="z"||O>="A"&&O<="Z"||O>="0"&&O<="9"||"_"===O}function xt(){}xt.prototype={tokenize:function(O){var W,ee,ae,L=[];for(this._current=0;this._current<O.length;)if(Be(O[this._current]))W=this._current,ee=this._consumeUnquotedIdentifier(O),L.push({type:K,value:ee,start:W});else if(void 0!==le[O[this._current]])L.push({type:le[O[this._current]],value:O[this._current],start:this._current}),this._current++;else if($e(O[this._current]))ae=this._consumeNumber(O),L.push(ae);else if("["===O[this._current])ae=this._consumeLBracket(O),L.push(ae);else if('"'===O[this._current])W=this._current,ee=this._consumeQuotedIdentifier(O),L.push({type:U,value:ee,start:W});else if("'"===O[this._current])W=this._current,ee=this._consumeRawStringLiteral(O),L.push({type:ce,value:ee,start:W});else if("`"===O[this._current]){W=this._current;var Ee=this._consumeLiteral(O);L.push({type:ce,value:Ee,start:W})}else if(void 0!==we[O[this._current]])L.push(this._consumeOperator(O));else if(void 0!==Re[O[this._current]])this._current++;else if("&"===O[this._current])W=this._current,this._current++,"&"===O[this._current]?(this._current++,L.push({type:"And",value:"&&",start:W})):L.push({type:Pe,value:"&",start:W});else{if("|"!==O[this._current]){var Fe=new Error("Unknown character:"+O[this._current]);throw Fe.name="LexerError",Fe}W=this._current,this._current++,"|"===O[this._current]?(this._current++,L.push({type:"Or",value:"||",start:W})):L.push({type:Ne,value:"|",start:W})}return L},_consumeUnquotedIdentifier:function(O){var L=this._current;for(this._current++;this._current<O.length&&ct(O[this._current]);)this._current++;return O.slice(L,this._current)},_consumeQuotedIdentifier:function(O){var L=this._current;this._current++;for(var W=O.length;'"'!==O[this._current]&&this._current<W;){var ee=this._current;"\\"!==O[ee]||"\\"!==O[ee+1]&&'"'!==O[ee+1]?ee++:ee+=2,this._current=ee}return this._current++,JSON.parse(O.slice(L,this._current))},_consumeRawStringLiteral:function(O){var L=this._current;this._current++;for(var W=O.length;"'"!==O[this._current]&&this._current<W;){var ee=this._current;"\\"!==O[ee]||"\\"!==O[ee+1]&&"'"!==O[ee+1]?ee++:ee+=2,this._current=ee}return this._current++,O.slice(L+1,this._current-1).replace("\\'","'")},_consumeNumber:function(O){var L=this._current;this._current++;for(var W=O.length;$e(O[this._current])&&this._current<W;)this._current++;var ee=parseInt(O.slice(L,this._current));return{type:Q,value:ee,start:L}},_consumeLBracket:function(O){var L=this._current;return this._current++,"?"===O[this._current]?(this._current++,{type:be,value:"[?",start:L}):"]"===O[this._current]?(this._current++,{type:fe,value:"[]",start:L}):{type:it,value:"[",start:L}},_consumeOperator:function(O){var L=this._current,W=O[L];return this._current++,"!"===W?"="===O[this._current]?(this._current++,{type:"NE",value:"!=",start:L}):{type:"Not",value:"!",start:L}:"<"===W?"="===O[this._current]?(this._current++,{type:"LTE",value:"<=",start:L}):{type:j,value:"<",start:L}:">"===W?"="===O[this._current]?(this._current++,{type:Y,value:">=",start:L}):{type:"GT",value:">",start:L}:"="===W&&"="===O[this._current]?(this._current++,{type:"EQ",value:"==",start:L}):void 0},_consumeLiteral:function(O){this._current++;for(var ee,L=this._current,W=O.length;"`"!==O[this._current]&&this._current<W;){var ae=this._current;"\\"!==O[ae]||"\\"!==O[ae+1]&&"`"!==O[ae+1]?ae++:ae+=2,this._current=ae}var Ee=u(O.slice(L,this._current));return Ee=Ee.replace("\\`","`"),ee=this._looksLikeJSON(Ee)?JSON.parse(Ee):JSON.parse('"'+Ee+'"'),this._current++,ee},_looksLikeJSON:function(O){if(""===O)return!1;if('[{"'.indexOf(O[0])>=0)return!0;if(["true","false","null"].indexOf(O)>=0)return!0;if(!("-0123456789".indexOf(O[0])>=0))return!1;try{return JSON.parse(O),!0}catch(ae){return!1}}};var ke={};function B(){}function A(O){this.runtime=O}function x(O){this._interpreter=O,this.functionTable={abs:{_func:this._functionAbs,_signature:[{types:[l]}]},avg:{_func:this._functionAvg,_signature:[{types:[8]}]},ceil:{_func:this._functionCeil,_signature:[{types:[l]}]},contains:{_func:this._functionContains,_signature:[{types:[d,3]},{types:[1]}]},ends_with:{_func:this._functionEndsWith,_signature:[{types:[d]},{types:[d]}]},floor:{_func:this._functionFloor,_signature:[{types:[l]}]},length:{_func:this._functionLength,_signature:[{types:[d,3,4]}]},map:{_func:this._functionMap,_signature:[{types:[6]},{types:[3]}]},max:{_func:this._functionMax,_signature:[{types:[8,9]}]},merge:{_func:this._functionMerge,_signature:[{types:[4],variadic:!0}]},max_by:{_func:this._functionMaxBy,_signature:[{types:[3]},{types:[6]}]},sum:{_func:this._functionSum,_signature:[{types:[8]}]},starts_with:{_func:this._functionStartsWith,_signature:[{types:[d]},{types:[d]}]},min:{_func:this._functionMin,_signature:[{types:[8,9]}]},min_by:{_func:this._functionMinBy,_signature:[{types:[3]},{types:[6]}]},type:{_func:this._functionType,_signature:[{types:[1]}]},keys:{_func:this._functionKeys,_signature:[{types:[4]}]},values:{_func:this._functionValues,_signature:[{types:[4]}]},sort:{_func:this._functionSort,_signature:[{types:[9,8]}]},sort_by:{_func:this._functionSortBy,_signature:[{types:[3]},{types:[6]}]},join:{_func:this._functionJoin,_signature:[{types:[d]},{types:[9]}]},reverse:{_func:this._functionReverse,_signature:[{types:[d,3]}]},to_array:{_func:this._functionToArray,_signature:[{types:[1]}]},to_string:{_func:this._functionToString,_signature:[{types:[1]}]},to_number:{_func:this._functionToNumber,_signature:[{types:[1]}]},not_null:{_func:this._functionNotNull,_signature:[{types:[1],variadic:!0}]}}}ke[q]=0,ke[K]=0,ke[U]=0,ke[J]=0,ke[z]=0,ke[se]=0,ke[pe]=0,ke[Q]=0,ke[ge]=0,ke[Pe]=0,ke[Ne]=1,ke.Or=2,ke.And=3,ke.EQ=5,ke.GT=5,ke.LT=5,ke[Y]=5,ke.LTE=5,ke.NE=5,ke[fe]=9,ke[ye]=20,ke[be]=21,ke.Dot=40,ke.Not=45,ke[ot]=50,ke[it]=55,ke[et]=60,B.prototype={parse:function(O){this._loadTokens(O),this.index=0;var L=this.expression(0);if(this._lookahead(0)!==q){var W=this._lookaheadToken(0),ee=new Error("Unexpected token type: "+W.type+", value: "+W.value);throw ee.name="ParserError",ee}return L},_loadTokens:function(O){var W=(new xt).tokenize(O);W.push({type:q,value:"",start:O.length}),this.tokens=W},expression:function(O){var L=this._lookaheadToken(0);this._advance();for(var W=this.nud(L),ee=this._lookahead(0);O<ke[ee];)this._advance(),W=this.led(ee,W),ee=this._lookahead(0);return W},_lookahead:function(O){return this.tokens[this.index+O].type},_lookaheadToken:function(O){return this.tokens[this.index+O]},_advance:function(){this.index++},nud:function(O){var W,ee;switch(O.type){case ce:return{type:"Literal",value:O.value};case K:return{type:"Field",name:O.value};case U:var ae={type:"Field",name:O.value};if(this._lookahead(0)===et)throw new Error("Quoted identifier not allowed for function names.");return ae;case"Not":return{type:"NotExpression",children:[W=this.expression(ke.Not)]};case ye:return W=null,{type:"ValueProjection",children:[{type:"Identity"},W=this._lookahead(0)===J?{type:"Identity"}:this._parseProjectionRHS(ke.Star)]};case be:return this.led(O.type,{type:"Identity"});case ot:return this._parseMultiselectHash();case fe:return{type:"Projection",children:[{type:fe,children:[{type:"Identity"}]},W=this._parseProjectionRHS(ke.Flatten)]};case it:return this._lookahead(0)===Q||this._lookahead(0)===G?(W=this._parseIndexExpression(),this._projectIfSlice({type:"Identity"},W)):this._lookahead(0)===ye&&this._lookahead(1)===J?(this._advance(),this._advance(),{type:"Projection",children:[{type:"Identity"},W=this._parseProjectionRHS(ke.Star)]}):this._parseMultiselectList();case ge:return{type:ge};case Pe:return{type:"ExpressionReference",children:[ee=this.expression(ke.Expref)]};case et:for(var Ee=[];this._lookahead(0)!==z;)this._lookahead(0)===ge?(ee={type:ge},this._advance()):ee=this.expression(0),Ee.push(ee);return this._match(z),Ee[0];default:this._errorToken(O)}},led:function(O,L){var W;switch(O){case Se:var ee=ke.Dot;return this._lookahead(0)!==ye?{type:"Subexpression",children:[L,W=this._parseDotRHS(ee)]}:(this._advance(),{type:"ValueProjection",children:[L,W=this._parseProjectionRHS(ee)]});case Ne:return W=this.expression(ke.Pipe),{type:Ne,children:[L,W]};case"Or":return{type:"OrExpression",children:[L,W=this.expression(ke.Or)]};case"And":return{type:"AndExpression",children:[L,W=this.expression(ke.And)]};case et:for(var Fe,ae=L.name,Ee=[];this._lookahead(0)!==z;)this._lookahead(0)===ge?(Fe={type:ge},this._advance()):Fe=this.expression(0),this._lookahead(0)===se&&this._match(se),Ee.push(Fe);return this._match(z),{type:"Function",name:ae,children:Ee};case be:var pt=this.expression(0);return this._match(J),{type:"FilterProjection",children:[L,W=this._lookahead(0)===fe?{type:"Identity"}:this._parseProjectionRHS(ke.Filter),pt]};case fe:return{type:"Projection",children:[{type:fe,children:[L]},this._parseProjectionRHS(ke.Flatten)]};case"EQ":case"NE":case"GT":case Y:case j:case"LTE":return this._parseComparator(L,O);case it:var _e=this._lookaheadToken(0);return _e.type===Q||_e.type===G?(W=this._parseIndexExpression(),this._projectIfSlice(L,W)):(this._match(ye),this._match(J),{type:"Projection",children:[L,W=this._parseProjectionRHS(ke.Star)]});default:this._errorToken(this._lookaheadToken(0))}},_match:function(O){if(this._lookahead(0)!==O){var L=this._lookaheadToken(0),W=new Error("Expected "+O+", got: "+L.type);throw W.name="ParserError",W}this._advance()},_errorToken:function(O){var L=new Error("Invalid token ("+O.type+'): "'+O.value+'"');throw L.name="ParserError",L},_parseIndexExpression:function(){if(this._lookahead(0)===G||this._lookahead(1)===G)return this._parseSliceExpression();var O={type:"Index",value:this._lookaheadToken(0).value};return this._advance(),this._match(J),O},_projectIfSlice:function(O,L){var W={type:"IndexExpression",children:[O,L]};return"Slice"===L.type?{type:"Projection",children:[W,this._parseProjectionRHS(ke.Star)]}:W},_parseSliceExpression:function(){for(var O=[null,null,null],L=0,W=this._lookahead(0);W!==J&&L<3;){if(W===G)L++,this._advance();else{if(W!==Q){var ee=this._lookahead(0),ae=new Error("Syntax error, unexpected token: "+ee.value+"("+ee.type+")");throw ae.name="Parsererror",ae}O[L]=this._lookaheadToken(0).value,this._advance()}W=this._lookahead(0)}return this._match(J),{type:"Slice",children:O}},_parseComparator:function(O,L){return{type:"Comparator",name:L,children:[O,this.expression(ke[L])]}},_parseDotRHS:function(O){var L=this._lookahead(0);return[K,U,ye].indexOf(L)>=0?this.expression(O):L===it?(this._match(it),this._parseMultiselectList()):L===ot?(this._match(ot),this._parseMultiselectHash()):void 0},_parseProjectionRHS:function(O){var L;if(ke[this._lookahead(0)]<10)L={type:"Identity"};else if(this._lookahead(0)===it)L=this.expression(O);else if(this._lookahead(0)===be)L=this.expression(O);else{if(this._lookahead(0)!==Se){var W=this._lookaheadToken(0),ee=new Error("Sytanx error, unexpected token: "+W.value+"("+W.type+")");throw ee.name="ParserError",ee}this._match(Se),L=this._parseDotRHS(O)}return L},_parseMultiselectList:function(){for(var O=[];this._lookahead(0)!==J;){var L=this.expression(0);if(O.push(L),this._lookahead(0)===se&&(this._match(se),this._lookahead(0)===J))throw new Error("Unexpected token Rbracket")}return this._match(J),{type:"MultiSelectList",children:O}},_parseMultiselectHash:function(){for(var W,ee,ae,O=[],L=[K,U];;){if(W=this._lookaheadToken(0),L.indexOf(W.type)<0)throw new Error("Expecting an identifier token, got: "+W.type);if(ee=W.value,this._advance(),this._match(G),ae=this.expression(0),O.push({type:"KeyValuePair",name:ee,value:ae}),this._lookahead(0)===se)this._match(se);else if(this._lookahead(0)===pe){this._match(pe);break}}return{type:"MultiSelectHash",children:O}}},A.prototype={search:function(O,L){return this.visit(O,L)},visit:function(O,L){var W,ee,ae,Ee,Fe,Ze,pt,Z,_e;switch(O.type){case"Field":return null===L?null:E(L)?void 0===(Ze=L[O.name])?null:Ze:null;case"Subexpression":for(ae=this.visit(O.children[0],L),_e=1;_e<O.children.length;_e++)if(null===(ae=this.visit(O.children[1],ae)))return null;return ae;case"IndexExpression":return pt=this.visit(O.children[0],L),this.visit(O.children[1],pt);case"Index":if(!w(L))return null;var Oe=O.value;return Oe<0&&(Oe=L.length+Oe),void 0===(ae=L[Oe])&&(ae=null),ae;case"Slice":if(!w(L))return null;var Ln=O.children.slice(0),ps=this.computeSliceParams(L.length,Ln),vt=ps[0],Ue=ps[1],ei=ps[2];if(ae=[],ei>0)for(_e=vt;_e<Ue;_e+=ei)ae.push(L[_e]);else for(_e=vt;_e>Ue;_e+=ei)ae.push(L[_e]);return ae;case"Projection":var Vn=this.visit(O.children[0],L);if(!w(Vn))return null;for(Z=[],_e=0;_e<Vn.length;_e++)null!==(ee=this.visit(O.children[1],Vn[_e]))&&Z.push(ee);return Z;case"ValueProjection":if(!E(Vn=this.visit(O.children[0],L)))return null;Z=[];var Er=function(O){for(var L=Object.keys(O),W=[],ee=0;ee<L.length;ee++)W.push(O[L[ee]]);return W}(Vn);for(_e=0;_e<Er.length;_e++)null!==(ee=this.visit(O.children[1],Er[_e]))&&Z.push(ee);return Z;case"FilterProjection":if(!w(Vn=this.visit(O.children[0],L)))return null;var Va=[],ti=[];for(_e=0;_e<Vn.length;_e++)f(W=this.visit(O.children[2],Vn[_e]))||Va.push(Vn[_e]);for(var ze=0;ze<Va.length;ze++)null!==(ee=this.visit(O.children[1],Va[ze]))&&ti.push(ee);return ti;case"Comparator":switch(Ee=this.visit(O.children[0],L),Fe=this.visit(O.children[1],L),O.name){case"EQ":ae=m(Ee,Fe);break;case"NE":ae=!m(Ee,Fe);break;case"GT":ae=Ee>Fe;break;case Y:ae=Ee>=Fe;break;case j:ae=Ee<Fe;break;case"LTE":ae=Ee<=Fe;break;default:throw new Error("Unknown comparator: "+O.name)}return ae;case fe:var Gt=this.visit(O.children[0],L);if(!w(Gt))return null;var ni=[];for(_e=0;_e<Gt.length;_e++)w(ee=Gt[_e])?ni.push.apply(ni,ee):ni.push(ee);return ni;case"Identity":return L;case"MultiSelectList":if(null===L)return null;for(Z=[],_e=0;_e<O.children.length;_e++)Z.push(this.visit(O.children[_e],L));return Z;case"MultiSelectHash":if(null===L)return null;var Ua;for(Z={},_e=0;_e<O.children.length;_e++)Z[(Ua=O.children[_e]).name]=this.visit(Ua.value,L);return Z;case"OrExpression":return f(W=this.visit(O.children[0],L))&&(W=this.visit(O.children[1],L)),W;case"AndExpression":return!0===f(Ee=this.visit(O.children[0],L))?Ee:this.visit(O.children[1],L);case"NotExpression":return f(Ee=this.visit(O.children[0],L));case"Literal":return O.value;case Ne:return pt=this.visit(O.children[0],L),this.visit(O.children[1],pt);case ge:return L;case"Function":var tl=[];for(_e=0;_e<O.children.length;_e++)tl.push(this.visit(O.children[_e],L));return this.runtime.callFunction(O.name,tl);case"ExpressionReference":var wo=O.children[0];return wo.jmespathType=Pe,wo;default:throw new Error("Unknown node type: "+O.type)}},computeSliceParams:function(O,L){var W=L[0],ee=L[1],ae=L[2],Ee=[null,null,null];if(null===ae)ae=1;else if(0===ae){var Fe=new Error("Invalid slice, step cannot be 0");throw Fe.name="RuntimeError",Fe}var Ze=ae<0;return W=null===W?Ze?O-1:0:this.capSliceRange(O,W,ae),ee=null===ee?Ze?-1:O:this.capSliceRange(O,ee,ae),Ee[0]=W,Ee[1]=ee,Ee[2]=ae,Ee},capSliceRange:function(O,L,W){return L<0?(L+=O)<0&&(L=W<0?-1:0):L>=O&&(L=W<0?O-1:O),L}},x.prototype={callFunction:function(O,L){var W=this.functionTable[O];if(void 0===W)throw new Error("Unknown function: "+O+"()");return this._validateArgs(O,L,W._signature),W._func.call(this,L)},_validateArgs:function(O,L,W){var ee;if(W[W.length-1].variadic){if(L.length<W.length)throw ee=1===W.length?" argument":" arguments",new Error("ArgumentError: "+O+"() takes at least"+W.length+ee+" but received "+L.length)}else if(L.length!==W.length)throw ee=1===W.length?" argument":" arguments",new Error("ArgumentError: "+O+"() takes "+W.length+ee+" but received "+L.length);for(var ae,Ee,Fe,Ze=0;Ze<W.length;Ze++){Fe=!1,ae=W[Ze].types,Ee=this._getTypeName(L[Ze]);for(var pt=0;pt<ae.length;pt++)if(this._typeMatches(Ee,ae[pt],L[Ze])){Fe=!0;break}if(!Fe)throw new Error("TypeError: "+O+"() expected argument "+(Ze+1)+" to be type "+ae+" but received type "+Ee+" instead.")}},_typeMatches:function(O,L,W){if(1===L)return!0;if(9!==L&&8!==L&&3!==L)return O===L;if(3===L)return 3===O;if(3===O){var ee;8===L?ee=l:9===L&&(ee=d);for(var ae=0;ae<W.length;ae++)if(!this._typeMatches(this._getTypeName(W[ae]),ee,W[ae]))return!1;return!0}},_getTypeName:function(O){switch(Object.prototype.toString.call(O)){case"[object String]":return d;case"[object Number]":return l;case"[object Array]":return 3;case"[object Boolean]":return 5;case"[object Null]":return 7;case"[object Object]":return O.jmespathType===Pe?6:4}},_functionStartsWith:function(O){return 0===O[0].lastIndexOf(O[1])},_functionEndsWith:function(O){var L=O[0],W=O[1];return-1!==L.indexOf(W,L.length-W.length)},_functionReverse:function(O){if(this._getTypeName(O[0])===d){for(var W=O[0],ee="",ae=W.length-1;ae>=0;ae--)ee+=W[ae];return ee}var Ee=O[0].slice(0);return Ee.reverse(),Ee},_functionAbs:function(O){return Math.abs(O[0])},_functionCeil:function(O){return Math.ceil(O[0])},_functionAvg:function(O){for(var L=0,W=O[0],ee=0;ee<W.length;ee++)L+=W[ee];return L/W.length},_functionContains:function(O){return O[0].indexOf(O[1])>=0},_functionFloor:function(O){return Math.floor(O[0])},_functionLength:function(O){return E(O[0])?Object.keys(O[0]).length:O[0].length},_functionMap:function(O){for(var L=[],W=this._interpreter,ee=O[0],ae=O[1],Ee=0;Ee<ae.length;Ee++)L.push(W.visit(ee,ae[Ee]));return L},_functionMerge:function(O){for(var L={},W=0;W<O.length;W++){var ee=O[W];for(var ae in ee)L[ae]=ee[ae]}return L},_functionMax:function(O){if(O[0].length>0){if(this._getTypeName(O[0][0])===l)return Math.max.apply(Math,O[0]);for(var W=O[0],ee=W[0],ae=1;ae<W.length;ae++)ee.localeCompare(W[ae])<0&&(ee=W[ae]);return ee}return null},_functionMin:function(O){if(O[0].length>0){if(this._getTypeName(O[0][0])===l)return Math.min.apply(Math,O[0]);for(var W=O[0],ee=W[0],ae=1;ae<W.length;ae++)W[ae].localeCompare(ee)<0&&(ee=W[ae]);return ee}return null},_functionSum:function(O){for(var L=0,W=O[0],ee=0;ee<W.length;ee++)L+=W[ee];return L},_functionType:function(O){switch(this._getTypeName(O[0])){case l:return"number";case d:return"string";case 3:return"array";case 4:return"object";case 5:return"boolean";case 6:return"expref";case 7:return"null"}},_functionKeys:function(O){return Object.keys(O[0])},_functionValues:function(O){for(var L=O[0],W=Object.keys(L),ee=[],ae=0;ae<W.length;ae++)ee.push(L[W[ae]]);return ee},_functionJoin:function(O){return O[1].join(O[0])},_functionToArray:function(O){return 3===this._getTypeName(O[0])?O[0]:[O[0]]},_functionToString:function(O){return this._getTypeName(O[0])===d?O[0]:JSON.stringify(O[0])},_functionToNumber:function(O){var W,L=this._getTypeName(O[0]);return L===l?O[0]:L!==d||(W=+O[0],isNaN(W))?null:W},_functionNotNull:function(O){for(var L=0;L<O.length;L++)if(7!==this._getTypeName(O[L]))return O[L];return null},_functionSort:function(O){var L=O[0].slice(0);return L.sort(),L},_functionSortBy:function(O){var L=O[0].slice(0);if(0===L.length)return L;var W=this._interpreter,ee=O[1],ae=this._getTypeName(W.visit(ee,L[0]));if([l,d].indexOf(ae)<0)throw new Error("TypeError");for(var Ee=this,Fe=[],Ze=0;Ze<L.length;Ze++)Fe.push([Ze,L[Ze]]);Fe.sort(function(Me,Z){var _e=W.visit(ee,Me[1]),Oe=W.visit(ee,Z[1]);if(Ee._getTypeName(_e)!==ae)throw new Error("TypeError: expected "+ae+", received "+Ee._getTypeName(_e));if(Ee._getTypeName(Oe)!==ae)throw new Error("TypeError: expected "+ae+", received "+Ee._getTypeName(Oe));return _e>Oe?1:_e<Oe?-1:Me[0]-Z[0]});for(var pt=0;pt<Fe.length;pt++)L[pt]=Fe[pt][1];return L},_functionMaxBy:function(O){for(var Ee,Fe,W=O[0],ee=this.createKeyFunction(O[1],[l,d]),ae=-1/0,Ze=0;Ze<W.length;Ze++)(Fe=ee(W[Ze]))>ae&&(ae=Fe,Ee=W[Ze]);return Ee},_functionMinBy:function(O){for(var Ee,Fe,W=O[0],ee=this.createKeyFunction(O[1],[l,d]),ae=1/0,Ze=0;Ze<W.length;Ze++)(Fe=ee(W[Ze]))<ae&&(ae=Fe,Ee=W[Ze]);return Ee},createKeyFunction:function(O,L){var W=this,ee=this._interpreter;return function(Ee){var Fe=ee.visit(O,Ee);if(L.indexOf(W._getTypeName(Fe))<0){var Ze="TypeError: expected one of "+L+", received "+W._getTypeName(Fe);throw new Error(Ze)}return Fe}}},v.tokenize=function(O){return(new xt).tokenize(O)},v.compile=function(O){return(new B).parse(O)},v.search=function(O,L){var W=new B,ee=new x,ae=new A(ee);ee._interpreter=ae;var Ee=W.parse(L);return ae.search(Ee,O)},v.strictDeepEqual=m}(void 0===V?this.jmespath={}:V)},{}],86:[function(N,P,V){var w,E,v=P.exports={};function m(){throw new Error("setTimeout has not been defined")}function f(){throw new Error("clearTimeout has not been defined")}function c(b){if(w===setTimeout)return setTimeout(b,0);if((w===m||!w)&&setTimeout)return w=setTimeout,setTimeout(b,0);try{return w(b,0)}catch(T){try{return w.call(null,b,0)}catch(R){return w.call(this,b,0)}}}!function(){try{w="function"==typeof setTimeout?setTimeout:m}catch(b){w=m}try{E="function"==typeof clearTimeout?clearTimeout:f}catch(b){E=f}}();var g,u=[],l=!1,d=-1;function y(){!l||!g||(l=!1,g.length?u=g.concat(u):d=-1,u.length&&_())}function _(){if(!l){var b=c(y);l=!0;for(var T=u.length;T;){for(g=u,u=[];++d<T;)g&&g[d].run();d=-1,T=u.length}g=null,l=!1,function(b){if(E===clearTimeout)return clearTimeout(b);if((E===f||!E)&&clearTimeout)return E=clearTimeout,clearTimeout(b);try{E(b)}catch(T){try{return E.call(null,b)}catch(R){return E.call(this,b)}}}(b)}}function S(b,T){this.fun=b,this.array=T}function D(){}v.nextTick=function(b){var T=new Array(arguments.length-1);if(arguments.length>1)for(var R=1;R<arguments.length;R++)T[R-1]=arguments[R];u.push(new S(b,T)),1===u.length&&!l&&c(_)},S.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=D,v.addListener=D,v.once=D,v.off=D,v.removeListener=D,v.removeAllListeners=D,v.emit=D,v.prependListener=D,v.prependOnceListener=D,v.listeners=function(b){return[]},v.binding=function(b){throw new Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(b){throw new Error("process.chdir is not supported")},v.umask=function(){return 0}},{}],87:[function(N,P,V){"use strict";function v(E,m){return Object.prototype.hasOwnProperty.call(E,m)}P.exports=function(E,m,f,c){f=f||"=";var h={};if("string"!=typeof E||0===E.length)return h;var u=/\+/g;E=E.split(m=m||"&");var l=1e3;c&&"number"==typeof c.maxKeys&&(l=c.maxKeys);var g=E.length;l>0&&g>l&&(g=l);for(var d=0;d<g;++d){var S,D,b,T,y=E[d].replace(u,"%20"),_=y.indexOf(f);_>=0?(S=y.substr(0,_),D=y.substr(_+1)):(S=y,D=""),b=decodeURIComponent(S),T=decodeURIComponent(D),v(h,b)?w(h[b])?h[b].push(T):h[b]=[h[b],T]:h[b]=T}return h};var w=Array.isArray||function(E){return"[object Array]"===Object.prototype.toString.call(E)}},{}],88:[function(N,P,V){"use strict";var v=function(f){switch(typeof f){case"string":return f;case"boolean":return f?"true":"false";case"number":return isFinite(f)?f:"";default:return""}};P.exports=function(f,c,h,u){return c=c||"&",h=h||"=",null===f&&(f=void 0),"object"==typeof f?E(m(f),function(l){var g=encodeURIComponent(v(l))+h;return w(f[l])?E(f[l],function(d){return g+encodeURIComponent(v(d))}).join(c):g+encodeURIComponent(v(f[l]))}).join(c):u?encodeURIComponent(v(u))+h+encodeURIComponent(v(f)):""};var w=Array.isArray||function(f){return"[object Array]"===Object.prototype.toString.call(f)};function E(f,c){if(f.map)return f.map(c);for(var h=[],u=0;u<f.length;u++)h.push(c(f[u],u));return h}var m=Object.keys||function(f){var c=[];for(var h in f)Object.prototype.hasOwnProperty.call(f,h)&&c.push(h);return c}},{}],89:[function(N,P,V){"use strict";V.decode=V.parse=N("./decode"),V.encode=V.stringify=N("./encode")},{"./decode":87,"./encode":88}],90:[function(N,P,V){"use strict";function v(w,E){return Object.prototype.hasOwnProperty.call(w,E)}P.exports=function(w,E,m,f){m=m||"=";var c={};if("string"!=typeof w||0===w.length)return c;var h=/\+/g;w=w.split(E=E||"&");var u=1e3;f&&"number"==typeof f.maxKeys&&(u=f.maxKeys);var l=w.length;u>0&&l>u&&(l=u);for(var g=0;g<l;++g){var _,S,D,b,d=w[g].replace(h,"%20"),y=d.indexOf(m);y>=0?(_=d.substr(0,y),S=d.substr(y+1)):(_=d,S=""),D=decodeURIComponent(_),b=decodeURIComponent(S),v(c,D)?Array.isArray(c[D])?c[D].push(b):c[D]=[c[D],b]:c[D]=b}return c}},{}],91:[function(N,P,V){"use strict";var v=function(w){switch(typeof w){case"string":return w;case"boolean":return w?"true":"false";case"number":return isFinite(w)?w:"";default:return""}};P.exports=function(w,E,m,f){return E=E||"&",m=m||"=",null===w&&(w=void 0),"object"==typeof w?Object.keys(w).map(function(c){var h=encodeURIComponent(v(c))+m;return Array.isArray(w[c])?w[c].map(function(u){return h+encodeURIComponent(v(u))}).join(E):h+encodeURIComponent(v(w[c]))}).join(E):f?encodeURIComponent(v(f))+m+encodeURIComponent(v(w)):""}},{}],92:[function(N,P,V){arguments[4][89][0].apply(V,arguments)},{"./decode":90,"./encode":91,dup:89}],93:[function(N,P,V){(function(v,w){(function(){var E=N("process/browser.js").nextTick,m=Function.prototype.apply,f=Array.prototype.slice,c={},h=0;function u(l,g){this._id=l,this._clearFn=g}V.setTimeout=function(){return new u(m.call(setTimeout,window,arguments),clearTimeout)},V.setInterval=function(){return new u(m.call(setInterval,window,arguments),clearInterval)},V.clearTimeout=V.clearInterval=function(l){l.close()},u.prototype.unref=u.prototype.ref=function(){},u.prototype.close=function(){this._clearFn.call(window,this._id)},V.enroll=function(l,g){clearTimeout(l._idleTimeoutId),l._idleTimeout=g},V.unenroll=function(l){clearTimeout(l._idleTimeoutId),l._idleTimeout=-1},V._unrefActive=V.active=function(l){clearTimeout(l._idleTimeoutId);var g=l._idleTimeout;g>=0&&(l._idleTimeoutId=setTimeout(function(){l._onTimeout&&l._onTimeout()},g))},V.setImmediate="function"==typeof v?v:function(l){var g=h++,d=!(arguments.length<2)&&f.call(arguments,1);return c[g]=!0,E(function(){c[g]&&(d?l.apply(null,d):l.call(null),V.clearImmediate(g))}),g},V.clearImmediate="function"==typeof w?w:function(l){delete c[l]}}).call(this)}).call(this,N("timers").setImmediate,N("timers").clearImmediate)},{"process/browser.js":86,timers:93}],94:[function(N,P,V){var v=N("punycode");function w(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}V.parse=T,V.resolve=function(G,pe){return T(G,!1,!0).resolve(pe)},V.resolveObject=function(G,pe){return G?T(G,!1,!0).resolveObject(pe):pe},V.format=function(G){return U(G)&&(G=T(G)),G instanceof w?G.format():w.prototype.format.call(G)},V.Url=w;var E=/^([a-z0-9.+-]+:)/i,m=/:[0-9]*$/,c=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),h=["'"].concat(c),u=["%","/","?",";","#"].concat(h),l=["/","?","#"],d=/^[a-z0-9A-Z_-]{0,63}$/,y=/^([a-z0-9A-Z_-]{0,63})(.*)$/,_={javascript:!0,"javascript:":!0},S={javascript:!0,"javascript:":!0},D={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},b=N("querystring");function T(G,pe,Q){if(G&&J(G)&&G instanceof w)return G;var ge=new w;return ge.parse(G,pe,Q),ge}function U(G){return"string"==typeof G}function J(G){return"object"==typeof G&&null!==G}function z(G){return null===G}w.prototype.parse=function(G,pe,Q){if(!U(G))throw new TypeError("Parameter 'url' must be a string, not "+typeof G);var ge=G;ge=ge.trim();var Pe=E.exec(ge);if(Pe){var Ne=(Pe=Pe[0]).toLowerCase();this.protocol=Ne,ge=ge.substr(Pe.length)}if(Q||Pe||ge.match(/^\/\/[^@\/]+@[^@\/]+/)){var He="//"===ge.substr(0,2);He&&(!Pe||!S[Pe])&&(ge=ge.substr(2),this.slashes=!0)}if(!S[Pe]&&(He||Pe&&!D[Pe])){for(var xe=-1,te=0;te<l.length;te++)-1!==(ie=ge.indexOf(l[te]))&&(-1===xe||ie<xe)&&(xe=ie);var j,Y;for(-1!==(Y=-1===xe?ge.lastIndexOf("@"):ge.lastIndexOf("@",xe))&&(j=ge.slice(0,Y),ge=ge.slice(Y+1),this.auth=decodeURIComponent(j)),xe=-1,te=0;te<u.length;te++){var ie;-1!==(ie=ge.indexOf(u[te]))&&(-1===xe||ie<xe)&&(xe=ie)}-1===xe&&(xe=ge.length),this.host=ge.slice(0,xe),ge=ge.slice(xe),this.parseHost(),this.hostname=this.hostname||"";var ne="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!ne)for(var Ce=this.hostname.split(/\./),fe=(te=0,Ce.length);te<fe;te++){var ye=Ce[te];if(ye&&!ye.match(d)){for(var be="",Se=0,Le=ye.length;Se<Le;Se++)ye.charCodeAt(Se)>127?be+="x":be+=ye[Se];if(!be.match(d)){var ot=Ce.slice(0,te),it=Ce.slice(te+1),et=ye.match(y);et&&(ot.push(et[1]),it.unshift(et[2])),it.length&&(ge="/"+it.join(".")+ge),this.hostname=ot.join(".");break}}}if(this.hostname=this.hostname.length>255?"":this.hostname.toLowerCase(),!ne){var ce=this.hostname.split("."),le=[];for(te=0;te<ce.length;++te)le.push((we=ce[te]).match(/[^A-Za-z0-9_-]/)?"xn--"+v.encode(we):we);this.hostname=le.join(".")}this.host=(this.hostname||"")+(this.port?":"+this.port:""),this.href+=this.host,ne&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==ge[0]&&(ge="/"+ge))}if(!_[Ne])for(te=0,fe=h.length;te<fe;te++){var $e=h[te],ct=encodeURIComponent($e);ct===$e&&(ct=escape($e)),ge=ge.split($e).join(ct)}var xt=ge.indexOf("#");-1!==xt&&(this.hash=ge.substr(xt),ge=ge.slice(0,xt));var we,ke=ge.indexOf("?");return-1!==ke?(this.search=ge.substr(ke),this.query=ge.substr(ke+1),pe&&(this.query=b.parse(this.query)),ge=ge.slice(0,ke)):pe&&(this.search="",this.query={}),ge&&(this.pathname=ge),D[Ne]&&this.hostname&&!this.pathname&&(this.pathname="/"),(this.pathname||this.search)&&(this.path=(this.pathname||"")+(we=this.search||"")),this.href=this.format(),this},w.prototype.format=function(){var G=this.auth||"";G&&(G=(G=encodeURIComponent(G)).replace(/%3A/i,":"),G+="@");var pe=this.protocol||"",Q=this.pathname||"",ge=this.hash||"",Pe=!1,Ne="";this.host?Pe=G+this.host:this.hostname&&(Pe=G+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(Pe+=":"+this.port)),this.query&&J(this.query)&&Object.keys(this.query).length&&(Ne=b.stringify(this.query));var He=this.search||Ne&&"?"+Ne||"";return pe&&":"!==pe.substr(-1)&&(pe+=":"),this.slashes||(!pe||D[pe])&&!1!==Pe?(Pe="//"+(Pe||""),Q&&"/"!==Q.charAt(0)&&(Q="/"+Q)):Pe||(Pe=""),ge&&"#"!==ge.charAt(0)&&(ge="#"+ge),He&&"?"!==He.charAt(0)&&(He="?"+He),pe+Pe+(Q=Q.replace(/[?#]/g,function(xe){return encodeURIComponent(xe)}))+(He=He.replace("#","%23"))+ge},w.prototype.resolve=function(G){return this.resolveObject(T(G,!1,!0)).format()},w.prototype.resolveObject=function(G){if(U(G)){var pe=new w;pe.parse(G,!1,!0),G=pe}var Q=new w;if(Object.keys(this).forEach(function(Le){Q[Le]=this[Le]},this),Q.hash=G.hash,""===G.href)return Q.href=Q.format(),Q;if(G.slashes&&!G.protocol)return Object.keys(G).forEach(function(Le){"protocol"!==Le&&(Q[Le]=G[Le])}),D[Q.protocol]&&Q.hostname&&!Q.pathname&&(Q.path=Q.pathname="/"),Q.href=Q.format(),Q;if(G.protocol&&G.protocol!==Q.protocol){if(!D[G.protocol])return Object.keys(G).forEach(function(Le){Q[Le]=G[Le]}),Q.href=Q.format(),Q;if(Q.protocol=G.protocol,G.host||S[G.protocol])Q.pathname=G.pathname;else{for(var j=(G.pathname||"").split("/");j.length&&!(G.host=j.shift()););G.host||(G.host=""),G.hostname||(G.hostname=""),""!==j[0]&&j.unshift(""),j.length<2&&j.unshift(""),Q.pathname=j.join("/")}return Q.search=G.search,Q.query=G.query,Q.host=G.host||"",Q.auth=G.auth,Q.hostname=G.hostname||G.host,Q.port=G.port,(Q.pathname||Q.search)&&(Q.path=(Q.pathname||"")+(Q.search||"")),Q.slashes=Q.slashes||G.slashes,Q.href=Q.format(),Q}var Ne=Q.pathname&&"/"===Q.pathname.charAt(0),He=G.host||G.pathname&&"/"===G.pathname.charAt(0),xe=He||Ne||Q.host&&G.pathname,te=xe,ie=Q.pathname&&Q.pathname.split("/")||[],Y=(j=G.pathname&&G.pathname.split("/")||[],Q.protocol&&!D[Q.protocol]);if(Y&&(Q.hostname="",Q.port=null,Q.host&&(""===ie[0]?ie[0]=Q.host:ie.unshift(Q.host)),Q.host="",G.protocol&&(G.hostname=null,G.port=null,G.host&&(""===j[0]?j[0]=G.host:j.unshift(G.host)),G.host=null),xe=xe&&(""===j[0]||""===ie[0])),He)Q.host=G.host||""===G.host?G.host:Q.host,Q.hostname=G.hostname||""===G.hostname?G.hostname:Q.hostname,Q.search=G.search,Q.query=G.query,ie=j;else if(j.length)ie||(ie=[]),ie.pop(),ie=ie.concat(j),Q.search=G.search,Q.query=G.query;else if(!function(G){return null==G}(G.search))return Y&&(Q.hostname=Q.host=ie.shift(),(ne=!!(Q.host&&Q.host.indexOf("@")>0)&&Q.host.split("@"))&&(Q.auth=ne.shift(),Q.host=Q.hostname=ne.shift())),Q.search=G.search,Q.query=G.query,(!z(Q.pathname)||!z(Q.search))&&(Q.path=(Q.pathname?Q.pathname:"")+(Q.search?Q.search:"")),Q.href=Q.format(),Q;if(!ie.length)return Q.pathname=null,Q.path=Q.search?"/"+Q.search:null,Q.href=Q.format(),Q;for(var Ce=ie.slice(-1)[0],fe=(Q.host||G.host)&&("."===Ce||".."===Ce)||""===Ce,ye=0,be=ie.length;be>=0;be--)"."==(Ce=ie[be])?ie.splice(be,1):".."===Ce?(ie.splice(be,1),ye++):ye&&(ie.splice(be,1),ye--);if(!xe&&!te)for(;ye--;ye)ie.unshift("..");xe&&""!==ie[0]&&(!ie[0]||"/"!==ie[0].charAt(0))&&ie.unshift(""),fe&&"/"!==ie.join("/").substr(-1)&&ie.push("");var ne,Se=""===ie[0]||ie[0]&&"/"===ie[0].charAt(0);return Y&&(Q.hostname=Q.host=Se?"":ie.length?ie.shift():"",(ne=!!(Q.host&&Q.host.indexOf("@")>0)&&Q.host.split("@"))&&(Q.auth=ne.shift(),Q.host=Q.hostname=ne.shift())),(xe=xe||Q.host&&ie.length)&&!Se&&ie.unshift(""),ie.length?Q.pathname=ie.join("/"):(Q.pathname=null,Q.path=null),(!z(Q.pathname)||!z(Q.search))&&(Q.path=(Q.pathname?Q.pathname:"")+(Q.search?Q.search:"")),Q.auth=G.auth||Q.auth,Q.slashes=Q.slashes||G.slashes,Q.href=Q.format(),Q},w.prototype.parseHost=function(){var G=this.host,pe=m.exec(G);pe&&(":"!==(pe=pe[0])&&(this.port=pe.substr(1)),G=G.substr(0,G.length-pe.length)),G&&(this.hostname=G)}},{punycode:80,querystring:89}],95:[function(N,P,V){P.exports="function"==typeof Object.create?function(w,E){w.super_=E,w.prototype=Object.create(E.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}})}:function(w,E){w.super_=E;var m=function(){};m.prototype=E.prototype,w.prototype=new m,w.prototype.constructor=w}},{}],96:[function(N,P,V){P.exports=function(w){return w&&"object"==typeof w&&"function"==typeof w.copy&&"function"==typeof w.fill&&"function"==typeof w.readUInt8}},{}],97:[function(N,P,V){(function(v,w){(function(){var E=/%[sdj%]/g;V.format=function(j){if(!U(j)){for(var Y=[],ne=0;ne<arguments.length;ne++)Y.push(c(arguments[ne]));return Y.join(" ")}ne=1;for(var Ce=arguments,fe=Ce.length,ye=String(j).replace(E,function(Se){if("%%"===Se)return"%";if(ne>=fe)return Se;switch(Se){case"%s":return String(Ce[ne++]);case"%d":return Number(Ce[ne++]);case"%j":try{return JSON.stringify(Ce[ne++])}catch(Le){return"[Circular]"}default:return Se}}),be=Ce[ne];ne<fe;be=Ce[++ne])R(be)||!G(be)?ye+=" "+be:ye+=" "+c(be);return ye},V.deprecate=function(j,Y){if(z(w.process))return function(){return V.deprecate(j,Y).apply(this,arguments)};if(!0===v.noDeprecation)return j;var ne=!1;return function(){if(!ne){if(v.throwDeprecation)throw new Error(Y);v.traceDeprecation?console.trace(Y):console.error(Y),ne=!0}return j.apply(this,arguments)}};var f,m={};function c(j,Y){var ne={seen:[],stylize:u};return arguments.length>=3&&(ne.depth=arguments[2]),arguments.length>=4&&(ne.colors=arguments[3]),T(Y)?ne.showHidden=Y:Y&&V._extend(ne,Y),z(ne.showHidden)&&(ne.showHidden=!1),z(ne.depth)&&(ne.depth=2),z(ne.colors)&&(ne.colors=!1),z(ne.customInspect)&&(ne.customInspect=!0),ne.colors&&(ne.stylize=h),g(ne,j,ne.depth)}function h(j,Y){var ne=c.styles[Y];return ne?"\x1b["+c.colors[ne][0]+"m"+j+"\x1b["+c.colors[ne][1]+"m":j}function u(j,Y){return j}function g(j,Y,ne){if(j.customInspect&&Y&&ge(Y.inspect)&&Y.inspect!==V.inspect&&(!Y.constructor||Y.constructor.prototype!==Y)){var Ce=Y.inspect(ne,j);return U(Ce)||(Ce=g(j,Ce,ne)),Ce}var fe=function(j,Y){if(z(Y))return j.stylize("undefined","undefined");if(U(Y)){var ne="'"+JSON.stringify(Y).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(ne,"string")}return K(Y)?j.stylize(""+Y,"number"):T(Y)?j.stylize(""+Y,"boolean"):R(Y)?j.stylize("null","null"):void 0}(j,Y);if(fe)return fe;var ye=Object.keys(Y),be=function(j){var Y={};return j.forEach(function(ne,Ce){Y[ne]=!0}),Y}(ye);if(j.showHidden&&(ye=Object.getOwnPropertyNames(Y)),Q(Y)&&(ye.indexOf("message")>=0||ye.indexOf("description")>=0))return y(Y);if(0===ye.length){if(ge(Y))return j.stylize("[Function"+(Y.name?": "+Y.name:"")+"]","special");if(se(Y))return j.stylize(RegExp.prototype.toString.call(Y),"regexp");if(pe(Y))return j.stylize(Date.prototype.toString.call(Y),"date");if(Q(Y))return y(Y)}var ce,Le="",ot=!1,it=["{","}"];return b(Y)&&(ot=!0,it=["[","]"]),ge(Y)&&(Le=" [Function"+(Y.name?": "+Y.name:"")+"]"),se(Y)&&(Le=" "+RegExp.prototype.toString.call(Y)),pe(Y)&&(Le=" "+Date.prototype.toUTCString.call(Y)),Q(Y)&&(Le=" "+y(Y)),0!==ye.length||ot&&0!=Y.length?ne<0?se(Y)?j.stylize(RegExp.prototype.toString.call(Y),"regexp"):j.stylize("[Object]","special"):(j.seen.push(Y),ce=ot?function(j,Y,ne,Ce,fe){for(var ye=[],be=0,Se=Y.length;be<Se;++be)ie(Y,String(be))?ye.push(S(j,Y,ne,Ce,String(be),!0)):ye.push("");return fe.forEach(function(Le){Le.match(/^\d+$/)||ye.push(S(j,Y,ne,Ce,Le,!0))}),ye}(j,Y,ne,be,ye):ye.map(function(le){return S(j,Y,ne,be,le,ot)}),j.seen.pop(),function(j,Y,ne){return j.reduce(function(ye,be){return be.indexOf("\n"),ye+be.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?ne[0]+(""===Y?"":Y+"\n ")+" "+j.join(",\n  ")+" "+ne[1]:ne[0]+Y+" "+j.join(", ")+" "+ne[1]}(ce,Le,it)):it[0]+Le+it[1]}function y(j){return"["+Error.prototype.toString.call(j)+"]"}function S(j,Y,ne,Ce,fe,ye){var be,Se,Le;if((Le=Object.getOwnPropertyDescriptor(Y,fe)||{value:Y[fe]}).get?Se=j.stylize(Le.set?"[Getter/Setter]":"[Getter]","special"):Le.set&&(Se=j.stylize("[Setter]","special")),ie(Ce,fe)||(be="["+fe+"]"),Se||(j.seen.indexOf(Le.value)<0?(Se=R(ne)?g(j,Le.value,null):g(j,Le.value,ne-1)).indexOf("\n")>-1&&(Se=ye?Se.split("\n").map(function(ot){return"  "+ot}).join("\n").substr(2):"\n"+Se.split("\n").map(function(ot){return"   "+ot}).join("\n")):Se=j.stylize("[Circular]","special")),z(be)){if(ye&&fe.match(/^\d+$/))return Se;(be=JSON.stringify(""+fe)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(be=be.substr(1,be.length-2),be=j.stylize(be,"name")):(be=be.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),be=j.stylize(be,"string"))}return be+": "+Se}function b(j){return Array.isArray(j)}function T(j){return"boolean"==typeof j}function R(j){return null===j}function K(j){return"number"==typeof j}function U(j){return"string"==typeof j}function z(j){return void 0===j}function se(j){return G(j)&&"[object RegExp]"===Ne(j)}function G(j){return"object"==typeof j&&null!==j}function pe(j){return G(j)&&"[object Date]"===Ne(j)}function Q(j){return G(j)&&("[object Error]"===Ne(j)||j instanceof Error)}function ge(j){return"function"==typeof j}function Ne(j){return Object.prototype.toString.call(j)}function He(j){return j<10?"0"+j.toString(10):j.toString(10)}V.debuglog=function(j){if(z(f)&&(f=v.env.NODE_DEBUG||""),j=j.toUpperCase(),!m[j])if(new RegExp("\\b"+j+"\\b","i").test(f)){var Y=v.pid;m[j]=function(){var ne=V.format.apply(V,arguments);console.error("%s %d: %s",j,Y,ne)}}else m[j]=function(){};return m[j]},V.inspect=c,c.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},c.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},V.isArray=b,V.isBoolean=T,V.isNull=R,V.isNullOrUndefined=function(j){return null==j},V.isNumber=K,V.isString=U,V.isSymbol=function(j){return"symbol"==typeof j},V.isUndefined=z,V.isRegExp=se,V.isObject=G,V.isDate=pe,V.isError=Q,V.isFunction=ge,V.isPrimitive=function(j){return null===j||"boolean"==typeof j||"number"==typeof j||"string"==typeof j||"symbol"==typeof j||void 0===j},V.isBuffer=N("./support/isBuffer");var xe=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function te(){var j=new Date,Y=[He(j.getHours()),He(j.getMinutes()),He(j.getSeconds())].join(":");return[j.getDate(),xe[j.getMonth()],Y].join(" ")}function ie(j,Y){return Object.prototype.hasOwnProperty.call(j,Y)}V.log=function(){console.log("%s - %s",te(),V.format.apply(V,arguments))},V.inherits=N("inherits"),V._extend=function(j,Y){if(!Y||!G(Y))return j;for(var ne=Object.keys(Y),Ce=ne.length;Ce--;)j[ne[Ce]]=Y[ne[Ce]];return j}}).call(this)}).call(this,N("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":96,_process:86,inherits:95}],98:[function(N,P,V){var v=N("./v1"),w=N("./v4"),E=w;E.v1=v,E.v4=w,P.exports=E},{"./v1":101,"./v4":102}],99:[function(N,P,V){for(var v=[],w=0;w<256;++w)v[w]=(w+256).toString(16).substr(1);P.exports=function(m,f){var c=f||0;return[v[m[c++]],v[m[c++]],v[m[c++]],v[m[c++]],"-",v[m[c++]],v[m[c++]],"-",v[m[c++]],v[m[c++]],"-",v[m[c++]],v[m[c++]],"-",v[m[c++]],v[m[c++]],v[m[c++]],v[m[c++]],v[m[c++]],v[m[c++]]].join("")}},{}],100:[function(N,P,V){var v="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(v){var w=new Uint8Array(16);P.exports=function(){return v(w),w}}else{var E=new Array(16);P.exports=function(){for(var c,f=0;f<16;f++)0==(3&f)&&(c=4294967296*Math.random()),E[f]=c>>>((3&f)<<3)&255;return E}}},{}],101:[function(N,P,V){var E,m,v=N("./lib/rng"),w=N("./lib/bytesToUuid"),f=0,c=0;P.exports=function(u,l,g){var d=l&&g||0,y=l||[],_=(u=u||{}).node||E,S=void 0!==u.clockseq?u.clockseq:m;if(null==_||null==S){var D=v();null==_&&(_=E=[1|D[0],D[1],D[2],D[3],D[4],D[5]]),null==S&&(S=m=16383&(D[6]<<8|D[7]))}var b=void 0!==u.msecs?u.msecs:(new Date).getTime(),T=void 0!==u.nsecs?u.nsecs:c+1,R=b-f+(T-c)/1e4;if(R<0&&void 0===u.clockseq&&(S=S+1&16383),(R<0||b>f)&&void 0===u.nsecs&&(T=0),T>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=b,c=T,m=S;var q=(1e4*(268435455&(b+=122192928e5))+T)%4294967296;y[d++]=q>>>24&255,y[d++]=q>>>16&255,y[d++]=q>>>8&255,y[d++]=255&q;var K=b/4294967296*1e4&268435455;y[d++]=K>>>8&255,y[d++]=255&K,y[d++]=K>>>24&15|16,y[d++]=K>>>16&255,y[d++]=S>>>8|128,y[d++]=255&S;for(var U=0;U<6;++U)y[d+U]=_[U];return l||w(y)}},{"./lib/bytesToUuid":99,"./lib/rng":100}],102:[function(N,P,V){var v=N("./lib/rng"),w=N("./lib/bytesToUuid");P.exports=function(m,f,c){var h=f&&c||0;"string"==typeof m&&(f="binary"===m?new Array(16):null,m=null);var u=(m=m||{}).random||(m.rng||v)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,f)for(var l=0;l<16;++l)f[h+l]=u[l];return f||w(u)}},{"./lib/bytesToUuid":99,"./lib/rng":100}],103:[function(N,P,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0});var v=N("./utils/LRU"),E=function(){function m(f){void 0===f&&(f=1e3),this.maxSize=f,this.cache=new v.LRUCache(f)}return Object.defineProperty(m.prototype,"size",{get:function(){return this.cache.length},enumerable:!0,configurable:!0}),m.prototype.put=function(f,c){var h="string"!=typeof f?m.getKeyString(f):f,u=this.populateValue(c);this.cache.put(h,u)},m.prototype.get=function(f){var c="string"!=typeof f?m.getKeyString(f):f,h=Date.now(),u=this.cache.get(c);if(u)for(var l=0;l<u.length;l++)if(u[l].Expire<h)return void this.cache.remove(c);return u},m.getKeyString=function(f){for(var c=[],h=Object.keys(f).sort(),u=0;u<h.length;u++){var l=h[u];void 0!==f[l]&&c.push(f[l])}return c.join(" ")},m.prototype.populateValue=function(f){var c=Date.now();return f.map(function(h){return{Address:h.Address||"",Expire:c+60*(h.CachePeriodInMinutes||1)*1e3}})},m.prototype.empty=function(){this.cache.empty()},m.prototype.remove=function(f){var c="string"!=typeof f?m.getKeyString(f):f;this.cache.remove(c)},m}();V.EndpointCache=E},{"./utils/LRU":104}],104:[function(N,P,V){"use strict";Object.defineProperty(V,"__esModule",{value:!0});var v=function(m,f){this.key=m,this.value=f},w=function(){function E(m){if(this.nodeMap={},this.size=0,"number"!=typeof m||m<1)throw new Error("Cache size can only be positive number");this.sizeLimit=m}return Object.defineProperty(E.prototype,"length",{get:function(){return this.size},enumerable:!0,configurable:!0}),E.prototype.prependToList=function(m){this.headerNode?(this.headerNode.prev=m,m.next=this.headerNode):this.tailNode=m,this.headerNode=m,this.size++},E.prototype.removeFromTail=function(){if(this.tailNode){var m=this.tailNode,f=m.prev;return f&&(f.next=void 0),m.prev=void 0,this.tailNode=f,this.size--,m}},E.prototype.detachFromList=function(m){this.headerNode===m&&(this.headerNode=m.next),this.tailNode===m&&(this.tailNode=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),m.next=void 0,m.prev=void 0,this.size--},E.prototype.get=function(m){if(this.nodeMap[m]){var f=this.nodeMap[m];return this.detachFromList(f),this.prependToList(f),f.value}},E.prototype.remove=function(m){this.nodeMap[m]&&(this.detachFromList(this.nodeMap[m]),delete this.nodeMap[m])},E.prototype.put=function(m,f){if(this.nodeMap[m])this.remove(m);else if(this.size===this.sizeLimit){var c=this.removeFromTail();delete this.nodeMap[c.key]}var u=new v(m,f);this.nodeMap[m]=u,this.prependToList(u)},E.prototype.empty=function(){for(var m=Object.keys(this.nodeMap),f=0;f<m.length;f++){var c=m[f];this.detachFromList(this.nodeMap[c]),delete this.nodeMap[c]}},E}();V.LRUCache=w},{}],105:[function(N,P,V){N("./browser_loader");var v=N("./core");"undefined"!=typeof window&&(window.AWS=v),void 0!==P&&(P.exports=v),"undefined"!=typeof self&&(self.AWS=v),Object.prototype.hasOwnProperty.call(v,"Connect")||(v.apiLoader.services.connect={},v.Connect=v.Service.defineService("connect",["2017-02-15"])),v.apiLoader.services.connect["2017-02-15"]=N("../apis/connect-2017-02-15.min"),Object.prototype.hasOwnProperty.call(v,"STS")||(v.apiLoader.services.sts={},v.STS=v.Service.defineService("sts",["2011-06-15"]),N("./services/sts")),v.apiLoader.services.sts["2011-06-15"]=N("../apis/sts-2011-06-15.min")},{"../apis/connect-2017-02-15.min":3,"../apis/sts-2011-06-15.min":5,"./browser_loader":16,"./core":18,"./services/sts":61}]},{},[105]),function(){var P=function(){return P.cache.hasOwnProperty(arguments[0])||(P.cache[arguments[0]]=P.parse(arguments[0])),P.format.call(null,P.cache[arguments[0]],arguments)};function v(E){return Object.prototype.toString.call(E).slice(8,-1).toLowerCase()}function w(E,m){for(var f=[];m>0;f[--m]=E);return f.join("")}P.format=function(E,m){var u,g,d,y,_,S,D,f=1,c=E.length,h="",l=[];for(g=0;g<c;g++)if("string"===(h=v(E[g])))l.push(E[g]);else if("array"===h){if((y=E[g])[2])for(u=m[f],d=0;d<y[2].length;d++){if(!u.hasOwnProperty(y[2][d]))throw P('[sprintf] property "%s" does not exist',y[2][d]);u=u[y[2][d]]}else u=y[1]?m[y[1]]:m[f++];if(/[^s]/.test(y[8])&&"number"!=v(u))throw P("[sprintf] expecting number but found %s",v(u));switch(y[8]){case"b":u=u.toString(2);break;case"c":u=String.fromCharCode(u);break;case"d":u=parseInt(u,10);break;case"e":u=y[7]?u.toExponential(y[7]):u.toExponential();break;case"f":u=y[7]?parseFloat(u).toFixed(y[7]):parseFloat(u);break;case"o":u=u.toString(8);break;case"s":u=(u=String(u))&&y[7]?u.substring(0,y[7]):u;break;case"u":u>>>=0;break;case"x":u=u.toString(16);break;case"X":u=u.toString(16).toUpperCase()}u=/[def]/.test(y[8])&&y[3]&&u>=0?"+"+u:u,S=y[4]?"0"==y[4]?"0":y[4].charAt(1):" ",D=y[6]-String(u).length,_=y[6]?w(S,D):"",l.push(y[5]?u+_:_+u)}return l.join("")},P.cache={},P.parse=function(E){for(var m=E,f=[],c=[],h=0;m;){if(null!==(f=/^[^\x25]+/.exec(m)))c.push(f[0]);else if(null!==(f=/^\x25{2}/.exec(m)))c.push("%");else{if(null===(f=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(m)))throw"[sprintf] huh?";if(f[2]){h|=1;var u=[],l=f[2],g=[];if(null===(g=/^([a-z_][a-z_\d]*)/i.exec(l)))throw"[sprintf] huh?";for(u.push(g[1]);""!==(l=l.substring(g[0].length));)if(null!==(g=/^\.([a-z_][a-z_\d]*)/i.exec(l)))u.push(g[1]);else{if(null===(g=/^\[(\d+)\]/.exec(l)))throw"[sprintf] huh?";u.push(g[1])}f[2]=u}else h|=2;if(3===h)throw"[sprintf] mixing positional and named placeholders is not (yet) supported";c.push(f)}m=m.substring(f[0].length)}return c},this.sprintf=P,this.vsprintf=function(E,m,f){return(f=m.slice(0)).splice(0,0,E),P.apply(null,f)}}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect;var w={TEST:"TEST",TRACE:"TRACE",DEBUG:"DEBUG",INFO:"INFO",LOG:"LOG",WARN:"WARN",ERROR:"ERROR",CRITICAL:"CRITICAL"},E={CCP:"ccp",SOFTPHONE:"softphone",CHAT:"chat",TASK:"task"},m={TEST:0,TRACE:10,DEBUG:20,INFO:30,LOG:40,WARN:50,ERROR:100,CRITICAL:200},f={TRACE:function(b){console.info(b)},DEBUG:function(b){console.info(b)},INFO:function(b){console.info(b)},LOG:function(b){console.log(b)},TEST:function(b){console.log(b)},WARN:function(b){console.warn(b)},ERROR:function(b){console.error(b)},CRITICAL:function(b){console.error(b)}},h=function(b){var q,K,T=Array.prototype.slice.call(b,0),R=T.shift();return function(b){return-1!==Object.values(E).indexOf(b)}(R)?(K=R,q=T.shift()):(q=R,K=E.CCP),{format:q,component:K,args:T}},u=function(b,T,R,q){this.component=b,this.level=T,this.text=R,this.time=new Date,this.exception=null,this.objects=[],this.line=0,this.agentResourceId=null;try{connect.agent.initialized&&(this.agentResourceId=(new connect.Agent)._getResourceId())}catch(K){console.log("Issue finding agentResourceId: ",K)}this.loggerId=q};u.fromObject=function(b){var T=new u(E.CCP,b.level,b.text,b.loggerId);return T.time="[object Date]"===Object.prototype.toString.call(b.time)?new Date(b.time.getTime()):"number"==typeof b.time?new Date(b.time):"string"==typeof b.time?Date.parse(b.time):new Date,T.exception=b.exception,T.objects=b.objects,T};var l=function(b){var T=/AuthToken.*\=/g;b&&"object"==typeof b&&Object.keys(b).forEach(function(R){"object"==typeof b[R]&&l(b[R]),"string"==typeof b[R]&&("url"===R||"text"===R)&&(b[R]=b[R].replace(T,"[redacted]"))})},g=function(b){this.type=b instanceof Error?b.name:b.code||Object.prototype.toString.call(b),this.message=b.message,this.stack=b.stack?b.stack.split("\n"):[]};u.prototype.toString=function(){return connect.sprintf("[%s] [%s] [%s]: %s",this.getTime()&&this.getTime().toISOString?this.getTime().toISOString():"???",this.getLevel(),this.getAgentResourceId(),this.getText())},u.prototype.getTime=function(){return this.time},u.prototype.getAgentResourceId=function(){return this.agentResourceId},u.prototype.getLevel=function(){return this.level},u.prototype.getText=function(){return this.text},u.prototype.getComponent=function(){return this.component},u.prototype.withException=function(b){return this.exception=new g(b),this},u.prototype.withObject=function(b){var T=connect.deepcopy(b);return l(T),this.objects.push(T),this},u.prototype.withCrossOriginEventObject=function(b){var T=connect.deepcopyCrossOriginEvent(b);return l(T),this.objects.push(T),this},u.prototype.sendInternalLogToServer=function(){return connect.getLog()._serverBoundInternalLogs.push(this),this};var d=function(){this._logs=[],this._rolledLogs=[],this._logsToPush=[],this._serverBoundInternalLogs=[],this._echoLevel=m.INFO,this._logLevel=m.INFO,this._lineCount=0,this._logRollInterval=0,this._logRollTimer=null,this._loggerId=(new Date).getTime()+"-"+Math.random().toString(36).slice(2),this.setLogRollInterval(18e5),this._startLogIndexToPush=0};d.prototype.setLogRollInterval=function(b){var T=this;this._logRollTimer&&b===this._logRollInterval?this.warn("Logger is already set to the given interval: %d",this._logRollInterval):(this._logRollTimer&&N.clearInterval(this._logRollTimer),this._logRollInterval=b,this._logRollTimer=N.setInterval(function(){this._rolledLogs=this._logs,this._logs=[],this._startLogIndexToPush=0,T.info("Log roll interval occurred.")},this._logRollInterval))},d.prototype.setLogLevel=function(b){if(!(b in m))throw new Error("Unknown logging level: "+b);this._logLevel=m[b]},d.prototype.setEchoLevel=function(b){if(!(b in m))throw new Error("Unknown logging level: "+b);this._echoLevel=m[b]},d.prototype.write=function(b,T,R){var q=new u(b,T,R,this.getLoggerId());return l(q),this.addLogEntry(q),q},d.prototype.addLogEntry=function(b){l(b),this._logs.push(b),E.SOFTPHONE===b.component&&this._logsToPush.push(b),b.level in m&&m[b.level]>=this._logLevel&&(m[b.level]>=this._echoLevel&&f[b.getLevel()](b.toString()),b.line=this._lineCount++)},d.prototype.sendInternalLogEntryToServer=function(b){this._serverBoundInternalLogs.push(b),b.level in m&&m[b.level]>=this._logLevel&&(m[b.level]>=this._echoLevel&&f[b.getLevel()](b.toString()),b.line=this._lineCount++)},d.prototype.clearObjects=function(){for(var b=0;b<this._logs.length;b++)this._logs[b].objects&&delete this._logs[b].objects},d.prototype.clearExceptions=function(){for(var b=0;b<this._logs.length;b++)this._logs[b].exception&&delete this._logs[b].exception},d.prototype.trace=function(){var b=h(arguments);return this.write(b.component,w.TRACE,connect.vsprintf(b.format,b.args))},d.prototype.debug=function(){var b=h(arguments);return this.write(b.component,w.DEBUG,connect.vsprintf(b.format,b.args))},d.prototype.info=function(){var b=h(arguments);return this.write(b.component,w.INFO,connect.vsprintf(b.format,b.args))},d.prototype.log=function(){var b=h(arguments);return this.write(b.component,w.LOG,connect.vsprintf(b.format,b.args))},d.prototype.test=function(){var b=h(arguments);return this.write(b.component,w.TEST,connect.vsprintf(b.format,b.args))},d.prototype.warn=function(){var b=h(arguments);return this.write(b.component,w.WARN,connect.vsprintf(b.format,b.args))},d.prototype.error=function(){var b=h(arguments);return this.write(b.component,w.ERROR,connect.vsprintf(b.format,b.args))},d.prototype.critical=function(){var b=h(arguments);return this.write(b.component,w.ERROR,connect.vsprintf(b.format,b.args))},d.prototype.toString=function(){for(var b=[],T=0;T<this._logs.length;T++)b.push(this._logs[T].toString());return b.join("\n")},d.prototype.download=function(b){var T="agent-log",R=!1;"object"==typeof b?(T=b.logName||T,R=b.filterByLogLevel||R):"string"==typeof b&&(T=b||T);var q=this,K=this._rolledLogs.concat(this._logs);R&&(K=K.filter(function(z){return m[z.level]>=q._logLevel}));var U=new N.Blob([JSON.stringify(K,void 0,4)],["text/plain"]),J=document.createElement("a");T=T||"agent-log",J.href=N.URL.createObjectURL(U),J.download=T+".txt",document.body.appendChild(J),J.click(),document.body.removeChild(J)},d.prototype.scheduleUpstreamLogPush=function(b){connect.upstreamLogPushScheduled||(connect.upstreamLogPushScheduled=!0,N.setInterval(connect.hitch(this,this.reportMasterLogsUpStream,b),5e3))},d.prototype.reportMasterLogsUpStream=function(b){var T=this._logsToPush.slice();this._logsToPush=[],connect.ifMaster(connect.MasterTopics.SEND_LOGS,function(){T.length>0&&b.sendUpstream(connect.EventType.SEND_LOGS,T)})},d.prototype.scheduleUpstreamOuterContextCCPserverBoundLogsPush=function(b){N.setInterval(connect.hitch(this,this.pushOuterContextCCPserverBoundLogsUpstream,b),1e3)},d.prototype.scheduleUpstreamOuterContextCCPLogsPush=function(b){N.setInterval(connect.hitch(this,this.pushOuterContextCCPLogsUpstream,b),1e3)},d.prototype.pushOuterContextCCPserverBoundLogsUpstream=function(b){if(this._serverBoundInternalLogs.length>0){for(var T=0;T<this._serverBoundInternalLogs.length;T++)this._serverBoundInternalLogs[T].text=this._serverBoundInternalLogs[T].text;b.sendUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG,this._serverBoundInternalLogs),this._serverBoundInternalLogs=[]}},d.prototype.pushOuterContextCCPLogsUpstream=function(b){for(var T=this._startLogIndexToPush;T<this._logs.length;T++)this._logs[T].loggerId===this._loggerId&&b.sendUpstream(connect.EventType.LOG,this._logs[T]);this._startLogIndexToPush=this._logs.length},d.prototype.getLoggerId=function(){return this._loggerId},d.prototype.scheduleDownstreamClientSideLogsPush=function(){N.setInterval(connect.hitch(this,this.pushClientSideLogsDownstream),5e3)},d.prototype.pushClientSideLogsDownstream=function(){var b=[];this._serverBoundInternalLogs.length<50||(this._serverBoundInternalLogs.length>500?b=this._serverBoundInternalLogs.splice(0,500):(b=this._serverBoundInternalLogs,this._serverBoundInternalLogs=[]),connect.publishClientSideLogs(b))};var y=function(b){d.call(this),this.conduit=b,N.setInterval(connect.hitch(this,this._pushLogsDownstream),y.LOG_PUSH_INTERVAL),N.clearInterval(this._logRollTimer),this._logRollTimer=null};y.LOG_PUSH_INTERVAL=1e3,y.prototype=Object.create(d.prototype),y.prototype.constructor=y,y.prototype.pushLogsDownstream=function(b){var T=this;b.forEach(function(R){T.conduit.sendDownstream(connect.EventType.LOG,R)})},y.prototype._pushLogsDownstream=function(){var b=this;this._logs.forEach(function(R){b.conduit.sendDownstream(connect.EventType.LOG,R)}),this._logs=[];for(var T=0;T<this._serverBoundInternalLogs.length;T++)this.conduit.sendDownstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG,this._serverBoundInternalLogs[T]);this._serverBoundInternalLogs=[]};var _=function(b){return function(){try{return b.apply(this,arguments)}catch(R){f.ERROR(R)}}};connect.rootLogger=new d,function(b){for(var T in b)"function"==typeof b[T]&&(b[T]=_(b[T]))}(connect.rootLogger),connect=connect||{},connect.getLog=function(){return connect.rootLogger},connect.LogEntry=u,connect.Logger=d,connect.LogLevel=w,connect.LogComponent=E,connect.DownstreamConduitLogger=y}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect;var P=navigator.userAgent,E=["bubbles","cancelBubble","cancelable","composed","data","defaultPrevented","eventPhase","isTrusted","lastEventId","origin","returnValue","timeStamp","type"];connect.sprintf=N.sprintf,connect.vsprintf=N.vsprintf,delete N.sprintf,delete N.vsprintf,connect.HTTP_STATUS_CODES={SUCCESS:200,TOO_MANY_REQUESTS:429,INTERNAL_SERVER_ERROR:500},connect.TRANSPORT_TYPES={CHAT_TOKEN:"chat_token",WEB_SOCKET:"web_socket"},connect.hitch=function(){var f=Array.prototype.slice.call(arguments),c=f.shift(),h=f.shift();return connect.assertNotNull(c,"scope"),connect.assertNotNull(h,"method"),connect.assertTrue(connect.isFunction(h),"method must be a function"),function(){var u=Array.prototype.slice.call(arguments);return h.apply(c,f.concat(u))}},connect.isFunction=function(f){return!!(f&&f.constructor&&f.call&&f.apply)},connect.isArray=function(f){return"[object Array]"===Object.prototype.toString.call(f)},connect.keys=function(f){var c=[];for(var h in connect.assertNotNull(f,"map"),f)c.push(h);return c},connect.values=function(f){var c=[];for(var h in connect.assertNotNull(f,"map"),f)c.push(f[h]);return c},connect.entries=function(f){var c=[];for(var h in f)c.push({key:h,value:f[h]});return c},connect.merge=function(){var f=Array.prototype.slice.call(arguments,0),c={};return f.forEach(function(h){connect.entries(h).forEach(function(u){c[u.key]=u.value})}),c},connect.now=function(){return(new Date).getTime()},connect.find=function(f,c){for(var h=0;h<f.length;h++)if(c(f[h]))return f[h];return null},connect.contains=function(f,c){return f instanceof Array?null!=connect.find(f,function(h){return h===c}):c in f},connect.containsValue=function(f,c){return f instanceof Array?null!=connect.find(f,function(h){return h===c}):null!=connect.find(connect.values(f),function(h){return h===c})},connect.randomId=function(){return connect.sprintf("%s-%s",connect.now(),Math.random().toString(36).slice(2))},connect.makeEnum=function(f){var c={};return f.forEach(function(h){var u=h.replace(/\.?([a-z]+)_?/g,function(l,g){return g.toUpperCase()+"_"}).replace(/_$/,"");c[u]=h}),c},connect.makeNamespacedEnum=function(f,c){var h=connect.makeEnum(c);return connect.keys(h).forEach(function(u){h[u]=connect.sprintf("%s::%s",f,h[u])}),h},connect.makeGenericNamespacedEnum=function(f,c,h){var u=connect.makeEnum(c);return connect.keys(u).forEach(function(l){u[l]=connect.sprintf("%s"+h+"%s",f,u[l])}),u},connect.isChromeBrowser=function(){return-1!==P.indexOf("Chrome")},connect.isFirefoxBrowser=function(){return-1!==P.indexOf("Firefox")},connect.isOperaBrowser=function(){return-1!==P.indexOf("Opera")},connect.getChromeBrowserVersion=function(){var f=P.substring(P.indexOf("Chrome")+7);return f?parseFloat(f):-1},connect.getFirefoxBrowserVersion=function(){var f=P.substring(P.indexOf("Firefox")+8);return f?parseFloat(f):-1},connect.isValidLocale=function(f){return[{id:"en_US",label:"English"},{id:"de_DE",label:"Deutsch"},{id:"es_ES",label:"Espa\xf1ol"},{id:"fr_FR",label:"Fran\xe7ais"},{id:"ja_JP",label:"\u65e5\u672c\u8a9e"},{id:"it_IT",label:"Italiano"},{id:"ko_KR",label:"\ud55c\uad6d\uc5b4"},{id:"pt_BR",label:"Portugu\xeas"},{id:"zh_CN",label:"\u4e2d\u6587(\u7b80\u4f53)"},{id:"zh_TW",label:"\u4e2d\u6587(\u7e41\u9ad4)"}].map(function(h){return h.id}).includes(f)},connect.getOperaBrowserVersion=function(){var f=P.indexOf("Opera"),c=-1!==P.indexOf("Version")?P.substring(f+8):P.substring(f+6);return c?parseFloat(c):-1},connect.index=function(f,c){var h={};return f.forEach(function(u){h[c(u)]=u}),h},connect.set=function(f){var c={};return f.forEach(function(h){c[h]=1}),c},connect.relativeComplement=function(f,c){var h={};return connect.keys(c).forEach(function(u){u in f||(h[u]=c[u])}),h},connect.assertTrue=function(f,c){if(!f)throw new connect.ValueError(c)},connect.assertNotNull=function(f,c){return connect.assertTrue(null!=f&&void 0!==typeof f,connect.sprintf("%s must be provided",c||"A value")),f},connect.deepcopy=function(f){return JSON.parse(JSON.stringify(f))},connect.deepcopyCrossOriginEvent=function(f){const c={};return E.forEach(u=>{try{c[u]=f[u]}catch(l){connect.getLog().info("deepcopyCrossOriginEvent failed on key: ",u).sendInternalLogToServer()}}),connect.deepcopy(c)},connect.getBaseUrl=function(){var f=N.location;return connect.sprintf("%s//%s:%s",f.protocol,f.hostname,f.port)},connect.getUrlWithProtocol=function(f){var c=N.location.protocol;return f.substr(0,c.length)!==c?connect.sprintf("%s//%s",c,f):f},connect.isFramed=function(){try{return window.self!==window.top}catch(f){return!0}},connect.hasOtherConnectedCCPs=function(){return connect.numberOfConnectedCCPs>1},connect.fetch=function(f,c,h,u){return u=u||5,h=h||1e3,c=c||{},new Promise(function(l,g){!function d(y){fetch(f,c).then(function(_){_.status===connect.HTTP_STATUS_CODES.SUCCESS?_.json().then(S=>l(S)).catch(()=>l({})):1!==y&&(_.status>=connect.HTTP_STATUS_CODES.INTERNAL_SERVER_ERROR||_.status===connect.HTTP_STATUS_CODES.TOO_MANY_REQUESTS)?setTimeout(function(){d(--y)},h):g(_)}).catch(function(_){g(_)})}(u)})},connect.backoff=function(f,c,h,u){connect.assertTrue(connect.isFunction(f),"func must be a Function");var l=this;f({success:function(d){u&&u.success&&u.success(d)},failure:function(d,y){if(h>0){var _=2*c*Math.random();N.setTimeout(function(){l.backoff(f,2*_,--h,u)},_)}else u&&u.failure&&u.failure(d,y)}})},connect.publishMetric=function(f){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.CLIENT_METRIC,data:f})},connect.publishSoftphoneStats=function(f){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.SOFTPHONE_STATS,data:f})},connect.publishSoftphoneReport=function(f){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.SOFTPHONE_REPORT,data:f})},connect.publishClientSideLogs=function(f){connect.core.getEventBus().trigger(connect.EventType.CLIENT_SIDE_LOGS,f)},connect.PopupManager=function(){},connect.PopupManager.prototype.open=function(f,c,h){var u=this._getLastOpenedTimestamp(c),l=(new Date).getTime(),g=null;if(l-u>864e5){if(h){var d=h.height||578,y=h.width||433,_=h.top||0,S=h.left||0;(g=window.open("",c,"width="+y+", height="+d+", top="+_+", left="+S)).location!==f&&(g=window.open(f,c,"width="+y+", height="+d+", top="+_+", left="+S))}else(g=window.open("",c)).location!==f&&(g=window.open(f,c));this._setLastOpenedTimestamp(c,l)}return g},connect.PopupManager.prototype.clear=function(f){var c=this._getLocalStorageKey(f);N.localStorage.removeItem(c)},connect.PopupManager.prototype._getLastOpenedTimestamp=function(f){var c=this._getLocalStorageKey(f),h=N.localStorage.getItem(c);return h?parseInt(h,10):0},connect.PopupManager.prototype._setLastOpenedTimestamp=function(f,c){var h=this._getLocalStorageKey(f);N.localStorage.setItem(h,""+c)},connect.PopupManager.prototype._getLocalStorageKey=function(f){return"connectPopupManager::"+f};var m=connect.makeEnum(["granted","denied","default"]);connect.NotificationManager=function(){this.queue=[],this.permission=m.DEFAULT},connect.NotificationManager.prototype.requestPermission=function(){var f=this;"Notification"in N?N.Notification.permission===m.DENIED?(connect.getLog().warn("The user has requested to not receive notifications.").sendInternalLogToServer(),this.permission=m.DENIED):this.permission!==m.GRANTED&&N.Notification.requestPermission().then(function(c){f.permission=c,c===m.GRANTED?f._showQueued():f.queue=[]}):(connect.getLog().warn("This browser doesn't support notifications.").sendInternalLogToServer(),this.permission=m.DENIED)},connect.NotificationManager.prototype.show=function(f,c){if(this.permission===m.GRANTED)return this._showImpl({title:f,options:c});if(this.permission===m.DENIED)connect.getLog().warn("Unable to show notification.").sendInternalLogToServer().withObject({title:f,options:c});else{var h={title:f,options:c};connect.getLog().warn("Deferring notification until user decides to allow or deny.").withObject(h).sendInternalLogToServer(),this.queue.push(h)}},connect.NotificationManager.prototype._showQueued=function(){var f=this,c=this.queue.map(function(h){return f._showImpl(h)});return this.queue=[],c},connect.NotificationManager.prototype._showImpl=function(f){var c=new N.Notification(f.title,f.options);return f.options.clicked&&(c.onclick=function(){f.options.clicked.call(c)}),c},connect.BaseError=function(f,c){N.Error.call(this,connect.vsprintf(f,c))},connect.BaseError.prototype=Object.create(Error.prototype),connect.BaseError.prototype.constructor=connect.BaseError,connect.ValueError=function(){var f=Array.prototype.slice.call(arguments,0),c=f.shift();connect.BaseError.call(this,c,f)},connect.ValueError.prototype=Object.create(connect.BaseError.prototype),connect.ValueError.prototype.constructor=connect.ValueError,connect.NotImplementedError=function(){var f=Array.prototype.slice.call(arguments,0),c=f.shift();connect.BaseError.call(this,c,f)},connect.NotImplementedError.prototype=Object.create(connect.BaseError.prototype),connect.NotImplementedError.prototype.constructor=connect.NotImplementedError,connect.StateError=function(){var f=Array.prototype.slice.call(arguments,0),c=f.shift();connect.BaseError.call(this,c,f)},connect.StateError.prototype=Object.create(connect.BaseError.prototype),connect.StateError.prototype.constructor=connect.StateError,connect.VoiceIdError=function(f,c,h){var u={};return u.type=f,u.message=c,u.stack=Error(c).stack,u.err=h,u},connect.isCCP=function(){return"ConnectSharedWorkerConduit"===connect.core.getUpstream().name}}(),function(){connect=this.connect||{},this.connect=connect;var P="<<all>>",V=connect.makeEnum(["acknowledge","ack_timeout","init","api_request","api_response","auth_fail","access_denied","close","configure","log","master_request","master_response","synchronize","terminate","terminated","send_logs","reload_agent_configuration","broadcast","api_metric","client_metric","softphone_stats","softphone_report","client_side_logs","server_bound_internal_log","mute","iframe_style","update_connected_ccps","outer_context_info","media_device_request","media_device_response"]),v=connect.makeNamespacedEnum("connect",["loginPopup","sendLogs","softphone","ringtone","metrics"]),w=connect.makeNamespacedEnum("agent",["init","update","refresh","routable","not_routable","pending","contact_pending","offline","error","softphone_error","websocket_connection_lost","websocket_connection_gained","state_change","acw","mute_toggle","local_media_stream_created","enqueued_next_state"]),E=connect.makeNamespacedEnum("webSocket",["init_failure","connection_open","connection_close","connection_error","connection_gain","connection_lost","subscription_update","subscription_failure","all_message","send","subscribe"]),m=connect.makeNamespacedEnum("contact",["init","refresh","destroyed","incoming","pending","connecting","connected","missed","acw","view","ended","error","accepted"]),f=connect.makeNamespacedEnum("taskList",["activate_channel_with_view_type"]),c=connect.makeNamespacedEnum("task",["created"]),h=connect.makeNamespacedEnum("connection",["session_init","ready_to_start_session"]),u=connect.makeNamespacedEnum("configuration",["configure","set_speaker_device","set_microphone_device","set_ringer_device","speaker_device_changed","microphone_device_changed","ringer_device_changed"]),l=connect.makeNamespacedEnum("voiceId",["update_domain_id"]),g=function(){};g.createRequest=function(S,D,b){return{event:S,requestId:connect.randomId(),method:D,params:b}},g.createResponse=function(S,D,b,T){return{event:S,requestId:D.requestId,data:b,err:T||null}};var d=function(S,D,b){this.subMap=S,this.id=connect.randomId(),this.eventName=D,this.f=b};d.prototype.unsubscribe=function(){this.subMap.unsubscribe(this.eventName,this.id)};var y=function(){this.subIdMap={},this.subEventNameMap={}};y.prototype.subscribe=function(S,D){var b=new d(this,S,D);this.subIdMap[b.id]=b;var T=this.subEventNameMap[S]||[];return T.push(b),this.subEventNameMap[S]=T,b},y.prototype.unsubscribe=function(S,D){connect.contains(this.subEventNameMap,S)&&(this.subEventNameMap[S]=this.subEventNameMap[S].filter(function(b){return b.id!==D}),this.subEventNameMap[S].length<1&&delete this.subEventNameMap[S]),connect.contains(this.subIdMap,D)&&delete this.subIdMap[D]},y.prototype.getAllSubscriptions=function(){return connect.values(this.subEventNameMap).reduce(function(S,D){return S.concat(D)},[])},y.prototype.getSubscriptions=function(S){return this.subEventNameMap[S]||[]};var _=function(S){var D=S||{};this.subMap=new y,this.logEvents=D.logEvents||!1};_.prototype.subscribe=function(S,D){return connect.assertNotNull(S,"eventName"),connect.assertNotNull(D,"f"),connect.assertTrue(connect.isFunction(D),"f must be a function"),this.subMap.subscribe(S,D)},_.prototype.subscribeAll=function(S){return connect.assertNotNull(S,"f"),connect.assertTrue(connect.isFunction(S),"f must be a function"),this.subMap.subscribe(P,S)},_.prototype.getSubscriptions=function(S){return this.subMap.getSubscriptions(S)},_.prototype.trigger=function(S,D){connect.assertNotNull(S,"eventName");var b=this,T=this.subMap.getSubscriptions(P),R=this.subMap.getSubscriptions(S);this.logEvents&&S!==connect.EventType.LOG&&S!==connect.EventType.MASTER_RESPONSE&&S!==connect.EventType.API_METRIC&&S!==connect.EventType.SERVER_BOUND_INTERNAL_LOG&&connect.getLog().trace("Publishing event: %s",S).sendInternalLogToServer(),S.startsWith(connect.ContactEvents.ACCEPTED)&&D&&D.contactId&&!(D instanceof connect.Contact)&&(D=new connect.Contact(D.contactId)),T.concat(R).forEach(function(q){try{q.f(D||null,S,b)}catch(K){connect.getLog().error("'%s' event handler failed.",S).withException(K).sendInternalLogToServer()}})},_.prototype.bridge=function(){var S=this;return function(D,b){S.trigger(b,D)}},_.prototype.unsubscribeAll=function(){this.subMap.getAllSubscriptions().forEach(function(S){S.unsubscribe()})},connect.EventBus=_,connect.EventFactory=g,connect.EventType=V,connect.AgentEvents=w,connect.ConfigurationEvents=u,connect.ConnectionEvents=h,connect.ConnnectionEvents=h,connect.ContactEvents=m,connect.ChannelViewEvents=f,connect.TaskEvents=c,connect.VoiceIdEvents=l,connect.WebSocketEvents=E,connect.MasterTopics=v}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect;var P=function(){};P.prototype.send=function(h){throw new connect.NotImplementedError},P.prototype.onMessage=function(h){throw new connect.NotImplementedError};var V=function(){P.call(this)};(V.prototype=Object.create(P.prototype)).constructor=V,V.prototype.onMessage=function(h){},V.prototype.send=function(h){};var v=function(h,u){P.call(this),this.window=h,this.domain=u||"*"};(v.prototype=Object.create(P.prototype)).constructor=v,v.prototype.send=function(h){this.window.postMessage(h,this.domain)},v.prototype.onMessage=function(h){this.window.addEventListener("message",h)};var w=function(h,u,l){P.call(this),this.input=h,this.output=u,this.domain=l||"*"};(w.prototype=Object.create(P.prototype)).constructor=w,w.prototype.send=function(h){this.output.postMessage(h,this.domain)},w.prototype.onMessage=function(h){this.input.addEventListener("message",u=>{u.source===this.output?h(u):connect.getLog().warn("[Window IO Stream] message event came from somewhere other than the CCP iFrame").withCrossOriginEventObject(u).sendInternalLogToServer()})};var E=function(h){P.call(this),this.port=h,this.id=connect.randomId()};(E.prototype=Object.create(P.prototype)).constructor=E,E.prototype.send=function(h){this.port.postMessage(h)},E.prototype.onMessage=function(h){this.port.addEventListener("message",h)},E.prototype.getId=function(){return this.id};var m=function(h){P.call(this),this.streamMap=h?connect.index(h,function(u){return u.getId()}):{},this.messageListeners=[]};(m.prototype=Object.create(P.prototype)).constructor=m,m.prototype.send=function(h){this.getStreams().forEach(function(u){try{u.send(h)}catch(l){}})},m.prototype.onMessage=function(h){this.messageListeners.push(h),this.getStreams().forEach(function(u){u.onMessage(h)})},m.prototype.addStream=function(h){this.streamMap[h.getId()]=h,this.messageListeners.forEach(function(l){h.onMessage(l)})},m.prototype.removeStream=function(h){delete this.streamMap[h.getId()]},m.prototype.getStreams=function(h){return connect.values(this.streamMap)},m.prototype.getStreamForPort=function(h){return connect.find(this.getStreams(),function(u){return u.port===h})};var f=function(h,u,l){this.name=h,this.upstream=u||new V,this.downstream=l||new V,this.downstreamBus=new connect.EventBus,this.upstreamBus=new connect.EventBus,this.upstream.onMessage(connect.hitch(this,this._dispatchEvent,this.upstreamBus)),this.downstream.onMessage(connect.hitch(this,this._dispatchEvent,this.downstreamBus))};f.prototype.onUpstream=function(h,u){return connect.assertNotNull(h,"eventName"),connect.assertNotNull(u,"f"),connect.assertTrue(connect.isFunction(u),"f must be a function"),this.upstreamBus.subscribe(h,u)},f.prototype.onAllUpstream=function(h){return connect.assertNotNull(h,"f"),connect.assertTrue(connect.isFunction(h),"f must be a function"),this.upstreamBus.subscribeAll(h)},f.prototype.onDownstream=function(h,u){return connect.assertNotNull(h,"eventName"),connect.assertNotNull(u,"f"),connect.assertTrue(connect.isFunction(u),"f must be a function"),this.downstreamBus.subscribe(h,u)},f.prototype.onAllDownstream=function(h){return connect.assertNotNull(h,"f"),connect.assertTrue(connect.isFunction(h),"f must be a function"),this.downstreamBus.subscribeAll(h)},f.prototype.sendUpstream=function(h,u){connect.assertNotNull(h,"eventName"),this.upstream.send({event:h,data:u})},f.prototype.sendDownstream=function(h,u){connect.assertNotNull(h,"eventName"),this.downstream.send({event:h,data:u})},f.prototype._dispatchEvent=function(h,u){var l=u.data;l.event&&h.trigger(l.event,l.data)},f.prototype.passUpstream=function(){var h=this;return function(u,l){h.upstream.send({event:l,data:u})}},f.prototype.passDownstream=function(){var h=this;return function(u,l){h.downstream.send({event:l,data:u})}},f.prototype.shutdown=function(){this.upstreamBus.unsubscribeAll(),this.downstreamBus.unsubscribeAll()};var c=function(h,u,l,g){f.call(this,h,new w(u,l.contentWindow,g||"*"),null)};(c.prototype=Object.create(f.prototype)).constructor=c,connect.Stream=P,connect.NullStream=V,connect.WindowStream=v,connect.WindowIOStream=w,connect.PortStream=E,connect.StreamMultiplexer=m,connect.Conduit=f,connect.IFrameConduit=c}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,connect.ClientMethods=connect.makeEnum(["getAgentSnapshot","putAgentState","getAgentStates","getDialableCountryCodes","getRoutingProfileQueues","getAgentPermissions","getAgentConfiguration","updateAgentConfiguration","acceptContact","createOutboundContact","createTaskContact","clearContact","completeContact","destroyContact","rejectContact","notifyContactIssue","updateContactAttributes","createAdditionalConnection","destroyConnection","holdConnection","resumeConnection","toggleActiveConnections","conferenceConnections","sendClientLogs","sendDigits","sendSoftphoneCallReport","sendSoftphoneCallMetrics","getEndpoints","getNewAuthToken","createTransport"]),connect.AgentAppClientMethods={GET_CONTACT:"AgentAppService.Lcms.getContact",DELETE_SPEAKER:"AgentAppService.VoiceId.deleteSpeaker",ENROLL_BY_SESSION:"AgentAppService.VoiceId.enrollBySession",EVALUATE_SESSION:"AgentAppService.VoiceId.evaluateSession",DESCRIBE_SPEAKER:"AgentAppService.VoiceId.describeSpeaker",OPT_OUT_SPEAKER:"AgentAppService.VoiceId.optOutSpeaker",UPDATE_VOICE_ID_DATA:"AgentAppService.Lcms.updateVoiceIdData",DESCRIBE_SESSION:"AgentAppService.VoiceId.describeSession",UPDATE_SESSION:"AgentAppService.VoiceId.updateSession",START_VOICE_ID_SESSION:"AgentAppService.Nasa.startVoiceIdSession",LIST_INTEGRATION_ASSOCIATIONS:"AgentAppService.Acs.listIntegrationAssociations"},connect.MasterMethods=connect.makeEnum(["becomeMaster","checkMaster"]);var P=function(){};P.EMPTY_CALLBACKS={success:function(){},failure:function(){}},P.prototype.call=function(c,h,u){connect.assertNotNull(c,"method"),this._callImpl(c,h||{},u||P.EMPTY_CALLBACKS)},P.prototype._callImpl=function(c,h,u){throw new connect.NotImplementedError};var V=function(){P.call(this)};(V.prototype=Object.create(P.prototype)).constructor=V,V.prototype._callImpl=function(c,h,u){if(u&&u.failure){var l=connect.sprintf("No such method exists on NULL client: %s",c);u.failure(new connect.ValueError(l),{message:l})}};var v=function(c,h,u){P.call(this),this.conduit=c,this.requestEvent=h,this.responseEvent=u,this._requestIdCallbacksMap={},this.conduit.onUpstream(u,connect.hitch(this,this._handleResponse))};(v.prototype=Object.create(P.prototype)).constructor=v,v.prototype._callImpl=function(c,h,u){var l=connect.EventFactory.createRequest(this.requestEvent,c,h);this._requestIdCallbacksMap[l.requestId]=u,this.conduit.sendUpstream(l.event,l)},v.prototype._getCallbacksForRequest=function(c){var h=this._requestIdCallbacksMap[c]||null;return null!=h&&delete this._requestIdCallbacksMap[c],h},v.prototype._handleResponse=function(c){var h=this._getCallbacksForRequest(c.requestId);null!=h&&(c.err&&h.failure?h.failure(c.err,c.data):h.success&&h.success(c.data))};var w=function(c){v.call(this,c,connect.EventType.API_REQUEST,connect.EventType.API_RESPONSE)};(w.prototype=Object.create(v.prototype)).constructor=w;var E=function(c){v.call(this,c,connect.EventType.MASTER_REQUEST,connect.EventType.MASTER_RESPONSE)};(E.prototype=Object.create(v.prototype)).constructor=E;var m=function(c,h,u){connect.assertNotNull(c,"authCookieName"),connect.assertNotNull(h,"authToken"),connect.assertNotNull(u,"endpoint"),P.call(this),this.endpointUrl=connect.getUrlWithProtocol(u),this.authToken=h,this.authCookieName=c};(m.prototype=Object.create(P.prototype)).constructor=m,m.prototype._callImpl=function(c,h,u){var l=this,g={};g[l.authCookieName]=l.authToken;var d={method:"post",body:JSON.stringify(h||{}),headers:{Accept:"application/json","Content-Type":"application/json","X-Amz-target":c,"X-Amz-Bearer":JSON.stringify(g)}};connect.fetch(l.endpointUrl,d).then(function(y){u.success(y)}).catch(function(y){const _=y.body.getReader();let S="";const D=new TextDecoder;_.read().then(function b({done:T,value:R}){if(T){var q=JSON.parse(S);return q.status=y.status,void u.failure(q)}return S+=D.decode(R),_.read().then(b)})})};var f=function(c,h,u){connect.assertNotNull(c,"authToken"),connect.assertNotNull(h,"region"),P.call(this),AWS.config.credentials=new AWS.Credentials({}),AWS.config.region=h,this.authToken=c;var l=connect.getBaseUrl(),g=u||(l.includes(".awsapps.com")?l+"/connect/api":l+"/api"),d=new AWS.Endpoint(g);this.client=new AWS.Connect({endpoint:d})};(f.prototype=Object.create(P.prototype)).constructor=f,f.prototype._callImpl=function(c,h,u){var l=this,g=connect.getLog();if(connect.contains(this.client,c))h=this._translateParams(c,h),g.trace("AWSClient: --\x3e Calling operation '%s'",c).sendInternalLogToServer(),this.client[c](h).on("build",function(y){y.httpRequest.headers["X-Amz-Bearer"]=l.authToken}).send(function(y,_){try{if(y){if(y.code===connect.CTIExceptions.UNAUTHORIZED_EXCEPTION)u.authFailure();else if(!u.accessDenied||y.code!==connect.CTIExceptions.ACCESS_DENIED_EXCEPTION&&403!==y.statusCode){var S={};S.type=y.code,S.message=y.message,S.stack=y.stack?y.stack.split("\n"):[],u.failure(S,_)}else u.accessDenied();g.trace("AWSClient: <-- Operation '%s' failed: %s",c,JSON.stringify(y)).sendInternalLogToServer()}else g.trace("AWSClient: <-- Operation '%s' succeeded.",c).withObject(_).sendInternalLogToServer(),u.success(_)}catch(D){connect.getLog().error("Failed to handle AWS API request for method %s",c).withException(D).sendInternalLogToServer()}});else{var d=connect.sprintf("No such method exists on AWS client: %s",c);u.failure(new connect.ValueError(d),{message:d})}},f.prototype._requiresAuthenticationParam=function(c){return c!==connect.ClientMethods.COMPLETE_CONTACT&&c!==connect.ClientMethods.CLEAR_CONTACT&&c!==connect.ClientMethods.REJECT_CONTACT&&c!==connect.ClientMethods.CREATE_TASK_CONTACT},f.prototype._translateParams=function(c,h){switch(c){case connect.ClientMethods.UPDATE_AGENT_CONFIGURATION:h.configuration=this._translateAgentConfiguration(h.configuration);break;case connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS:h.softphoneStreamStatistics=this._translateSoftphoneStreamStatistics(h.softphoneStreamStatistics);break;case connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT:h.report=this._translateSoftphoneCallReport(h.report)}return this._requiresAuthenticationParam(c)&&(h.authentication={authToken:this.authToken}),h},f.prototype._translateAgentConfiguration=function(c){return{name:c.name,softphoneEnabled:c.softphoneEnabled,softphoneAutoAccept:c.softphoneAutoAccept,extension:c.extension,routingProfile:this._translateRoutingProfile(c.routingProfile),agentPreferences:c.agentPreferences}},f.prototype._translateRoutingProfile=function(c){return{name:c.name,routingProfileARN:c.routingProfileARN,defaultOutboundQueue:this._translateQueue(c.defaultOutboundQueue)}},f.prototype._translateQueue=function(c){return{queueARN:c.queueARN,name:c.name}},f.prototype._translateSoftphoneStreamStatistics=function(c){return c.forEach(function(h){"packetsCount"in h&&(h.packetCount=h.packetsCount,delete h.packetsCount)}),c},f.prototype._translateSoftphoneCallReport=function(c){return"handshakingTimeMillis"in c&&(c.handshakeTimeMillis=c.handshakingTimeMillis,delete c.handshakingTimeMillis),"preTalkingTimeMillis"in c&&(c.preTalkTimeMillis=c.preTalkingTimeMillis,delete c.preTalkingTimeMillis),"handshakingFailure"in c&&(c.handshakeFailure=c.handshakingFailure,delete c.handshakingFailure),"talkingTimeMillis"in c&&(c.talkTimeMillis=c.talkingTimeMillis,delete c.talkingTimeMillis),c.softphoneStreamStatistics=this._translateSoftphoneStreamStatistics(c.softphoneStreamStatistics),c},connect.ClientBase=P,connect.NullClient=V,connect.UpstreamConduitClient=w,connect.UpstreamConduitMasterClient=E,connect.AWSClient=f,connect.AgentAppClient=m}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect;var P=function(E,m){connect.assertNotNull(E,"fromState"),connect.assertNotNull(m,"toState"),this.fromState=E,this.toState=m};P.prototype.getAssociations=function(E){throw connect.NotImplementedError()},P.prototype.getFromState=function(){return this.fromState},P.prototype.getToState=function(){return this.toState};var V=function(E,m,f){connect.assertNotNull(E,"fromState"),connect.assertNotNull(m,"toState"),connect.assertNotNull(f,"associations"),P.call(this,E,m),this.associations=f};(V.prototype=Object.create(P.prototype)).constructor=V,V.prototype.getAssociations=function(E){return this.associations};var v=function(E,m,f){connect.assertNotNull(E,"fromState"),connect.assertNotNull(m,"toState"),connect.assertNotNull(f,"closure"),connect.assertTrue(connect.isFunction(f),"closure must be a function"),P.call(this,E,m),this.closure=f};(v.prototype=Object.create(P.prototype)).constructor=v,v.prototype.getAssociations=function(E){return this.closure(E,this.getFromState(),this.getToState())};var w=function(){this.fromMap={}};w.ANY="<<any>>",w.prototype.assoc=function(E,m,f){var c=this;if(!E)throw new Error("fromStateObj is not defined.");if(!m)throw new Error("toStateObj is not defined.");if(!f)throw new Error("assocObj is not defined.");return E instanceof Array?E.forEach(function(h){c.assoc(h,m,f)}):m instanceof Array?m.forEach(function(h){c.assoc(E,h,f)}):this._addAssociation("function"==typeof f?new v(E,m,f):new V(E,m,f instanceof Array?f:[f])),this},w.prototype.getAssociations=function(E,m,f){connect.assertNotNull(m,"fromState"),connect.assertNotNull(f,"toState");var c=[],u=this.fromMap[m]||{};return(c=c.concat(this._getAssociationsFromMap(this.fromMap[w.ANY]||{},E,m,f))).concat(this._getAssociationsFromMap(u,E,m,f))},w.prototype._addAssociation=function(E){var m=this.fromMap[E.getFromState()];m||(m=this.fromMap[E.getFromState()]={});var f=m[E.getToState()];f||(f=m[E.getToState()]=[]),f.push(E)},w.prototype._getAssociationsFromMap=function(E,m,f,c){return(E[w.ANY]||[]).concat(E[c]||[]).reduce(function(u,l){return u.concat(l.getAssociations(m))},[])},connect.EventGraph=w}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,connect.AgentStateType=connect.makeEnum(["init","routable","not_routable","offline"]),connect.AgentStatusType=connect.AgentStateType,connect.AgentAvailStates=connect.makeEnum(["Init","Busy","AfterCallWork","CallingCustomer","Dialing","Joining","PendingAvailable","PendingBusy"]),connect.AgentErrorStates=connect.makeEnum(["Error","AgentHungUp","BadAddressAgent","BadAddressCustomer","Default","FailedConnectAgent","FailedConnectCustomer","InvalidLocale","LineEngagedAgent","LineEngagedCustomer","MissedCallAgent","MissedCallCustomer","MultipleCcpWindows","RealtimeCommunicationError"]),connect.EndpointType=connect.makeEnum(["phone_number","agent","queue"]),connect.AddressType=connect.EndpointType,connect.ConnectionType=connect.makeEnum(["agent","inbound","outbound","monitoring"]),connect.ConnectionStateType=connect.makeEnum(["init","connecting","connected","hold","disconnected"]),connect.ConnectionStatusType=connect.ConnectionStateType,connect.CONNECTION_ACTIVE_STATES=connect.set([connect.ConnectionStateType.CONNECTING,connect.ConnectionStateType.CONNECTED,connect.ConnectionStateType.HOLD]),connect.ContactStateType=connect.makeEnum(["init","incoming","pending","connecting","connected","missed","error","ended"]),connect.ContactStatusType=connect.ContactStateType,connect.CONTACT_ACTIVE_STATES=connect.makeEnum(["incoming","pending","connecting","connected"]),connect.ContactType=connect.makeEnum(["voice","queue_callback","chat","task"]),connect.ContactInitiationMethod=connect.makeEnum(["inbound","outbound","transfer","queue_transfer","callback","api","disconnect"]),connect.ChannelType=connect.makeEnum(["VOICE","CHAT","TASK"]),connect.MediaType=connect.makeEnum(["softphone","chat","task"]),connect.SoftphoneCallType=connect.makeEnum(["audio_video","video_only","audio_only","none"]),connect.SoftphoneErrorTypes=connect.makeEnum(["unsupported_browser","microphone_not_shared","signalling_handshake_failure","signalling_connection_failure","ice_collection_timeout","user_busy_error","webrtc_error","realtime_communication_error","other"]),connect.VoiceIdErrorTypes=connect.makeEnum(["no_speaker_id_found","speaker_id_not_enrolled","get_speaker_id_failed","get_speaker_status_failed","opt_out_speaker_failed","opt_out_speaker_in_lcms_failed","delete_speaker_failed","start_session_failed","evaluate_speaker_failed","session_not_exists","describe_session_failed","enroll_speaker_failed","update_speaker_id_failed","update_speaker_id_in_lcms_failed","not_supported_on_conference_calls","enroll_speaker_timeout","evaluate_speaker_timeout","get_domain_id_failed","no_domain_id_found"]),connect.CTIExceptions=connect.makeEnum(["AccessDeniedException","InvalidStateException","BadEndpointException","InvalidAgentARNException","InvalidConfigurationException","InvalidContactTypeException","PaginationException","RefreshTokenExpiredException","SendDataFailedException","UnauthorizedException","QuotaExceededException"]),connect.VoiceIdStreamingStatus=connect.makeEnum(["ONGOING","ENDED","PENDING_CONFIGURATION"]),connect.VoiceIdAuthenticationDecision=connect.makeEnum(["ACCEPT","REJECT","NOT_ENOUGH_SPEECH","SPEAKER_NOT_ENROLLED","SPEAKER_OPTED_OUT","SPEAKER_ID_NOT_PROVIDED","SPEAKER_EXPIRED"]),connect.VoiceIdFraudDetectionDecision=connect.makeEnum(["NOT_ENOUGH_SPEECH","HIGH_RISK","LOW_RISK"]),connect.ContactFlowAuthenticationDecision=connect.makeEnum(["Authenticated","NotAuthenticated","Inconclusive","NotEnrolled","OptedOut","NotEnabled","Error"]),connect.ContactFlowFraudDetectionDecision=connect.makeEnum(["HighRisk","LowRisk","Inconclusive","NotEnabled","Error"]),connect.VoiceIdEnrollmentRequestStatus=connect.makeEnum(["NOT_ENOUGH_SPEECH","IN_PROGRESS","COMPLETED","FAILED"]),connect.VoiceIdSpeakerStatus=connect.makeEnum(["OPTED_OUT","ENROLLED"]),connect.VoiceIdConstants={EVALUATE_SESSION_DELAY:1e4,EVALUATION_MAX_POLL_TIMES:24,EVALUATION_POLLING_INTERVAL:5e3,ENROLLMENT_MAX_POLL_TIMES:120,ENROLLMENT_POLLING_INTERVAL:5e3,START_SESSION_DELAY:8e3},connect.AgentPermissions={OUTBOUND_CALL:"outboundCall",VOICE_ID:"voiceId"};var P=function(){if(!connect.agent.initialized)throw new connect.StateError("The agent is not yet initialized!")};P.prototype._getData=function(){return connect.core.getAgentDataProvider().getAgentData()},P.prototype._createContactAPI=function(d){return new connect.Contact(d.contactId)},P.prototype.onContactPending=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.CONTACT_PENDING,d)},P.prototype.onRefresh=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.REFRESH,d)},P.prototype.onRoutable=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.ROUTABLE,d)},P.prototype.onNotRoutable=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.NOT_ROUTABLE,d)},P.prototype.onOffline=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.OFFLINE,d)},P.prototype.onError=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.ERROR,d)},P.prototype.onSoftphoneError=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.SOFTPHONE_ERROR,d)},P.prototype.onWebSocketConnectionLost=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST,d)},P.prototype.onWebSocketConnectionGained=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED,d)},P.prototype.onAfterCallWork=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.ACW,d)},P.prototype.onStateChange=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.STATE_CHANGE,d)},P.prototype.onMuteToggle=function(d){connect.core.getUpstream().onUpstream(connect.AgentEvents.MUTE_TOGGLE,d)},P.prototype.onLocalMediaStreamCreated=function(d){connect.core.getUpstream().onUpstream(connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,d)},P.prototype.onSpeakerDeviceChanged=function(d){connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,d)},P.prototype.onMicrophoneDeviceChanged=function(d){connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,d)},P.prototype.onRingerDeviceChanged=function(d){connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.RINGER_DEVICE_CHANGED,d)},P.prototype.mute=function(){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.MUTE,data:{mute:!0}})},P.prototype.unmute=function(){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.MUTE,data:{mute:!1}})},P.prototype.setSpeakerDevice=function(d){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.SET_SPEAKER_DEVICE,data:{deviceId:d}})},P.prototype.setMicrophoneDevice=function(d){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.SET_MICROPHONE_DEVICE,data:{deviceId:d}})},P.prototype.setRingerDevice=function(d){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.SET_RINGER_DEVICE,data:{deviceId:d}})},P.prototype.getState=function(){return this._getData().snapshot.state},P.prototype.getNextState=function(){return this._getData().snapshot.nextState},P.prototype.getAvailabilityState=function(){return this._getData().snapshot.agentAvailabilityState},P.prototype.getStatus=P.prototype.getState,P.prototype.getStatusDuration=P.prototype.getStateDuration=function(){return connect.now()-this._getData().snapshot.state.startTimestamp.getTime()+connect.core.getSkew()},P.prototype.getPermissions=function(){return this.getConfiguration().permissions},P.prototype.getContacts=function(d){var y=this;return this._getData().snapshot.contacts.map(function(_){return y._createContactAPI(_)}).filter(function(_){return!d||_.getType()===d})},P.prototype.getConfiguration=function(){return this._getData().configuration},P.prototype.getAgentStates=function(){return this.getConfiguration().agentStates},P.prototype.getRoutingProfile=function(){return this.getConfiguration().routingProfile},P.prototype.getChannelConcurrency=function(d){var y=this.getRoutingProfile().channelConcurrencyMap;return y||(y=Object.keys(connect.ChannelType).reduce(function(_,S){return"TASK"!==S&&(_[connect.ChannelType[S]]=1),_},{})),d?y[d]||0:y},P.prototype.getName=function(){return this.getConfiguration().name},P.prototype.getExtension=function(){return this.getConfiguration().extension},P.prototype.getDialableCountries=function(){return this.getConfiguration().dialableCountries},P.prototype.isSoftphoneEnabled=function(){return this.getConfiguration().softphoneEnabled},P.prototype.setConfiguration=function(d,y){var _=connect.core.getClient();d&&d.agentPreferences&&!connect.isValidLocale(d.agentPreferences.locale)?y&&y.failure&&y.failure(connect.AgentErrorStates.INVALID_LOCALE):_.call(connect.ClientMethods.UPDATE_AGENT_CONFIGURATION,{configuration:connect.assertNotNull(d,"configuration")},{success:function(S){connect.core.getUpstream().sendUpstream(connect.EventType.RELOAD_AGENT_CONFIGURATION),y.success&&y.success(S)},failure:y&&y.failure})},P.prototype.setState=function(d,y,_){connect.core.getClient().call(connect.ClientMethods.PUT_AGENT_STATE,{state:connect.assertNotNull(d,"state"),enqueueNextState:_&&!!_.enqueueNextState},y)},P.prototype.onEnqueuedNextState=function(d){connect.core.getEventBus().subscribe(connect.AgentEvents.ENQUEUED_NEXT_STATE,d)},P.prototype.setStatus=P.prototype.setState,P.prototype.connect=function(d,y){var _=connect.core.getClient(),S=new connect.Endpoint(d);delete S.endpointId,_.call(connect.ClientMethods.CREATE_OUTBOUND_CONTACT,{endpoint:connect.assertNotNull(S,"endpoint"),queueARN:y&&(y.queueARN||y.queueId)||this.getRoutingProfile().defaultOutboundQueue.queueARN},y&&{success:y.success,failure:y.failure})},P.prototype.getAllQueueARNs=function(){return this.getConfiguration().routingProfile.queues.map(function(d){return d.queueARN})},P.prototype.getAddresses=P.prototype.getEndpoints=function(d,y,_){var S=this,D=connect.core.getClient();connect.assertNotNull(y,"callbacks"),connect.assertNotNull(y.success,"callbacks.success");var b=_||{};b.endpoints=b.endpoints||[],b.maxResults=b.maxResults||connect.DEFAULT_BATCH_SIZE,connect.isArray(d)||(d=[d]),D.call(connect.ClientMethods.GET_ENDPOINTS,{queueARNs:d,nextToken:b.nextToken||null,maxResults:b.maxResults},{success:function(T){if(T.nextToken)S.getEndpoints(d,y,{nextToken:T.nextToken,maxResults:b.maxResults,endpoints:b.endpoints.concat(T.endpoints)});else{b.endpoints=b.endpoints.concat(T.endpoints);var R=b.endpoints.map(function(q){return new connect.Endpoint(q)});y.success({endpoints:R,addresses:R})}},failure:y.failure})},P.prototype._getResourceId=function(){queueArns=this.getAllQueueARNs();for(let d of queueArns){const y=d.match(/\/agent\/([^/]+)/);if(y)return y[1]}return new Error("Agent.prototype._getResourceId: queueArns did not contain agentResourceId: ",queueArns)},P.prototype.toSnapshot=function(){return new connect.AgentSnapshot(this._getData())};var V=function(d){connect.Agent.call(this),this.agentData=d};(V.prototype=Object.create(P.prototype)).constructor=V,V.prototype._getData=function(){return this.agentData},V.prototype._createContactAPI=function(d){return new connect.ContactSnapshot(d)};var v=function(d){this.contactId=d};v.prototype._getData=function(){return connect.core.getAgentDataProvider().getContactData(this.getContactId())},v.prototype._createConnectionAPI=function(d){return this.getType()===connect.ContactType.CHAT?new connect.ChatConnection(this.contactId,d.connectionId):this.getType()===connect.ContactType.TASK?new connect.TaskConnection(this.contactId,d.connectionId):new connect.VoiceConnection(this.contactId,d.connectionId)},v.prototype.getEventName=function(d){return connect.core.getContactEventName(d,this.getContactId())},v.prototype.onRefresh=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.REFRESH),d)},v.prototype.onIncoming=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.INCOMING),d)},v.prototype.onConnecting=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.CONNECTING),d)},v.prototype.onPending=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.PENDING),d)},v.prototype.onAccepted=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.ACCEPTED),d)},v.prototype.onMissed=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.MISSED),d)},v.prototype.onEnded=function(d){var y=connect.core.getEventBus();y.subscribe(this.getEventName(connect.ContactEvents.ENDED),d),y.subscribe(this.getEventName(connect.ContactEvents.DESTROYED),d)},v.prototype.onDestroy=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.DESTROYED),d)},v.prototype.onACW=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.ACW),d)},v.prototype.onConnected=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.CONNECTED),d)},v.prototype.onError=function(d){connect.core.getEventBus().subscribe(this.getEventName(connect.ContactEvents.ERROR),d)},v.prototype.getContactId=function(){return this.contactId},v.prototype.getInitialContactId=v.prototype.getOriginalContactId=function(){return this._getData().initialContactId},v.prototype.getType=function(){return this._getData().type},v.prototype.getContactDuration=function(){return this._getData().contactDuration},v.prototype.getStatus=v.prototype.getState=function(){return this._getData().state},v.prototype.getStatusDuration=v.prototype.getStateDuration=function(){return connect.now()-this._getData().state.timestamp.getTime()+connect.core.getSkew()},v.prototype.getQueue=function(){return this._getData().queue},v.prototype.getQueueTimestamp=function(){return this._getData().queueTimestamp},v.prototype.getConnections=function(){var d=this;return this._getData().connections.map(function(y){return d.getType()===connect.ContactType.CHAT?new connect.ChatConnection(d.contactId,y.connectionId):d.getType()===connect.ContactType.TASK?new connect.TaskConnection(d.contactId,y.connectionId):new connect.VoiceConnection(d.contactId,y.connectionId)})},v.prototype.getInitialConnection=function(){return connect.find(this.getConnections(),function(d){return d.isInitialConnection()})||null},v.prototype.getActiveInitialConnection=function(){var d=this.getInitialConnection();return null!=d&&d.isActive()?d:null},v.prototype.getThirdPartyConnections=function(){return this.getConnections().filter(function(d){return!d.isInitialConnection()&&d.getType()!==connect.ConnectionType.AGENT})},v.prototype.getSingleActiveThirdPartyConnection=function(){return this.getThirdPartyConnections().filter(function(d){return d.isActive()})[0]||null},v.prototype.getAgentConnection=function(){return connect.find(this.getConnections(),function(d){var y=d.getType();return y===connect.ConnectionType.AGENT||y===connect.ConnectionType.MONITORING})},v.prototype.getName=function(){return this._getData().name},v.prototype.getContactMetadata=function(){return this._getData().contactMetadata},v.prototype.getDescription=function(){return this._getData().description},v.prototype.getReferences=function(){return this._getData().references},v.prototype.getAttributes=function(){return this._getData().attributes},v.prototype.getContactFeatures=function(){return this._getData().contactFeatures},v.prototype.isSoftphoneCall=function(){return null!=connect.find(this.getConnections(),function(d){return null!=d.getSoftphoneMediaInfo()})},v.prototype._isInbound=function(){return this._getData().initiationMethod!==connect.ContactInitiationMethod.OUTBOUND},v.prototype.isInbound=function(){var d=this.getInitialConnection();return d.getMediaType()===connect.MediaType.TASK?this._isInbound():!!d&&d.getType()===connect.ConnectionType.INBOUND},v.prototype.isConnected=function(){return this.getStatus().type===connect.ContactStateType.CONNECTED},v.prototype.accept=function(d){var y=connect.core.getClient(),_=this,S=this.getContactId();y.call(connect.ClientMethods.ACCEPT_CONTACT,{contactId:S},{success:function(D){var b=connect.core.getUpstream();b.sendUpstream(connect.EventType.BROADCAST,{event:connect.ContactEvents.ACCEPTED,data:new connect.Contact(S)}),b.sendUpstream(connect.EventType.BROADCAST,{event:connect.core.getContactEventName(connect.ContactEvents.ACCEPTED,_.getContactId()),data:new connect.Contact(S)});var T=new connect.Contact(S);connect.isFirefoxBrowser()&&T.isSoftphoneCall()&&connect.core.triggerReadyToStartSessionEvent(),d&&d.success&&d.success(D)},failure:d?d.failure:null})},v.prototype.destroy=function(){connect.getLog().warn("contact.destroy() has been deprecated.")},v.prototype.reject=function(d){connect.core.getClient().call(connect.ClientMethods.REJECT_CONTACT,{contactId:this.getContactId()},d)},v.prototype.complete=function(d){connect.core.getClient().call(connect.ClientMethods.COMPLETE_CONTACT,{contactId:this.getContactId()},d)},v.prototype.clear=function(d){connect.core.getClient().call(connect.ClientMethods.CLEAR_CONTACT,{contactId:this.getContactId()},d)},v.prototype.notifyIssue=function(d,y,_){connect.core.getClient().call(connect.ClientMethods.NOTIFY_CONTACT_ISSUE,{contactId:this.getContactId(),issueCode:d,description:y},_)},v.prototype.addConnection=function(d,y){var _=connect.core.getClient(),S=new connect.Endpoint(d);delete S.endpointId,_.call(connect.ClientMethods.CREATE_ADDITIONAL_CONNECTION,{contactId:this.getContactId(),endpoint:S},y)},v.prototype.toggleActiveConnections=function(d){var y=connect.core.getClient(),_=null,S=connect.find(this.getConnections(),function(b){return b.getStatus().type===connect.ConnectionStateType.HOLD});if(null!=S)_=S.getConnectionId();else{var D=this.getConnections().filter(function(b){return b.isActive()});D.length>0&&(_=D[0].getConnectionId())}y.call(connect.ClientMethods.TOGGLE_ACTIVE_CONNECTIONS,{contactId:this.getContactId(),connectionId:_},d)},v.prototype.sendSoftphoneMetrics=function(d,y){connect.core.getClient().call(connect.ClientMethods.SEND_SOFTPHONE_CALL_METRICS,{contactId:this.getContactId(),ccpVersion:N.ccpVersion,softphoneStreamStatistics:d},y),connect.publishSoftphoneStats({contactId:this.getContactId(),ccpVersion:N.ccpVersion,stats:d})},v.prototype.sendSoftphoneReport=function(d,y){connect.core.getClient().call(connect.ClientMethods.SEND_SOFTPHONE_CALL_REPORT,{contactId:this.getContactId(),ccpVersion:N.ccpVersion,report:d},y),connect.publishSoftphoneReport({contactId:this.getContactId(),ccpVersion:N.ccpVersion,report:d})},v.prototype.conferenceConnections=function(d){connect.core.getClient().call(connect.ClientMethods.CONFERENCE_CONNECTIONS,{contactId:this.getContactId()},d)},v.prototype.toSnapshot=function(){return new connect.ContactSnapshot(this._getData())};var w=function(d){connect.Contact.call(this,d.contactId),this.contactData=d};(w.prototype=Object.create(v.prototype)).constructor=w,w.prototype._getData=function(){return this.contactData},w.prototype._createConnectionAPI=function(d){return new connect.ConnectionSnapshot(d)};var E=function(d,y){this.contactId=d,this.connectionId=y,this._initMediaController()};E.prototype._getData=function(){return connect.core.getAgentDataProvider().getConnectionData(this.getContactId(),this.getConnectionId())},E.prototype.getContactId=function(){return this.contactId},E.prototype.getConnectionId=function(){return this.connectionId},E.prototype.getAddress=E.prototype.getEndpoint=function(){return new connect.Endpoint(this._getData().endpoint)},E.prototype.getStatus=E.prototype.getState=function(){return this._getData().state},E.prototype.getStatusDuration=E.prototype.getStateDuration=function(){return connect.now()-this._getData().state.timestamp.getTime()+connect.core.getSkew()},E.prototype.getType=function(){return this._getData().type},E.prototype.isInitialConnection=function(){return this._getData().initial},E.prototype.isActive=function(){return connect.contains(connect.CONNECTION_ACTIVE_STATES,this.getStatus().type)},E.prototype.isConnected=function(){return this.getStatus().type===connect.ConnectionStateType.CONNECTED},E.prototype.isConnecting=function(){return this.getStatus().type===connect.ConnectionStateType.CONNECTING},E.prototype.isOnHold=function(){return this.getStatus().type===connect.ConnectionStateType.HOLD},E.prototype.getSoftphoneMediaInfo=function(){return this._getData().softphoneMediaInfo},E.prototype.getMonitorInfo=function(){return this._getData().monitoringInfo},E.prototype.destroy=function(d){connect.core.getClient().call(connect.ClientMethods.DESTROY_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},d)},E.prototype.sendDigits=function(d,y){connect.core.getClient().call(connect.ClientMethods.SEND_DIGITS,{contactId:this.getContactId(),connectionId:this.getConnectionId(),digits:d},y)},E.prototype.hold=function(d){connect.core.getClient().call(connect.ClientMethods.HOLD_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},d)},E.prototype.resume=function(d){connect.core.getClient().call(connect.ClientMethods.RESUME_CONNECTION,{contactId:this.getContactId(),connectionId:this.getConnectionId()},d)},E.prototype.toSnapshot=function(){return new connect.ConnectionSnapshot(this._getData())},E.prototype._initMediaController=function(){this.getMediaInfo()&&connect.core.mediaFactory.get(this).catch(function(){})},E.prototype._isAgentConnectionType=function(){var d=this.getType();return d===connect.ConnectionType.AGENT||d===connect.ConnectionType.MONITORING},E.prototype._isAgentConnectionType=function(){var d=this.getType();return d===connect.ConnectionType.AGENT||d===connect.ConnectionType.MONITORING};var m=function(d){this.contactId=d};m.prototype.getSpeakerId=function(){var d=this;d.checkConferenceCall();var y=connect.core.getClient();return new Promise(function(_,S){y.call(connect.AgentAppClientMethods.GET_CONTACT,{contactId:d.contactId,instanceId:connect.core.getAgentDataProvider().getInstanceId(),awsAccountId:connect.core.getAgentDataProvider().getAWSAccountId()},{success:function(D){if(D.contactData.customerId){var b={speakerId:D.contactData.customerId};connect.getLog().info("getSpeakerId succeeded").withObject(D).sendInternalLogToServer(),_(b)}else{var T=connect.VoiceIdError(connect.VoiceIdErrorTypes.NO_SPEAKER_ID_FOUND,"No speakerId assotiated with this call");S(T)}},failure:function(D){connect.getLog().error("Get SpeakerId failed").withObject({err:D}).sendInternalLogToServer();var b=connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_ID_FAILED,"Get SpeakerId failed",D);S(b)}})})},m.prototype.getSpeakerStatus=function(){var d=this;d.checkConferenceCall();var y=connect.core.getClient();return new Promise(function(_,S){d.getSpeakerId().then(function(D){d.getDomainId().then(function(b){y.call(connect.AgentAppClientMethods.DESCRIBE_SPEAKER,{SpeakerId:connect.assertNotNull(D.speakerId,"speakerId"),DomainId:b},{success:function(T){connect.getLog().info("getSpeakerStatus succeeded").withObject(T).sendInternalLogToServer(),_(T)},failure:function(T){var q=JSON.parse(T);switch(q.status){case 400:case 404:var K=q;K.type=K.type?K.type:connect.VoiceIdErrorTypes.SPEAKER_ID_NOT_ENROLLED,connect.getLog().info("Speaker is not enrolled.").sendInternalLogToServer(),_(K);break;default:connect.getLog().error("getSpeakerStatus failed").withObject({err:T}).sendInternalLogToServer();var R=connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_SPEAKER_STATUS_FAILED,"Get SpeakerStatus failed",T);S(R)}}})}).catch(function(b){S(b)})}).catch(function(D){S(D)})})},m.prototype._optOutSpeakerInLcms=function(d){var y=this,_=connect.core.getClient();return new Promise(function(S,D){_.call(connect.AgentAppClientMethods.UPDATE_VOICE_ID_DATA,{ContactId:y.contactId,InstanceId:connect.core.getAgentDataProvider().getInstanceId(),AWSAccountId:connect.core.getAgentDataProvider().getAWSAccountId(),CustomerId:connect.assertNotNull(d,"speakerId"),VoiceIdResult:{SpeakerOptedOut:!0}},{success:function(b){connect.getLog().info("optOutSpeakerInLcms succeeded").withObject(b).sendInternalLogToServer(),S(b)},failure:function(b){connect.getLog().error("optOutSpeakerInLcms failed").withObject({err:b}).sendInternalLogToServer();var T=connect.VoiceIdError(connect.VoiceIdErrorTypes.OPT_OUT_SPEAKER_IN_LCMS_FAILED,"optOutSpeakerInLcms failed",b);D(T)}})})},m.prototype.optOutSpeaker=function(){var d=this;d.checkConferenceCall();var y=connect.core.getClient();return new Promise(function(_,S){d.getSpeakerId().then(function(D){d.getDomainId().then(function(b){var T=D.speakerId;y.call(connect.AgentAppClientMethods.OPT_OUT_SPEAKER,{SpeakerId:connect.assertNotNull(T,"speakerId"),DomainId:b},{success:function(R){d._optOutSpeakerInLcms(T).catch(function(){}),connect.getLog().info("optOutSpeaker succeeded").withObject(R).sendInternalLogToServer(),_(R)},failure:function(R){connect.getLog().error("optOutSpeaker failed").withObject({err:R}).sendInternalLogToServer();var q=connect.VoiceIdError(connect.VoiceIdErrorTypes.OPT_OUT_SPEAKER_FAILED,"optOutSpeaker failed.",R);S(q)}})}).catch(function(b){S(b)})}).catch(function(D){S(D)})})},m.prototype.deleteSpeaker=function(){var d=this;d.checkConferenceCall();var y=connect.core.getClient();return new Promise(function(_,S){d.getSpeakerId().then(function(D){d.getDomainId().then(function(b){y.call(connect.AgentAppClientMethods.DELETE_SPEAKER,{SpeakerId:connect.assertNotNull(D.speakerId,"speakerId"),DomainId:b},{success:function(T){connect.getLog().info("deleteSpeaker succeeded").withObject(T).sendInternalLogToServer(),_(T)},failure:function(T){connect.getLog().error("deleteSpeaker failed").withObject({err:T}).sendInternalLogToServer();var R=connect.VoiceIdError(connect.VoiceIdErrorTypes.DELETE_SPEAKER_FAILED,"deleteSpeaker failed.",T);S(R)}})}).catch(function(b){S(b)})}).catch(function(D){S(D)})})},m.prototype.startSession=function(){var d=this;d.checkConferenceCall();var y=connect.core.getClient();return new Promise(function(_,S){d.getDomainId().then(function(D){y.call(connect.AgentAppClientMethods.START_VOICE_ID_SESSION,{contactId:d.contactId,instanceId:connect.core.getAgentDataProvider().getInstanceId(),customerAccountId:connect.core.getAgentDataProvider().getAWSAccountId(),clientToken:AWS.util.uuid.v4(),domainId:D},{success:function(b){if(b.sessionId)_(b);else{connect.getLog().error("startVoiceIdSession failed, no session id returned").withObject({data:b}).sendInternalLogToServer();var T=connect.VoiceIdError(connect.VoiceIdErrorTypes.START_SESSION_FAILED,"No session id returned from start session api");S(T)}},failure:function(b){connect.getLog().error("startVoiceIdSession failed").withObject({err:b}).sendInternalLogToServer();var T=connect.VoiceIdError(connect.VoiceIdErrorTypes.START_SESSION_FAILED,"startVoiceIdSession failed",b);S(T)}})}).catch(function(D){S(D)})})},m.prototype.evaluateSpeaker=function(d){var y=this;y.checkConferenceCall();var _=connect.core.getClient(),S=connect.core.getAgentDataProvider().getContactData(this.contactId),D=0;return new Promise(function(b,T){function R(){y.getDomainId().then(function(q){_.call(connect.AgentAppClientMethods.EVALUATE_SESSION,{SessionNameOrId:S.initialContactId||this.contactId,DomainId:q},{success:function(K){if(++D<connect.VoiceIdConstants.EVALUATION_MAX_POLL_TIMES)if(K.StreamingStatus===connect.VoiceIdStreamingStatus.PENDING_CONFIGURATION)setTimeout(R,connect.VoiceIdConstants.EVALUATION_POLLING_INTERVAL);else{if(K.AuthenticationResult||(K.AuthenticationResult={},K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.NOT_ENABLED),K.FraudDetectionResult||(K.FraudDetectionResult={},K.FraudDetectionResult.Decision=connect.ContactFlowFraudDetectionDecision.NOT_ENABLED),!y.isAuthEnabled(K.AuthenticationResult.Decision)&&!y.isFraudEnabled(K.FraudDetectionResult.Decision))return connect.getLog().info("evaluateSpeaker succeeded").withObject(K).sendInternalLogToServer(),void b(K);if(K.StreamingStatus===connect.VoiceIdStreamingStatus.ENDED&&(y.isAuthResultNotEnoughSpeech(K.AuthenticationResult.Decision)&&(K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.INCONCLUSIVE),y.isFraudResultNotEnoughSpeech(K.FraudDetectionResult.Decision)&&(K.FraudDetectionResult.Decision=connect.ContactFlowFraudDetectionDecision.INCONCLUSIVE)),y.isAuthResultInconclusive(K.AuthenticationResult.Decision)&&y.isFraudResultInconclusive(K.FraudDetectionResult.Decision))return connect.getLog().info("evaluateSpeaker succeeded").withObject(K).sendInternalLogToServer(),void b(K);if(!y.isAuthResultNotEnoughSpeech(K.AuthenticationResult.Decision)&&y.isAuthEnabled(K.AuthenticationResult.Decision))switch(K.AuthenticationResult.Decision){case connect.VoiceIdAuthenticationDecision.ACCEPT:K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.AUTHENTICATED;break;case connect.VoiceIdAuthenticationDecision.REJECT:K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.NOT_AUTHENTICATED;break;case connect.VoiceIdAuthenticationDecision.SPEAKER_OPTED_OUT:K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.OPTED_OUT;break;case connect.VoiceIdAuthenticationDecision.SPEAKER_NOT_ENROLLED:K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.NOT_ENROLLED;break;default:K.AuthenticationResult.Decision=connect.ContactFlowAuthenticationDecision.ERROR}if(!y.isFraudResultNotEnoughSpeech(K.FraudDetectionResult.Decision)&&y.isFraudEnabled(K.FraudDetectionResult.Decision))switch(K.FraudDetectionResult.Decision){case connect.VoiceIdFraudDetectionDecision.HIGH_RISK:K.FraudDetectionResult.Decision=connect.ContactFlowFraudDetectionDecision.HIGH_RISK;break;case connect.VoiceIdFraudDetectionDecision.LOW_RISK:K.FraudDetectionResult.Decision=connect.ContactFlowFraudDetectionDecision.LOW_RISK;break;default:K.FraudDetectionResult.Decision=connect.ContactFlowFraudDetectionDecision.ERROR}if(!y.isAuthResultNotEnoughSpeech(K.AuthenticationResult.Decision)&&!y.isFraudResultNotEnoughSpeech(K.FraudDetectionResult.Decision))return connect.getLog().info("evaluateSpeaker succeeded").withObject(K).sendInternalLogToServer(),void b(K);setTimeout(R,connect.VoiceIdConstants.EVALUATION_POLLING_INTERVAL)}else{connect.getLog().error("evaluateSpeaker timeout").sendInternalLogToServer();var U=connect.VoiceIdError(connect.VoiceIdErrorTypes.EVALUATE_SPEAKER_TIMEOUT,"evaluateSpeaker timeout");T(U)}},failure:function(K){var U;switch(JSON.parse(K).status){case 400:case 404:U=connect.VoiceIdError(connect.VoiceIdErrorTypes.SESSION_NOT_EXISTS,"evaluateSpeaker failed, session not exists",K),connect.getLog().error("evaluateSpeaker failed, session not exists").withObject({err:K}).sendInternalLogToServer();break;default:U=connect.VoiceIdError(connect.VoiceIdErrorTypes.EVALUATE_SPEAKER_FAILED,"evaluateSpeaker failed",K),connect.getLog().error("evaluateSpeaker failed").withObject({err:K}).sendInternalLogToServer()}T(U)}})}).catch(function(q){T(q)})}d?y.startSession().then(function(q){y.syncSpeakerId().then(function(K){setTimeout(R,connect.VoiceIdConstants.EVALUATE_SESSION_DELAY)}).catch(function(K){connect.getLog().error("syncSpeakerId failed when session startNew=true").withObject({err:K}).sendInternalLogToServer(),T(K)})}).catch(function(q){connect.getLog().error("startSession failed when session startNew=true").withObject({err:q}).sendInternalLogToServer(),T(q)}):y.syncSpeakerId().then(function(){R()}).catch(function(q){connect.getLog().error("syncSpeakerId failed when session startNew=false").withObject({err:q}).sendInternalLogToServer(),T(q)})})},m.prototype.describeSession=function(){var d=this,y=connect.core.getClient(),_=connect.core.getAgentDataProvider().getContactData(this.contactId);return new Promise(function(S,D){d.getDomainId().then(function(b){y.call(connect.AgentAppClientMethods.DESCRIBE_SESSION,{SessionNameOrId:_.initialContactId||this.contactId,DomainId:b},{success:function(T){S(T)},failure:function(T){connect.getLog().error("describeSession failed").withObject({err:T}).sendInternalLogToServer();var R=connect.VoiceIdError(connect.VoiceIdErrorTypes.DESCRIBE_SESSION_FAILED,"describeSession failed",T);D(R)}})}).catch(function(b){D(b)})})},m.prototype.checkEnrollmentStatus=function(){var d=this,y=0;return new Promise(function(_,S){!function D(){if(++y<connect.VoiceIdConstants.ENROLLMENT_MAX_POLL_TIMES)d.describeSession().then(function(T){switch(T.Session.EnrollmentRequestDetails.Status){case connect.VoiceIdEnrollmentRequestStatus.COMPLETED:_(T);break;case connect.VoiceIdEnrollmentRequestStatus.IN_PROGRESS:setTimeout(D,connect.VoiceIdConstants.ENROLLMENT_POLLING_INTERVAL);break;case connect.VoiceIdEnrollmentRequestStatus.NOT_ENOUGH_SPEECH:T.Session.StreamingStatus!==connect.VoiceIdStreamingStatus.ENDED?setTimeout(D,connect.VoiceIdConstants.ENROLLMENT_POLLING_INTERVAL):setTimeout(function(){d.startSession().then(function(K){D()}).catch(function(K,U){S(K)})},connect.VoiceIdConstants.START_SESSION_DELAY);break;default:var R=T.Session.EnrollmentRequestDetails.Message?T.Session.EnrollmentRequestDetails.Message:"enrollSpeaker failed. Unknown enrollment status has been received";connect.getLog().error(R).sendInternalLogToServer();var q=connect.VoiceIdError(connect.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED,R,T.Session.EnrollmentRequestDetails.Status);S(q)}});else{connect.getLog().error("enrollSpeaker timeout").sendInternalLogToServer();var b=connect.VoiceIdError(connect.VoiceIdErrorTypes.ENROLL_SPEAKER_TIMEOUT,"enrollSpeaker timeout");S(b)}}()})},m.prototype.enrollSpeaker=function(){var d=this;return d.checkConferenceCall(),new Promise(function(y,_){d.syncSpeakerId().then(function(){d.getSpeakerStatus().then(function(S){S.Speaker&&S.Speaker.Status==connect.VoiceIdSpeakerStatus.OPTED_OUT?d.deleteSpeaker().then(function(){d.enrollSpeakerHelper(y,_)}).catch(function(D){_(D)}):d.enrollSpeakerHelper(y,_)}).catch(function(S){_(S)})}).catch(function(S){_(S)})})},m.prototype.enrollSpeakerHelper=function(d,y){var _=this,S=connect.core.getClient(),D=connect.core.getAgentDataProvider().getContactData(this.contactId);_.getDomainId().then(function(b){S.call(connect.AgentAppClientMethods.ENROLL_BY_SESSION,{SessionNameOrId:D.initialContactId||this.contactId,DomainId:b},{success:function(T){T.Status===connect.VoiceIdEnrollmentRequestStatus.COMPLETED?(connect.getLog().info("enrollSpeaker succeeded").withObject(T).sendInternalLogToServer(),d(T)):_.checkEnrollmentStatus().then(function(R){connect.getLog().info("enrollSpeaker succeeded").withObject(R).sendInternalLogToServer(),d(R)}).catch(function(R){y(R)})},failure:function(T){connect.getLog().error("enrollSpeaker failed").withObject({err:T}).sendInternalLogToServer();var R=connect.VoiceIdError(connect.VoiceIdErrorTypes.ENROLL_SPEAKER_FAILED,"enrollSpeaker failed",T);y(R)}})}).catch(function(b){y(b)})},m.prototype._updateSpeakerIdInLcms=function(d){var y=this,_=connect.core.getClient();return new Promise(function(S,D){_.call(connect.AgentAppClientMethods.UPDATE_VOICE_ID_DATA,{ContactId:y.contactId,InstanceId:connect.core.getAgentDataProvider().getInstanceId(),AWSAccountId:connect.core.getAgentDataProvider().getAWSAccountId(),CustomerId:connect.assertNotNull(d,"speakerId"),VoiceIdResult:{generatedSpeakerId:d}},{success:function(b){connect.getLog().info("updateSpeakerIdInLcms succeeded").withObject(b).sendInternalLogToServer(),S(b)},failure:function(b){connect.getLog().error("updateSpeakerIdInLcms failed").withObject({err:b}).sendInternalLogToServer();var T=connect.VoiceIdError(connect.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_IN_LCMS_FAILED,"updateSpeakerIdInLcms failed",b);D(T)}})})},m.prototype.updateSpeakerIdInVoiceId=function(d){var y=this;y.checkConferenceCall();var _=connect.core.getClient(),S=connect.core.getAgentDataProvider().getContactData(this.contactId);return new Promise(function(D,b){y.getDomainId().then(function(T){_.call(connect.AgentAppClientMethods.UPDATE_SESSION,{SessionNameOrId:S.initialContactId||this.contactId,SpeakerId:connect.assertNotNull(d,"speakerId"),DomainId:T},{success:function(R){connect.getLog().info("updateSpeakerIdInVoiceId succeeded").withObject(R).sendInternalLogToServer(),y._updateSpeakerIdInLcms(d).then(function(){D(R)}).catch(function(q){b(q)})},failure:function(R){var q;switch(JSON.parse(R).status){case 400:case 404:q=connect.VoiceIdError(connect.VoiceIdErrorTypes.SESSION_NOT_EXISTS,"updateSpeakerIdInVoiceId failed, session not exists",R),connect.getLog().error("updateSpeakerIdInVoiceId failed, session not exists").withObject({err:R}).sendInternalLogToServer();break;default:q=connect.VoiceIdError(connect.VoiceIdErrorTypes.UPDATE_SPEAKER_ID_FAILED,"updateSpeakerIdInVoiceId failed",R),connect.getLog().error("updateSpeakerIdInVoiceId failed").withObject({err:R}).sendInternalLogToServer()}b(q)}})}).catch(function(T){b(T)})})},m.prototype.syncSpeakerId=function(){var d=this;return new Promise(function(y,_){d.getSpeakerId().then(function(S){d.updateSpeakerIdInVoiceId(S.speakerId).then(function(D){y(D)}).catch(function(D){_(D)})}).catch(function(S){_(S)})})},m.prototype.getDomainId=function(){return new Promise(function(d,y){(new connect.Agent).getPermissions().includes(connect.AgentPermissions.VOICE_ID)?connect.core.voiceIdDomainId?d(connect.core.voiceIdDomainId):connect.core.getClient().call(connect.AgentAppClientMethods.LIST_INTEGRATION_ASSOCIATIONS,{InstanceId:connect.core.getAgentDataProvider().getInstanceId(),IntegrationType:"VOICE_ID"},{success:function(D){try{var b;if(D.IntegrationAssociationSummaryList.length>=1&&(b=D.IntegrationAssociationSummaryList[0].IntegrationArn.replace(/^.*domain\//i,"")),!b){connect.getLog().info("getDomainId: no domainId found").sendInternalLogToServer();var R=connect.VoiceIdError(connect.VoiceIdErrorTypes.NO_DOMAIN_ID_FOUND);return void y(R)}connect.getLog().info("getDomainId succeeded").withObject(D).sendInternalLogToServer(),connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.VoiceIdEvents.UPDATE_DOMAIN_ID,data:{domainId:b}}),d(b)}catch(q){connect.getLog().error("getDomainId failed").withObject({err:q}).sendInternalLogToServer(),R=connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_DOMAIN_ID_FAILED,"getDomainId failed",q),y(R)}},failure:function(D){connect.getLog().error("getDomainId failed").withObject({err:D}).sendInternalLogToServer();var b=connect.VoiceIdError(connect.VoiceIdErrorTypes.GET_DOMAIN_ID_FAILED,"getDomainId failed",D);y(b)}}):y(new Error("Agent doesn't have the permission for Voice ID"))})},m.prototype.checkConferenceCall=function(){if(connect.core.getAgentDataProvider().getContactData(this.contactId).connections.filter(function(_){return connect.contains(connect.CONNECTION_ACTIVE_STATES,_.state.type)}).length>2)throw new connect.NotImplementedError("VoiceId is not supported for conference calls")},m.prototype.isAuthEnabled=function(d){return d!==connect.ContactFlowAuthenticationDecision.NOT_ENABLED},m.prototype.isAuthResultNotEnoughSpeech=function(d){return d===connect.VoiceIdAuthenticationDecision.NOT_ENOUGH_SPEECH},m.prototype.isAuthResultInconclusive=function(d){return d===connect.ContactFlowAuthenticationDecision.INCONCLUSIVE},m.prototype.isFraudEnabled=function(d){return d!==connect.ContactFlowFraudDetectionDecision.NOT_ENABLED},m.prototype.isFraudResultNotEnoughSpeech=function(d){return d===connect.VoiceIdFraudDetectionDecision.NOT_ENOUGH_SPEECH},m.prototype.isFraudResultInconclusive=function(d){return d===connect.ContactFlowFraudDetectionDecision.INCONCLUSIVE};var f=function(d,y){this._speakerAuthenticator=new m(d),E.call(this,d,y)};(f.prototype=Object.create(E.prototype)).constructor=f,f.prototype.getSoftphoneMediaInfo=function(){return this._getData().softphoneMediaInfo},f.prototype.getMediaInfo=function(){return this._getData().softphoneMediaInfo},f.prototype.getMediaType=function(){return connect.MediaType.SOFTPHONE},f.prototype.getMediaController=function(){return connect.core.mediaFactory.get(this)},f.prototype.getVoiceIdSpeakerId=function(){return this._speakerAuthenticator.getSpeakerId()},f.prototype.getVoiceIdSpeakerStatus=function(){return this._speakerAuthenticator.getSpeakerStatus()},f.prototype.optOutVoiceIdSpeaker=function(){return this._speakerAuthenticator.optOutSpeaker()},f.prototype.deleteVoiceIdSpeaker=function(){return this._speakerAuthenticator.deleteSpeaker()},f.prototype.evaluateSpeakerWithVoiceId=function(d){return this._speakerAuthenticator.evaluateSpeaker(d)},f.prototype.enrollSpeakerInVoiceId=function(){return this._speakerAuthenticator.enrollSpeaker()},f.prototype.updateVoiceIdSpeakerId=function(d){return this._speakerAuthenticator.updateSpeakerIdInVoiceId(d)};var c=function(d,y){E.call(this,d,y)};(c.prototype=Object.create(E.prototype)).constructor=c,c.prototype.getMediaInfo=function(){var d=this._getData().chatMediaInfo;if(d){var y=connect.core.getAgentDataProvider().getContactData(this.contactId),_={contactId:this.contactId,initialContactId:y.initialContactId||this.contactId,participantId:this.connectionId,getConnectionToken:connect.hitch(this,this.getConnectionToken)};if(d.connectionData)try{_.participantToken=JSON.parse(d.connectionData).ConnectionAuthenticationToken}catch(S){connect.getLog().error(connect.LogComponent.CHAT,"Connection data is invalid").withObject(d).withException(S).sendInternalLogToServer(),_.participantToken=null}return _.participantToken=_.participantToken||null,_.originalInfo=this._getData().chatMediaInfo,_}return null},c.prototype.getConnectionToken=function(){client=connect.core.getClient();var d=connect.core.getAgentDataProvider().getContactData(this.contactId),y={transportType:connect.TRANSPORT_TYPES.CHAT_TOKEN,participantId:this.connectionId,contactId:d.initialContactId||this.contactId};return new Promise(function(_,S){client.call(connect.ClientMethods.CREATE_TRANSPORT,y,{success:function(D){connect.getLog().info("getConnectionToken succeeded").sendInternalLogToServer(),_(D)},failure:function(D,b){connect.getLog().error("getConnectionToken failed").sendInternalLogToServer().withObject({err:D,data:b}),S(Error("getConnectionToken failed"))}})})},c.prototype.getMediaType=function(){return connect.MediaType.CHAT},c.prototype.getMediaController=function(){return connect.core.mediaFactory.get(this)},c.prototype._initMediaController=function(){this._isAgentConnectionType()&&connect.core.mediaFactory.get(this).catch(function(){})};var h=function(d,y){E.call(this,d,y)};(h.prototype=Object.create(E.prototype)).constructor=h,h.prototype.getMediaType=function(){return connect.MediaType.TASK},h.prototype.getMediaInfo=function(){var d=connect.core.getAgentDataProvider().getContactData(this.contactId);return{contactId:this.contactId,initialContactId:d.initialContactId||this.contactId}},h.prototype.getMediaController=function(){return connect.core.mediaFactory.get(this)};var u=function(d){connect.Connection.call(this,d.contactId,d.connectionId),this.connectionData=d};(u.prototype=Object.create(E.prototype)).constructor=u,u.prototype._getData=function(){return this.connectionData},u.prototype._initMediaController=function(){};var l=function(d){var y=d||{};this.endpointARN=y.endpointId||y.endpointARN||null,this.endpointId=this.endpointARN,this.type=y.type||null,this.name=y.name||null,this.phoneNumber=y.phoneNumber||null,this.agentLogin=y.agentLogin||null,this.queue=y.queue||null};l.prototype.stripPhoneNumber=function(){return this.phoneNumber?this.phoneNumber.replace(/sip:([^@]*)@.*/,"$1"):""},l.byPhoneNumber=function(d,y){return new l({type:connect.EndpointType.PHONE_NUMBER,phoneNumber:d,name:y||null})};var g=function(d,y,_){this.errorType=d,this.errorMessage=y,this.endPointUrl=_};g.prototype.getErrorType=function(){return this.errorType},g.prototype.getErrorMessage=function(){return this.errorMessage},g.prototype.getEndPointUrl=function(){return this.endPointUrl},connect.agent=function(d){var _=connect.core.getEventBus().subscribe(connect.AgentEvents.INIT,d);return connect.agent.initialized&&d(new connect.Agent),_},connect.agent.initialized=!1,connect.contact=function(d){return connect.core.getEventBus().subscribe(connect.ContactEvents.INIT,d)},connect.onWebsocketInitFailure=function(d){var _=connect.core.getEventBus().subscribe(connect.WebSocketEvents.INIT_FAILURE,d);return connect.webSocketInitFailed&&d(),_},connect.ifMaster=function(d,y,_,S){if(connect.assertNotNull(d,"A topic must be provided."),connect.assertNotNull(y,"A true callback must be provided."),!connect.core.masterClient)return connect.getLog().warn("We can't be the master for topic '%s' because there is no master client!",d).sendInternalLogToServer(),void(_&&_());connect.core.getMasterClient().call(connect.MasterMethods.CHECK_MASTER,{topic:d,shouldNotBecomeMasterIfNone:S},{success:function(b){b.isMaster?y():_&&_()}})},connect.becomeMaster=function(d,y,_){connect.assertNotNull(d,"A topic must be provided."),connect.core.masterClient?connect.core.getMasterClient().call(connect.MasterMethods.BECOME_MASTER,{topic:d},{success:function(){y&&y()}}):(connect.getLog().warn("We can't be the master for topic '%s' because there is no master client!",d),_&&_())},connect.Agent=P,connect.AgentSnapshot=V,connect.Contact=v,connect.ContactSnapshot=w,connect.Connection=f,connect.BaseConnection=E,connect.VoiceConnection=f,connect.ChatConnection=c,connect.TaskConnection=h,connect.ConnectionSnapshot=u,connect.Endpoint=l,connect.Address=l,connect.SoftphoneError=g,connect.VoiceId=m}(),function(N){var P={};function V(v){if(P[v])return P[v].exports;var w=P[v]={i:v,l:!1,exports:{}};return N[v].call(w.exports,w,w.exports,V),w.l=!0,w.exports}V.m=N,V.c=P,V.d=function(v,w,E){V.o(v,w)||Object.defineProperty(v,w,{enumerable:!0,get:E})},V.r=function(v){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(v,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(v,"__esModule",{value:!0})},V.t=function(v,w){if(1&w&&(v=V(v)),8&w||4&w&&"object"==typeof v&&v&&v.__esModule)return v;var E=Object.create(null);if(V.r(E),Object.defineProperty(E,"default",{enumerable:!0,value:v}),2&w&&"string"!=typeof v)for(var m in v)V.d(E,m,function(f){return v[f]}.bind(null,m));return E},V.n=function(v){var w=v&&v.__esModule?function(){return v.default}:function(){return v};return V.d(w,"a",w),w},V.o=function(v,w){return Object.prototype.hasOwnProperty.call(v,w)},V.p="",V(V.s=2)}([function(N,P,V){"use strict";var v=V(1),m="DEBUG",c="aws/subscribe",u="aws/heartbeat",g="disconnected";function d(te){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ie){return typeof ie}:function(ie){return ie&&"function"==typeof Symbol&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie})(te)}var y={assertTrue:function(te,ie){if(!te)throw new Error(ie)},assertNotNull:function(te,ie){return y.assertTrue(null!==te&&void 0!==d(te),Object(v.sprintf)("%s must be provided",ie||"A value")),te},isNonEmptyString:function(te){return"string"==typeof te&&te.length>0},assertIsList:function(te,ie){if(!Array.isArray(te))throw new Error(ie+" is not an array")},isFunction:function(te){return!!(te&&te.constructor&&te.call&&te.apply)},isObject:function(te){return!("object"!==d(te)||null===te)},isString:function(te){return"string"==typeof te},isNumber:function(te){return"number"==typeof te}},_=new RegExp("^(wss://)\\w*");y.validWSUrl=function(te){return _.test(te)},y.getSubscriptionResponse=function(te,ie,j){return{topic:te,content:{status:ie?"success":"failure",topics:j}}},y.assertIsObject=function(te,ie){if(!y.isObject(te))throw new Error(ie+" is not an object!")},y.addJitter=function(te){var ie=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;ie=Math.min(ie,1);var j=Math.random()>.5?1:-1;return Math.floor(te+j*te*Math.random()*ie)},y.isNetworkOnline=function(){return navigator.onLine},y.isNetworkFailure=function(te){return!(!te._debug||!te._debug.type)&&"NetworkingError"===te._debug.type};var S=y;function D(te){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(ie){return typeof ie}:function(ie){return ie&&"function"==typeof Symbol&&ie.constructor===Symbol&&ie!==Symbol.prototype?"symbol":typeof ie})(te)}function T(te){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(ie){return ie.__proto__||Object.getPrototypeOf(ie)})(te)}function R(te,ie){return(R=Object.setPrototypeOf||function(j,Y){return j.__proto__=Y,j})(te,ie)}function q(te,ie){if(!(te instanceof ie))throw new TypeError("Cannot call a class as a function")}function K(te,ie){for(var j=0;j<ie.length;j++){var Y=ie[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(te,Y.key,Y)}}function U(te,ie,j){return ie&&K(te.prototype,ie),j&&K(te,j),te}var J=function(){function te(){q(this,te)}return U(te,[{key:"debug",value:function(ie){}},{key:"info",value:function(ie){}},{key:"warn",value:function(ie){}},{key:"error",value:function(ie){}}]),te}(),z={DEBUG:10,INFO:20,WARN:30,ERROR:40},se=function(){function te(){q(this,te),this.updateLoggerConfig(),this.consoleLoggerWrapper=Q()}return U(te,[{key:"writeToClientLogger",value:function(ie,j){if(this.hasClientLogger())switch(ie){case z.DEBUG:return this._clientLogger.debug(j);case z.INFO:return this._clientLogger.info(j);case z.WARN:return this._clientLogger.warn(j);case z.ERROR:return this._clientLogger.error(j)}}},{key:"isLevelEnabled",value:function(ie){return ie>=this._level}},{key:"hasClientLogger",value:function(){return null!==this._clientLogger}},{key:"getLogger",value:function(ie){return this._logsDestination===m?this.consoleLoggerWrapper:new pe(ie.prefix||"")}},{key:"updateLoggerConfig",value:function(ie){var j=ie||{};this._level=j.level||z.DEBUG,this._clientLogger=j.logger||null,this._logsDestination="NULL",j.debug&&(this._logsDestination=m),j.logger&&(this._logsDestination="CLIENT_LOGGER")}}]),te}(),G=function(){function te(){q(this,te)}return U(te,[{key:"debug",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}}]),te}(),pe=function(te){function ie(j){var Y;return q(this,ie),(Y=function(te,ie){return!ie||"object"!==D(ie)&&"function"!=typeof ie?function(j){if(void 0===j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j}(te):ie}(this,T(ie).call(this))).prefix=j||"",Y}return function(j,Y){if("function"!=typeof Y&&null!==Y)throw new TypeError("Super expression must either be null or a function");j.prototype=Object.create(Y&&Y.prototype,{constructor:{value:j,writable:!0,configurable:!0}}),Y&&R(j,Y)}(ie,G),U(ie,[{key:"debug",value:function(){for(var j=arguments.length,Y=new Array(j),ne=0;ne<j;ne++)Y[ne]=arguments[ne];return this._log(z.DEBUG,Y)}},{key:"info",value:function(){for(var j=arguments.length,Y=new Array(j),ne=0;ne<j;ne++)Y[ne]=arguments[ne];return this._log(z.INFO,Y)}},{key:"warn",value:function(){for(var j=arguments.length,Y=new Array(j),ne=0;ne<j;ne++)Y[ne]=arguments[ne];return this._log(z.WARN,Y)}},{key:"error",value:function(){for(var j=arguments.length,Y=new Array(j),ne=0;ne<j;ne++)Y[ne]=arguments[ne];return this._log(z.ERROR,Y)}},{key:"_shouldLog",value:function(j){return ge.hasClientLogger()&&ge.isLevelEnabled(j)}},{key:"_writeToClientLogger",value:function(j,Y){return ge.writeToClientLogger(j,Y)}},{key:"_log",value:function(j,Y){if(this._shouldLog(j)){var ne=this._convertToSingleStatement(Y);return this._writeToClientLogger(j,ne)}}},{key:"_convertToSingleStatement",value:function(j){var Y="";this.prefix&&(Y+=this.prefix+" ");for(var ne=0;ne<j.length;ne++)Y+=this._convertToString(j[ne])+" ";return Y}},{key:"_convertToString",value:function(j){try{if(!j)return"";if(S.isString(j))return j;if(S.isObject(j)&&S.isFunction(j.toString)){var Y=j.toString();if("[object Object]"!==Y)return Y}return JSON.stringify(j)}catch(ne){return console.error("Error while converting argument to string",j,ne),""}}}]),ie}(),Q=function(){var te=new G;return te.debug=console.debug,te.info=console.info,te.warn=console.warn,te.error=console.error,te},ge=new se;var Ne=function(){function te(ne){var Ce=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;(function(fe,ye){if(!(fe instanceof ye))throw new TypeError("Cannot call a class as a function")})(this,te),this.numAttempts=0,this.executor=ne,this.hasActiveReconnection=!1,this.defaultRetry=Ce}var j;return(j=[{key:"retry",value:function(){var ne=this;this.hasActiveReconnection||(this.hasActiveReconnection=!0,setTimeout(function(){ne._execute()},this._getDelay()))}},{key:"_execute",value:function(){this.hasActiveReconnection=!1,this.executor(),this.numAttempts++}},{key:"connected",value:function(){this.numAttempts=0}},{key:"_getDelay",value:function(){var ne=Math.pow(2,this.numAttempts)*this.defaultRetry;return ne<=3e4?ne:3e4}}])&&function(te,ie){for(var j=0;j<ie.length;j++){var Y=ie[j];Y.enumerable=Y.enumerable||!1,Y.configurable=!0,"value"in Y&&(Y.writable=!0),Object.defineProperty(te,Y.key,Y)}}(te.prototype,j),te}();V.d(P,"a",function(){return xe});var He=function(){var te=ge.getLogger({}),ie=S.isNetworkOnline(),j={primary:null,secondary:null},Y={reconnectWebSocket:!0,websocketInitFailed:!1,exponentialBackOffTime:1e3,exponentialTimeoutHandle:null,lifeTimeTimeoutHandle:null,webSocketInitCheckerTimeoutId:null,connState:null},ne={connectWebSocketRetryCount:0,connectionAttemptStartTime:null,noOpenConnectionsTimestamp:null},Ce={pendingResponse:!1,intervalHandle:null},fe={initFailure:new Set,getWebSocketTransport:null,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set,connectionOpen:new Set,connectionClose:new Set},ye={connConfig:null,promiseHandle:null,promiseCompleted:!0},be={subscribed:new Set,pending:new Set,subscriptionHistory:new Set},Se={responseCheckIntervalId:null,requestCompleted:!0,reSubscribeIntervalId:null,consecutiveFailedSubscribeAttempts:0,consecutiveNoResponseRequest:0},Le=new Ne(function(){Fe()}),ot=new Set([c,"aws/unsubscribe",u]),it=setInterval(function(){if(ie!==S.isNetworkOnline()){if(!(ie=S.isNetworkOnline()))return void Me(te.info("Network offline"));var Z=$e();ie&&(!Z||we(Z,WebSocket.CLOSING)||we(Z,WebSocket.CLOSED))&&(Me(te.info("Network online, connecting to WebSocket server")),Fe())}},250),et=function(Z,_e){Z.forEach(function(Oe){try{Oe(_e)}catch(Ln){Me(te.error("Error executing callback",Ln))}})},ce=function(Z){if(null===Z)return"NULL";switch(Z.readyState){case WebSocket.CONNECTING:return"CONNECTING";case WebSocket.OPEN:return"OPEN";case WebSocket.CLOSING:return"CLOSING";case WebSocket.CLOSED:return"CLOSED";default:return"UNDEFINED"}},le=function(){var Z=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Me(te.debug("["+Z+"] Primary WebSocket: "+ce(j.primary)+" | Secondary WebSocket: "+ce(j.secondary)))},we=function(Z,_e){return Z&&Z.readyState===_e},Re=function(Z){return we(Z,WebSocket.OPEN)},Be=function(Z){return null===Z||void 0===Z.readyState||we(Z,WebSocket.CLOSED)},$e=function(){return null!==j.secondary?j.secondary:j.primary},ct=function(){return Re($e())},xt=function(){if(Ce.pendingResponse)return Me(te.warn("Heartbeat response not received")),clearInterval(Ce.intervalHandle),Ce.pendingResponse=!1,void Fe();ct()?(Me(te.debug("Sending heartbeat")),$e().send(ae(u)),Ce.pendingResponse=!0):(Me(te.warn("Failed to send heartbeat since WebSocket is not open")),le("sendHeartBeat"),Fe())},ke=function(){Y.exponentialBackOffTime=1e3,Ce.pendingResponse=!1,Y.reconnectWebSocket=!0,clearTimeout(Y.lifeTimeTimeoutHandle),clearInterval(Ce.intervalHandle),clearTimeout(Y.exponentialTimeoutHandle),clearTimeout(Y.webSocketInitCheckerTimeoutId)},B=function(){Se.consecutiveFailedSubscribeAttempts=0,Se.consecutiveNoResponseRequest=0,clearInterval(Se.responseCheckIntervalId),clearInterval(Se.reSubscribeIntervalId)},A=function(){ne.connectWebSocketRetryCount=0,ne.connectionAttemptStartTime=null,ne.noOpenConnectionsTimestamp=null},x=function(){try{Me(te.info("WebSocket connection established!")),le("webSocketOnOpen"),null!==Y.connState&&Y.connState!==g||et(fe.connectionGain),Y.connState="connected";var Z=Date.now();et(fe.connectionOpen,{connectWebSocketRetryCount:ne.connectWebSocketRetryCount,connectionAttemptStartTime:ne.connectionAttemptStartTime,noOpenConnectionsTimestamp:ne.noOpenConnectionsTimestamp,connectionEstablishedTime:Z,timeToConnect:Z-ne.connectionAttemptStartTime,timeWithoutConnection:ne.noOpenConnectionsTimestamp?Z-ne.noOpenConnectionsTimestamp:null}),A(),ke(),$e().openTimestamp=Date.now(),0===be.subscribed.size&&Re(j.secondary)&&O(j.primary,"[Primary WebSocket] Closing WebSocket"),(be.subscribed.size>0||be.pending.size>0)&&(Re(j.secondary)&&Me(te.info("Subscribing secondary websocket to topics of primary websocket")),be.subscribed.forEach(function(Oe){be.subscriptionHistory.add(Oe),be.pending.add(Oe)}),be.subscribed.clear(),he()),xt(),Ce.intervalHandle=setInterval(xt,1e4);var _e=1e3*ye.connConfig.webSocketTransport.transportLifeTimeInSeconds;Me(te.debug("Scheduling WebSocket manager reconnection, after delay "+_e+" ms")),Y.lifeTimeTimeoutHandle=setTimeout(function(){Me(te.debug("Starting scheduled WebSocket manager reconnection")),Fe()},_e)}catch(Oe){Me(te.error("Error after establishing WebSocket connection",Oe))}},H=function(Z){le("webSocketOnError"),Me(te.error("WebSocketManager Error, error_event: ",JSON.stringify(Z))),Fe()},re=function(Z){var _e=JSON.parse(Z.data);switch(_e.topic){case c:if(Me(te.debug("Subscription Message received from webSocket server",Z.data)),Se.requestCompleted=!0,Se.consecutiveNoResponseRequest=0,"success"===_e.content.status)Se.consecutiveFailedSubscribeAttempts=0,_e.content.topics.forEach(function(Oe){be.subscriptionHistory.delete(Oe),be.pending.delete(Oe),be.subscribed.add(Oe)}),0===be.subscriptionHistory.size?Re(j.secondary)&&(Me(te.info("Successfully subscribed secondary websocket to all topics of primary websocket")),O(j.primary,"[Primary WebSocket] Closing WebSocket")):he(),et(fe.subscriptionUpdate,_e);else{if(clearInterval(Se.reSubscribeIntervalId),++Se.consecutiveFailedSubscribeAttempts,5===Se.consecutiveFailedSubscribeAttempts)return et(fe.subscriptionFailure,_e),void(Se.consecutiveFailedSubscribeAttempts=0);Se.reSubscribeIntervalId=setInterval(function(){he()},500)}break;case u:Me(te.debug("Heartbeat response received")),Ce.pendingResponse=!1;break;default:if(_e.topic){if(Me(te.debug("Message received for topic "+_e.topic)),Re(j.primary)&&Re(j.secondary)&&0===be.subscriptionHistory.size&&this===j.primary)return void Me(te.warn("Ignoring Message for Topic "+_e.topic+", to avoid duplicates"));if(0===fe.allMessage.size&&0===fe.topic.size)return void Me(te.warn("No registered callback listener for Topic",_e.topic));et(fe.allMessage,_e),fe.topic.has(_e.topic)&&et(fe.topic.get(_e.topic),_e)}else Me(te.warn(_e.message?"WebSocketManager Message Error":"Invalid incoming message",_e))}},he=function Z(){if(Se.consecutiveNoResponseRequest>3)return Me(te.warn("Ignoring subscribePendingTopics since we have exhausted max subscription retries with no response")),void et(fe.subscriptionFailure,S.getSubscriptionResponse(c,!1,Array.from(be.pending)));ct()?(clearInterval(Se.responseCheckIntervalId),$e().send(ae(c,{topics:Array.from(be.pending)})),Se.requestCompleted=!1,Se.responseCheckIntervalId=setInterval(function(){Se.requestCompleted||(++Se.consecutiveNoResponseRequest,Z())},1e3)):Me(te.warn("Ignoring subscribePendingTopics call since Default WebSocket is not open"))},O=function(Z,_e){we(Z,WebSocket.CONNECTING)||we(Z,WebSocket.OPEN)?Z.close(1e3,_e):Me(te.warn("Ignoring WebSocket Close request, WebSocket State: "+ce(Z)))},L=function(Z){O(j.primary,"[Primary] WebSocket "+Z),O(j.secondary,"[Secondary] WebSocket "+Z)},ee=function(Z){ke(),B(),Me(te.error("WebSocket Initialization failed")),Y.websocketInitFailed=!0,L("Terminating WebSocket Manager"),clearInterval(it),et(fe.initFailure,{connectWebSocketRetryCount:ne.connectWebSocketRetryCount,connectionAttemptStartTime:ne.connectionAttemptStartTime,reason:Z}),A()},ae=function(Z,_e){return JSON.stringify({topic:Z,content:_e})},Ee=function(Z){return!!(S.isObject(Z)&&S.isObject(Z.webSocketTransport)&&S.isNonEmptyString(Z.webSocketTransport.url)&&S.validWSUrl(Z.webSocketTransport.url)&&1e3*Z.webSocketTransport.transportLifeTimeInSeconds>=3e5)||(Me(te.error("Invalid WebSocket Connection Configuration",Z)),!1)},Fe=function(){if(S.isNetworkOnline())if(Y.websocketInitFailed)Me(te.debug("WebSocket Init had failed, ignoring this getWebSocketConnConfig request"));else{if(ye.promiseCompleted)return ke(),Me(te.info("Fetching new WebSocket connection configuration")),ne.connectionAttemptStartTime=ne.connectionAttemptStartTime||Date.now(),ye.promiseCompleted=!1,ye.promiseHandle=fe.getWebSocketTransport(),ye.promiseHandle.then(function(Z){return ye.promiseCompleted=!0,Me(te.debug("Successfully fetched webSocket connection configuration",Z)),Ee(Z)?(ye.connConfig=Z,ye.connConfig.urlConnValidTime=Date.now()+85e3,Le.connected(),Ze()):(ee("Invalid WebSocket connection configuration: "+Z),{webSocketConnectionFailed:!0})},function(Z){return ye.promiseCompleted=!0,Me(te.error("Failed to fetch webSocket connection configuration",Z)),S.isNetworkFailure(Z)?(Me(te.info("Retrying fetching new WebSocket connection configuration")),Le.retry()):ee("Failed to fetch webSocket connection configuration: "+JSON.stringify(Z)),{webSocketConnectionFailed:!0}});Me(te.debug("There is an ongoing getWebSocketConnConfig request, this request will be ignored"))}else Me(te.info("Network offline, ignoring this getWebSocketConnConfig request"))},Ze=function(){if(Y.websocketInitFailed)return Me(te.info("web-socket initializing had failed, aborting re-init")),{webSocketConnectionFailed:!0};if(!S.isNetworkOnline())return Me(te.warn("System is offline aborting web-socket init")),{webSocketConnectionFailed:!0};Me(te.info("Initializing Websocket Manager")),le("initWebSocket");try{if(Ee(ye.connConfig)){var Z=null;return Re(j.primary)?(Me(te.debug("Primary Socket connection is already open")),we(j.secondary,WebSocket.CONNECTING)||(Me(te.debug("Establishing a secondary web-socket connection")),j.secondary=pt()),Z=j.secondary):(we(j.primary,WebSocket.CONNECTING)||(Me(te.debug("Establishing a primary web-socket connection")),j.primary=pt()),Z=j.primary),Y.webSocketInitCheckerTimeoutId=setTimeout(function(){Re(Z)||function(){ne.connectWebSocketRetryCount++;var Z=S.addJitter(Y.exponentialBackOffTime,.3);Date.now()+Z<=ye.connConfig.urlConnValidTime?(Me(te.debug("Scheduling WebSocket reinitialization, after delay "+Z+" ms")),Y.exponentialTimeoutHandle=setTimeout(function(){return Ze()},Z),Y.exponentialBackOffTime*=2):(Me(te.warn("WebSocket URL cannot be used to establish connection")),Fe())}()},1e3),{webSocketConnectionFailed:!1}}}catch(_e){return Me(te.error("Error Initializing web-socket-manager",_e)),ee("Failed to initialize new WebSocket: "+_e.message),{webSocketConnectionFailed:!0}}},pt=function(){var Z=new WebSocket(ye.connConfig.webSocketTransport.url);return Z.addEventListener("open",x),Z.addEventListener("message",re),Z.addEventListener("error",H),Z.addEventListener("close",function(_e){return Ln=Z,Me(te.info("Socket connection is closed",Oe=_e)),le("webSocketOnClose before-cleanup"),et(fe.connectionClose,{openTimestamp:Ln.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-Ln.openTimestamp,code:Oe.code,reason:Oe.reason}),Be(j.primary)&&(j.primary=null),Be(j.secondary)&&(j.secondary=null),void(Y.reconnectWebSocket&&(Re(j.primary)||Re(j.secondary)?Be(j.primary)&&Re(j.secondary)&&(Me(te.info("[Primary] WebSocket Cleanly Closed")),j.primary=j.secondary,j.secondary=null):(Me(te.warn("Neither primary websocket and nor secondary websocket have open connections, attempting to re-establish connection")),Y.connState===g?Me(te.info("Ignoring connectionLost callback invocation")):(et(fe.connectionLost,{openTimestamp:Ln.openTimestamp,closeTimestamp:Date.now(),connectionDuration:Date.now()-Ln.openTimestamp,code:Oe.code,reason:Oe.reason}),ne.noOpenConnectionsTimestamp=Date.now()),Y.connState=g,Fe()),le("webSocketOnClose after-cleanup")));var Oe,Ln}),Z},Me=function(Z){return Z&&"function"==typeof Z.sendInternalLogToServer&&Z.sendInternalLogToServer(),Z};this.init=function(Z){if(S.assertTrue(S.isFunction(Z),"transportHandle must be a function"),null===fe.getWebSocketTransport)return fe.getWebSocketTransport=Z,Fe();Me(te.warn("Web Socket Manager was already initialized"))},this.onInitFailure=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.initFailure.add(Z),Y.websocketInitFailed&&Z(),function(){return fe.initFailure.delete(Z)}},this.onConnectionOpen=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.connectionOpen.add(Z),function(){return fe.connectionOpen.delete(Z)}},this.onConnectionClose=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.connectionClose.add(Z),function(){return fe.connectionClose.delete(Z)}},this.onConnectionGain=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.connectionGain.add(Z),ct()&&Z(),function(){return fe.connectionGain.delete(Z)}},this.onConnectionLost=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.connectionLost.add(Z),Y.connState===g&&Z(),function(){return fe.connectionLost.delete(Z)}},this.onSubscriptionUpdate=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.subscriptionUpdate.add(Z),function(){return fe.subscriptionUpdate.delete(Z)}},this.onSubscriptionFailure=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.subscriptionFailure.add(Z),function(){return fe.subscriptionFailure.delete(Z)}},this.onMessage=function(Z,_e){return S.assertNotNull(Z,"topicName"),S.assertTrue(S.isFunction(_e),"cb must be a function"),fe.topic.has(Z)?fe.topic.get(Z).add(_e):fe.topic.set(Z,new Set([_e])),function(){return fe.topic.get(Z).delete(_e)}},this.onAllMessage=function(Z){return S.assertTrue(S.isFunction(Z),"cb must be a function"),fe.allMessage.add(Z),function(){return fe.allMessage.delete(Z)}},this.subscribeTopics=function(Z){S.assertNotNull(Z,"topics"),S.assertIsList(Z),Z.forEach(function(_e){be.subscribed.has(_e)||be.pending.add(_e)}),Se.consecutiveNoResponseRequest=0,he()},this.sendMessage=function(Z){if(S.assertIsObject(Z,"payload"),void 0===Z.topic||ot.has(Z.topic))Me(te.warn("Cannot send message, Invalid topic",Z));else{try{Z=JSON.stringify(Z)}catch(_e){return void Me(te.warn("Error stringify message",Z))}ct()?$e().send(Z):Me(te.warn("Cannot send message, web socket connection is not open"))}},this.closeWebSocket=function(){ke(),B(),Y.reconnectWebSocket=!1,clearInterval(it),L("User request to close WebSocket")},this.terminateWebSocketManager=ee},xe={create:function(){return new He},setGlobalConfig:function(te){ge.updateLoggerConfig(te.loggerConfig)},LogLevel:z,Logger:J}},function(N,P,V){var v;!function(){"use strict";var w={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function E(c){return function(h,u){var l,g,d,y,_,S,D,b,T,R=1,q=h.length,K="";for(g=0;g<q;g++)if("string"==typeof h[g])K+=h[g];else if("object"==typeof h[g]){if((y=h[g]).keys)for(l=u[R],d=0;d<y.keys.length;d++){if(null==l)throw new Error(E('[sprintf] Cannot access property "%s" of undefined value "%s"',y.keys[d],y.keys[d-1]));l=l[y.keys[d]]}else l=y.param_no?u[y.param_no]:u[R++];if(w.not_type.test(y.type)&&w.not_primitive.test(y.type)&&l instanceof Function&&(l=l()),w.numeric_arg.test(y.type)&&"number"!=typeof l&&isNaN(l))throw new TypeError(E("[sprintf] expecting number but found %T",l));switch(w.number.test(y.type)&&(b=l>=0),y.type){case"b":l=parseInt(l,10).toString(2);break;case"c":l=String.fromCharCode(parseInt(l,10));break;case"d":case"i":l=parseInt(l,10);break;case"j":l=JSON.stringify(l,null,y.width?parseInt(y.width):0);break;case"e":l=y.precision?parseFloat(l).toExponential(y.precision):parseFloat(l).toExponential();break;case"f":l=y.precision?parseFloat(l).toFixed(y.precision):parseFloat(l);break;case"g":l=y.precision?String(Number(l.toPrecision(y.precision))):parseFloat(l);break;case"o":l=(parseInt(l,10)>>>0).toString(8);break;case"s":l=String(l),l=y.precision?l.substring(0,y.precision):l;break;case"t":l=String(!!l),l=y.precision?l.substring(0,y.precision):l;break;case"T":l=Object.prototype.toString.call(l).slice(8,-1).toLowerCase(),l=y.precision?l.substring(0,y.precision):l;break;case"u":l=parseInt(l,10)>>>0;break;case"v":l=l.valueOf(),l=y.precision?l.substring(0,y.precision):l;break;case"x":l=(parseInt(l,10)>>>0).toString(16);break;case"X":l=(parseInt(l,10)>>>0).toString(16).toUpperCase()}w.json.test(y.type)?K+=l:(!w.number.test(y.type)||b&&!y.sign?T="":(T=b?"+":"-",l=l.toString().replace(w.sign,"")),S=y.pad_char?"0"===y.pad_char?"0":y.pad_char.charAt(1):" ",D=y.width-(T+l).length,_=y.width&&D>0?S.repeat(D):"",K+=y.align?T+l+_:"0"===S?T+_+l:_+T+l)}return K}(function(h){if(f[h])return f[h];for(var u,l=h,g=[],d=0;l;){if(null!==(u=w.text.exec(l)))g.push(u[0]);else if(null!==(u=w.modulo.exec(l)))g.push("%");else{if(null===(u=w.placeholder.exec(l)))throw new SyntaxError("[sprintf] unexpected placeholder");if(u[2]){d|=1;var y=[],_=u[2],S=[];if(null===(S=w.key.exec(_)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(y.push(S[1]);""!==(_=_.substring(S[0].length));)if(null!==(S=w.key_access.exec(_)))y.push(S[1]);else{if(null===(S=w.index_access.exec(_)))throw new SyntaxError("[sprintf] failed to parse named argument key");y.push(S[1])}u[2]=y}else d|=2;if(3===d)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");g.push({placeholder:u[0],param_no:u[1],keys:u[2],sign:u[3],pad_char:u[4],align:u[5],width:u[6],precision:u[7],type:u[8]})}l=l.substring(u[0].length)}return f[h]=g}(c),arguments)}function m(c,h){return E.apply(null,[c].concat(h||[]))}var f=Object.create(null);P.sprintf=E,P.vsprintf=m,"undefined"!=typeof window&&(window.sprintf=E,window.vsprintf=m,void 0===(v=function(){return{sprintf:E,vsprintf:m}}.call(P,V,P,N))||(N.exports=v))}()},function(N,P,V){"use strict";V.r(P),function(v){V.d(P,"WebSocketManager",function(){return E});var w=V(0);v.connect=v.connect||{},connect.WebSocketManager=w.a;var E=w.a}.call(this,V(3))},function(N,P){var V;V=function(){return this}();try{V=V||new Function("return this")()}catch(v){"object"==typeof window&&(V=window)}N.exports=V}]),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,connect.core={},connect.core.initialized=!1,connect.version="1.7.4",connect.DEFAULT_BATCH_SIZE=500;var f="/auth/authorize",c="/connect/auth/authorize";function D(U){var J=U.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\/\n?]+)/gi);return J.length?J[0]:""}connect.numberOfConnectedCCPs=0,connect.core.checkNotInitialized=function(){connect.core.initialized&&connect.getLog().warn("Connect core already initialized, only needs to be initialized once.").sendInternalLogToServer()},connect.core.init=function(U){connect.core.eventBus=new connect.EventBus,connect.core.agentDataProvider=new K(connect.core.getEventBus()),connect.core.initClient(U),connect.core.initAgentAppClient(U),connect.core.initialized=!0},connect.core.initClient=function(U){connect.assertNotNull(U,"params");var J=connect.assertNotNull(U.authToken,"params.authToken"),z=connect.assertNotNull(U.region,"params.region");connect.core.client=new connect.AWSClient(J,z,U.endpoint||null)},connect.core.initAgentAppClient=function(U){connect.assertNotNull(U,"params");var J=connect.assertNotNull(U.authToken,"params.authToken"),z=connect.assertNotNull(U.authCookieName,"params.authCookieName"),se=connect.assertNotNull(U.agentAppEndpoint,"params.agentAppEndpoint");connect.core.agentAppClient=new connect.AgentAppClient(z,J,se)},connect.core.terminate=function(){connect.core.client=new connect.NullClient,connect.core.agentAppClient=new connect.NullClient,connect.core.masterClient=new connect.NullClient;var U=connect.core.getEventBus();U&&U.unsubscribeAll(),connect.core.bus=new connect.EventBus,connect.core.agentDataProvider=null,connect.core.softphoneManager=null,connect.core.upstream=null,connect.core.keepaliveManager=null,connect.agent.initialized=!1,connect.core.initialized=!1},connect.core.softphoneUserMediaStream=null,connect.core.getSoftphoneUserMediaStream=function(){return connect.core.softphoneUserMediaStream},connect.core.setSoftphoneUserMediaStream=function(U){connect.core.softphoneUserMediaStream=U},connect.core.initRingtoneEngines=function(U){connect.assertNotNull(U,"params");var J=function(G){connect.assertNotNull(G,"ringtoneSettings"),connect.assertNotNull(G.voice,"ringtoneSettings.voice"),connect.assertTrue(G.voice.ringtoneUrl||G.voice.disabled,"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.voice.disabled must be true"),connect.assertNotNull(G.queue_callback,"ringtoneSettings.queue_callback"),connect.assertTrue(G.queue_callback.ringtoneUrl||G.queue_callback.disabled,"ringtoneSettings.voice.ringtoneUrl must be provided or ringtoneSettings.queue_callback.disabled must be true"),connect.core.ringtoneEngines={},connect.agent(function(pe){pe.onRefresh(function(){connect.ifMaster(connect.MasterTopics.RINGTONE,function(){!G.voice.disabled&&!connect.core.ringtoneEngines.voice&&(connect.core.ringtoneEngines.voice=new connect.VoiceRingtoneEngine(G.voice),connect.getLog().info("VoiceRingtoneEngine initialized.").sendInternalLogToServer()),!G.chat.disabled&&!connect.core.ringtoneEngines.chat&&(connect.core.ringtoneEngines.chat=new connect.ChatRingtoneEngine(G.chat),connect.getLog().info("ChatRingtoneEngine initialized.").sendInternalLogToServer()),!G.task.disabled&&!connect.core.ringtoneEngines.task&&(connect.core.ringtoneEngines.task=new connect.TaskRingtoneEngine(G.task),connect.getLog().info("TaskRingtoneEngine initialized.").sendInternalLogToServer()),!G.queue_callback.disabled&&!connect.core.ringtoneEngines.queue_callback&&(connect.core.ringtoneEngines.queue_callback=new connect.QueueCallbackRingtoneEngine(G.queue_callback),connect.getLog().info("QueueCallbackRingtoneEngine initialized.").sendInternalLogToServer())})})}),b()},z=function(G,pe){G.ringtone=G.ringtone||{},G.ringtone.voice=G.ringtone.voice||{},G.ringtone.queue_callback=G.ringtone.queue_callback||{},G.ringtone.chat=G.ringtone.chat||{disabled:!0},G.ringtone.task=G.ringtone.task||{disabled:!0},pe.softphone&&(pe.softphone.disableRingtone&&(G.ringtone.voice.disabled=!0,G.ringtone.queue_callback.disabled=!0),pe.softphone.ringtoneUrl&&(G.ringtone.voice.ringtoneUrl=pe.softphone.ringtoneUrl,G.ringtone.queue_callback.ringtoneUrl=pe.softphone.ringtoneUrl)),pe.chat&&(pe.chat.disableRingtone&&(G.ringtone.chat.disabled=!0),pe.chat.ringtoneUrl&&(G.ringtone.chat.ringtoneUrl=pe.chat.ringtoneUrl)),pe.ringtone&&(G.ringtone.voice=connect.merge(G.ringtone.voice,pe.ringtone.voice||{}),G.ringtone.queue_callback=connect.merge(G.ringtone.queue_callback,pe.ringtone.voice||{}),G.ringtone.chat=connect.merge(G.ringtone.chat,pe.ringtone.chat||{}))};z(U,U),connect.isFramed()?connect.core.getEventBus().subscribe(connect.EventType.CONFIGURE,function(G){this.unsubscribe(),z(U,G),J(U.ringtone)}):J(U.ringtone)};var b=function(){connect.core.getEventBus().subscribe(connect.ConfigurationEvents.SET_RINGER_DEVICE,T)},T=function(U){if(0!==connect.keys(connect.core.ringtoneEngines).length&&U&&U.deviceId){var J=U.deviceId;for(var z in connect.core.ringtoneEngines)connect.core.ringtoneEngines[z].setOutputDevice(J);connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.RINGER_DEVICE_CHANGED,data:{deviceId:J}})}};connect.core.initSoftphoneManager=function(U){connect.getLog().info("[Softphone Manager] initSoftphoneManager started").sendInternalLogToServer();var J=U||{},z=function(pe){var Q=connect.merge(J.softphone||{},pe);connect.getLog().info("[Softphone Manager] competeForMasterOnAgentUpdate executed").sendInternalLogToServer(),connect.agent(function(ge){!ge.getChannelConcurrency(connect.ChannelType.VOICE)||ge.onRefresh(function(){var Pe=this;connect.getLog().info("[Softphone Manager] agent refresh handler executed").sendInternalLogToServer(),connect.ifMaster(connect.MasterTopics.SOFTPHONE,function(){connect.getLog().info("[Softphone Manager] confirmed as softphone master topic").sendInternalLogToServer(),!connect.core.softphoneManager&&ge.isSoftphoneEnabled()&&(connect.becomeMaster(connect.MasterTopics.SEND_LOGS),connect.core.softphoneManager=new connect.SoftphoneManager(Q),Pe.unsubscribe())})})})};function G(pe){var Q=connect.merge(J.softphone||{},pe);connect.core.softphoneParams=Q,connect.isFirefoxBrowser()&&(connect.core.getUpstream().onUpstream(connect.EventType.MASTER_RESPONSE,function(ge){if(ge.data&&ge.data.topic===connect.MasterTopics.SOFTPHONE&&ge.data.takeOver&&ge.data.masterId!==connect.core.portStreamId){connect.core.softphoneManager&&(connect.core.softphoneManager.onInitContactSub.unsubscribe(),delete connect.core.softphoneManager);var Pe=connect.core.getSoftphoneUserMediaStream();Pe&&(Pe.getTracks().forEach(function(Ne){Ne.stop()}),connect.core.setSoftphoneUserMediaStream(null))}}),connect.core.getEventBus().subscribe(connect.ConnectionEvents.READY_TO_START_SESSION,function(){connect.ifMaster(connect.MasterTopics.SOFTPHONE,function(){connect.core.softphoneManager&&connect.core.softphoneManager.startSession()},function(){connect.becomeMaster(connect.MasterTopics.SOFTPHONE,function(){connect.agent(function(ge){!connect.core.softphoneManager&&ge.isSoftphoneEnabled()&&(connect.becomeMaster(connect.MasterTopics.SEND_LOGS),connect.core.softphoneManager=new connect.SoftphoneManager(Q),connect.core.softphoneManager.startSession())})})})}),connect.contact(function(ge){connect.agent(function(Pe){ge.onRefresh(function(Ne){if(connect.hasOtherConnectedCCPs()&&"visible"===document.visibilityState&&(Ne.getStatus().type===connect.ContactStatusType.CONNECTING||Ne.getStatus().type===connect.ContactStatusType.INCOMING)){var He=Ne.isSoftphoneCall()&&!Ne.isInbound(),xe=Ne.isSoftphoneCall()&&Pe.getConfiguration().softphoneAutoAccept,te=Ne.getType()===connect.ContactType.QUEUE_CALLBACK;(He||xe||te)&&connect.core.triggerReadyToStartSessionEvent()}})})}))}connect.isFramed()&&!J.allowFramedSoftphone?connect.core.getEventBus().subscribe(connect.EventType.CONFIGURE,function(pe){connect.getLog().info("[Softphone Manager] Configure event handler executed").sendInternalLogToServer(),pe.softphone&&pe.softphone.allowFramedSoftphone&&(this.unsubscribe(),z(pe.softphone)),G(pe.softphone)}):(z(J),G(J)),connect.agent(function(pe){pe.isSoftphoneEnabled()&&pe.getChannelConcurrency(connect.ChannelType.VOICE)&&connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.EventType.MUTE})})},connect.core.triggerReadyToStartSessionEvent=function(){var U=connect.core.softphoneParams&&connect.core.softphoneParams.allowFramedSoftphone;connect.isCCP()?U?connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION):connect.isFramed()?connect.core.getUpstream().sendDownstream(connect.ConnectionEvents.READY_TO_START_SESSION):connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION):U?connect.core.getUpstream().sendUpstream(connect.ConnectionEvents.READY_TO_START_SESSION):connect.core.getEventBus().trigger(connect.ConnectionEvents.READY_TO_START_SESSION)},connect.core.initPageOptions=function(U){if(connect.assertNotNull(U,"params"),connect.isFramed()){var J=connect.core.getEventBus();J.subscribe(connect.EventType.CONFIGURE,function(z){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.CONFIGURE,data:z})}),J.subscribe(connect.EventType.MEDIA_DEVICE_REQUEST,function(){function z(se){connect.core.getUpstream().sendDownstream(connect.EventType.MEDIA_DEVICE_RESPONSE,se)}navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(se){devices=se||[],devices=devices.map(function(G){return G.toJSON()}),z(devices)}).catch(function(se){z({error:se.message})}):z({error:"No navigator or navigator.mediaDevices object found"})})}},connect.core.getFrameMediaDevices=function(U){var J=null,z=U||1e3,se=new Promise(function(pe,Q){setTimeout(function(){Q(new Error("Timeout exceeded"))},z)}),G=new Promise(function(pe,Q){if(connect.isFramed()||connect.isCCP())navigator&&navigator.mediaDevices?navigator.mediaDevices.enumerateDevices().then(function(Pe){devices=Pe||[],devices=devices.map(function(Ne){return Ne.toJSON()}),pe(devices)}):Q(new Error("No navigator or navigator.mediaDevices object found"));else{var ge=connect.core.getEventBus();J=ge.subscribe(connect.EventType.MEDIA_DEVICE_RESPONSE,function(Pe){Pe.error?Q(new Error(Pe.error)):pe(Pe)}),connect.core.getUpstream().sendUpstream(connect.EventType.MEDIA_DEVICE_REQUEST)}});return Promise.race([G,se]).finally(function(){J&&J.unsubscribe()})},connect.core.authorize=function(U){var z=U;return z||(z=connect.core.isLegacyDomain()?c:f),connect.fetch(z,{credentials:"include"},2e3,5)},connect.core.verifyDomainAccess=function(U,J){if(connect.getLog().warn("This API will be deprecated in the next major version release"),!connect.isFramed())return Promise.resolve();var se,z={headers:{"X-Amz-Bearer":U}};return se=J||(connect.core.isLegacyDomain()?"/connect/whitelisted-origins":"/whitelisted-origins"),connect.fetch(se,z,2e3,5).then(function(G){var pe=D(window.document.referrer);return G.whitelistedOrigins.some(function(ge){return pe===D(ge)})?Promise.resolve():Promise.reject()})},connect.core.isLegacyDomain=function(U){return(U=U||window.location.href).includes(".awsapps.com")},connect.core.initSharedWorker=function(U){if(connect.core.checkNotInitialized(),!connect.core.initialized){connect.assertNotNull(U,"params");var J=connect.assertNotNull(U.sharedWorkerUrl,"params.sharedWorkerUrl"),z=connect.assertNotNull(U.authToken,"params.authToken"),se=connect.assertNotNull(U.refreshToken,"params.refreshToken"),G=connect.assertNotNull(U.authTokenExpiration,"params.authTokenExpiration"),pe=connect.assertNotNull(U.region,"params.region"),Q=U.endpoint||null,ge=U.authorizeEndpoint;ge||(ge=connect.core.isLegacyDomain()?c:f);var Pe=U.agentAppEndpoint||null,Ne=U.authCookieName||null;try{connect.core.eventBus=new connect.EventBus({logEvents:!0}),connect.core.agentDataProvider=new K(connect.core.getEventBus()),connect.core.mediaFactory=new connect.MediaFactory(U);var He=new SharedWorker(J,"ConnectSharedWorker"),xe=new connect.Conduit("ConnectSharedWorkerConduit",new connect.PortStream(He.port),new connect.WindowIOStream(window,parent));connect.core.upstream=xe,connect.core.webSocketProvider=new q,N.onunload=function(){xe.sendUpstream(connect.EventType.CLOSE),He.port.close()},connect.getLog().scheduleUpstreamLogPush(xe),connect.getLog().scheduleDownstreamClientSideLogsPush(),xe.onAllUpstream(connect.core.getEventBus().bridge()),xe.onAllUpstream(xe.passDownstream()),connect.isFramed()&&(xe.onAllDownstream(connect.core.getEventBus().bridge()),xe.onAllDownstream(xe.passUpstream())),xe.sendUpstream(connect.EventType.CONFIGURE,{authToken:z,authTokenExpiration:G,endpoint:Q,refreshToken:se,region:pe,authorizeEndpoint:ge,agentAppEndpoint:Pe,authCookieName:Ne}),xe.onUpstream(connect.EventType.ACKNOWLEDGE,function(ie){connect.getLog().info("Acknowledged by the ConnectSharedWorker!").sendInternalLogToServer(),connect.core.initialized=!0,connect.core.portStreamId=ie.id,this.unsubscribe()}),xe.onUpstream(connect.EventType.LOG,function(ie){ie.loggerId!==connect.getLog().getLoggerId()&&connect.getLog().addLogEntry(connect.LogEntry.fromObject(ie))}),xe.onUpstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG,function(ie){connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(ie))}),xe.onDownstream(connect.EventType.SERVER_BOUND_INTERNAL_LOG,function(ie){connect.isFramed()&&Array.isArray(ie)&&ie.forEach(function(j){connect.getLog().sendInternalLogEntryToServer(connect.LogEntry.fromObject(j))})}),xe.onDownstream(connect.EventType.LOG,function(ie){connect.isFramed()&&ie.loggerId!==connect.getLog().getLoggerId()&&connect.getLog().addLogEntry(connect.LogEntry.fromObject(ie))}),xe.onUpstream(connect.EventType.AUTH_FAIL,function(ie){location.reload()}),connect.getLog().info("User Agent: "+navigator.userAgent).sendInternalLogToServer(),connect.getLog().info("isCCPv2: "+!0).sendInternalLogToServer(),connect.getLog().info("isFramed: "+connect.isFramed()).sendInternalLogToServer(),connect.core.upstream.onDownstream(connect.EventType.OUTER_CONTEXT_INFO,function(ie){var j=ie.streamsVersion;connect.getLog().info("StreamsJS Version: "+j).sendInternalLogToServer()}),xe.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS,function(ie){connect.getLog().info("Number of connected CCPs updated: "+ie.length).sendInternalLogToServer(),connect.numberOfConnectedCCPs=ie.length}),connect.core.client=new connect.UpstreamConduitClient(xe),connect.core.masterClient=new connect.UpstreamConduitMasterClient(xe),connect.core.getEventBus().subscribe(connect.EventType.TERMINATE,xe.passUpstream()),connect.core.getEventBus().subscribe(connect.EventType.TERMINATED,function(){window.location.reload(!0)}),He.port.start(),xe.onUpstream(connect.VoiceIdEvents.UPDATE_DOMAIN_ID,function(ie){ie&&ie.domainId&&(connect.core.voiceIdDomainId=ie.domainId)}),connect.agent(function(){(new connect.VoiceId).getDomainId().then(function(j){connect.getLog().info("voiceId domainId successfully fetched at agent initialization: "+j).sendInternalLogToServer()}).catch(function(j){connect.getLog().info("voiceId domainId not fetched at agent initialization").withObject({err:j}).sendInternalLogToServer()})}),connect.core.getNotificationManager().requestPermission()}catch(ie){connect.getLog().error("Failed to initialize the API shared worker, we're dead!").withException(ie).sendInternalLogToServer()}}},connect.core.initCCP=function(U,J){if(connect.core.checkNotInitialized(),!connect.core.initialized){var z={};"string"==typeof J?z.ccpUrl=J:z=J,connect.assertNotNull(U,"containerDiv"),connect.assertNotNull(z.ccpUrl,"params.ccpUrl");var se=document.createElement("iframe");se.src=z.ccpUrl,se.allow="microphone; autoplay",se.style="width: 100%; height: 100%",se.title="Amazon Connect CCP",U.appendChild(se),connect.core.eventBus=new connect.EventBus({logEvents:!1}),connect.core.agentDataProvider=new K(connect.core.getEventBus()),connect.core.mediaFactory=new connect.MediaFactory(z);var G=new connect.IFrameConduit(z.ccpUrl,window,se);se.onload=setTimeout(function(){var Q={display:window.getComputedStyle(se,null).display,offsetWidth:se.offsetWidth,offsetHeight:se.offsetHeight,clientRectsLength:se.getClientRects().length};G.sendUpstream(connect.EventType.IFRAME_STYLE,Q)},1e4),connect.core.upstream=G,connect.core.webSocketProvider=new q,G.onAllUpstream(connect.core.getEventBus().bridge()),connect.core.keepaliveManager=new R(G,connect.core.getEventBus(),z.ccpSynTimeout||1e3,z.ccpAckTimeout||3e3),connect.core.iframeRefreshInterval=null,connect.core.ccpLoadTimeoutInstance=N.setTimeout(function(){connect.core.ccpLoadTimeoutInstance=null,connect.core.getEventBus().trigger(connect.EventType.ACK_TIMEOUT)},z.ccpLoadTimeout||5e3),connect.getLog().scheduleUpstreamOuterContextCCPLogsPush(G),connect.getLog().scheduleUpstreamOuterContextCCPserverBoundLogsPush(G),G.onUpstream(connect.EventType.ACKNOWLEDGE,function(pe){connect.getLog().info("Acknowledged by the CCP!").sendInternalLogToServer(),connect.core.client=new connect.UpstreamConduitClient(G),connect.core.masterClient=new connect.UpstreamConduitMasterClient(G),connect.core.portStreamId=pe.id,(z.softphone||z.chat||z.pageOptions)&&G.sendUpstream(connect.EventType.CONFIGURE,{softphone:z.softphone,chat:z.chat,pageOptions:z.pageOptions}),connect.core.ccpLoadTimeoutInstance&&(N.clearTimeout(connect.core.ccpLoadTimeoutInstance),connect.core.ccpLoadTimeoutInstance=null),G.sendUpstream(connect.EventType.OUTER_CONTEXT_INFO,{streamsVersion:connect.version}),connect.core.keepaliveManager.start(),this.unsubscribe(),connect.core.initialized=!0,connect.core.getEventBus().trigger(connect.EventType.INIT)}),G.onUpstream(connect.EventType.LOG,function(pe){pe.loggerId!==connect.getLog().getLoggerId()&&connect.getLog().addLogEntry(connect.LogEntry.fromObject(pe))}),connect.core.getEventBus().subscribe(connect.EventType.ACK_TIMEOUT,function(){if(!1!==z.loginPopup)try{var pe=function(U){var J="https://lily.us-east-1.amazonaws.com/taw/auth/code";return connect.assertNotNull(J),U.loginUrl?U.loginUrl:U.alias?(log.warn("The `alias` param is deprecated and should not be expected to function properly. Please use `ccpUrl` or `loginUrl`. See https://github.com/amazon-connect/amazon-connect-streams/blob/master/README.md#connectcoreinitccp for valid parameters."),"https://{alias}.awsapps.com/auth/?client_id={client_id}&redirect_uri={redirect}".replace("{alias}",U.alias).replace("{client_id}","06919f4fd8ed324e").replace("{redirect}",N.encodeURIComponent(J))):U.ccpUrl}(z);connect.getLog().warn("ACK_TIMEOUT occurred, attempting to pop the login page if not already open.").sendInternalLogToServer(),z.loginUrl&&connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP),connect.core.loginWindow=connect.core.getPopupManager().open(pe,connect.MasterTopics.LOGIN_POPUP,z.loginOptions)}catch(Q){connect.getLog().error("ACK_TIMEOUT occurred but we are unable to open the login popup.").withException(Q).sendInternalLogToServer()}null==connect.core.iframeRefreshInterval&&(connect.core.iframeRefreshInterval=window.setInterval(function(){se.src=z.ccpUrl},5e3),G.onUpstream(connect.EventType.ACKNOWLEDGE,function(){this.unsubscribe(),N.clearInterval(connect.core.iframeRefreshInterval),connect.core.iframeRefreshInterval=null,connect.core.getPopupManager().clear(connect.MasterTopics.LOGIN_POPUP),(z.loginPopupAutoClose||z.loginOptions&&z.loginOptions.autoClose)&&connect.core.loginWindow&&(connect.core.loginWindow.close(),connect.core.loginWindow=null)}))}),z.onViewContact&&connect.core.onViewContact(z.onViewContact),G.onUpstream(connect.EventType.UPDATE_CONNECTED_CCPS,function(pe){connect.numberOfConnectedCCPs=pe.length}),G.onUpstream(connect.VoiceIdEvents.UPDATE_DOMAIN_ID,function(pe){pe&&pe.domainId&&(connect.core.voiceIdDomainId=pe.domainId)}),connect.core.softphoneParams=z.softphone}};var R=function(U,J,z,se){this.conduit=U,this.eventBus=J,this.synTimeout=z,this.ackTimeout=se,this.ackTimer=null,this.synTimer=null,this.ackSub=null};R.prototype.start=function(){var U=this;this.conduit.sendUpstream(connect.EventType.SYNCHRONIZE),this.ackSub=this.conduit.onUpstream(connect.EventType.ACKNOWLEDGE,function(){this.unsubscribe(),N.clearTimeout(U.ackTimer),U._deferStart()}),this.ackTimer=N.setTimeout(function(){U.ackSub.unsubscribe(),U.eventBus.trigger(connect.EventType.ACK_TIMEOUT),U._deferStart()},this.ackTimeout)},R.prototype._deferStart=function(){this.synTimer=N.setTimeout(connect.hitch(this,this.start),this.synTimeout)},R.prototype.deferStart=function(){null==this.synTimer&&(this.synTimer=N.setTimeout(connect.hitch(this,this.start),this.synTimeout))};var q=function(){var U={initFailure:new Set,subscriptionUpdate:new Set,subscriptionFailure:new Set,topic:new Map,allMessage:new Set,connectionGain:new Set,connectionLost:new Set,connectionOpen:new Set,connectionClose:new Set},J=function(z,se){z.forEach(function(G){G(se)})};connect.core.getUpstream().onUpstream(connect.WebSocketEvents.INIT_FAILURE,function(){J(U.initFailure)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_OPEN,function(z){J(U.connectionOpen,z)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_CLOSE,function(z){J(U.connectionClose,z)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_GAIN,function(){J(U.connectionGain)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.CONNECTION_LOST,function(z){J(U.connectionLost,z)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE,function(z){J(U.subscriptionUpdate,z)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE,function(z){J(U.subscriptionFailure,z)}),connect.core.getUpstream().onUpstream(connect.WebSocketEvents.ALL_MESSAGE,function(z){J(U.allMessage,z),U.topic.has(z.topic)&&J(U.topic.get(z.topic),z)}),this.sendMessage=function(z){connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SEND,z)},this.onInitFailure=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.initFailure.add(z),function(){return U.initFailure.delete(z)}},this.onConnectionOpen=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.connectionOpen.add(z),function(){return U.connectionOpen.delete(z)}},this.onConnectionClose=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.connectionClose.add(z),function(){return U.connectionClose.delete(z)}},this.onConnectionGain=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.connectionGain.add(z),function(){return U.connectionGain.delete(z)}},this.onConnectionLost=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.connectionLost.add(z),function(){return U.connectionLost.delete(z)}},this.onSubscriptionUpdate=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.subscriptionUpdate.add(z),function(){return U.subscriptionUpdate.delete(z)}},this.onSubscriptionFailure=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.subscriptionFailure.add(z),function(){return U.subscriptionFailure.delete(z)}},this.subscribeTopics=function(z){connect.assertNotNull(z,"topics"),connect.assertTrue(connect.isArray(z),"topics must be a array"),connect.core.getUpstream().sendUpstream(connect.WebSocketEvents.SUBSCRIBE,z)},this.onMessage=function(z,se){return connect.assertNotNull(z,"topicName"),connect.assertTrue(connect.isFunction(se),"method must be a function"),U.topic.has(z)?U.topic.get(z).add(se):U.topic.set(z,new Set([se])),function(){return U.topic.get(z).delete(se)}},this.onAllMessage=function(z){return connect.assertTrue(connect.isFunction(z),"method must be a function"),U.allMessage.add(z),function(){return U.allMessage.delete(z)}}},K=function(U){this.bus=U,this.bus.subscribe(connect.AgentEvents.UPDATE,connect.hitch(this,this.updateAgentData))};K.prototype.updateAgentData=function(U){var J=this.agentData;this.agentData=U,null==J&&(connect.agent.initialized=!0,this.bus.trigger(connect.AgentEvents.INIT,new connect.Agent)),this.bus.trigger(connect.AgentEvents.REFRESH,new connect.Agent),this._fireAgentUpdateEvents(J)},K.prototype.getAgentData=function(){if(null==this.agentData)throw new connect.StateError("No agent data is available yet!");return this.agentData},K.prototype.getContactData=function(U){var J=this.getAgentData(),z=connect.find(J.snapshot.contacts,function(se){return se.contactId===U});if(null==z)throw new connect.StateError("Contact %s no longer exists.",U);return z},K.prototype.getConnectionData=function(U,J){var z=this.getContactData(U),se=connect.find(z.connections,function(G){return G.connectionId===J});if(null==se)throw new connect.StateError("Connection %s for contact %s no longer exists.",J,U);return se},K.prototype.getInstanceId=function(){return this.getAgentData().configuration.routingProfile.routingProfileId.match(/instance\/([0-9a-fA-F|-]+)\//)[1]},K.prototype.getAWSAccountId=function(){return this.getAgentData().configuration.routingProfile.routingProfileId.match(/:([0-9]+):instance/)[1]},K.prototype._diffContacts=function(U){var J={added:{},removed:{},common:{},oldMap:connect.index(null==U?[]:U.snapshot.contacts,function(z){return z.contactId}),newMap:connect.index(this.agentData.snapshot.contacts,function(z){return z.contactId})};return connect.keys(J.oldMap).forEach(function(z){connect.contains(J.newMap,z)?J.common[z]=J.newMap[z]:J.removed[z]=J.oldMap[z]}),connect.keys(J.newMap).forEach(function(z){connect.contains(J.oldMap,z)||(J.added[z]=J.newMap[z])}),J},K.prototype._fireAgentUpdateEvents=function(U){var z,J=this,se=null==U?connect.AgentAvailStates.INIT:U.snapshot.state.name,G=this.agentData.snapshot.state.name,pe=null==U?connect.AgentStateType.INIT:U.snapshot.state.type,Q=this.agentData.snapshot.state.type;pe!==Q&&connect.core.getAgentRoutingEventGraph().getAssociations(this,pe,Q).forEach(function(Ne){J.bus.trigger(Ne,new connect.Agent)}),se!==G&&(this.bus.trigger(connect.AgentEvents.STATE_CHANGE,{agent:new connect.Agent,oldState:se,newState:G}),connect.core.getAgentStateEventGraph().getAssociations(this,se,G).forEach(function(Ne){J.bus.trigger(Ne,new connect.Agent)}));var Pe=this.agentData.snapshot.nextState?this.agentData.snapshot.nextState.name:null;(U&&U.snapshot.nextState?U.snapshot.nextState.name:null)!==Pe&&Pe&&J.bus.trigger(connect.AgentEvents.ENQUEUED_NEXT_STATE,new connect.Agent),z=null!==U?this._diffContacts(U):{added:connect.index(this.agentData.snapshot.contacts,function(Ne){return Ne.contactId}),removed:{},common:{},oldMap:{},newMap:connect.index(this.agentData.snapshot.contacts,function(Ne){return Ne.contactId})},connect.values(z.added).forEach(function(Ne){J.bus.trigger(connect.ContactEvents.INIT,new connect.Contact(Ne.contactId)),J._fireContactUpdateEvents(Ne.contactId,connect.ContactStateType.INIT,Ne.state.type)}),connect.values(z.removed).forEach(function(Ne){J.bus.trigger(connect.ContactEvents.DESTROYED,new connect.ContactSnapshot(Ne)),J.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.DESTROYED,Ne.contactId),new connect.ContactSnapshot(Ne)),J._unsubAllContactEventsForContact(Ne.contactId)}),connect.keys(z.common).forEach(function(Ne){J._fireContactUpdateEvents(Ne,z.oldMap[Ne].state.type,z.newMap[Ne].state.type)})},K.prototype._fireContactUpdateEvents=function(U,J,z){var se=this;J!==z&&connect.core.getContactEventGraph().getAssociations(this,J,z).forEach(function(G){se.bus.trigger(G,new connect.Contact(U)),se.bus.trigger(connect.core.getContactEventName(G,U),new connect.Contact(U))}),se.bus.trigger(connect.ContactEvents.REFRESH,new connect.Contact(U)),se.bus.trigger(connect.core.getContactEventName(connect.ContactEvents.REFRESH,U),new connect.Contact(U))},K.prototype._unsubAllContactEventsForContact=function(U){var J=this;connect.values(connect.ContactEvents).forEach(function(z){J.bus.getSubscriptions(connect.core.getContactEventName(z,U)).map(function(se){se.unsubscribe()})})},connect.core.onViewContact=function(U){connect.core.getUpstream().onUpstream(connect.ContactEvents.VIEW,U)},connect.core.viewContact=function(U){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ContactEvents.VIEW,data:{contactId:U}})},connect.core.onActivateChannelWithViewType=function(U){connect.core.getUpstream().onUpstream(connect.ChannelViewEvents.ACTIVATE_CHANNEL_WITH_VIEW_TYPE,U)},connect.core.activateChannelWithViewType=function(U,J){connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ChannelViewEvents.ACTIVATE_CHANNEL_WITH_VIEW_TYPE,data:{viewType:U,mediaType:J}})},connect.core.triggerTaskCreated=function(U){connect.core.getUpstream().upstreamBus.trigger(connect.TaskEvents.CREATED,U)},connect.core.onAccessDenied=function(U){connect.core.getUpstream().onUpstream(connect.EventType.ACCESS_DENIED,U)},connect.core.onAuthFail=function(U){connect.core.getUpstream().onUpstream(connect.EventType.AUTH_FAIL,U)},connect.core.onSoftphoneSessionInit=function(U){connect.core.getUpstream().onUpstream(connect.ConnectionEvents.SESSION_INIT,U)},connect.core.onConfigure=function(U){connect.core.getUpstream().onUpstream(connect.ConfigurationEvents.CONFIGURE,U)},connect.core.onInitialized=function(U){connect.core.getEventBus().subscribe(connect.EventType.INIT,U)},connect.core.getContactEventName=function(U,J){if(connect.assertNotNull(U,"eventName"),connect.assertNotNull(J,"contactId"),!connect.contains(connect.values(connect.ContactEvents),U))throw new connect.ValueError("%s is not a valid contact event.",U);return connect.sprintf("%s::%s",U,J)},connect.core.getEventBus=function(){return connect.core.eventBus},connect.core.getWebSocketManager=function(){return connect.core.webSocketProvider},connect.core.getAgentDataProvider=function(){return connect.core.agentDataProvider},connect.core.getLocalTimestamp=function(){return connect.core.getAgentDataProvider().getAgentData().snapshot.localTimestamp},connect.core.getSkew=function(){return connect.core.getAgentDataProvider().getAgentData().snapshot.skew},connect.core.getAgentRoutingEventGraph=function(){return connect.core.agentRoutingEventGraph},connect.core.agentRoutingEventGraph=(new connect.EventGraph).assoc(connect.EventGraph.ANY,connect.AgentStateType.ROUTABLE,connect.AgentEvents.ROUTABLE).assoc(connect.EventGraph.ANY,connect.AgentStateType.NOT_ROUTABLE,connect.AgentEvents.NOT_ROUTABLE).assoc(connect.EventGraph.ANY,connect.AgentStateType.OFFLINE,connect.AgentEvents.OFFLINE),connect.core.getAgentStateEventGraph=function(){return connect.core.agentStateEventGraph},connect.core.agentStateEventGraph=(new connect.EventGraph).assoc(connect.EventGraph.ANY,connect.values(connect.AgentErrorStates),connect.AgentEvents.ERROR).assoc(connect.EventGraph.ANY,connect.AgentAvailStates.AFTER_CALL_WORK,connect.AgentEvents.ACW),connect.core.getContactEventGraph=function(){return connect.core.contactEventGraph},connect.core.contactEventGraph=(new connect.EventGraph).assoc(connect.EventGraph.ANY,connect.ContactStateType.INCOMING,connect.ContactEvents.INCOMING).assoc(connect.EventGraph.ANY,connect.ContactStateType.PENDING,connect.ContactEvents.PENDING).assoc(connect.EventGraph.ANY,connect.ContactStateType.CONNECTING,connect.ContactEvents.CONNECTING).assoc(connect.EventGraph.ANY,connect.ContactStateType.CONNECTED,connect.ContactEvents.CONNECTED).assoc(connect.ContactStateType.CONNECTING,connect.ContactStateType.ERROR,connect.ContactEvents.MISSED).assoc(connect.ContactStateType.INCOMING,connect.ContactStateType.ERROR,connect.ContactEvents.MISSED).assoc(connect.EventGraph.ANY,connect.ContactStateType.ENDED,connect.ContactEvents.ACW).assoc(connect.values(connect.CONTACT_ACTIVE_STATES),connect.values(connect.relativeComplement(connect.CONTACT_ACTIVE_STATES,connect.ContactStateType)),connect.ContactEvents.ENDED).assoc(connect.EventGraph.ANY,connect.values(connect.AgentErrorStates),connect.ContactEvents.ERROR).assoc(connect.ContactStateType.CONNECTING,connect.ContactStateType.MISSED,connect.ContactEvents.MISSED),connect.core.getClient=function(){if(!connect.core.client)throw new connect.StateError("The connect core has not been initialized!");return connect.core.client},connect.core.client=null,connect.core.getAgentAppClient=function(){if(!connect.core.agentAppClient)throw new connect.StateError("The connect AgentApp Client has not been initialized!");return connect.core.agentAppClient},connect.core.agentAppClient=null,connect.core.getMasterClient=function(){if(!connect.core.masterClient)throw new connect.StateError("The connect master client has not been initialized!");return connect.core.masterClient},connect.core.masterClient=null,connect.core.getSoftphoneManager=function(){return connect.core.softphoneManager},connect.core.softphoneManager=null,connect.core.getNotificationManager=function(){return connect.core.notificationManager||(connect.core.notificationManager=new connect.NotificationManager),connect.core.notificationManager},connect.core.notificationManager=null,connect.core.getPopupManager=function(){return connect.core.popupManager},connect.core.popupManager=new connect.PopupManager,connect.core.getUpstream=function(){if(!connect.core.upstream)throw new connect.StateError("There is no upstream conduit!");return connect.core.upstream},connect.core.upstream=null,connect.core.AgentDataProvider=K}(),function(){var N=this,P=N.connect||{};N.connect=P,N.lily=P;var V=function(f){var c=this;if(this._prevContactId=null,P.assertNotNull(f,"ringtoneConfig"),!f.ringtoneUrl)throw new Error("ringtoneUrl is required!");N.Audio&&void 0!==N.Promise?this._playableAudioPromise=new Promise(function(h,u){c._audio=new Audio(f.ringtoneUrl),c._audio.loop=!0,c._audio.addEventListener("canplay",function(){c._audioPlayable=!0,h(c._audio)})}):(this._audio=null,P.getLog().error("Unable to provide a ringtone.").sendInternalLogToServer()),c._driveRingtone()};V.prototype._driveRingtone=function(){throw new Error("Not implemented.")},V.prototype._startRingtone=function(f){this._audio&&(this._audio.play().catch(function(c){this._publishTelemetryEvent("Ringtone Playback Failure",f),P.getLog().error("Ringtone Playback Failure").sendInternalLogToServer()}),this._publishTelemetryEvent("Ringtone Start",f),P.getLog().info("Ringtone Start").sendInternalLogToServer())},V.prototype._stopRingtone=function(f){this._audio&&(this._audio.pause(),this._audio.currentTime=0,this._publishTelemetryEvent("Ringtone Stop",f),P.getLog().info("Ringtone Stop").sendInternalLogToServer())},V.prototype.stopRingtone=function(){this._stopRingtone()},V.prototype._ringtoneSetup=function(f){var c=this;P.ifMaster(P.MasterTopics.RINGTONE,function(){c._startRingtone(f),c._prevContactId=f.getContactId(),f.onConnected(lily.hitch(c,c._stopRingtone)),f.onAccepted(lily.hitch(c,c._stopRingtone)),f.onEnded(lily.hitch(c,c._stopRingtone)),f.onRefresh(function(h){h.getStatus().type!==P.ContactStatusType.CONNECTING&&h.getStatus().type!==P.ContactStatusType.INCOMING&&c._stopRingtone()})})},V.prototype._publishTelemetryEvent=function(f,c){c&&c.getContactId()&&P.publishMetric({name:f,contactId:c.getContactId()})},V.prototype.setOutputDevice=function(f){return this._playableAudioPromise?Promise.race([this._playableAudioPromise,new Promise(function(h,u){N.setTimeout(function(){u("Timed out waiting for playable audio")},3e3)})]).then(function(h){return h?h.setSinkId?Promise.resolve(h.setSinkId(f)):Promise.reject("Not supported"):Promise.reject("No audio found")}):N.Promise?Promise.reject("Not eligible ringtone owner"):void 0};var v=function(f){V.call(this,f)};(v.prototype=Object.create(V.prototype)).constructor=v,v.prototype._driveRingtone=function(){var f=this,c=function(h){h.getType()===lily.ContactType.VOICE&&h.isSoftphoneCall()&&h.isInbound()&&(f._ringtoneSetup(h),f._publishTelemetryEvent("Ringtone Connecting",h),P.getLog().info("Ringtone Connecting").sendInternalLogToServer())};P.contact(function(h){h.onConnecting(c)}),(new P.Agent).getContacts().forEach(function(h){h.getStatus().type===P.ContactStatusType.CONNECTING&&c(h)})};var w=function(f){V.call(this,f)};(w.prototype=Object.create(V.prototype)).constructor=w,w.prototype._driveRingtone=function(){var f=this,c=function(h){h.getType()===lily.ContactType.CHAT&&h.isInbound()&&(f._ringtoneSetup(h),f._publishTelemetryEvent("Chat Ringtone Connecting",h),P.getLog().info("Chat Ringtone Connecting").sendInternalLogToServer())};P.contact(function(h){h.onConnecting(c)})};var E=function(f){V.call(this,f)};(E.prototype=Object.create(V.prototype)).constructor=E,E.prototype._driveRingtone=function(){var f=this,c=function(h){h.getType()===lily.ContactType.TASK&&h.isInbound()&&(f._ringtoneSetup(h),f._publishTelemetryEvent("Task Ringtone Connecting",h),P.getLog().info("Task Ringtone Connecting").sendInternalLogToServer())};P.contact(function(h){h.onConnecting(c)})};var m=function(f){V.call(this,f)};(m.prototype=Object.create(V.prototype)).constructor=m,m.prototype._driveRingtone=function(){var f=this;P.contact(function(c){c.onIncoming(function(){c.getType()===lily.ContactType.QUEUE_CALLBACK&&(f._ringtoneSetup(c),f._publishTelemetryEvent("Callback Ringtone Connecting",c),P.getLog().info("Callback Ringtone Connecting").sendInternalLogToServer())})})},P.VoiceRingtoneEngine=v,P.ChatRingtoneEngine=w,P.TaskRingtoneEngine=E,P.QueueCallbackRingtoneEngine=m}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,N.ccpVersion="V2";var w={};w[connect.SoftphoneCallType.AUDIO_ONLY]="Audio",w[connect.SoftphoneCallType.VIDEO_ONLY]="Video",w[connect.SoftphoneCallType.AUDIO_VIDEO]="AudioVideo",w[connect.SoftphoneCallType.NONE]="None";var E="audio_input",m="audio_output";({})[connect.ContactType.VOICE]="Voice";var h=[],u={},l={},g=null,d=null,y=null,_=connect.SoftphoneErrorTypes,b={},T=connect.randomId(),R=function(ce){return new Promise(function(le,we){connect.core.getClient().call(connect.ClientMethods.CREATE_TRANSPORT,ce,{success:function(Re){le(Re.softphoneTransport.softphoneMediaConnections)},failure:function(Re){Re.message&&Re.message.includes("SoftphoneConnectionLimitBreachedException")&&He("multiple_softphone_active_sessions","Number of active sessions are more then allowed limit.",""),we(Error("requestIceAccess failed"))},authFailure:function(){we(Error("Authentication failed while requestIceAccess"))},accessDenied:function(){we(Error("Access Denied while requestIceAccess"))}})})},G=function(ce){var le;if(0!==connect.keys(b).length){for(var we in ce&&void 0!==ce.mute&&(le=ce.mute),b)if(b.hasOwnProperty(we)){var Re=b[we].stream;if(Re){var Be=Re.getAudioTracks()[0];void 0!==le?(Be.enabled=!le,b[we].muted=le,le?y.info("Agent has muted the contact, connectionId -  "+we).sendInternalLogToServer():y.info("Agent has unmuted the contact, connectionId - "+we).sendInternalLogToServer()):le=b[we].muted||!1}}connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.AgentEvents.MUTE_TOGGLE,data:{muted:le}})}},pe=function(ce){if(0!==connect.keys(b).length&&ce&&ce.deviceId){var le=ce.deviceId,we=document.getElementById("remote-audio");try{y.info("Trying to set speaker to device "+le),we&&"function"==typeof we.setSinkId&&we.setSinkId(le)}catch(Re){y.error("Failed to set speaker to device "+le)}connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.SPEAKER_DEVICE_CHANGED,data:{deviceId:le}})}},Q=function(ce){if(0!==connect.keys(b).length&&ce&&ce.deviceId){var le=ce.deviceId,we=connect.core.getSoftphoneManager();try{navigator.mediaDevices.getUserMedia({audio:{deviceId:{exact:le}}}).then(function(Re){var Be=Re.getAudioTracks()[0];for(var $e in b)b.hasOwnProperty($e)&&we.getSession($e)._pc.getSenders()[0].replaceTrack(Be).then(function(){we.replaceLocalMediaTrack($e,Be)})})}catch(Re){y.error("Failed to set microphone device "+le)}connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConfigurationEvents.MICROPHONE_DEVICE_CHANGED,data:{deviceId:le}})}},He=function(ce,le,we){y.error("Softphone error occurred : ",ce,le||"").sendInternalLogToServer(),connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.AgentEvents.SOFTPHONE_ERROR,data:new connect.SoftphoneError(ce,le,we)})},te=function(ce,le,we){le&&connect.publishMetric({name:ce,contactId:le,data:we})},ie=function(ce,le,we){te(ce,le,[{name:"AgentConnectionId",value:we}]),y.info("Publish multiple session error metrics",ce,"contactId "+le,"agent connectionId "+we).sendInternalLogToServer()},Y=function(ce){var le=h.slice();h=[],le.length>0&&ce.sendSoftphoneMetrics(le,{success:function(){y.info("sendSoftphoneMetrics success"+JSON.stringify(le)).sendInternalLogToServer()},failure:function(we){y.error("sendSoftphoneMetrics failed.").withObject(we).sendInternalLogToServer()}})},be=function(ce,le,we){return le&&ce?new ot(ce.timestamp,ce.packetsLost>le.packetsLost?ce.packetsLost-le.packetsLost:0,ce.packetsCount>le.packetsCount?ce.packetsCount-le.packetsCount:0,we,ce.audioLevel,ce.jbMilliseconds,ce.rttMilliseconds):new ot(ce.timestamp,ce.packetsLost,ce.packetsCount,we,ce.audioLevel,ce.jbMilliseconds,ce.rttMilliseconds)},Se=function(ce){return null!==ce&&window.clearInterval(ce),null},Le=function(ce,le){g=Se(g),d=Se(d),function(ce,le,we,Re){le.streamStats=[it(we,E),it(Re,m)];var Be={callStartTime:le.sessionStartTime,callEndTime:le.sessionEndTime,gumTimeMillis:le.gumTimeMillis,initializationTimeMillis:le.initializationTimeMillis,iceCollectionTimeMillis:le.iceCollectionTimeMillis,signallingConnectTimeMillis:le.signallingConnectTimeMillis,handshakingTimeMillis:le.handshakingTimeMillis,preTalkingTimeMillis:le.preTalkingTimeMillis,talkingTimeMillis:le.talkingTimeMillis,cleanupTimeMillis:le.cleanupTimeMillis,iceCollectionFailure:le.iceCollectionFailure,signallingConnectionFailure:le.signallingConnectionFailure,handshakingFailure:le.handshakingFailure,gumOtherFailure:le.gumOtherFailure,gumTimeoutFailure:le.gumTimeoutFailure,createOfferFailure:le.createOfferFailure,setLocalDescriptionFailure:le.setLocalDescriptionFailure,userBusyFailure:le.userBusyFailure,invalidRemoteSDPFailure:le.invalidRemoteSDPFailure,noRemoteIceCandidateFailure:le.noRemoteIceCandidateFailure,setRemoteDescriptionFailure:le.setRemoteDescriptionFailure,softphoneStreamStatistics:le.streamStats};ce.sendSoftphoneReport(Be,{success:function(){y.info("sendSoftphoneReport success"+JSON.stringify(Be)).sendInternalLogToServer()},failure:function($e){y.error("sendSoftphoneReport failed.").withObject($e).sendInternalLogToServer()}})}(ce,le,it(u,E),it(l,m)),Y(ce)},ot=function(ce,le,we,Re,Be,$e,ct){this.softphoneStreamType=Re,this.timestamp=ce,this.packetsLost=le,this.packetsCount=we,this.audioLevel=Be,this.jitterBufferMillis=$e,this.roundTripTimeMillis=ct},it=function(ce,le){return new ot((ce=ce||{}).timestamp,ce.packetsLost,ce.packetsCount,le,ce.audioLevel)},et=function(ce){this._originalLogger=ce;var le=this;this._tee=function(we,Re){return function(){var Be=Array.prototype.slice.call(arguments[0]),$e="";return Be.forEach(function(){$e+=" %s"}),Re.apply(le._originalLogger,[connect.LogComponent.SOFTPHONE,$e].concat(Be))}}};et.prototype.debug=function(){return this._tee(1,this._originalLogger.debug)(arguments)},et.prototype.info=function(){return this._tee(2,this._originalLogger.info)(arguments)},et.prototype.log=function(){return this._tee(3,this._originalLogger.log)(arguments)},et.prototype.warn=function(){return this._tee(4,this._originalLogger.warn)(arguments)},et.prototype.error=function(){return this._tee(5,this._originalLogger.error)(arguments)},connect.SoftphoneManager=function(ce){var we,le=this;(y=new et(connect.getLog())).info("[Softphone Manager] softphone manager initialization has begun").sendInternalLogToServer(),connect.RtcPeerConnectionFactory&&(we=new connect.RtcPeerConnectionFactory(y,connect.core.getWebSocketManager(),T,connect.hitch(le,R,{transportType:"softphone",softphoneClientId:T}),connect.hitch(le,He))),connect.isOperaBrowser()&&connect.getOperaBrowserVersion()>17||connect.isChromeBrowser()&&connect.getChromeBrowserVersion()>22||connect.isFirefoxBrowser()&&connect.getFirefoxBrowserVersion()>21||He(_.UNSUPPORTED_BROWSER,"Connect does not support this browser. Some functionality may not work. ",""),function(ce){var le=ce||{};le.success=le.success||function(){},le.failure=le.failure||function(){};var we={audio:!0},Re=null;if("function"==typeof Promise){if("object"==typeof navigator.mediaDevices&&"function"==typeof navigator.mediaDevices.getUserMedia)Re=navigator.mediaDevices.getUserMedia(we);else{if("function"!=typeof navigator.webkitGetUserMedia)return void le.failure(_.UNSUPPORTED_BROWSER);Re=new Promise(function(Be,$e){navigator.webkitGetUserMedia(we,Be,$e)})}return Re.then(function(Be){var $e=Be.getAudioTracks();$e&&$e.length>0?le.success(Be):le.failure(_.MICROPHONE_NOT_SHARED)},function(Be){le.failure(_.MICROPHONE_NOT_SHARED)}),Re}le.failure(_.UNSUPPORTED_BROWSER)}({success:function(L){connect.core.setSoftphoneUserMediaStream(L)},failure:function(L){He(L,"Your microphone is not enabled in your browser. ","")}}),connect.core.getEventBus().subscribe(connect.EventType.MUTE,G),connect.core.getEventBus().subscribe(connect.ConfigurationEvents.SET_SPEAKER_DEVICE,pe),connect.core.getEventBus().subscribe(connect.ConfigurationEvents.SET_MICROPHONE_DEVICE,Q),this.ringtoneEngine=null;var Be={},$e={};this.onInitContactSub={},this.onInitContactSub.unsubscribe=function(){};var ct=!1,xt=null,ke=null,A=function(){ct=!1,xt=null,ke=null};this.getSession=function(L){return Be[L]},this.replaceLocalMediaTrack=function(L,W){var ee=b[L].stream;if(ee){var ae=ee.getAudioTracks()[0];W.enabled=ae.enabled,ae.enabled=!1,ee.removeTrack(ae),ee.addTrack(W)}};var H=function(L){if(Be.hasOwnProperty(L)){var W=Be[L];new Promise(function(ee,ae){delete Be[L],delete $e[L],W.hangup()}).catch(function(ee){lily.getLog().warn("Clean up the session locally "+L,ee.message).sendInternalLogToServer()})}};this.startSession=function(L,W){var ee=ct?xt:L,ae=ct?ke:W;if(ee&&ae){A(),$e[ae]=!0,y.info("Softphone call detected:","contactId "+ee.getContactId(),"agent connectionId "+ae).sendInternalLogToServer(),function(L){if(Object.keys(L).length>0){for(var W in L)L.hasOwnProperty(W)&&(ie("MultiSessionHangUp",L[W].callId,W),H(W));throw new Error("duplicate session detected, refusing to setup new connection")}}(Be),ee.getStatus().type===connect.ContactStatusType.CONNECTING&&te("Softphone Connecting",ee.getContactId()),u=null,l=null,h=[],g=null,d=null;var Ze,Ee=ee.getAgentConnection().getSoftphoneMediaInfo(),Fe=function(ce){var le=ce.replace(/&quot;/g,'"');return JSON.parse(le)}(Ee.callConfigJson);Fe.useWebSocketProvider&&(Ze=connect.core.getWebSocketManager());var pt=new connect.RTCSession(Fe.signalingEndpoint,Fe.iceServers,Ee.callContextToken,y,ee.getContactId(),ae,Ze);Be[ae]=pt,connect.core.getSoftphoneUserMediaStream()&&(pt.mediaStream=connect.core.getSoftphoneUserMediaStream()),connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.ConnectionEvents.SESSION_INIT,data:{connectionId:ae}}),pt.onSessionFailed=function(Me,Z){delete Be[ae],delete $e[ae],function(ce,le){if(le===connect.RTCErrors.ICE_COLLECTION_TIMEOUT){for(var we="\n",Re=0;Re<ce._iceServers.length;Re++)for(var Be=0;Be<ce._iceServers[Re].urls.length;Be++)we=we+ce._iceServers[Re].urls[Be]+"\n";He(_.ICE_COLLECTION_TIMEOUT,"Ice collection timedout. ",we)}else le===connect.RTCErrors.USER_BUSY?He(_.USER_BUSY_ERROR,"Softphone call UserBusy error. ",""):le===connect.RTCErrors.SIGNALLING_HANDSHAKE_FAILURE?He(_.SIGNALLING_HANDSHAKE_FAILURE,"Handshaking with Signalling Server "+ce._signalingUri+" failed. ",ce._signalingUri):le===connect.RTCErrors.GUM_TIMEOUT_FAILURE||le===connect.RTCErrors.GUM_OTHER_FAILURE?He(_.MICROPHONE_NOT_SHARED,"Your microphone is not enabled in your browser. ",""):le===connect.RTCErrors.SIGNALLING_CONNECTION_FAILURE?He(_.SIGNALLING_CONNECTION_FAILURE,"URL "+ce._signalingUri+" cannot be reached. ",ce._signalingUri):le===connect.RTCErrors.CALL_NOT_FOUND?y.error("Softphone call failed due to CallNotFoundException.").sendInternalLogToServer():He(_.WEBRTC_ERROR,"webrtc system error. ","")}(Me,Z),function(ce,le){te("Softphone Session Failed",ce,{failedReason:le})}(ee.getContactId(),Z),Le(ee,Me.sessionReport)},pt.onSessionConnected=function(Me){te("Softphone Session Connected",ee.getContactId()),connect.becomeMaster(connect.MasterTopics.SEND_LOGS),function(ce){g=window.setInterval(function(){ce.getUserAudioStats().then(function(le){var we=u;h.push(be(u=le,we,E))},function(le){y.debug("Failed to get user audio stats.",le).sendInternalLogToServer()}),ce.getRemoteAudioStats().then(function(le){var we=l;h.push(be(l=le,we,m))},function(le){y.debug("Failed to get remote audio stats.",le).sendInternalLogToServer()})},1e3)}(Me),function(ce){d=window.setInterval(function(){Y(ce)},3e4)}(ee),function(ce){var le=connect.core.getUpstream(),we=ce.getAgentConnection();if(we){var Re=we.getSoftphoneMediaInfo();Re?!0===Re.autoAccept?(y.info("Auto-accept is enabled, sending out Accepted event to stop ringtone..").sendInternalLogToServer(),le.sendUpstream(connect.EventType.BROADCAST,{event:connect.ContactEvents.ACCEPTED,data:new connect.Contact(ce.contactId)}),le.sendUpstream(connect.EventType.BROADCAST,{event:connect.core.getContactEventName(connect.ContactEvents.ACCEPTED,ce.contactId),data:new connect.Contact(ce.contactId)})):y.info("Auto-accept is disabled, ringtone will be stopped by user action.").sendInternalLogToServer():y.info("Not able to retrieve the auto-accept setting from null SoftphoneMediaInfo, ignoring event publish..").sendInternalLogToServer()}else y.info("Not able to retrieve the auto-accept setting from null AgentConnection, ignoring event publish..").sendInternalLogToServer()}(ee)},pt.onSessionCompleted=function(Me){te("Softphone Session Completed",ee.getContactId()),delete Be[ae],delete $e[ae],Le(ee,Me.sessionReport),function(ce){delete b[ce],connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.AgentEvents.MUTE_TOGGLE,data:{muted:!1}})}(ae)},pt.onLocalStreamAdded=function(Me,Z){b[ae]={stream:Z},connect.core.getUpstream().sendUpstream(connect.EventType.BROADCAST,{event:connect.AgentEvents.LOCAL_MEDIA_STREAM_CREATED,data:{connectionId:ae}})},pt.remoteAudioElement=document.getElementById("remote-audio"),we?pt.connect(we.get(Fe.iceServers)):pt.connect()}};var he=function(L,W){Be[W]&&function(L){return L.getStatus().type===connect.ContactStatusType.ENDED||L.getStatus().type===connect.ContactStatusType.ERROR||L.getStatus().type===connect.ContactStatusType.MISSED}(L)&&(H(W),A()),L.isSoftphoneCall()&&!$e[W]&&(L.getStatus().type===connect.ContactStatusType.CONNECTING||L.getStatus().type===connect.ContactStatusType.INCOMING)&&(connect.isFirefoxBrowser()&&connect.hasOtherConnectedCCPs()?function(L,W){ct=!0,xt=L,ke=W}(L,W):le.startSession(L,W))},O=function(L){var W=L.getAgentConnection().connectionId;y.info("Contact detected:","contactId "+L.getContactId(),"agent connectionId "+W).sendInternalLogToServer(),$e[W]||L.onRefresh(function(){he(L,W)})};le.onInitContactSub=connect.contact(O),(new connect.Agent).getContacts().forEach(function(L){var W=L.getAgentConnection().connectionId;y.info("Contact exist in the snapshot. Reinitiate the Contact and RTC session creation for contactId"+L.getContactId(),"agent connectionId "+W).sendInternalLogToServer(),O(L),he(L,W)})}}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,connect.worker={};var h=function(){this.topicMasterMap={}};h.prototype.getMaster=function(g){return connect.assertNotNull(g,"topic"),this.topicMasterMap[g]||null},h.prototype.setMaster=function(g,d){connect.assertNotNull(g,"topic"),connect.assertNotNull(d,"id"),this.topicMasterMap[g]=d},h.prototype.removeMaster=function(g){connect.assertNotNull(g,"id");var d=this;connect.entries(this.topicMasterMap).filter(function(y){return y.value===g}).forEach(function(y){delete d.topicMasterMap[y.key]})};var u=function(g){connect.ClientBase.call(this),this.conduit=g};(u.prototype=Object.create(connect.ClientBase.prototype)).constructor=u,u.prototype._callImpl=function(g,d,y){var _=this,S=(new Date).getTime();connect.containsValue(connect.AgentAppClientMethods,g)?connect.core.getAgentAppClient()._callImpl(g,d,{success:function(D){_._recordAPILatency(g,S),y.success(D)},failure:function(D){_._recordAPILatency(g,S,D),y.failure(D)}}):connect.core.getClient()._callImpl(g,d,{success:function(D){_._recordAPILatency(g,S),y.success(D)},failure:function(D,b){_._recordAPILatency(g,S,D),y.failure(D,b)},authFailure:function(){_._recordAPILatency(g,S),y.authFailure()},accessDenied:function(){y.accessDenied&&y.accessDenied()}})},u.prototype._recordAPILatency=function(g,d,y){var _=(new Date).getTime();this._sendAPIMetrics(g,_-d,y)},u.prototype._sendAPIMetrics=function(g,d,y){this.conduit.sendDownstream(connect.EventType.API_METRIC,{name:g,time:d,dimensions:[{name:"Category",value:"API"}],error:y})};var l=function(){var g=this;this.multiplexer=new connect.StreamMultiplexer,this.conduit=new connect.Conduit("AmazonConnectSharedWorker",null,this.multiplexer),this.client=new u(this.conduit),this.timeout=null,this.agent=null,this.nextToken=null,this.initData={},this.portConduitMap={},this.masterCoord=new h,this.logsBuffer=[],this.suppress=!1,this.forceOffline=!1;var d=null;connect.rootLogger=new connect.DownstreamConduitLogger(this.conduit),this.conduit.onDownstream(connect.EventType.SEND_LOGS,function(y){connect.getLog().pushLogsDownstream(y),g.logsBuffer=g.logsBuffer.concat(y),g.logsBuffer.length>400&&g.handleSendLogsRequest(g.logsBuffer)}),this.conduit.onDownstream(connect.EventType.CONFIGURE,function(y){y.authToken&&y.authToken!==g.initData.authToken&&(g.initData=y,connect.core.init(y),d?connect.getLog().info("Not Initializing a new WebsocketManager instance, since one already exists").sendInternalLogToServer():(connect.getLog().info("Creating a new Websocket connection for CCP").sendInternalLogToServer(),connect.WebSocketManager.setGlobalConfig({loggerConfig:{logger:connect.getLog()}}),(d=connect.WebSocketManager.create()).onInitFailure(function(){g.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE)}),d.onConnectionOpen(function(_){g.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_OPEN,_)}),d.onConnectionClose(function(_){g.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_CLOSE,_)}),d.onConnectionGain(function(){g.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_GAINED),g.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_GAIN)}),d.onConnectionLost(function(_){g.conduit.sendDownstream(connect.AgentEvents.WEBSOCKET_CONNECTION_LOST,_),g.conduit.sendDownstream(connect.WebSocketEvents.CONNECTION_LOST,_)}),d.onSubscriptionUpdate(function(_){g.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_UPDATE,_)}),d.onSubscriptionFailure(function(_){g.conduit.sendDownstream(connect.WebSocketEvents.SUBSCRIPTION_FAILURE,_)}),d.onAllMessage(function(_){g.conduit.sendDownstream(connect.WebSocketEvents.ALL_MESSAGE,_)}),g.conduit.onDownstream(connect.WebSocketEvents.SEND,function(_){d.sendMessage(_)}),g.conduit.onDownstream(connect.WebSocketEvents.SUBSCRIBE,function(_){d.subscribeTopics(_)}),d.init(connect.hitch(g,g.getWebSocketUrl)).then(function(_){_&&!_.webSocketConnectionFailed?(connect.getLog().info("Kicking off agent polling").sendInternalLogToServer(),g.pollForAgent(),connect.getLog().info("Kicking off config polling").sendInternalLogToServer(),g.pollForAgentConfiguration({repeatForever:!0}),connect.getLog().info("Kicking off auth token polling").sendInternalLogToServer(),N.setInterval(connect.hitch(g,g.checkAuthToken),3e5)):connect.webSocketInitFailed||(g.conduit.sendDownstream(connect.WebSocketEvents.INIT_FAILURE),connect.webSocketInitFailed=!0)})))}),this.conduit.onDownstream(connect.EventType.TERMINATE,function(){g.handleSendLogsRequest(g.logsBuffer),connect.core.terminate(),g.conduit.sendDownstream(connect.EventType.TERMINATED)}),this.conduit.onDownstream(connect.EventType.SYNCHRONIZE,function(){g.conduit.sendDownstream(connect.EventType.ACKNOWLEDGE)}),this.conduit.onDownstream(connect.EventType.BROADCAST,function(y){g.conduit.sendDownstream(y.event,y.data)}),N.onconnect=function(y){var _=y.ports[0],S=new connect.PortStream(_);g.multiplexer.addStream(S),_.start();var D=new connect.Conduit(S.getId(),null,S);D.sendDownstream(connect.EventType.ACKNOWLEDGE,{id:S.getId()}),g.portConduitMap[S.getId()]=D,g.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS,{length:Object.keys(g.portConduitMap).length}),null!==g.agent&&g.updateAgent(),D.onDownstream(connect.EventType.API_REQUEST,connect.hitch(g,g.handleAPIRequest,D)),D.onDownstream(connect.EventType.MASTER_REQUEST,connect.hitch(g,g.handleMasterRequest,D,S.getId())),D.onDownstream(connect.EventType.RELOAD_AGENT_CONFIGURATION,connect.hitch(g,g.pollForAgentConfiguration)),D.onDownstream(connect.EventType.CLOSE,function(){g.multiplexer.removeStream(S),delete g.portConduitMap[S.getId()],g.masterCoord.removeMaster(S.getId()),g.conduit.sendDownstream(connect.EventType.UPDATE_CONNECTED_CCPS,{length:Object.keys(g.portConduitMap).length})})}};l.prototype.pollForAgent=function(){var g=this,d=connect.hitch(g,g.handleAuthFail);this.client.call(connect.ClientMethods.GET_AGENT_SNAPSHOT,{nextToken:g.nextToken,timeout:3e4},{success:function(y){try{g.agent=g.agent||{},g.agent.snapshot=y.snapshot,g.agent.snapshot.localTimestamp=connect.now(),g.agent.snapshot.skew=g.agent.snapshot.snapshotTimestamp-g.agent.snapshot.localTimestamp,g.nextToken=y.nextToken,connect.getLog().trace("GET_AGENT_SNAPSHOT succeeded.").withObject(y).sendInternalLogToServer(),g.updateAgent()}catch(_){connect.getLog().error("Long poll failed to update agent.").withObject(y).withException(_).sendInternalLogToServer()}finally{N.setTimeout(connect.hitch(g,g.pollForAgent),100)}},failure:function(y,_){try{connect.getLog().error("Failed to get agent data.").sendInternalLogToServer().withObject({err:y,data:_})}finally{N.setTimeout(connect.hitch(g,g.pollForAgent),5e3)}},authFailure:function(){d()},accessDenied:connect.hitch(g,g.handleAccessDenied)})},l.prototype.pollForAgentConfiguration=function(g){var d=this,y=g||{},_=connect.hitch(d,d.handleAuthFail);this.client.call(connect.ClientMethods.GET_AGENT_CONFIGURATION,{},{success:function(S){var D=S.configuration;d.pollForAgentPermissions(D),d.pollForAgentStates(D),d.pollForDialableCountryCodes(D),d.pollForRoutingProfileQueues(D),y.repeatForever&&N.setTimeout(connect.hitch(d,d.pollForAgentConfiguration,y),3e4)},failure:function(S,D){try{connect.getLog().error("Failed to fetch agent configuration data.").sendInternalLogToServer().withObject({err:S,data:D})}finally{y.repeatForever&&N.setTimeout(connect.hitch(d,d.pollForAgentConfiguration),3e4,y)}},authFailure:function(){_()},accessDenied:connect.hitch(d,d.handleAccessDenied)})},l.prototype.pollForAgentStates=function(g,d){var y=this,_=d||{};_.maxResults=_.maxResults||connect.DEFAULT_BATCH_SIZE,this.client.call(connect.ClientMethods.GET_AGENT_STATES,{nextToken:_.nextToken||null,maxResults:_.maxResults},{success:function(S){S.nextToken?y.pollForAgentStates(g,{states:(_.states||[]).concat(S.states),nextToken:S.nextToken,maxResults:_.maxResults}):(g.agentStates=(_.states||[]).concat(S.states),y.updateAgentConfiguration(g))},failure:function(S,D){connect.getLog().error("Failed to fetch agent states list.").sendInternalLogToServer().withObject({err:S,data:D})},authFailure:connect.hitch(y,y.handleAuthFail),accessDenied:connect.hitch(y,y.handleAccessDenied)})},l.prototype.pollForAgentPermissions=function(g,d){var y=this,_=d||{};_.maxResults=_.maxResults||connect.DEFAULT_BATCH_SIZE,this.client.call(connect.ClientMethods.GET_AGENT_PERMISSIONS,{nextToken:_.nextToken||null,maxResults:_.maxResults},{success:function(S){S.nextToken?y.pollForAgentPermissions(g,{permissions:(_.permissions||[]).concat(S.permissions),nextToken:S.nextToken,maxResults:_.maxResults}):(g.permissions=(_.permissions||[]).concat(S.permissions),y.updateAgentConfiguration(g))},failure:function(S,D){connect.getLog().error("Failed to fetch agent permissions list.").sendInternalLogToServer().withObject({err:S,data:D})},authFailure:connect.hitch(y,y.handleAuthFail),accessDenied:connect.hitch(y,y.handleAccessDenied)})},l.prototype.pollForDialableCountryCodes=function(g,d){var y=this,_=d||{};_.maxResults=_.maxResults||connect.DEFAULT_BATCH_SIZE,this.client.call(connect.ClientMethods.GET_DIALABLE_COUNTRY_CODES,{nextToken:_.nextToken||null,maxResults:_.maxResults},{success:function(S){S.nextToken?y.pollForDialableCountryCodes(g,{countryCodes:(_.countryCodes||[]).concat(S.countryCodes),nextToken:S.nextToken,maxResults:_.maxResults}):(g.dialableCountries=(_.countryCodes||[]).concat(S.countryCodes),y.updateAgentConfiguration(g))},failure:function(S,D){connect.getLog().error("Failed to fetch dialable country codes list.").sendInternalLogToServer().withObject({err:S,data:D})},authFailure:connect.hitch(y,y.handleAuthFail),accessDenied:connect.hitch(y,y.handleAccessDenied)})},l.prototype.pollForRoutingProfileQueues=function(g,d){var y=this,_=d||{};_.maxResults=_.maxResults||connect.DEFAULT_BATCH_SIZE,this.client.call(connect.ClientMethods.GET_ROUTING_PROFILE_QUEUES,{routingProfileARN:g.routingProfile.routingProfileARN,nextToken:_.nextToken||null,maxResults:_.maxResults},{success:function(S){S.nextToken?y.pollForRoutingProfileQueues(g,{countryCodes:(_.queues||[]).concat(S.queues),nextToken:S.nextToken,maxResults:_.maxResults}):(g.routingProfile.queues=(_.queues||[]).concat(S.queues),y.updateAgentConfiguration(g))},failure:function(S,D){connect.getLog().error("Failed to fetch routing profile queues list.").sendInternalLogToServer().withObject({err:S,data:D})},authFailure:connect.hitch(y,y.handleAuthFail),accessDenied:connect.hitch(y,y.handleAccessDenied)})},l.prototype.handleAPIRequest=function(g,d){var y=this;this.client.call(d.method,d.params,{success:function(_){var S=connect.EventFactory.createResponse(connect.EventType.API_RESPONSE,d,_);g.sendDownstream(S.event,S)},failure:function(_,S){var D=connect.EventFactory.createResponse(connect.EventType.API_RESPONSE,d,S,JSON.stringify(_));g.sendDownstream(D.event,D),connect.getLog().error("'%s' API request failed",d.method).withObject({request:y.filterAuthToken(d),response:D}).withException(_).sendInternalLogToServer()},authFailure:connect.hitch(y,y.handleAuthFail)})},l.prototype.handleMasterRequest=function(g,d,y){var _=this.conduit,S=null;switch(y.method){case connect.MasterMethods.BECOME_MASTER:var D=this.masterCoord.getMaster(y.params.topic),b=Boolean(D)&&D!==d;this.masterCoord.setMaster(y.params.topic,d),S=connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE,y,{masterId:d,takeOver:b,topic:y.params.topic}),b&&_.sendDownstream(S.event,S);break;case connect.MasterMethods.CHECK_MASTER:!(D=this.masterCoord.getMaster(y.params.topic))&&!y.params.shouldNotBecomeMasterIfNone&&(this.masterCoord.setMaster(y.params.topic,d),D=d),S=connect.EventFactory.createResponse(connect.EventType.MASTER_RESPONSE,y,{masterId:D,isMaster:d===D,topic:y.params.topic});break;default:throw new Error("Unknown master method: "+y.method)}g.sendDownstream(S.event,S)},l.prototype.updateAgentConfiguration=function(g){g.permissions&&g.dialableCountries&&g.agentStates&&g.routingProfile.queues?(this.agent=this.agent||{},this.agent.configuration=g,this.updateAgent()):connect.getLog().trace("Waiting to update agent configuration until all config data has been fetched.").sendInternalLogToServer()},l.prototype.updateAgent=function(){this.agent?this.agent.snapshot?this.agent.configuration?(this.agent.snapshot.status=this.agent.state,this.agent.snapshot.contacts&&this.agent.snapshot.contacts.length>1&&this.agent.snapshot.contacts.sort(function(g,d){return g.state.timestamp.getTime()-d.state.timestamp.getTime()}),this.agent.snapshot.contacts.forEach(function(g){g.status=g.state,g.connections.forEach(function(d){d.address=d.endpoint})}),this.agent.configuration.routingProfile.defaultOutboundQueue.queueId=this.agent.configuration.routingProfile.defaultOutboundQueue.queueARN,this.agent.configuration.routingProfile.queues.forEach(function(g){g.queueId=g.queueARN}),this.agent.snapshot.contacts.forEach(function(g){void 0!==g.queue&&(g.queue.queueId=g.queue.queueARN)}),this.agent.configuration.routingProfile.routingProfileId=this.agent.configuration.routingProfile.routingProfileARN,this.conduit.sendDownstream(connect.AgentEvents.UPDATE,this.agent)):connect.getLog().trace("Waiting to update agent until the agent configuration is available.").sendInternalLogToServer():connect.getLog().trace("Waiting to update agent until the agent snapshot is available.").sendInternalLogToServer():connect.getLog().trace("Waiting to update agent until the agent has been fully constructed.").sendInternalLogToServer()},l.prototype.getWebSocketUrl=function(){var g=this,d=connect.core.getClient(),y=connect.hitch(g,g.handleAuthFail),_=connect.hitch(g,g.handleAccessDenied);return new Promise(function(S,D){d.call(connect.ClientMethods.CREATE_TRANSPORT,{transportType:connect.TRANSPORT_TYPES.WEB_SOCKET},{success:function(b){connect.getLog().info("getWebSocketUrl succeeded").sendInternalLogToServer(),S(b)},failure:function(b,T){connect.getLog().error("getWebSocketUrl failed").sendInternalLogToServer().withObject({err:b,data:T}),D({reason:"getWebSocketUrl failed",_debug:b})},authFailure:function(){connect.getLog().error("getWebSocketUrl Auth Failure").sendInternalLogToServer(),D(Error("Authentication failed while getting getWebSocketUrl")),y()},accessDenied:function(){connect.getLog().error("getWebSocketUrl Access Denied Failure").sendInternalLogToServer(),D(Error("Access Denied Failure while getting getWebSocketUrl")),_()}})})},l.prototype.handleSendLogsRequest=function(){var g=this,d=[],y=g.logsBuffer.slice();g.logsBuffer=[],y.forEach(function(_){d.push({timestamp:_.time,component:_.component,message:_.text})}),this.client.call(connect.ClientMethods.SEND_CLIENT_LOGS,{logEvents:d},{success:function(_){connect.getLog().info("SendLogs request succeeded.").sendInternalLogToServer()},failure:function(_,S){connect.getLog().error("SendLogs request failed.").withObject(S).withException(_).sendInternalLogToServer()},authFailure:connect.hitch(g,g.handleAuthFail)})},l.prototype.handleAuthFail=function(){this.conduit.sendDownstream(connect.EventType.AUTH_FAIL)},l.prototype.handleAccessDenied=function(){this.conduit.sendDownstream(connect.EventType.ACCESS_DENIED)},l.prototype.checkAuthToken=function(){var g=this,d=new Date(g.initData.authTokenExpiration),y=(new Date).getTime();d.getTime()<y+18e5&&(connect.getLog().info("Auth token expires at "+d+" Start refreshing token with retry.").sendInternalLogToServer(),connect.backoff(connect.hitch(g,g.authorize),1e4,4))},l.prototype.authorize=function(g){var d=this;connect.core.authorize(this.initData.authorizeEndpoint).then(function(y){var _=new Date(y.expiration);connect.getLog().info("Authorization succeeded and the token expires at %s",_).sendInternalLogToServer(),d.initData.authToken=y.accessToken,d.initData.authTokenExpiration=_,connect.core.initClient(d.initData),connect.core.initAgentAppClient(d.initData),g.success()}).catch(function(y){connect.getLog().error("Authorization failed with code %s",y.status).sendInternalLogToServer(),401===y.status?d.handleAuthFail():g.failure()})},l.prototype.filterAuthToken=function(g){var d={};for(var y in g)if("params"===y){var _={};for(var S in g.params)"authentication"!==S&&(_[S]=g.params[S]);d.params=_}else d[y]=g[y];return d},connect.worker.main=function(){connect.worker.clientEngine=new l}}(),function(){connect=this.connect||{},this.connect=connect,connect.ChatMediaController=function(P,V){var v=connect.getLog(),w=connect.LogComponent.CHAT,m=function(c,h){connect.publishMetric({name:c,contactId:P.contactId,data:h||P})};return{get:function(){return function(){m("Chat media controller init",P.contactId),v.info(w,"Chat media controller init").withObject(P).sendInternalLogToServer(),connect.ChatSession.setGlobalConfig({loggerConfig:{logger:v},region:V.region});var c=connect.ChatSession.create({chatDetails:P,type:"AGENT",websocketManager:connect.core.getWebSocketManager()});return function(c){c.onConnectionBroken(function(h){v.error(w,"Chat Session connection broken").withException(h).sendInternalLogToServer(),m("Chat Session connection broken",h)}),c.onConnectionEstablished(function(h){v.info(w,"Chat Session connection established").withObject(h).sendInternalLogToServer(),m("Chat Session connection established",h)})}(c),c.connect().then(function(h){return v.info(w,"Chat Session Successfully established for contactId %s",P.contactId).sendInternalLogToServer(),m("Chat Session Successfully established",P.contactId),c}).catch(function(h){throw v.error(w,"Chat Session establishement failed for contact %s",P.contactId).withException(h).sendInternalLogToServer(),m("Chat Session establishement failed",P.contactId),h})}()}}}}(),function(){connect=this.connect||{},this.connect=connect,connect.MediaFactory=function(P){var V={},v=new Set,w=connect.getLog(),E=connect.LogComponent.CHAT,m=connect.merge({},P)||{};m.region=m.region||"us-west-2";var u=function(l){V[l]&&!v.has(l)&&(w.info(E,"Destroying mediaController for %s",l),v.add(l),V[l].then(function(){"function"==typeof controller.cleanUp&&controller.cleanUp(),delete V[l],v.delete(l)}).catch(function(){delete V[l],v.delete(l)}))};return{get:function(l){return function(l){return l.isActive()}(l)?function(l){var g=l.getConnectionId();if(!l.getMediaInfo())return w.error(E,"Media info does not exist for a media type %s",l.getMediaType()).withObject(l).sendInternalLogToServer(),Promise.reject("Media info does not exist for this connection");if(V[g])return V[g];switch(w.info(E,"media controller of type %s init",l.getMediaType()).withObject(l).sendInternalLogToServer(),l.getMediaType()){case connect.MediaType.CHAT:return V[g]=new connect.ChatMediaController(l.getMediaInfo(),m).get();case connect.MediaType.SOFTPHONE:return V[g]=new connect.SoftphoneMediaController(l.getMediaInfo()).get();case connect.MediaType.TASK:return V[g]=new connect.TaskMediaController(l.getMediaInfo()).get();default:return w.error(E,"Unrecognized media type %s ",l.getMediaType()).sendInternalLogToServer(),Promise.reject()}}(l):(u(l.getConnectionId()),Promise.reject("Media Controller is no longer available for this connection"))},destroy:u}}}(),function(){connect=this.connect||{},this.connect=connect,connect.SoftphoneMediaController=function(P){return{get:function(){return Promise.resolve(P)}}}}(),function(){connect=this.connect||{},this.connect=connect,connect.TaskMediaController=function(P){var V=connect.getLog(),v=connect.LogComponent.TASK,E=function(f,c){connect.publishMetric({name:f,contactId:P.contactId,data:c||P})};return{get:function(){return function(){E("Task media controller init",P.contactId),V.info(v,"Task media controller init").withObject(P);var f=connect.TaskSession.create({contactId:P.contactId,initialContactId:P.initialContactId,websocketManager:connect.core.getWebSocketManager()});return function(f){f.onConnectionBroken(function(c){V.error(v,"Task Session connection broken").withException(c),E("Task Session connection broken",c)}),f.onConnectionEstablished(function(c){V.info(v,"Task Session connection established").withObject(c),E("Task Session connection established",c)})}(f),f.connect().then(function(){return V.info(v,"Task Session Successfully established for contactId %s",P.contactId),E("Task Session Successfully established",P.contactId),f}).catch(function(c){throw V.error(v,"Task Session establishement failed for contact %s",P.contactId).withException(c),E("Chat Session establishement failed",P.contactId),c})}()}}}}(),function(){var N=this;connect=N.connect||{},N.connect=connect,N.lily=connect,connect.agentApp={};connect.agentApp.initCCP=connect.core.initCCP,connect.agentApp.isInitialized=function(E){},connect.agentApp.initAppCommunication=function(E,m){var f=document.getElementById(E),c=new connect.IFrameConduit(m,window,f),h=[connect.AgentEvents.UPDATE,connect.ContactEvents.VIEW,connect.EventType.ACKNOWLEDGE,connect.EventType.TERMINATED,connect.TaskEvents.CREATED];f.addEventListener("load",function(u){h.forEach(function(l){connect.core.getUpstream().onUpstream(l,function(g){c.sendUpstream(l,g)})})})};var V=function(E){var m=E.indexOf("ccp-v2");return E.slice(0,m-1)};connect.agentApp.initApp=function(E,m,f,c){c=c||{};var h=f.endsWith("/")?f:f+"/";connect.agentApp.AppRegistry.register(E,{endpoint:h,style:c.style},document.getElementById(m)),connect.agentApp.AppRegistry.start(E,function(l){var g=l.endpoint,d=l.containerDOM;return{init:function(){return"ccp"===E?function(E,m,f){var c={ccpUrl:E,ccpLoadTimeout:1e4,loginPopup:!0,loginUrl:V(E)+"/login",softphone:{allowFramedSoftphone:!0,disableRingtone:!1}},h=connect.merge(c,f.ccpParams);connect.core.initCCP(m,h)}(g,d,c):connect.agentApp.initAppCommunication(E,g)},destroy:function(){return"ccp"===E?function(E){var m=V(E)+"/logout";return connect.fetch(m,{credentials:"include"}).then(function(){return connect.core.getEventBus().trigger(connect.EventType.TERMINATE),!0}).catch(function(f){return connect.getLog().error("An error occured on logout."+f).withException(f),window.location.href=m,!1})}(g):null}}})},connect.agentApp.stopApp=function(E){return connect.agentApp.AppRegistry.stop(E)}}(),function(){var N=this;connect=N.connect||{},N.connect=connect;var v;N.connect.agentApp.AppRegistry=(v={},{register:function(E,m,f){v[E]={containerDOM:f,endpoint:m.endpoint,style:m.style,instance:void 0}},start:function(E,m){if(v[E]){var f=v[E].containerDOM;if("ccp"!==E){var u=function(E,m,f){var c=document.createElement("iframe");return c.src=m,c.style=f||"width: 100%; height:100%;",c.id=E,c["aria-label"]=E,c.setAttribute("sandbox","allow-forms allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts"),c}(E,v[E].endpoint,v[E].style);f.appendChild(u)}return v[E].instance=m(v[E]),v[E].instance.init()}},stop:function(E){if(v[E]){var c,m=v[E],f=m.containerDOM.querySelector("iframe");return m.containerDOM.removeChild(f),m.instance&&(c=m.instance.destroy(),delete m.instance),c}}})}()},111:(Zo,Vr,eo)=>{"use strict";function Dn(t){return"function"==typeof t}let N=!1;const P={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else N&&console.log("RxJS: Back to a better error behavior. Thank you. <3");N=t},get useDeprecatedSynchronousErrorHandling(){return N}};function V(t){setTimeout(()=>{throw t},0)}const v={closed:!0,next(t){},error(t){if(P.useDeprecatedSynchronousErrorHandling)throw t;V(t)},complete(){}},w=Array.isArray||(t=>t&&"number"==typeof t.length);function E(t){return null!==t&&"object"==typeof t}const f=(()=>{function t(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((n,r)=>`${r+1}) ${n.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return t.prototype=Object.create(Error.prototype),t})();class c{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:o,_subscriptions:i}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof c)n.remove(this);else if(null!==n)for(let s=0;s<n.length;++s)n[s].remove(this);if(Dn(o)){r&&(this._unsubscribe=void 0);try{o.call(this)}catch(s){e=s instanceof f?h(s.errors):[s]}}if(w(i)){let s=-1,a=i.length;for(;++s<a;){const p=i[s];if(E(p))try{p.unsubscribe()}catch(C){e=e||[],C instanceof f?e=e.concat(h(C.errors)):e.push(C)}}}if(e)throw new f(e)}add(e){let n=e;if(!e)return c.EMPTY;switch(typeof e){case"function":n=new c(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof c)){const i=n;n=new c,n._subscriptions=[i]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof c){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n}remove(e){const n=this._subscriptions;if(n){const r=n.indexOf(e);-1!==r&&n.splice(r,1)}}}var t;function h(t){return t.reduce((e,n)=>e.concat(n instanceof f?n.errors:n),[])}c.EMPTY=((t=new c).closed=!0,t);const u="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random();class g extends c{constructor(e,n,r){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=v;break;case 1:if(!e){this.destination=v;break}if("object"==typeof e){e instanceof g?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new d(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new d(this,e,n,r)}}[u](){return this}static create(e,n,r){const o=new g(e,n,r);return o.syncErrorThrowable=!1,o}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class d extends g{constructor(e,n,r,o){super(),this._parentSubscriber=e;let i,s=this;Dn(n)?i=n:n&&(i=n.next,r=n.error,o=n.complete,n!==v&&(s=Object.create(n),Dn(s.unsubscribe)&&this.add(s.unsubscribe.bind(s)),s.unsubscribe=this.unsubscribe.bind(this))),this._context=s,this._next=i,this._error=r,this._complete=o}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:n}=this;P.useDeprecatedSynchronousErrorHandling&&n.syncErrorThrowable?this.__tryOrSetError(n,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:n}=this,{useDeprecatedSynchronousErrorHandling:r}=P;if(this._error)r&&n.syncErrorThrowable?(this.__tryOrSetError(n,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(n.syncErrorThrowable)r?(n.syncErrorValue=e,n.syncErrorThrown=!0):V(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;V(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const n=()=>this._complete.call(this._context);P.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,n){try{e.call(this._context,n)}catch(r){if(this.unsubscribe(),P.useDeprecatedSynchronousErrorHandling)throw r;V(r)}}__tryOrSetError(e,n,r){if(!P.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{n.call(this._context,r)}catch(o){return P.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=o,e.syncErrorThrown=!0,!0):(V(o),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}const S="function"==typeof Symbol&&Symbol.observable||"@@observable";function D(t){return t}let R=(()=>{class t{constructor(n){this._isScalar=!1,n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const{operator:i}=this,s=function(t,e,n){if(t){if(t instanceof g)return t;if(t[u])return t[u]()}return t||e||n?new g(t,e,n):new g(v)}(n,r,o);if(s.add(i?i.call(s,this.source):this.source||P.useDeprecatedSynchronousErrorHandling&&!s.syncErrorThrowable?this._subscribe(s):this._trySubscribe(s)),P.useDeprecatedSynchronousErrorHandling&&s.syncErrorThrowable&&(s.syncErrorThrowable=!1,s.syncErrorThrown))throw s.syncErrorValue;return s}_trySubscribe(n){try{return this._subscribe(n)}catch(r){P.useDeprecatedSynchronousErrorHandling&&(n.syncErrorThrown=!0,n.syncErrorValue=r),function(t){for(;t;){const{closed:e,destination:n,isStopped:r}=t;if(e||r)return!1;t=n&&n instanceof g?n:null}return!0}(n)?n.error(r):console.warn(r)}}forEach(n,r){return new(r=q(r))((o,i)=>{let s;s=this.subscribe(a=>{try{n(a)}catch(p){i(p),s&&s.unsubscribe()}},i,o)})}_subscribe(n){const{source:r}=this;return r&&r.subscribe(n)}[S](){return this}pipe(...n){return 0===n.length?this:function(t){return 0===t.length?D:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}(n)(this)}toPromise(n){return new(n=q(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function q(t){if(t||(t=P.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const U=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class J extends c{constructor(e,n){super(),this.subject=e,this.subscriber=n,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,n=e.observers;if(this.subject=null,!n||0===n.length||e.isStopped||e.closed)return;const r=n.indexOf(this.subscriber);-1!==r&&n.splice(r,1)}}class z extends g{constructor(e){super(e),this.destination=e}}let se=(()=>{class t extends R{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u](){return new z(this)}lift(n){const r=new G(this,this);return r.operator=n,r}next(n){if(this.closed)throw new U;if(!this.isStopped){const{observers:r}=this,o=r.length,i=r.slice();for(let s=0;s<o;s++)i[s].next(n)}}error(n){if(this.closed)throw new U;this.hasError=!0,this.thrownError=n,this.isStopped=!0;const{observers:r}=this,o=r.length,i=r.slice();for(let s=0;s<o;s++)i[s].error(n);this.observers.length=0}complete(){if(this.closed)throw new U;this.isStopped=!0;const{observers:n}=this,r=n.length,o=n.slice();for(let i=0;i<r;i++)o[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(n){if(this.closed)throw new U;return super._trySubscribe(n)}_subscribe(n){if(this.closed)throw new U;return this.hasError?(n.error(this.thrownError),c.EMPTY):this.isStopped?(n.complete(),c.EMPTY):(this.observers.push(n),new J(this,n))}asObservable(){const n=new R;return n.source=this,n}}return t.create=(e,n)=>new G(e,n),t})();class G extends se{constructor(e,n){super(),this.destination=e,this.source=n}next(e){const{destination:n}=this;n&&n.next&&n.next(e)}error(e){const{destination:n}=this;n&&n.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:n}=this;return n?this.source.subscribe(e):c.EMPTY}}function pe(t){return t&&"function"==typeof t.schedule}function Q(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new ge(t,e))}}class ge{constructor(e,n){this.project=e,this.thisArg=n}call(e,n){return n.subscribe(new Pe(e,this.project,this.thisArg))}}class Pe extends g{constructor(e,n,r){super(e),this.project=n,this.count=0,this.thisArg=r||this}_next(e){let n;try{n=this.project.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Ne=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()},te="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator",ne=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function Ce(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const fe=t=>{if(t&&"function"==typeof t[S])return(t=>e=>{const n=t[S]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)})(t);if(ne(t))return Ne(t);if(Ce(t))return(t=>e=>(t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,V),e))(t);if(t&&"function"==typeof t[te])return(t=>e=>{const n=t[te]();for(;;){let r;try{r=n.next()}catch(o){return e.error(o),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e})(t);{const n=`You provided ${E(t)?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(n)}};function Se(t,e){return new R(n=>{const r=new c;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}function ce(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[S]}(t))return function(t,e){return new R(n=>{const r=new c;return r.add(e.schedule(()=>{const o=t[S]();r.add(o.subscribe({next(i){r.add(e.schedule(()=>n.next(i)))},error(i){r.add(e.schedule(()=>n.error(i)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Ce(t))return function(t,e){return new R(n=>{const r=new c;return r.add(e.schedule(()=>t.then(o=>{r.add(e.schedule(()=>{n.next(o),r.add(e.schedule(()=>n.complete()))}))},o=>{r.add(e.schedule(()=>n.error(o)))}))),r})}(t,e);if(ne(t))return Se(t,e);if(function(t){return t&&"function"==typeof t[te]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new R(n=>{const r=new c;let o;return r.add(()=>{o&&"function"==typeof o.return&&o.return()}),r.add(e.schedule(()=>{o=t[te](),r.add(e.schedule(function(){if(n.closed)return;let i,s;try{const a=o.next();i=a.value,s=a.done}catch(a){return void n.error(a)}s?n.complete():(n.next(i),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof R?t:new R(fe(t))}class le extends g{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class Re extends g{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function $e(t,e){if(e.closed)return;if(t instanceof R)return t.subscribe(e);let n;try{n=fe(t)(e)}catch(r){e.error(r)}return n}function ct(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?r=>r.pipe(ct((o,i)=>ce(t(o,i)).pipe(Q((s,a)=>e(o,s,i,a))),n)):("number"==typeof e&&(n=e),r=>r.lift(new xt(t,n)))}class xt{constructor(e,n=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=n}call(e,n){return n.subscribe(new ke(e,this.project,this.concurrent))}}class ke extends Re{constructor(e,n,r=Number.POSITIVE_INFINITY){super(e),this.project=n,this.concurrent=r,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(o){return void this.destination.error(o)}this.active++,this._innerSub(n)}_innerSub(e){const n=new le(this),r=this.destination;r.add(n);const o=$e(e,n);o!==n&&r.add(o)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function A(t=Number.POSITIVE_INFINITY){return ct(D,t)}function x(t,e){return e?Se(t,e):new R(Ne(t))}function re(){return function(e){return e.lift(new he(e))}}class he{constructor(e){this.connectable=e}call(e,n){const{connectable:r}=this;r._refCount++;const o=new O(e,r),i=n.subscribe(o);return o.closed||(o.connection=r.connect()),i}}class O extends g{constructor(e,n){super(e),this.connectable=n}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const n=e._refCount;if(n<=0)return void(this.connection=null);if(e._refCount=n-1,n>1)return void(this.connection=null);const{connection:r}=this,o=e._connection;this.connection=null,o&&(!r||o===r)&&o.unsubscribe()}}class L extends R{constructor(e,n){super(),this.source=e,this.subjectFactory=n,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new c,e.add(this.source.subscribe(new ee(this.getSubject(),this))),e.closed&&(this._connection=null,e=c.EMPTY)),e}refCount(){return re()(this)}}const W=(()=>{const t=L.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class ee extends z{constructor(e,n){super(e),this.connectable=n}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const n=e._connection;e._refCount=0,e._subject=null,e._connection=null,n&&n.unsubscribe()}}}function pt(){return new se}function Z(t){for(let e in t)if(t[e]===Z)return e;throw Error("Could not find renamed property on target object.")}function Oe(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Oe).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Ln(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const ps=Z({__forward_ref__:Z});function vt(t){return t.__forward_ref__=vt,t.toString=function(){return Oe(this())},t}function Ue(t){return function(t){return"function"==typeof t&&t.hasOwnProperty(ps)&&t.__forward_ref__===vt}(t)?t():t}class Er extends Error{constructor(e,n){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(e,n)),this.code=e}}function ze(t){return"string"==typeof t?t:null==t?"":String(t)}function Gt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ze(t)}function wo(t,e){const n=e?` in ${e}`:"";throw new Er("201",`No provider for ${Gt(t)} found${n}`)}function In(t,e){null==t&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Ke(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ln(t){return{providers:t.providers||[],imports:t.imports||[]}}function Br(t){return bp(t,Ba)||bp(t,wp)}function bp(t,e){return t.hasOwnProperty(e)?t[e]:null}function Sp(t){return t&&(t.hasOwnProperty(nl)||t.hasOwnProperty(sS))?t[nl]:null}const Ba=Z({\u0275prov:Z}),nl=Z({\u0275inj:Z}),wp=Z({ngInjectableDef:Z}),sS=Z({ngInjectorDef:Z});var je=(()=>((je=je||{})[je.Default=0]="Default",je[je.Host=1]="Host",je[je.Self=2]="Self",je[je.SkipSelf=4]="SkipSelf",je[je.Optional=8]="Optional",je))();let rl;function to(t){const e=rl;return rl=t,e}function Dp(t,e,n){const r=Br(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&je.Optional?null:void 0!==e?e:void wo(Oe(t),"Injector")}function no(t){return{toString:t}.toString()}var Un=(()=>((Un=Un||{})[Un.OnPush=0]="OnPush",Un[Un.Default=1]="Default",Un))(),Wt=(()=>((Wt=Wt||{})[Wt.Emulated=0]="Emulated",Wt[Wt.None=2]="None",Wt[Wt.ShadowDom=3]="ShadowDom",Wt))();const cS="undefined"!=typeof globalThis&&globalThis,uS="undefined"!=typeof window&&window,lS="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,dS="undefined"!=typeof global&&global,gt=cS||dS||uS||lS,ri={},Et=[],ja=Z({\u0275cmp:Z}),ol=Z({\u0275dir:Z}),il=Z({\u0275pipe:Z}),Tp=Z({\u0275mod:Z}),fS=Z({\u0275loc:Z}),jr=Z({\u0275fac:Z}),gs=Z({__NG_ELEMENT_ID__:Z});let hS=0;function Do(t){return no(()=>{const n={},r={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Un.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Et,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Wt.Emulated,id:"c",styles:t.styles||Et,_:null,setInput:null,schemas:t.schemas||null,tView:null},o=t.directives,i=t.features,s=t.pipes;return r.id+=hS++,r.inputs=Rp(t.inputs,n),r.outputs=Rp(t.outputs),i&&i.forEach(a=>a(r)),r.directiveDefs=o?()=>("function"==typeof o?o():o).map(Ip):null,r.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ap):null,r})}function Ip(t){return dn(t)||function(t){return t[ol]||null}(t)}function Ap(t){return function(t){return t[il]||null}(t)}const xp={};function An(t){return no(()=>{const e={type:t.type,bootstrap:t.bootstrap||Et,declarations:t.declarations||Et,imports:t.imports||Et,exports:t.exports||Et,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(xp[t.id]=t.type),e})}function Rp(t,e){if(null==t)return ri;const n={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}const We=Do;function dn(t){return t[ja]||null}function Bn(t,e){const n=t[Tp]||null;if(!n&&!0===e)throw new Error(`Type ${Oe(t)} does not have '\u0275mod' property.`);return n}function Cr(t){return Array.isArray(t)&&"object"==typeof t[1]}function tr(t){return Array.isArray(t)&&!0===t[1]}function cl(t){return 0!=(8&t.flags)}function $a(t){return 2==(2&t.flags)}function qa(t){return 1==(1&t.flags)}function nr(t){return null!==t.template}function CS(t){return 0!=(512&t[2])}function Ro(t,e){return t.hasOwnProperty(jr)?t[jr]:null}class Mp{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function rn(){return Op}function Op(t){return t.type.prototype.ngOnChanges&&(t.setInput=wS),SS}function SS(){const t=Fp(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===ri)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function wS(t,e,n,r){const o=Fp(t)||function(t,e){return t[Pp]=e}(t,{previous:ri,current:null}),i=o.current||(o.current={}),s=o.previous,a=this.declaredInputs[n],p=s[a];i[a]=new Mp(p&&p.currentValue,e,s===ri),t[r]=e}rn.ngInherit=!0;const Pp="__ngSimpleChanges__";function Fp(t){return t[Pp]||null}let dl;function Mt(t){return!!t.listen}const Vp={createRenderer:(t,e)=>void 0!==dl?dl:"undefined"!=typeof document?document:void 0};function Lt(t){for(;Array.isArray(t);)t=t[0];return t}function Gn(t,e){return Lt(e[t.index])}function hl(t,e){return t.data[e]}function Rn(t,e){const n=e[t];return Cr(n)?n:n[0]}function Up(t){return 4==(4&t[2])}function pl(t){return 128==(128&t[2])}function oo(t,e){return null==e?null:t[e]}function Bp(t){t[18]=0}function gl(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Ye={lFrame:Kp(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function jp(){return Ye.bindingsEnabled}function me(){return Ye.lFrame.lView}function ht(){return Ye.lFrame.tView}function $t(){let t=Hp();for(;null!==t&&64===t.type;)t=t.parent;return t}function Hp(){return Ye.lFrame.currentTNode}function _r(t,e){const n=Ye.lFrame;n.currentTNode=t,n.isParent=e}function ml(){return Ye.lFrame.isParent}function Ka(){return Ye.isInCheckNoChangesMode}function Ya(t){Ye.isInCheckNoChangesMode=t}function ui(){return Ye.lFrame.bindingIndex++}function BS(t,e){const n=Ye.lFrame;n.bindingIndex=n.bindingRootIndex=t,vl(e)}function vl(t){Ye.lFrame.currentDirectiveIndex=t}function $p(){return Ye.lFrame.currentQueryIndex}function Cl(t){Ye.lFrame.currentQueryIndex=t}function HS(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function qp(t,e,n){if(n&je.SkipSelf){let o=e,i=t;for(;!(o=o.parent,null!==o||n&je.Host||(o=HS(i),null===o||(i=i[15],10&o.type))););if(null===o)return!1;e=o,t=i}const r=Ye.lFrame=zp();return r.currentTNode=e,r.lView=t,!0}function Qa(t){const e=zp(),n=t[1];Ye.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function zp(){const t=Ye.lFrame,e=null===t?null:t.child;return null===e?Kp(t):e}function Kp(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Yp(){const t=Ye.lFrame;return Ye.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Qp=Yp;function Ja(){const t=Yp();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function io(t){Ye.lFrame.selectedIndex=t}function Ot(){const t=Ye.lFrame;return hl(t.tView,t.selectedIndex)}function Xa(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:p,ngAfterViewChecked:C,ngOnDestroy:I}=i;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),p&&(t.viewHooks||(t.viewHooks=[])).push(-n,p),C&&((t.viewHooks||(t.viewHooks=[])).push(n,C),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,C)),null!=I&&(t.destroyHooks||(t.destroyHooks=[])).push(n,I)}}function Za(t,e,n){Jp(t,e,3,n)}function ec(t,e,n,r){(3&t[2])===n&&Jp(t,e,n,r)}function _l(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Jp(t,e,n,r){const i=null!=r?r:-1,s=e.length-1;let a=0;for(let p=void 0!==r?65535&t[18]:0;p<s;p++)if("number"==typeof e[p+1]){if(a=e[p],null!=r&&a>=r)break}else e[p]<0&&(t[18]+=65536),(a<i||-1==i)&&(JS(t,n,e,p),t[18]=(4294901760&t[18])+p+2),p++}function JS(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];if(o){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class Cs{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function tc(t,e,n){const r=Mt(t);let o=0;for(;o<n.length;){const i=n[o];if("number"==typeof i){if(0!==i)break;o++;const s=n[o++],a=n[o++],p=n[o++];r?t.setAttribute(e,a,p,s):e.setAttributeNS(s,a,p)}else{const s=i,a=n[++o];Sl(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),o++}}return o}function Xp(t){return 3===t||4===t||6===t}function Sl(t){return 64===t.charCodeAt(0)}function nc(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||Zp(t,n,o,null,-1===n||2===n?e[++r]:null)}}return t}function Zp(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function eg(t){return-1!==t}function li(t){return 32767&t}function di(t,e){let n=function(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let wl=!0;function rc(t){const e=wl;return wl=t,e}let rw=0;function bs(t,e){const n=Tl(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Dl(r.data,t),Dl(e,null),Dl(r.blueprint,null));const o=oc(t,e),i=t.injectorIndex;if(eg(o)){const s=li(o),a=di(o,e),p=a[1].data;for(let C=0;C<8;C++)e[i+C]=a[s+C]|p[s+C]}return e[i+8]=o,i}function Dl(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tl(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function oc(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){const i=o[1],s=i.type;if(r=2===s?i.declTNode:1===s?o[6]:null,null===r)return-1;if(n++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function ic(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(gs)&&(r=n[gs]),null==r&&(r=n[gs]=rw++);const o=255&r;e.data[t+(o>>5)]|=1<<o}(t,e,n)}function rg(t,e,n){if(n&je.Optional)return t;wo(e,"NodeInjector")}function og(t,e,n,r){if(n&je.Optional&&void 0===r&&(r=null),0==(n&(je.Self|je.Host))){const o=t[9],i=to(void 0);try{return o?o.get(e,r,n&je.Optional):Dp(e,r,n&je.Optional)}finally{to(i)}}return rg(r,e,n)}function ig(t,e,n,r=je.Default,o){if(null!==t){const i=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(gs)?t[gs]:void 0;return"number"==typeof e?e>=0?255&e:sw:e}(n);if("function"==typeof i){if(!qp(e,t,r))return r&je.Host?rg(o,n,r):og(e,n,r,o);try{const s=i(r);if(null!=s||r&je.Optional)return s;wo(n)}finally{Qp()}}else if("number"==typeof i){let s=null,a=Tl(t,e),p=-1,C=r&je.Host?e[16][6]:null;for((-1===a||r&je.SkipSelf)&&(p=-1===a?oc(t,e):e[a+8],-1!==p&&cg(r,!1)?(s=e[1],a=li(p),e=di(p,e)):a=-1);-1!==a;){const I=e[1];if(ag(i,a,I.data)){const M=aw(a,e,n,s,r,C);if(M!==sg)return M}p=e[a+8],-1!==p&&cg(r,e[1].data[a+8]===C)&&ag(i,a,e)?(s=I,a=li(p),e=di(p,e)):a=-1}}}return og(e,n,r,o)}const sg={};function sw(){return new fi($t(),me())}function aw(t,e,n,r,o,i){const s=e[1],a=s.data[t+8],I=sc(a,s,n,null==r?$a(a)&&wl:r!=s&&0!=(3&a.type),o&je.Host&&i===a);return null!==I?Ss(e,s,I,a):sg}function sc(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,p=t.directiveStart,I=i>>20,F=o?a+I:t.directiveEnd;for(let k=r?a:a+I;k<F;k++){const $=s[k];if(k<p&&n===$||k>=p&&$.type===n)return k}if(o){const k=s[p];if(k&&nr(k)&&k.type===n)return p}return null}function Ss(t,e,n,r){let o=t[n];const i=e.data;if(function(t){return t instanceof Cs}(o)){const s=o;s.resolving&&function(t,e){throw new Er("200",`Circular dependency in DI detected for ${t}`)}(Gt(i[n]));const a=rc(s.canSeeViewProviders);s.resolving=!0;const p=s.injectImpl?to(s.injectImpl):null;qp(t,r,je.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=Op(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==p&&to(p),rc(a),s.resolving=!1,Qp()}}return o}function ag(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function cg(t,e){return!(t&je.Self||t&je.Host&&e)}class fi{constructor(e,n){this._tNode=e,this._lView=n}get(e,n){return ig(this._tNode,this._lView,e,void 0,n)}}const pi="__parameters__";function No(t,e,n){return no(()=>{const r=function(t){return function(...n){if(t){const r=t(...n);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(p,C,I){const M=p.hasOwnProperty(pi)?p[pi]:Object.defineProperty(p,pi,{value:[]})[pi];for(;M.length<=I;)M.push(null);return(M[I]=M[I]||[]).push(s),p}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class st{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Ke({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const dw=new st("AnalyzeForEntryComponents"),ac=Function;function $n(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),$n(r,e)):e!==t&&e.push(r)}return e}function Sr(t,e){t.forEach(n=>Array.isArray(n)?Sr(n,e):e(n))}function uc(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Mo(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const As={},Nl="__NG_DI_FLAG__",yi="ngTempTokenPath",_w=/\n/gm,Ml="__source",Ol=Z({provide:String,useValue:Z});let xs;function vi(t){const e=xs;return xs=t,e}function Sw(t,e=je.Default){if(void 0===xs)throw new Error("inject() must be called from an injection context");return null===xs?Dp(t,void 0,e):xs.get(t,e&je.Optional?null:void 0,e)}function De(t,e=je.Default){return(rl||Sw)(Ue(t),e)}function Oo(t){const e=[];for(let n=0;n<t.length;n++){const r=Ue(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let o,i=je.Default;for(let s=0;s<r.length;s++){const a=r[s],p=ww(a);"number"==typeof p?-1===p?o=a.token:i|=p:o=a}e.push(De(o,i))}else e.push(De(r))}return e}function Rs(t,e){return t[Nl]=e,t.prototype[Nl]=e,t}function ww(t){return t[Nl]}function pg(t,e,n,r){const o=t[yi];throw e[Ml]&&o.unshift(e[Ml]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let o=Oe(e);if(Array.isArray(e))o=e.map(Oe).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):Oe(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(_w,"\n  ")}`}("\n"+t.message,o,n,r),t.ngTokenPath=o,t[yi]=null,t}const Ei=Rs(No("Inject",t=>({token:t})),-1),_n=Rs(No("Optional"),8),co=Rs(No("SkipSelf"),4);class Po{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function wr(t,e){const n=function(t){return t instanceof Po&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}const Kw=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Yw=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var bt=(()=>((bt=bt||{})[bt.NONE=0]="NONE",bt[bt.HTML=1]="HTML",bt[bt.STYLE=2]="STYLE",bt[bt.SCRIPT=3]="SCRIPT",bt[bt.URL=4]="URL",bt[bt.RESOURCE_URL=5]="RESOURCE_URL",bt))();function jl(t){const e=function(){const t=me();return t&&t[12]}();return e?e.sanitize(bt.URL,t)||"":wr(t,"URL")?function(t){return t instanceof Po?t.changingThisBreaksApplicationSecurity:t}(t):function(t){return(t=String(t)).match(Kw)||t.match(Yw)?t:"unsafe:"+t}(ze(t))}const Og="__ngContext__";function on(t,e){t[Og]=e}function Gl(t){const e=function(t){return t[Og]||null}(t);return e?Array.isArray(e)?e:e.lView:null}function mc(t){return t.ngOriginalError}function yD(t,...e){t.error(...e)}class Fo{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e),r=this._findContext(e),o=function(t){return t&&t.ngErrorLogger||yD}(e);o(this._console,"ERROR",e),n&&o(this._console,"ORIGINAL ERROR",n),r&&o(this._console,"ERROR CONTEXT",r)}_findContext(e){return e?function(t){return t.ngDebugContext}(e)||this._findContext(mc(e)):null}_findOriginalError(e){let n=e&&mc(e);for(;n&&mc(n);)n=mc(n);return n||null}}const Hg=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(gt))();function Tr(t){return t instanceof Function?t():t}var On=(()=>((On=On||{})[On.Important=1]="Important",On[On.DashCase=2]="DashCase",On))();function ql(t,e){return undefined(t,e)}function ks(t){const e=t[3];return tr(e)?e[3]:e}function zl(t){return zg(t[13])}function Kl(t){return zg(t[4])}function zg(t){for(;null!==t&&!tr(t);)t=t[4];return t}function Si(t,e,n,r,o){if(null!=r){let i,s=!1;tr(r)?i=r:Cr(r)&&(s=!0,r=r[0]);const a=Lt(r);0===t&&null!==n?null==o?Zg(e,n,a):ko(e,n,a,o||null,!0):1===t&&null!==n?ko(e,n,a,o||null,!0):2===t?function(t,e,n){const r=vc(t,e);r&&function(t,e,n,r){Mt(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function(t,e,n,r,o){const i=n[7];i!==Lt(n)&&Si(e,t,r,i,o);for(let a=10;a<n.length;a++){const p=n[a];Ls(p[1],p,t,e,r,i)}}(e,t,i,n,o)}}function Ql(t,e,n){return Mt(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Yg(t,e){const n=t[9],r=n.indexOf(e),o=e[3];1024&e[2]&&(e[2]&=-1025,gl(o,-1)),n.splice(r,1)}function Jl(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Yg(o,r),e>0&&(t[n-1][4]=r[4]);const i=Mo(t,10+e);!function(t,e){Ls(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=i[19];null!==s&&s.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function Qg(t,e){if(!(256&e[2])){const n=e[11];Mt(n)&&n.destroyNode&&Ls(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Xl(t[1],t);for(;e;){let n=null;if(Cr(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Cr(e)&&Xl(e[1],e),e=e[3];null===e&&(e=t),Cr(e)&&Xl(e[1],e),n=e&&e[4]}e=n}}(e)}}function Xl(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof Cs)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],p=i[s+1];try{p.call(a)}finally{}}else try{i.call(o)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let o=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+1],a="function"==typeof s?s(e):Lt(e[s]),p=r[o=n[i+2]],C=n[i+3];"boolean"==typeof C?a.removeEventListener(n[i],p,C):C>=0?r[o=C]():r[o=-C].unsubscribe(),i+=2}else{const s=r[o=n[i+1]];n[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)r[i]();e[7]=null}}(t,e),1===e[1].type&&Mt(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&tr(e[3])){n!==e[3]&&Yg(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Jg(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const o=t.data[r.directiveStart].encapsulation;if(o===Wt.None||o===Wt.Emulated)return null}return Gn(r,n)}(t,e.parent,n)}function ko(t,e,n,r,o){Mt(t)?t.insertBefore(e,n,r,o):e.insertBefore(n,r,o)}function Zg(t,e,n){Mt(t)?t.appendChild(e,n):e.appendChild(n)}function em(t,e,n,r,o){null!==r?ko(t,e,n,r,o):Zg(t,e,n)}function vc(t,e){return Mt(t)?t.parentNode(e):e.parentNode}let rm=function(t,e,n){return 40&t.type?Gn(t,n):null};function Ec(t,e,n,r){const o=Jg(t,r,e),i=e[11],a=function(t,e,n){return rm(t,e,n)}(r.parent||e[6],r,e);if(null!=o)if(Array.isArray(n))for(let p=0;p<n.length;p++)em(i,o,n[p],a,!1);else em(i,o,n,a,!1)}function Cc(t,e){if(null!==e){const n=e.type;if(3&n)return Gn(e,t);if(4&n)return ed(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Cc(t,r);{const o=t[e.index];return tr(o)?ed(-1,o):Lt(o)}}if(32&n)return ql(e,t)()||Lt(t[e.index]);{const r=im(t,e);return null!==r?Array.isArray(r)?r[0]:Cc(ks(t[16]),r):Cc(t,e.next)}}return null}function im(t,e){return null!==e?t[16][6].projection[e.projection]:null}function ed(t,e){const n=10+t+1;if(n<e.length){const r=e[n],o=r[1].firstChild;if(null!==o)return Cc(r,o)}return e[7]}function td(t,e,n,r,o,i,s){for(;null!=n;){const a=r[n.index],p=n.type;if(s&&0===e&&(a&&on(Lt(a),r),n.flags|=4),64!=(64&n.flags))if(8&p)td(t,e,n.child,r,o,i,!1),Si(e,t,o,a,i);else if(32&p){const C=ql(n,r);let I;for(;I=C();)Si(e,t,o,I,i);Si(e,t,o,a,i)}else 16&p?am(t,e,r,n,o,i):Si(e,t,o,a,i);n=s?n.projectionNext:n.next}}function Ls(t,e,n,r,o,i){td(n,r,t.firstChild,e,o,i,!1)}function am(t,e,n,r,o,i){const s=n[16],p=s[6].projection[r.projection];if(Array.isArray(p))for(let C=0;C<p.length;C++)Si(e,t,o,p[C],i);else td(t,e,p,s[3],o,i,!0)}function cm(t,e,n){Mt(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function nd(t,e,n){Mt(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function um(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const lm="ng-template";function GD(t,e,n){let r=0;for(;r<t.length;){let o=t[r++];if(n&&"class"===o){if(o=t[r],-1!==um(o.toLowerCase(),e,0))return!0}else if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}}return!1}function dm(t){return 4===t.type&&t.value!==lm}function WD(t,e,n){return e===(4!==t.type||n?t.value:lm)}function $D(t,e,n){let r=4;const o=t.attrs||[],i=function(t){for(let e=0;e<t.length;e++)if(Xp(t[e]))return e;return t.length}(o);let s=!1;for(let a=0;a<e.length;a++){const p=e[a];if("number"!=typeof p){if(!s)if(4&r){if(r=2|1&r,""!==p&&!WD(t,p,n)||""===p&&1===e.length){if(rr(r))return!1;s=!0}}else{const C=8&r?p:e[++a];if(8&r&&null!==t.attrs){if(!GD(t.attrs,C,n)){if(rr(r))return!1;s=!0}continue}const M=qD(8&r?"class":p,o,dm(t),n);if(-1===M){if(rr(r))return!1;s=!0;continue}if(""!==C){let F;F=M>i?"":o[M+1].toLowerCase();const k=8&r?F:null;if(k&&-1!==um(k,C,0)||2&r&&C!==F){if(rr(r))return!1;s=!0}}}}else{if(!s&&!rr(r)&&!rr(p))return!1;if(s&&rr(p))continue;s=!1,r=p|1&r}}return rr(r)||s}function rr(t){return 0==(1&t)}function qD(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function fm(t,e,n=!1){for(let r=0;r<e.length;r++)if($D(t,e[r],n))return!0;return!1}function hm(t,e){return t?":not("+e.trim()+")":e}function JD(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!rr(s)&&(e+=hm(i,o),o=""),r=s,i=i||!rr(r);n++}return""!==o&&(e+=hm(i,o)),e}const Je={};function wm(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r],i=n[r+1];if(-1!==i){const s=t.data[i];Cl(o),s.contentQueries(2,e[i],i)}}}function Vs(t,e,n,r,o,i,s,a,p,C){const I=e.blueprint.slice();return I[0]=o,I[2]=140|r,Bp(I),I[3]=I[15]=t,I[8]=n,I[10]=s||t&&t[10],I[11]=a||t&&t[11],I[12]=p||t&&t[12]||null,I[9]=C||t&&t[9]||null,I[6]=i,I[16]=2==e.type?t[16]:I,I}function wi(t,e,n,r,o){let i=t.data[e];if(null===i)i=function(t,e,n,r,o){const i=Hp(),s=ml(),p=t.data[e]=function(t,e,n,r,o,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return null===t.firstChild&&(t.firstChild=p),null!==i&&(s?null==i.child&&null!==p.parent&&(i.child=p):null===i.next&&(i.next=p)),p}(t,e,n,r,o),Ye.lFrame.inI18n&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function(){const t=Ye.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return _r(i,!0),i}function Di(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Us(t,e,n){Qa(e);try{const r=t.viewQuery;null!==r&&_d(1,r,n);const o=t.template;null!==o&&Dm(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wm(t,e),t.staticViewQueries&&_d(2,t.viewQuery,n);const i=t.components;null!==i&&function(t,e){for(let n=0;n<e.length;n++)NT(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Ja()}}function Ti(t,e,n,r){const o=e[2];if(256==(256&o))return;Qa(e);const i=Ka();try{Bp(e),function(t){Ye.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Dm(t,e,n,2,r);const s=3==(3&o);if(!i)if(s){const C=t.preOrderCheckHooks;null!==C&&Za(e,C,null)}else{const C=t.preOrderHooks;null!==C&&ec(e,C,0,null),_l(e,0)}if(function(t){for(let e=zl(t);null!==e;e=Kl(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const o=n[r],i=o[3];0==(1024&o[2])&&gl(i,1),o[2]|=1024}}}(e),function(t){for(let e=zl(t);null!==e;e=Kl(e))for(let n=10;n<e.length;n++){const r=e[n],o=r[1];pl(r)&&Ti(o,r,o.template,r[8])}}(e),null!==t.contentQueries&&wm(t,e),!i)if(s){const C=t.contentCheckHooks;null!==C&&Za(e,C)}else{const C=t.contentHooks;null!==C&&ec(e,C,1),_l(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)io(~o);else{const i=o,s=n[++r],a=n[++r];BS(s,i),a(2,e[i])}}}finally{io(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)RT(t,e[n])}(e,a);const p=t.viewQuery;if(null!==p&&_d(2,p,r),!i)if(s){const C=t.viewCheckHooks;null!==C&&Za(e,C)}else{const C=t.viewHooks;null!==C&&ec(e,C,2),_l(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),i||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,gl(e[3],-1))}finally{Ja()}}function dT(t,e,n,r){const o=e[10],i=!Ka(),s=Up(e);try{i&&!s&&o.begin&&o.begin(),s&&Us(t,e,r),Ti(t,e,n,r)}finally{i&&!s&&o.end&&o.end()}}function Dm(t,e,n,r,o){const i=Ye.lFrame.selectedIndex,s=2&r;try{io(-1),s&&e.length>20&&function(t,e,n,r){if(!r)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&Za(e,i,n)}else{const i=t.preOrderHooks;null!==i&&ec(e,i,0,n)}io(n)}(t,e,20,Ka()),n(r,o)}finally{io(i)}}function Im(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=wc(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function wc(t,e,n,r,o,i,s,a,p,C){const I=20+r,M=I+o,F=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Je);return n}(I,M),k="function"==typeof C?C():C;return F[1]={type:t,blueprint:F,template:n,queries:null,viewQuery:a,declTNode:e,data:F.slice().fill(null,I),bindingStartIndex:I,expandoStartIndex:M,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:p,consts:k,incompleteFirstPass:!1}}function Rm(t,e,n,r){const o=Bm(e);null===n?o.push(r):(o.push(n),t.firstCreatePass&&jm(t).push(r,o.length-1))}function Nm(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const o=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,o):n[r]=[e,o]}return n}function Om(t,e,n,r,o,i){const s=i.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const p=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=p&&a.push(p),a.push(r,o,s)}}function Pm(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Fm(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function wT(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;nr(e)&&(n[""]=t)}}function km(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Lm(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=Ro(o.type)),s=new Cs(i,nr(o),null);t.blueprint[r]=s,n[r]=s,Om(t,e,0,r,Di(t,n,o.hostVars,Je),o)}function DT(t,e,n){const r=Gn(e,t),o=Im(n),i=t[10],s=Dc(t,Vs(t,o,null,n.onPush?64:16,r,e,i,i.createRenderer(r,n),null,null));t[e.index]=s}function Ir(t,e,n,r,o,i){const s=Gn(t,e);!function(t,e,n,r,o,i,s){if(null==i)Mt(t)?t.removeAttribute(e,o,n):e.removeAttribute(o);else{const a=null==s?ze(i):s(i,r||"",o);Mt(t)?t.setAttribute(e,o,a,n):n?e.setAttributeNS(n,o,a):e.setAttribute(o,a)}}(e[11],s,i,t.value,n,r,o)}function TT(t,e,n,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let p=0;p<s.length;){const C=s[p++],I=s[p++],M=s[p++];null!==a?r.setInput(n,M,C,I):n[I]=M}}}function IT(t,e){let n=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;t.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,t[o],e[r+1])),r+=2}else r+=2;else r+=4}return n}function RT(t,e){const n=Rn(e,t);if(pl(n)){const r=n[1];80&n[2]?Ti(r,n,r.template,n[8]):n[5]>0&&yd(n)}}function yd(t){for(let r=zl(t);null!==r;r=Kl(r))for(let o=10;o<r.length;o++){const i=r[o];if(1024&i[2]){const s=i[1];Ti(s,i,s.template,i[8])}else i[5]>0&&yd(i)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const o=Rn(n[r],t);pl(o)&&o[5]>0&&yd(o)}}function NT(t,e){const n=Rn(e,t),r=n[1];(function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Us(r,n,n[8])}function Dc(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function vd(t){for(;t;){t[2]|=64;const e=ks(t);if(CS(t)&&!e)return t;t=e}return null}function Cd(t,e,n){const r=e[10];r.begin&&r.begin();try{Ti(t,e,t.template,n)}catch(o){throw Gm(e,o),o}finally{r.end&&r.end()}}function Um(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Gl(n),o=r[1];dT(o,r,o.template,n)}}(t[8])}function _d(t,e,n){Cl(0),e(t,n)}const kT=(()=>Promise.resolve(null))();function Bm(t){return t[7]||(t[7]=[])}function jm(t){return t.cleanup||(t.cleanup=[])}function Gm(t,e){const n=t[9],r=n?n.get(Fo,null):null;r&&r.handleError(e)}function Wm(t,e,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],p=e[s],C=t.data[s];null!==C.setInput?C.setInput(p,o,r,a):p[a]=o}}function Tc(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Ln(o,a):2==i&&(r=Ln(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}const Ii=new st("INJECTOR",-1);class $m{get(e,n=As){if(n===As){const r=new Error(`NullInjectorError: No provider for ${Oe(e)}!`);throw r.name="NullInjectorError",r}return n}}const Bs=new st("Set Injector scope."),js={},UT={};let bd;function qm(){return void 0===bd&&(bd=new $m),bd}function zm(t,e=null,n=null,r){return new jT(t,n,e||qm(),r)}class jT{constructor(e,n,r,o=null){this.parent=r,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];n&&Sr(n,a=>this.processProvider(a,e,n)),Sr([e],a=>this.processInjectorType(a,[],i)),this.records.set(Ii,Ai(void 0,this));const s=this.records.get(Bs);this.scope=null!=s?s.value:null,this.source=o||("object"==typeof e?null:Oe(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,n=As,r=je.Default){this.assertNotDestroyed();const o=vi(this),i=to(void 0);try{if(!(r&je.SkipSelf)){let a=this.records.get(e);if(void 0===a){const p=function(t){return"function"==typeof t||"object"==typeof t&&t instanceof st}(e)&&Br(e);a=p&&this.injectableDefInScope(p)?Ai(Sd(e),js):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&je.Self?qm():this.parent).get(e,n=r&je.Optional&&n===As?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[yi]=s[yi]||[]).unshift(Oe(e)),o)throw s;return pg(s,e,"R3InjectorError",this.source)}throw s}finally{to(i),vi(o)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((r,o)=>e.push(Oe(o))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,n,r){if(!(e=Ue(e)))return!1;let o=Sp(e);const i=null==o&&e.ngModule||void 0,s=void 0===i?e:i,a=-1!==r.indexOf(s);if(void 0!==i&&(o=Sp(i)),null==o)return!1;if(null!=o.imports&&!a){let I;r.push(s);try{Sr(o.imports,M=>{this.processInjectorType(M,n,r)&&(void 0===I&&(I=[]),I.push(M))})}finally{}if(void 0!==I)for(let M=0;M<I.length;M++){const{ngModule:F,providers:k}=I[M];Sr(k,$=>this.processProvider($,F,k||Et))}}this.injectorDefTypes.add(s);const p=Ro(s)||(()=>new s);this.records.set(s,Ai(p,js));const C=o.providers;if(null!=C&&!a){const I=e;Sr(C,M=>this.processProvider(M,I,C))}return void 0!==i&&void 0!==e.providers}processProvider(e,n,r){let o=xi(e=Ue(e))?e:Ue(e&&e.provide);const i=function(t,e,n){return Ym(t)?Ai(void 0,t.useValue):Ai(function(t,e,n){let r;if(xi(t)){const o=Ue(t);return Ro(o)||Sd(o)}if(Ym(t))r=()=>Ue(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...Oo(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>De(Ue(t.useExisting));else{const o=Ue(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return Ro(o)||Sd(o);r=()=>new o(...Oo(t.deps))}return r}(t),js)}(e);if(xi(e)||!0!==e.multi)this.records.get(o);else{let s=this.records.get(o);s||(s=Ai(void 0,js,!0),s.factory=()=>Oo(s.multi),this.records.set(o,s)),o=e,s.multi.push(e)}this.records.set(o,i)}hydrate(e,n){return n.value===js&&(n.value=UT,n.value=n.factory()),"object"==typeof n.value&&n.value&&function(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Ue(e.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function Sd(t){const e=Br(t),n=null!==e?e.factory:Ro(t);if(null!==n)return n;if(t instanceof st)throw new Error(`Token ${Oe(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const r=function(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?");throw new Error(`Can't resolve all parameters for ${Oe(t)}: (${r.join(", ")}).`)}const n=function(t){const e=t&&(t[Ba]||t[wp]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ai(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ym(t){return null!==t&&"object"==typeof t&&Ol in t}function xi(t){return"function"==typeof t}const Qm=function(t,e,n){return function(t,e=null,n=null,r){const o=zm(t,e,n,r);return o._resolveInjectorDefTypes(),o}({name:n},e,t,n)};let mt=(()=>{class t{static create(n,r){return Array.isArray(n)?Qm(n,r,""):Qm(n.providers,n.parent,n.name||"")}}return t.THROW_IF_NOT_FOUND=As,t.NULL=new $m,t.\u0275prov=Ke({token:t,providedIn:"any",factory:()=>De(Ii)}),t.__NG_ELEMENT_ID__=-1,t})();function cI(t,e){Xa(Gl(t)[1],$t())}let Ic=null;function Ri(){if(!Ic){const t=gt.Symbol;if(t&&t.iterator)Ic=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Ic=r)}}}return Ic}function Gs(t){return!!Rd(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ri()in t)}function Rd(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function sn(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function xr(t,e,n,r){const o=me();return sn(o,ui(),e)&&(ht(),Ir(Ot(),o,t,e,n,r)),xr}function ve(t,e=je.Default){const n=me();return null===n?De(t,e):ig($t(),n,Ue(t),e)}function Fd(t,e,n,r,o){const s=o?"class":"style";Wm(t,n,e.inputs[s],s,r)}function Ct(t,e,n,r){const o=me(),i=ht(),s=20+t,a=o[11],p=o[s]=Ql(a,e,Ye.lFrame.currentNamespace),C=i.firstCreatePass?function(t,e,n,r,o,i,s){const a=e.consts,C=wi(e,t,2,o,oo(a,i));return function(t,e,n,r){let o=!1;if(jp()){const i=function(t,e,n){const r=t.directiveRegistry;let o=null;if(r)for(let i=0;i<r.length;i++){const s=r[i];fm(n,s.selectors,!1)&&(o||(o=[]),ic(bs(n,e),t,s.type),nr(s)?(Fm(t,n),o.unshift(s)):o.push(s))}return o}(t,e,n),s=null===r?null:{"":-1};if(null!==i){o=!0,km(n,t.data.length,i.length);for(let I=0;I<i.length;I++){const M=i[I];M.providersResolver&&M.providersResolver(M)}let a=!1,p=!1,C=Di(t,e,i.length,null);for(let I=0;I<i.length;I++){const M=i[I];n.mergedAttrs=nc(n.mergedAttrs,M.hostAttrs),Lm(t,n,e,C,M),wT(C,M,s),null!==M.contentQueries&&(n.flags|=8),(null!==M.hostBindings||null!==M.hostAttrs||0!==M.hostVars)&&(n.flags|=128);const F=M.type.prototype;!a&&(F.ngOnChanges||F.ngOnInit||F.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!p&&(F.ngOnChanges||F.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),p=!0),C++}!function(t,e){const r=e.directiveEnd,o=t.data,i=e.attrs,s=[];let a=null,p=null;for(let C=e.directiveStart;C<r;C++){const I=o[C],M=I.inputs,F=null===i||dm(e)?null:IT(M,i);s.push(F),a=Nm(M,C,a),p=Nm(I.outputs,C,p)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=p}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new Er("301",`Export of name '${e[o+1]}' not found!`);r.push(e[o],i)}}}(n,r,s)}n.mergedAttrs=nc(n.mergedAttrs,n.attrs)}(e,n,C,oo(a,s)),null!==C.attrs&&Tc(C,C.attrs,!1),null!==C.mergedAttrs&&Tc(C,C.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,C),C}(s,i,o,0,e,n,r):i.data[s];_r(C,!0);const I=C.mergedAttrs;null!==I&&tc(a,p,I);const M=C.classes;null!==M&&nd(a,p,M);const F=C.styles;null!==F&&cm(a,p,F),64!=(64&C.flags)&&Ec(i,o,p,C),0===Ye.lFrame.elementDepthCount&&on(p,o),Ye.lFrame.elementDepthCount++,qa(C)&&(function(t,e,n){!jp()||(function(t,e,n,r){const o=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||bs(n,e),on(r,e);const s=n.initialInputs;for(let a=o;a<i;a++){const p=t.data[a],C=nr(p);C&&DT(e,n,p);const I=Ss(e,t,a,n);on(I,e),null!==s&&TT(0,a-o,I,p,0,s),C&&(Rn(n.index,e)[8]=I)}}(t,e,n,Gn(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,o=n.directiveEnd,s=n.index,a=Ye.lFrame.currentDirectiveIndex;try{io(s);for(let p=r;p<o;p++){const C=t.data[p],I=e[p];vl(p),(null!==C.hostBindings||0!==C.hostVars||null!==C.hostAttrs)&&Pm(C,I)}}finally{io(-1),vl(a)}}(t,e,n))}(i,o,C),function(t,e,n){if(cl(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,n[i],i)}}}(i,C,o)),null!==r&&function(t,e,n=Gn){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}(o,C)}function _t(){let t=$t();ml()?Ye.lFrame.isParent=!1:(t=t.parent,_r(t,!1));const e=t;Ye.lFrame.elementDepthCount--;const n=ht();n.firstCreatePass&&(Xa(n,t),cl(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Fd(n,e,me(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Fd(n,e,me(),e.stylesWithoutHost,!1)}function Fn(t,e,n,r){Ct(t,e,n,r),_t()}function $s(t){return!!t&&"function"==typeof t.then}const Rc=function(t){return!!t&&"function"==typeof t.subscribe};function bn(t,e,n,r){const o=me(),i=ht(),s=$t();return function(t,e,n,r,o,i,s,a){const p=qa(r),I=t.firstCreatePass&&jm(t),M=e[8],F=Bm(e);let k=!0;if(3&r.type||a){const X=Gn(r,e),de=a?a(X):X,ue=F.length,Ie=a?Ve=>a(Lt(Ve[r.index])):r.index;if(Mt(n)){let Ve=null;if(!a&&p&&(Ve=function(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[7],p=o[i+2];return a.length>p?a[p]:null}"string"==typeof s&&(i+=2)}return null}(t,e,o,r.index)),null!==Ve)(Ve.__ngLastListenerFn__||Ve).__ngNextListenerFn__=i,Ve.__ngLastListenerFn__=i,k=!1;else{i=kd(r,e,M,i,!1);const at=n.listen(de,o,i);F.push(i,at),I&&I.push(o,Ie,ue,ue+1)}}else i=kd(r,e,M,i,!0),de.addEventListener(o,i,s),F.push(i),I&&I.push(o,Ie,ue,s)}else i=kd(r,e,M,i,!1);const $=r.outputs;let oe;if(k&&null!==$&&(oe=$[o])){const X=oe.length;if(X)for(let de=0;de<X;de+=2){const Qt=e[oe[de]][oe[de+1]].subscribe(i),Zn=F.length;F.push(i,Qt),I&&I.push(o,r.index,Zn,-(Zn+1))}}}(i,o,o[11],s,t,e,!!n,r),bn}function By(t,e,n,r){try{return!1!==n(r)}catch(o){return Gm(t,o),!1}}function kd(t,e,n,r,o){return function i(s){if(s===Function)return r;const a=2&t.flags?Rn(t.index,e):e;0==(32&e[2])&&vd(a);let p=By(e,0,r,s),C=i.__ngNextListenerFn__;for(;C;)p=By(e,0,C,s)&&p,C=C.__ngNextListenerFn__;return o&&!1===p&&(s.preventDefault(),s.returnValue=!1),p}}function ur(t,e=""){const n=me(),r=ht(),o=t+20,i=r.firstCreatePass?wi(r,o,1,e,null):r.data[o],s=n[o]=function(t,e){return Mt(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ec(r,n,s,i),_r(i,!1)}function Bd(t,e,n){const r=me();return sn(r,ui(),e)&&function(t,e,n,r,o,i,s,a){const p=Gn(e,n);let I,C=e.inputs;!a&&null!=C&&(I=C[r])?(Wm(t,n,I,r,o),$a(e)&&function(t,e){const n=Rn(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,e.value||"",r):o,Mt(i)?i.setProperty(p,r,o):Sl(r)||(p.setProperty?p.setProperty(r,o):p[r]=o))}(ht(),Ot(),r,t,e,r[11],n,!0),Bd}const Vo=void 0;var LA=["en",[["a","p"],["AM","PM"],Vo],[["AM","PM"],Vo,Vo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Vo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Vo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Vo,"{1} 'at' {0}",Vo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Hi={};function Rv(t){return t in Hi||(Hi[t]=gt.ng&&gt.ng.common&&gt.ng.common.locales&&gt.ng.common.locales[t]),Hi[t]}var Ae=(()=>((Ae=Ae||{})[Ae.LocaleId=0]="LocaleId",Ae[Ae.DayPeriodsFormat=1]="DayPeriodsFormat",Ae[Ae.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ae[Ae.DaysFormat=3]="DaysFormat",Ae[Ae.DaysStandalone=4]="DaysStandalone",Ae[Ae.MonthsFormat=5]="MonthsFormat",Ae[Ae.MonthsStandalone=6]="MonthsStandalone",Ae[Ae.Eras=7]="Eras",Ae[Ae.FirstDayOfWeek=8]="FirstDayOfWeek",Ae[Ae.WeekendRange=9]="WeekendRange",Ae[Ae.DateFormat=10]="DateFormat",Ae[Ae.TimeFormat=11]="TimeFormat",Ae[Ae.DateTimeFormat=12]="DateTimeFormat",Ae[Ae.NumberSymbols=13]="NumberSymbols",Ae[Ae.NumberFormats=14]="NumberFormats",Ae[Ae.CurrencyCode=15]="CurrencyCode",Ae[Ae.CurrencySymbol=16]="CurrencySymbol",Ae[Ae.CurrencyName=17]="CurrencyName",Ae[Ae.Currencies=18]="Currencies",Ae[Ae.Directionality=19]="Directionality",Ae[Ae.PluralCase=20]="PluralCase",Ae[Ae.ExtraData=21]="ExtraData",Ae))();const Oc="en-US";let Nv=Oc;function jd(t){In(t,"Expected localeId to be defined"),"string"==typeof t&&(Nv=t.toLowerCase().replace(/_/g,"-"))}class nE{}const oE="ngComponent";class Lx{resolveComponentFactory(e){throw function(t){const e=Error(`No component factory found for ${Oe(t)}. Did you add it to @NgModule.entryComponents?`);return e[oE]=t,e}(e)}}let Uo=(()=>{class t{}return t.NULL=new Lx,t})();function Vc(...t){}function Wi(t,e){return new Xt(Gn(t,e))}const Bx=function(){return Wi($t(),me())};let Xt=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=Bx,t})();function iE(t){return t instanceof Xt?t.nativeElement:t}class Uc{}let Mr=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Hx(),t})();const Hx=function(){const t=me(),n=Rn($t().index,t);return function(t){return t[11]}(Cr(n)?n:t)};let Yd=(()=>{class t{}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:()=>null}),t})();class Js{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const sE=new Js("12.2.7");class aE{constructor(){}supports(e){return Gs(e)}create(e){return new qx(e)}}const $x=(t,e)=>e;class qx{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||$x}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<uE(r,o,i)?n:r,a=uE(s,o,i),p=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const C=a-o,I=p-o;if(C!=I){for(let F=0;F<C;F++){const k=F<i.length?i[F]:i[F]=0,$=k+F;I<=$&&$<C&&(i[F]=k+1)}i[s.previousIndex]=I-C}}a!==p&&e(s,a,p)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Gs(e))throw new Error(`Error trying to diff '${Oe(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Ri()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new zx(n,r),i,o),e}_verifyReinsertion(e,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const o=null===n?this._itHead:n._next;return e._next=o,e._prev=n,null===o?this._itTail=e:o._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new cE),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new cE),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class zx{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Kx{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class cE{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new Kx,this.map.set(n,r)),r.add(e)}get(e,n){const o=this.map.get(e);return o?o.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function uE(t,e,n){const r=t.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}class lE{constructor(){}supports(e){return e instanceof Map||Rd(e)}create(){return new Yx}}class Yx{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Rd(e)))throw new Error(`Error trying to diff '${Oe(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(o,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,n);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new Qx(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class Qx{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dE(){return new Xs([new aE])}let Xs=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||dE()),deps:[[t,new co,new _n]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new Error(`Cannot find a differ supporting object '${n}' of type '${function(t){return t.name||typeof t}(n)}'`)}}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:dE}),t})();function fE(){return new $i([new lE])}let $i=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||fE()),deps:[[t,new co,new _n]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(r)return r;throw new Error(`Cannot find a differ supporting object '${n}'`)}}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:fE}),t})();function Bc(t,e,n,r,o=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Lt(i)),tr(i))for(let a=10;a<i.length;a++){const p=i[a],C=p[1].firstChild;null!==C&&Bc(p[1],p,C,r)}const s=n.type;if(8&s)Bc(t,e,n.child,r);else if(32&s){const a=ql(n,e);let p;for(;p=a();)r.push(p)}else if(16&s){const a=im(e,n);if(Array.isArray(a))r.push(...a);else{const p=ks(e[16]);Bc(p[1],p,a,r,!0)}}n=o?n.projectionNext:n.next}return r}class Zs{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Bc(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(tr(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(Jl(e,r),Mo(n,r))}this._attachedToViewContainer=!1}Qg(this._lView[1],this._lView)}onDestroy(e){Rm(this._lView[1],this._lView,null,e)}markForCheck(){vd(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Cd(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Ya(!0);try{Cd(t,e,n)}finally{Ya(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function(t,e){Ls(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Xx extends Zs{constructor(e){super(e),this._view=e}detectChanges(){Um(this._view)}checkNoChanges(){!function(t){Ya(!0);try{Um(t)}finally{Ya(!1)}}(this._view)}get context(){return null}}const eR=function(t){return function(t,e,n){if($a(t)&&!n){const r=Rn(t.index,e);return new Zs(r,r)}return 47&t.type?new Zs(e[16],e):null}($t(),me(),16==(16&t))};let Qd=(()=>{class t{}return t.__NG_ELEMENT_ID__=eR,t})();const rR=[new lE],iR=new Xs([new aE]),sR=new $i(rR),cR=function(){return jc($t(),me())};let zr=(()=>{class t{}return t.__NG_ELEMENT_ID__=cR,t})();const uR=zr,lR=class extends uR{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e){const n=this._declarationTContainer.tViews,r=Vs(this._declarationLView,n,e,16,null,n.declTNode,null,null,null,null);r[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(r[19]=i.createEmbeddedView(n)),Us(n,r,e),new Zs(r)}};function jc(t,e){return 4&t.type?new lR(e,t,Wi(t,e)):null}class Or{}class hE{}const hR=function(){return mE($t(),me())};let lr=(()=>{class t{}return t.__NG_ELEMENT_ID__=hR,t})();const gR=lr,pE=class extends gR{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Wi(this._hostTNode,this._hostLView)}get injector(){return new fi(this._hostTNode,this._hostLView)}get parentInjector(){const e=oc(this._hostTNode,this._hostLView);if(eg(e)){const n=di(e,this._hostLView),r=li(e);return new fi(n[1].data[r+8],n)}return new fi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=gE(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){const o=e.createEmbeddedView(n||{});return this.insert(o,r),o}createComponent(e,n,r,o,i){const s=r||this.parentInjector;if(!i&&null==e.ngModule&&s){const p=s.get(Or,null);p&&(i=p)}const a=e.create(s,o,void 0,i);return this.insert(a.hostView,n),a}insert(e,n){const r=e._lView,o=r[1];if(function(t){return tr(t[3])}(r)){const I=this.indexOf(e);if(-1!==I)this.detach(I);else{const M=r[3],F=new pE(M,M[6],M[3]);F.detach(F.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;!function(t,e,n,r){const o=10+r,i=n.length;r>0&&(n[o-1][4]=e),r<i-10?(e[4]=n[o],uc(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(o,r,s,i);const a=ed(i,s),p=r[11],C=vc(p,s[7]);return null!==C&&function(t,e,n,r,o,i){r[0]=o,r[6]=e,Ls(t,r,n,1,o,i)}(o,s[6],p,r,C,a),e.attachToViewContainerRef(),uc(Jd(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=gE(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=Jl(this._lContainer,n);r&&(Mo(Jd(this._lContainer),n),Qg(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=Jl(this._lContainer,n);return r&&null!=Mo(Jd(this._lContainer),n)?new Zs(r):null}_adjustIndex(e,n=0){return null==e?this.length+n:e}};function gE(t){return t[8]}function Jd(t){return t[8]||(t[8]=[])}function mE(t,e){let n;const r=e[t.index];if(tr(r))n=r;else{let o;if(8&t.type)o=Lt(r);else{const i=e[11];o=i.createComment("");const s=Gn(t,e);ko(i,vc(i,s),o,function(t,e){return Mt(t)?t.nextSibling(e):e.nextSibling}(i,s),!1)}e[t.index]=n=function(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}(r,e,o,t),Dc(e,n)}return new pE(n,t,e)}const Yi={};class kE extends Uo{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=dn(e);return new VE(n,this.ngModule)}}function LE(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const dN=new st("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Hg});class VE extends nE{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function(t){return t.map(JD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return LE(this.componentDef.inputs)}get outputs(){return LE(this.componentDef.outputs)}create(e,n,r,o){const i=(o=o||this.ngModule)?function(t,e){return{get:(n,r,o)=>{const i=t.get(n,Yi,o);return i!==Yi||r===Yi?i:e.get(n,r,o)}}}(e,o.injector):e,s=i.get(Uc,Vp),a=i.get(Yd,null),p=s.createRenderer(null,this.componentDef),C=this.componentDef.selectors[0][0]||"div",I=r?function(t,e,n){if(Mt(t))return t.selectRootElement(e,n===Wt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(p,r,this.componentDef.encapsulation):Ql(s.createRenderer(null,this.componentDef),C,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(C)),M=this.componentDef.onPush?576:528,F=function(t,e){return{components:[],scheduler:t||Hg,clean:kT,playerHandler:e||null,flags:0}}(),k=wc(0,null,null,1,0,null,null,null,null,null),$=Vs(null,k,F,M,null,null,s,p,a,i);let oe,X;Qa($);try{const de=function(t,e,n,r,o,i){const s=n[1];n[20]=t;const p=wi(s,20,2,"#host",null),C=p.mergedAttrs=e.hostAttrs;null!==C&&(Tc(p,C,!0),null!==t&&(tc(o,t,C),null!==p.classes&&nd(o,t,p.classes),null!==p.styles&&cm(o,t,p.styles)));const I=r.createRenderer(t,e),M=Vs(n,Im(e),null,e.onPush?64:16,n[20],p,r,I,i||null,null);return s.firstCreatePass&&(ic(bs(p,n),s,e.type),Fm(s,p),km(p,n.length,1)),Dc(n,M),n[20]=M}(I,this.componentDef,$,s,p);if(I)if(r)tc(p,I,["ng-version",sE.full]);else{const{attrs:ue,classes:Ie}=function(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!rr(o))break;o=i}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);ue&&tc(p,I,ue),Ie&&Ie.length>0&&nd(p,I,Ie.join(" "))}if(X=hl(k,20),void 0!==n){const ue=X.projection=[];for(let Ie=0;Ie<this.ngContentSelectors.length;Ie++){const Ve=n[Ie];ue.push(null!=Ve?Array.from(Ve):null)}}oe=function(t,e,n,r,o){const i=n[1],s=function(t,e,n){const r=$t();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Lm(t,r,e,Di(t,e,1,null),n));const o=Ss(e,t,r.directiveStart,r);on(o,e);const i=Gn(r,e);return i&&on(i,e),o}(i,n,e);if(r.components.push(s),t[8]=s,o&&o.forEach(p=>p(s,e)),e.contentQueries){const p=$t();e.contentQueries(1,s,p.directiveStart)}const a=$t();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(io(a.index),Om(n[1],a,0,a.directiveStart,a.directiveEnd,e),Pm(e,s)),s}(de,this.componentDef,$,F,[cI]),Us(k,$,null)}finally{Ja()}return new pN(this.componentType,oe,Wi(X,$),$,X)}}class pN extends class{}{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new Xx(o),this.componentType=e}get injector(){return new fi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const Qi=new Map;class yN extends Or{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new kE(this);const r=Bn(e),o=function(t){return t[fS]||null}(e);o&&jd(o),this._bootstrapComponents=Tr(r.bootstrap),this._r3Injector=zm(e,n,[{provide:Or,useValue:this},{provide:Uo,useValue:this.componentFactoryResolver}],Oe(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,n=mt.THROW_IF_NOT_FOUND,r=je.Default){return e===mt||e===Or||e===Ii?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class df extends hE{constructor(e){super(),this.moduleType=e,null!==Bn(e)&&function(t){const e=new Set;!function n(r){const o=Bn(r,!0),i=o.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${Oe(e)} vs ${Oe(e.name)}`)}(i,Qi.get(i),r),Qi.set(i,r));const s=Tr(o.imports);for(const a of s)e.has(a)||(e.add(a),n(a))}(t)}(e)}create(e){return new yN(this.moduleType,e)}}function ff(t){return e=>{setTimeout(t,void 0,e)}}const Kt=class extends se{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){var o,i,s;let a=e,p=n||(()=>null),C=r;if(e&&"object"==typeof e){const M=e;a=null===(o=M.next)||void 0===o?void 0:o.bind(M),p=null===(i=M.error)||void 0===i?void 0:i.bind(M),C=null===(s=M.complete)||void 0===s?void 0:s.bind(M)}this.__isAsync&&(p=ff(p),a&&(a=ff(a)),C&&(C=ff(C)));const I=super.subscribe({next:a,error:p,complete:C});return e instanceof c&&e.add(I),I}};function kN(){return this._results[Ri()]()}class qc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ri(),r=qc.prototype;r[n]||(r[n]=kN)}get changes(){return this._changes||(this._changes=new Kt)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,n){return this._results.reduce(e,n)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,n){const r=this;r.dirty=!1;const o=$n(e);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let o=t[r],i=e[r];if(n&&(o=n(o),i=n(i)),i!==o)return!1}return!0}(r._results,o,n))&&(r._results=o,r.length=o.length,r.last=o[this.length-1],r.first=o[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class hf{constructor(e){this.queryList=e,this.matches=null}clone(){return new hf(this.queryList)}setDirty(){this.queryList.setDirty()}}class pf{constructor(e=[]){this.queries=e}createEmbeddedView(e){const n=e.queries;if(null!==n){const r=null!==e.contentQueries?e.contentQueries[0]:n.length,o=[];for(let i=0;i<r;i++){const s=n.getByIndex(i);o.push(this.queries[s.indexInDeclarationView].clone())}return new pf(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let n=0;n<this.queries.length;n++)null!==JE(e,n).matches&&this.queries[n].setDirty()}}class qE{constructor(e,n,r=null){this.predicate=e,this.flags=n,this.read=r}}class gf{constructor(e=[]){this.queries=e}elementStart(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].elementStart(e,n)}elementEnd(e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(e)}embeddedTView(e){let n=null;for(let r=0;r<this.length;r++){const o=null!==n?n.length:0,i=this.getByIndex(r).embeddedTView(e,o);i&&(i.indexInDeclarationView=r,null!==n?n.push(i):n=[i])}return null!==n?new gf(n):null}template(e,n){for(let r=0;r<this.queries.length;r++)this.queries[r].template(e,n)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class mf{constructor(e,n=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(e,n){this.isApplyingToNode(n)&&this.matchTNode(e,n)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,n){this.elementStart(e,n)}embeddedTView(e,n){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,n),new mf(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let r=e.parent;for(;null!==r&&8&r.type&&r.index!==n;)r=r.parent;return n===(null!==r?r.index:-1)}return this._appliesToNextNode}matchTNode(e,n){const r=this.metadata.predicate;if(Array.isArray(r))for(let o=0;o<r.length;o++){const i=r[o];this.matchTNodeWithReadOption(e,n,UN(n,i)),this.matchTNodeWithReadOption(e,n,sc(n,e,i,!1,!1))}else r===zr?4&n.type&&this.matchTNodeWithReadOption(e,n,-1):this.matchTNodeWithReadOption(e,n,sc(n,e,r,!1,!1))}matchTNodeWithReadOption(e,n,r){if(null!==r){const o=this.metadata.read;if(null!==o)if(o===Xt||o===lr||o===zr&&4&n.type)this.addMatch(n.index,-2);else{const i=sc(n,e,o,!1,!1);null!==i&&this.addMatch(n.index,i)}else this.addMatch(n.index,r)}}addMatch(e,n){null===this.matches?this.matches=[e,n]:this.matches.push(e,n)}}function UN(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function jN(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Wi(t,e):4&t.type?jc(t,e):null}(e,t):-2===n?function(t,e,n){return n===Xt?Wi(e,t):n===zr?jc(e,t):n===lr?mE(e,t):void 0}(t,e,r):Ss(t,t[1],n,e)}function zE(t,e,n,r){const o=e[19].queries[r];if(null===o.matches){const i=t.data,s=n.matches,a=[];for(let p=0;p<s.length;p+=2){const C=s[p];a.push(C<0?null:jN(e,i[C],s[p+1],n.metadata.read))}o.matches=a}return o.matches}function yf(t,e,n,r){const o=t.queries.getByIndex(n),i=o.matches;if(null!==i){const s=zE(t,e,o,n);for(let a=0;a<i.length;a+=2){const p=i[a];if(p>0)r.push(s[a/2]);else{const C=i[a+1],I=e[-p];for(let M=10;M<I.length;M++){const F=I[M];F[17]===F[3]&&yf(F[1],F,C,r)}if(null!==I[9]){const M=I[9];for(let F=0;F<M.length;F++){const k=M[F];yf(k[1],k,C,r)}}}}}return r}function zc(t){const e=me(),n=ht(),r=$p();Cl(r+1);const o=JE(n,r);if(t.dirty&&Up(e)===(2==(2&o.metadata.flags))){if(null===o.matches)t.reset([]);else{const i=o.crossesNgTemplate?yf(n,e,r,[]):zE(n,e,o,r);t.reset(i,iE),t.notifyOnChanges()}return!0}return!1}function KE(t,e,n){const r=ht();r.firstCreatePass&&(function(t,e,n){null===t.queries&&(t.queries=new gf),t.queries.track(new mf(e,n))}(r,new qE(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),function(t,e,n){const r=new qc(4==(4&n));Rm(t,e,r,r.destroy),null===e[19]&&(e[19]=new pf),e[19].queries.push(new hf(r))}(r,me(),e)}function JE(t,e){return t.queries.getByIndex(e)}const da=new st("Application Initializer");let Xi=(()=>{class t{constructor(n){this.appInits=n,this.resolve=Vc,this.reject=Vc,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if($s(i))n.push(i);else if(Rc(i)){const s=new Promise((a,p)=>{i.subscribe({complete:a,error:p})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(De(da,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const fa=new st("AppId"),vM={provide:fa,useFactory:function(){return`${wf()}${wf()}${wf()}`},deps:[]};function wf(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const gC=new st("Platform Initializer"),Jc=new st("Platform ID"),mC=new st("appBootstrapListener");let Xc=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const ho=new st("LocaleId"),yC=new st("DefaultCurrencyCode");class CM{constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}const Df=function(t){return new df(t)},_M=Df,bM=function(t){return Promise.resolve(Df(t))},vC=function(t){const e=Df(t),r=Tr(Bn(t).declarations).reduce((o,i)=>{const s=dn(i);return s&&o.push(new VE(s)),o},[]);return new CM(e,r)},SM=vC,wM=function(t){return Promise.resolve(vC(t))};let Ho=(()=>{class t{constructor(){this.compileModuleSync=_M,this.compileModuleAsync=bM,this.compileModuleAndAllComponentsSync=SM,this.compileModuleAndAllComponentsAsync=wM}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const IM=(()=>Promise.resolve(0))();function Tf(t){"undefined"==typeof Zone?IM.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Vt{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kt(!1),this.onMicrotaskEmpty=new Kt(!1),this.onStable=new Kt(!1),this.onError=new Kt(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function(){let t=gt.requestAnimationFrame,e=gt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(gt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Af(t),t.isCheckStableRunning=!0,If(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Af(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{try{return EC(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),CC(t)}},onInvoke:(n,r,o,i,s,a,p)=>{try{return EC(t),n.invoke(o,i,s,a,p)}finally{t.shouldCoalesceRunChangeDetection&&e(),CC(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Af(t),If(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Vt.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Vt.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,xM,Vc,Vc);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const xM={};function If(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Af(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function EC(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function CC(t){t._nesting--,If(t)}class MM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kt,this.onMicrotaskEmpty=new Kt,this.onStable=new Kt,this.onError=new Kt}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}let xf=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Vt.assertNotInAngularZone(),Tf(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Tf(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,r,o){return[]}}return t.\u0275fac=function(n){return new(n||t)(De(Vt))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),_C=(()=>{class t{constructor(){this._applications=new Map,Rf.addToWindow(this)}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return Rf.findTestabilityInTree(this,n,r)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class OM{addToWindow(e){}findTestabilityInTree(e,n,r){return null}}let Rf=new OM,bC=!0,SC=!1;let hr;const DC=new st("AllowMultipleToken");class Nf{constructor(e,n){this.name=e,this.token=n}}function TC(t,e,n=[]){const r=`Platform: ${e}`,o=new st(r);return(i=[])=>{let s=IC();if(!s||s.injector.get(DC,!1))if(t)t(n.concat(i).concat({provide:o,useValue:!0}));else{const a=n.concat(i).concat({provide:o,useValue:!0},{provide:Bs,useValue:"platform"});!function(t){if(hr&&!hr.destroyed&&!hr.injector.get(DC,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");hr=t.get(AC);const e=t.get(gC,null);e&&e.forEach(n=>n())}(mt.create({providers:a,name:r}))}return function(t){const e=IC();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(o)}}function IC(){return hr&&!hr.destroyed?hr:null}let AC=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const a=function(t,e){let n;return n="noop"===t?new MM:("zone.js"===t?void 0:t)||new Vt({enableLongStackTrace:(SC=!0,bC),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(r?r.ngZone:void 0,{ngZoneEventCoalescing:r&&r.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:r&&r.ngZoneRunCoalescing||!1}),p=[{provide:Vt,useValue:a}];return a.run(()=>{const C=mt.create({providers:p,parent:this.injector,name:n.moduleType.name}),I=n.create(C),M=I.injector.get(Fo,null);if(!M)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return a.runOutsideAngular(()=>{const F=a.onError.subscribe({next:k=>{M.handleError(k)}});I.onDestroy(()=>{Mf(this._modules,I),F.unsubscribe()})}),function(t,e,n){try{const r=n();return $s(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(M,a,()=>{const F=I.injector.get(Xi);return F.runInitializers(),F.donePromise.then(()=>(jd(I.injector.get(ho,Oc)||Oc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(n,r=[]){const o=xC({},r);return function(t,e,n){const r=new df(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(Zi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new Error(`The module ${Oe(n.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(De(mt))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function xC(t,e){return Array.isArray(e)?e.reduce(xC,t):Object.assign(Object.assign({},t),e)}let Zi=(()=>{class t{constructor(n,r,o,i,s){this._zone=n,this._injector=r,this._exceptionHandler=o,this._componentFactoryResolver=i,this._initStatus=s,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const a=new R(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),p=new R(C=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{Vt.assertNotInAngularZone(),Tf(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{Vt.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{I.unsubscribe(),M.unsubscribe()}});this.isStable=function(...t){let e=Number.POSITIVE_INFINITY,n=null,r=t[t.length-1];return pe(r)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof r&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof R?t[0]:A(e)(x(t,n))}(a,p.pipe(t=>re()(function(t,e){return function(r){let o;o="function"==typeof t?t:function(){return t};const i=Object.create(r,W);return i.source=r,i.subjectFactory=o,i}}(pt)(t))))}bootstrap(n,r){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let o;o=n instanceof nE?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(o.componentType);const i=function(t){return t.isBoundToModule}(o)?void 0:this._injector.get(Or),a=o.create(mt.NULL,[],r||o.selector,i),p=a.location.nativeElement,C=a.injector.get(xf,null),I=C&&a.injector.get(_C);return C&&I&&I.registerApplication(p,C),a.onDestroy(()=>{this.detachView(a.hostView),Mf(this.components,a),I&&I.unregisterApplication(p)}),this._loadComponent(a),a}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Mf(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(mC,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(De(Vt),De(mt),De(Fo),De(Uo),De(Xi))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function Mf(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class eu{}class KM{}const YM={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let QM=(()=>{class t{constructor(n,r){this._compiler=n,this._config=r||YM}load(n){return this.loadAndCompile(n)}loadAndCompile(n){let[r,o]=n.split("#");return void 0===o&&(o="default"),eo(255)(r).then(i=>i[o]).then(i=>OC(i,r,o)).then(i=>this._compiler.compileModuleAsync(i))}loadFactory(n){let[r,o]=n.split("#"),i="NgFactory";return void 0===o&&(o="default",i=""),eo(255)(this._config.factoryPathPrefix+r+this._config.factoryPathSuffix).then(s=>s[o+i]).then(s=>OC(s,r,o))}}return t.\u0275fac=function(n){return new(n||t)(De(Ho),De(KM,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function OC(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const sO=TC(null,"core",[{provide:Jc,useValue:"unknown"},{provide:AC,deps:[mt]},{provide:_C,deps:[]},{provide:Xc,deps:[]}]),dO=[{provide:Zi,useClass:Zi,deps:[Vt,mt,Fo,Uo,Xi]},{provide:dN,deps:[Vt],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(n){e.push(n)}}},{provide:Xi,useClass:Xi,deps:[[new _n,da]]},{provide:Ho,useClass:Ho,deps:[]},vM,{provide:Xs,useFactory:function(){return iR},deps:[]},{provide:$i,useFactory:function(){return sR},deps:[]},{provide:ho,useFactory:function(t){return jd(t=t||"undefined"!=typeof $localize&&$localize.locale||Oc),t},deps:[[new Ei(ho),new _n,new co]]},{provide:yC,useValue:"USD"}];let hO=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(De(Zi))},t.\u0275mod=An({type:t}),t.\u0275inj=ln({providers:dO}),t})(),lu=null;function Pr(){return lu}const Ut=new st("DocumentToken");let $o=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({factory:f1,token:t,providedIn:"platform"}),t})();function f1(){return De(r_)}const h1=new st("Location Initialized");let r_=(()=>{class t extends $o{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Pr().getBaseHref(this._doc)}onPopState(n){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Pr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,r,o){o_()?this._history.pushState(n,r,o):this.location.hash=o}replaceState(n,r,o){o_()?this._history.replaceState(n,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(De(Ut))},t.\u0275prov=Ke({factory:p1,token:t,providedIn:"platform"}),t})();function o_(){return!!window.history.pushState}function p1(){return new r_(De(Ut))}function zf(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function i_(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Yr(t){return t&&"?"!==t[0]?"?"+t:t}let ns=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({factory:g1,token:t,providedIn:"root"}),t})();function g1(t){const e=De(Ut).location;return new s_(De($o),e&&e.origin||"")}const Kf=new st("appBaseHref");let s_=(()=>{class t extends ns{constructor(n,r){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return zf(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Yr(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Yr(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Yr(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(De($o),De(Kf,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),m1=(()=>{class t extends ns{constructor(n,r){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=zf(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){let s=this.prepareExternalUrl(o+Yr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){let s=this.prepareExternalUrl(o+Yr(i));0==s.length&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformLocation).historyGo)||void 0===o||o.call(r,n)}}return t.\u0275fac=function(n){return new(n||t)(De($o),De(Kf,8))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),du=(()=>{class t{constructor(n,r){this._subject=new Kt,this._urlChangeListeners=[],this._platformStrategy=n;const o=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=i_(a_(o)),this._platformStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Yr(r))}normalize(n){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,a_(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._platformStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Yr(r)),o)}replaceState(n,r="",o=null){this._platformStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Yr(r)),o)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var r,o;null===(o=(r=this._platformStrategy).historyGo)||void 0===o||o.call(r,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r,complete:o})}}return t.\u0275fac=function(n){return new(n||t)(De(ns),De($o))},t.normalizeQueryParams=Yr,t.joinWithSlash=zf,t.stripTrailingSlash=i_,t.\u0275prov=Ke({factory:y1,token:t,providedIn:"root"}),t})();function y1(){return new du(De(ns),De($o))}function a_(t){return t.replace(/\/index.html$/,"")}var Bt=(()=>((Bt=Bt||{})[Bt.Zero=0]="Zero",Bt[Bt.One=1]="One",Bt[Bt.Two=2]="Two",Bt[Bt.Few=3]="Few",Bt[Bt.Many=4]="Many",Bt[Bt.Other=5]="Other",Bt))();const D1=function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=Rv(e);if(n)return n;const r=e.split("-")[0];if(n=Rv(r),n)return n;if("en"===r)return LA;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[Ae.PluralCase]};class _u{}let eP=(()=>{class t extends _u{constructor(n){super(),this.locale=n}getPluralCategory(n,r){switch(D1(r||this.locale)(n)){case Bt.Zero:return"zero";case Bt.One:return"one";case Bt.Two:return"two";case Bt.Few:return"few";case Bt.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(De(ho))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function m_(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}let OP=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({providers:[{provide:_u,useClass:eP}]}),t})();let b_=(()=>{class t{}return t.\u0275prov=Ke({token:t,providedIn:"root",factory:()=>new LP(De(Ut),window)}),t})();class LP{constructor(e,n){this.document=e,this.window=n,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const n=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=e)}}scrollToElement(e){const n=e.getBoundingClientRect(),r=n.left+this.window.pageXOffset,o=n.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=S_(this.window.history)||S_(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function S_(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class w_{}class ah extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function(t){lu||(lu=t)}(new ah)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=(Ea=Ea||document.querySelector("base"),Ea?Ea.getAttribute("href"):null);return null==n?null:function(t){bu=bu||document.createElement("a"),bu.setAttribute("href",t);const e=bu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){Ea=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return m_(document.cookie,e)}}let bu,Ea=null;const D_=new st("TRANSITION_ID"),GP=[{provide:da,useFactory:function(t,e,n){return()=>{n.get(Xi).donePromise.then(()=>{const r=Pr(),o=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[D_,Ut,mt],multi:!0}];class ch{static init(){!function(t){Rf=t}(new ch)}addToWindow(e){gt.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},gt.getAllAngularTestabilities=()=>e.getAllTestabilities(),gt.getAllAngularRootElements=()=>e.getAllRootElements(),gt.frameworkStabilizers||(gt.frameworkStabilizers=[]),gt.frameworkStabilizers.push(r=>{const o=gt.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(p){s=s||p,i--,0==i&&r(s)};o.forEach(function(p){p.whenStable(a)})})}findTestabilityInTree(e,n,r){if(null==n)return null;const o=e.getTestability(n);return null!=o?o:r?Pr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null}}let WP=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const Ca=new st("EventManagerPlugins");let wu=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}addGlobalEventListener(n,r,o){return this._findPluginFor(r).addGlobalEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(De(Ca),De(Vt))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class uh{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const o=Pr().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,r)}}let I_=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),_a=(()=>{class t extends I_{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,o){n.forEach(i=>{const s=this._doc.createElement("style");s.textContent=i,o.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(A_),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(n,o,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(A_))}}return t.\u0275fac=function(n){return new(n||t)(De(Ut))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function A_(t){Pr().remove(t)}const lh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},dh=/%COMP%/g;function Du(t,e,n){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Du(t,o,n):(o=o.replace(dh,t),n.push(o))}return n}function N_(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let fh=(()=>{class t{constructor(n,r,o){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new hh(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Wt.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new iF(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(n),o}case 1:case Wt.ShadowDom:return new sF(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const o=Du(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(De(wu),De(_a),De(fa))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class hh{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,n){return n?document.createElementNS(lh[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){e.appendChild(n)}insertBefore(e,n,r){e&&e.insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=lh[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=lh[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(On.DashCase|On.Important)?e.style.setProperty(n,r,o&On.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&On.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,N_(r)):this.eventManager.addEventListener(e,n,N_(r))}}class iF extends hh{constructor(e,n,r,o){super(e),this.component=r;const i=Du(o+"-"+r.id,r.styles,[]);n.addStyles(i),this.contentAttr=function(t){return"_ngcontent-%COMP%".replace(dh,t)}(o+"-"+r.id),this.hostAttr=function(t){return"_nghost-%COMP%".replace(dh,t)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class sF extends hh{constructor(e,n,r,o){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Du(o.id,o.styles,[]);for(let s=0;s<i.length;s++){const a=document.createElement("style");a.textContent=i[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let aF=(()=>{class t extends uh{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}}return t.\u0275fac=function(n){return new(n||t)(De(Ut))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const P_=["alt","control","meta","shift"],pF={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},F_={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},gF={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let mF=(()=>{class t extends uh{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Pr().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="";if(P_.forEach(p=>{const C=r.indexOf(p);C>-1&&(r.splice(C,1),s+=p+".")}),s+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=o,a.fullKey=s,a}static getEventFullKey(n){let r="",o=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&F_.hasOwnProperty(e)&&(e=F_[e]))}return pF[e]||e}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),P_.forEach(i=>{i!=o&&gF[i](n)&&(r+=i+".")}),r+=o,r}static eventCallback(n,r,o){return i=>{t.getEventFullKey(i)===n&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){switch(n){case"esc":return"escape";default:return n}}}return t.\u0275fac=function(n){return new(n||t)(De(Ut))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const wF=TC(sO,"browser",[{provide:Jc,useValue:"browser"},{provide:gC,useValue:function(){ah.makeCurrent(),ch.init()},multi:!0},{provide:Ut,useFactory:function(){return function(t){dl=t}(document),document},deps:[]}]),DF=[[],{provide:Bs,useValue:"root"},{provide:Fo,useFactory:function(){return new Fo},deps:[]},{provide:Ca,useClass:aF,multi:!0,deps:[Ut,Vt,Jc]},{provide:Ca,useClass:mF,multi:!0,deps:[Ut]},[],{provide:fh,useClass:fh,deps:[wu,_a,fa]},{provide:Uc,useExisting:fh},{provide:I_,useExisting:_a},{provide:_a,useClass:_a,deps:[Ut]},{provide:xf,useClass:xf,deps:[Vt]},{provide:wu,useClass:wu,deps:[Ca,Vt]},{provide:w_,useClass:WP,deps:[]},[]];let TF=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:fa,useValue:n.appId},{provide:D_,useExisting:fa},GP]}}}return t.\u0275fac=function(n){return new(n||t)(De(t,12))},t.\u0275mod=An({type:t}),t.\u0275inj=ln({providers:DF,imports:[OP,hO]}),t})();"undefined"!=typeof window&&window,eo(925);const PF=["ccpDiv"];let FF=(()=>{class t{constructor(n){this.document=n}ngAfterViewInit(){connect.core.initCCP(this.ccpDiv.nativeElement,{ccpUrl:"https://customer-support.my.connect.aws/ccp-v2/softphone",loginPopup:!0,loginPopupAutoClose:!0,loginOptions:{autoClose:!0,height:600,width:400,top:0,left:0},region:"us-east-1",softphone:{allowFramedSoftphone:!0,disableRingtone:!1,ringtoneUrl:"./ringtone.mp3"},pageOptions:{enableAudioDeviceSettings:!1,enablePhoneTypeSettings:!0}})}ngOnInit(){}goToLink(){this.document.location.href="https://customer-support.my.connect.aws/ccp-v2/softphone"}}return t.\u0275fac=function(n){return new(n||t)(ve(Ut))},t.\u0275cmp=Do({type:t,selectors:[["app-agent"]],viewQuery:function(n,r){if(1&n&&KE(PF,5),2&n){let o;zc(o=function(t,e){return t[19].queries[e].queryList}(me(),$p()))&&(r.ccpDiv=o.first)}},decls:6,vars:0,consts:[["type","button",3,"click"],["ccpDiv",""]],template:function(n,r){1&n&&(Ct(0,"button",0),bn("click",function(){return r.goToLink()}),ur(1,"Agent Login"),_t(),Ct(2,"iframe"),Ct(3,"div",null,1),ur(5," Softphone here"),_t(),_t())},styles:[""]}),t})(),kF=(()=>{class t{constructor(n,r){this._renderer2=n,this._document=r}ngOnInit(){let n=this._renderer2.createElement("script");n.type="text/javascript",n.text="\n    (function(w, d, x, id){\n      s=d.createElement('script');\n      s.src='https://dend6g4sigg57.cloudfront.net/amazon-connect-chat-interface-client.js';\n      s.async=1;\n      s.id=id;\n      d.getElementsByTagName('head')[0].appendChild(s);\n      w[x] =  w[x] || function() { (w[x].ac = w[x].ac || []).push(arguments) };\n    })(window, document, 'amazon_connect', 'c0f781fa-99fa-47d4-8cc6-0c9c0b6a8b26');\n    amazon_connect('styles', { openChat: { color: 'white', backgroundColor: '#123456'}, closeChat: { color: 'white', backgroundColor: '#123456'} });\n    amazon_connect('snippetId', 'QVFJREFIZ25JVzc0R0xQTVpWSlI0RjdyVlBselRRYnQzeW5TZEVnWGFmQnNNZ0lXbmdFNWNGYVZYQTlNVno5bW00ZngvSzV1QUFBQWJqQnNCZ2txaGtpRzl3MEJCd2FnWHpCZEFnRUFNRmdHQ1NxR1NJYjNEUUVIQVRBZUJnbGdoa2dCWlFNRUFTNHdFUVFNOHR4TDNxM2RzNk1sRGR6K0FnRVFnQ3RFMWw1NUhiYWlLNlNyL2FPRloyVEIxL0dic1pXdDlGdU4yVDZrNzJXTi9abnh3ZDltbjNKV0R1UXY6OnZNVUdqYUZQZGNTNHg3cTFlZDE2Y0lRaGZEcmF3Q1hrbHMwemlKTmFLOEJvV3hxZWZSYlhSemIxak5lMjFyYi8zUkdDbTJDYmdwZ2pCNlF6THYyQW90RFVLUndwZ0tFQzkxTllOVGM2QU9EUlc2NW5QYkVDa0JBYnBkSGpIenZhT3ZYNlZBVlFVaVE0OThzbER1MzBSYTBiQ1hEOUozTT0=');\n    ",this._renderer2.appendChild(this._document.body,n)}}return t.\u0275fac=function(n){return new(n||t)(ve(Mr),ve(Ut))},t.\u0275cmp=Do({type:t,selectors:[["app-customerservice"]],decls:10,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"]],template:function(n,r){1&n&&(Ct(0,"html",0),Ct(1,"head"),Fn(2,"meta",1),Fn(3,"meta",2),Fn(4,"meta",3),Ct(5,"title"),ur(6,"Document"),_t(),_t(),Ct(7,"body"),Ct(8,"h1"),ur(9,"This is the Customer Service Page"),_t(),_t(),_t())},styles:['h1[_ngcontent-%COMP%]{color:#000;font-family:"Poppins",sans-serif;font-size:250%;text-align:center}']}),t})(),LF=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Do({type:t,selectors:[["app-about"]],decls:2,vars:0,template:function(n,r){1&n&&(Ct(0,"h1"),ur(1,"This is the About Page"),_t())},styles:['h1[_ngcontent-%COMP%]{color:#000;font-family:"Poppins",sans-serif;font-size:250%;text-align:center}']}),t})();function tt(...t){let e=t[t.length-1];return pe(e)?(t.pop(),Se(t,e)):x(t)}class vr extends se{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return n&&!n.closed&&e.next(this._value),n}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new U;return this._value}next(e){super.next(this._value=e)}}class VF extends g{notifyNext(e,n,r,o,i){this.destination.next(n)}notifyError(e,n){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}class UF extends g{constructor(e,n,r){super(),this.parent=e,this.outerValue=n,this.outerIndex=r,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function BF(t,e,n,r,o=new UF(t,n,r)){if(!o.closed)return e instanceof R?e.subscribe(o):fe(e)(o)}const L_={};class HF{constructor(e){this.resultSelector=e}call(e,n){return n.subscribe(new GF(e,this.resultSelector))}}class GF extends VF{constructor(e,n){super(e),this.resultSelector=n,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(L_),this.observables.push(e)}_complete(){const e=this.observables,n=e.length;if(0===n)this.destination.complete();else{this.active=n,this.toRespond=n;for(let r=0;r<n;r++)this.add(BF(this,e[r],void 0,r))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,n,r){const o=this.values,s=this.toRespond?o[r]===L_?--this.toRespond:this.toRespond:0;o[r]=n,0===s&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))}_tryResultSelector(e){let n;try{n=this.resultSelector.apply(this,e)}catch(r){return void this.destination.error(r)}this.destination.next(n)}}const Tu=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function vh(...t){return A(1)(tt(...t))}const rs=new R(t=>t.complete());function Eh(t){return t?function(t){return new R(e=>t.schedule(()=>e.complete()))}(t):rs}function V_(t){return new R(e=>{let n;try{n=t()}catch(o){return void e.error(o)}return(n?ce(n):Eh()).subscribe(e)})}function mo(t,e){return"function"==typeof e?n=>n.pipe(mo((r,o)=>ce(t(r,o)).pipe(Q((i,s)=>e(r,i,o,s))))):n=>n.lift(new qF(t))}class qF{constructor(e){this.project=e}call(e,n){return n.subscribe(new zF(e,this.project))}}class zF extends Re{constructor(e,n){super(e),this.project=n,this.index=0}_next(e){let n;const r=this.index++;try{n=this.project(e,r)}catch(o){return void this.destination.error(o)}this._innerSub(n)}_innerSub(e){const n=this.innerSubscription;n&&n.unsubscribe();const r=new le(this),o=this.destination;o.add(r),this.innerSubscription=$e(e,r),this.innerSubscription!==r&&o.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;(!e||e.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}const U_=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Ch(t){return e=>0===t?Eh():e.lift(new KF(t))}class KF{constructor(e){if(this.total=e,this.total<0)throw new U_}call(e,n){return n.subscribe(new YF(e,this.total))}}class YF extends g{constructor(e,n){super(e),this.total=n,this.count=0}_next(e){const n=this.total,r=++this.count;r<=n&&(this.destination.next(e),r===n&&(this.destination.complete(),this.unsubscribe()))}}function B_(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(o){return o.lift(new JF(t,e,n))}}class JF{constructor(e,n,r=!1){this.accumulator=e,this.seed=n,this.hasSeed=r}call(e,n){return n.subscribe(new XF(e,this.accumulator,this.seed,this.hasSeed))}}class XF extends g{constructor(e,n,r,o){super(e),this.accumulator=n,this._seed=r,this.hasSeed=o,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const n=this.index++;let r;try{r=this.accumulator(this.seed,e,n)}catch(o){this.destination.error(o)}this.seed=r,this.destination.next(r)}}function qo(t,e){return function(r){return r.lift(new ZF(t,e))}}class ZF{constructor(e,n){this.predicate=e,this.thisArg=n}call(e,n){return n.subscribe(new ek(e,this.predicate,this.thisArg))}}class ek extends g{constructor(e,n,r){super(e),this.predicate=n,this.thisArg=r,this.count=0}_next(e){let n;try{n=this.predicate.call(this.thisArg,e,this.count++)}catch(r){return void this.destination.error(r)}n&&this.destination.next(e)}}function zo(t){return function(n){const r=new tk(t),o=n.lift(r);return r.caught=o}}class tk{constructor(e){this.selector=e}call(e,n){return n.subscribe(new nk(e,this.selector,this.caught))}}class nk extends Re{constructor(e,n,r){super(e),this.selector=n,this.caught=r}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(i){return void super.error(i)}this._unsubscribeAndRecycle();const r=new le(this);this.add(r);const o=$e(n,r);o!==r&&this.add(o)}}}function os(t,e){return ct(t,e,1)}function _h(t){return function(n){return 0===t?Eh():n.lift(new rk(t))}}class rk{constructor(e){if(this.total=e,this.total<0)throw new U_}call(e,n){return n.subscribe(new ok(e,this.total))}}class ok extends g{constructor(e,n){super(e),this.total=n,this.ring=new Array,this.count=0}_next(e){const n=this.ring,r=this.total,o=this.count++;n.length<r?n.push(e):n[o%r]=e}_complete(){const e=this.destination;let n=this.count;if(n>0){const r=this.count>=this.total?this.total:this.count,o=this.ring;for(let i=0;i<r;i++){const s=n++%r;e.next(o[s])}}e.complete()}}function j_(t=ak){return e=>e.lift(new ik(t))}class ik{constructor(e){this.errorFactory=e}call(e,n){return n.subscribe(new sk(e,this.errorFactory))}}class sk extends g{constructor(e,n){super(e),this.errorFactory=n,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(n){e=n}this.destination.error(e)}}}function ak(){return new Tu}function H_(t=null){return e=>e.lift(new ck(t))}class ck{constructor(e){this.defaultValue=e}call(e,n){return n.subscribe(new uk(e,this.defaultValue))}}class uk extends g{constructor(e,n){super(e),this.defaultValue=n,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function is(t,e){const n=arguments.length>=2;return r=>r.pipe(t?qo((o,i)=>t(o,i,r)):D,Ch(1),n?H_(e):j_(()=>new Tu))}function yo(){}function kn(t,e,n){return function(o){return o.lift(new dk(t,e,n))}}class dk{constructor(e,n,r){this.nextOrObserver=e,this.error=n,this.complete=r}call(e,n){return n.subscribe(new fk(e,this.nextOrObserver,this.error,this.complete))}}class fk extends g{constructor(e,n,r,o){super(e),this._tapNext=yo,this._tapError=yo,this._tapComplete=yo,this._tapError=r||yo,this._tapComplete=o||yo,Dn(n)?(this._context=this,this._tapNext=n):n&&(this._context=n,this._tapNext=n.next||yo,this._tapError=n.error||yo,this._tapComplete=n.complete||yo)}_next(e){try{this._tapNext.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(n){return void this.destination.error(n)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}class pk{constructor(e){this.callback=e}call(e,n){return n.subscribe(new gk(e,this.callback))}}class gk extends g{constructor(e,n){super(e),this.add(new c(n))}}class Jr{constructor(e,n){this.id=e,this.url=n}}class bh extends Jr{constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class ba extends Jr{constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class G_ extends Jr{constructor(e,n,r){super(e,n),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class mk extends Jr{constructor(e,n,r){super(e,n),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class yk extends Jr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class vk extends Jr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ek extends Jr{constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ck extends Jr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class _k extends Jr{constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class W_{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class $_{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bk{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Sk{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wk{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dk{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class q_{constructor(e,n,r){this.routerEvent=e,this.position=n,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const lt="primary";class Tk{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function ss(t){return new Tk(t)}const z_="ngNavigationCancelingError";function Sh(t){const e=Error("NavigationCancelingError: "+t);return e[z_]=!0,e}function Ak(t,e,n){const r=n.path.split("/");if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const o={};for(let i=0;i<r.length;i++){const s=r[i],a=t[i];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:t.slice(0,r.length),posParams:o}}function Fr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!K_(t[o],e[o]))return!1;return!0}function K_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function Y_(t){return Array.prototype.concat.apply([],t)}function Q_(t){return t.length>0?t[t.length-1]:null}function tn(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function kr(t){return Rc(t)?t:$s(t)?ce(Promise.resolve(t)):tt(t)}const Nk={exact:function Z_(t,e,n){if(!Yo(t.segments,e.segments)||!Iu(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!Z_(t.children[r],e.children[r],n))return!1;return!0},subset:eb},J_={exact:function(t,e){return Fr(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>K_(t[n],e[n]))},ignored:()=>!0};function X_(t,e,n){return Nk[n.paths](t.root,e.root,n.matrixParams)&&J_[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function eb(t,e,n){return tb(t,e,e.segments,n)}function tb(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!Yo(o,n)||e.hasChildren()||!Iu(o,n,r))}if(t.segments.length===n.length){if(!Yo(t.segments,n)||!Iu(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!eb(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(Yo(t.segments,o)&&Iu(t.segments,o,r)&&t.children[lt])&&tb(t.children[lt],e,i,r)}}function Iu(t,e,n){return e.every((r,o)=>J_[n](t[o].parameters,r.parameters))}class Ko{constructor(e,n,r){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return kk.serialize(this)}}class ft{constructor(e,n){this.segments=e,this.children=n,this.parent=null,tn(n,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Au(this)}}class Sa{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=ss(this.parameters)),this._parameterMap}toString(){return ib(this)}}function Yo(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}class wh{}class nb{parse(e){const n=new $k(e);return new Ko(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){return`${`/${wa(e.root,!0)}`}${function(t){const e=Object.keys(t).map(n=>{const r=t[n];return Array.isArray(r)?r.map(o=>`${xu(n)}=${xu(o)}`).join("&"):`${xu(n)}=${xu(r)}`}).filter(n=>!!n);return e.length?`?${e.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${function(t){return encodeURI(t)}(e.fragment)}`:""}`}}const kk=new nb;function Au(t){return t.segments.map(e=>ib(e)).join("/")}function wa(t,e){if(!t.hasChildren())return Au(t);if(e){const n=t.children[lt]?wa(t.children[lt],!1):"",r=[];return tn(t.children,(o,i)=>{i!==lt&&r.push(`${i}:${wa(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function(t,e){let n=[];return tn(t.children,(r,o)=>{o===lt&&(n=n.concat(e(r,o)))}),tn(t.children,(r,o)=>{o!==lt&&(n=n.concat(e(r,o)))}),n}(t,(r,o)=>o===lt?[wa(t.children[lt],!1)]:[`${o}:${wa(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[lt]?`${Au(t)}/${n[0]}`:`${Au(t)}/(${n.join("//")})`}}function rb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function xu(t){return rb(t).replace(/%3B/gi,";")}function Dh(t){return rb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ru(t){return decodeURIComponent(t)}function ob(t){return Ru(t.replace(/\+/g,"%20"))}function ib(t){return`${Dh(t.path)}${function(t){return Object.keys(t).map(e=>`;${Dh(e)}=${Dh(t[e])}`).join("")}(t.parameters)}`}const Bk=/^[^\/()?;=#]+/;function Nu(t){const e=t.match(Bk);return e?e[0]:""}const jk=/^[^=?&#]+/,Gk=/^[^?&#]+/;class $k{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ft([],{}):new ft([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[lt]=new ft(e,n)),r}parseSegment(){const e=Nu(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Sa(Ru(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=Nu(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=Nu(this.remaining);o&&(r=o,this.capture(r))}e[Ru(n)]=Ru(r)}parseQueryParam(e){const n=function(t){const e=t.match(jk);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function(t){const e=t.match(Gk);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=ob(n),i=ob(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Nu(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new Error(`Cannot parse url '${this.url}'`);let i;r.indexOf(":")>-1?(i=r.substr(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=lt);const s=this.parseChildren();n[i]=1===Object.keys(s).length?s[lt]:new ft([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class sb{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Th(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Th(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=Ih(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Ih(e,this._root).map(n=>n.value)}}function Th(t,e){if(t===e.value)return e;for(const n of e.children){const r=Th(t,n);if(r)return r}return null}function Ih(t,e){if(t===e.value)return[e];for(const n of e.children){const r=Ih(t,n);if(r.length)return r.unshift(e),r}return[]}class Xr{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function Da(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class ab extends sb{constructor(e,n){super(e),this.snapshot=n,Ah(this,e)}toString(){return this.snapshot.toString()}}function cb(t,e){const n=function(t,e){const s=new Mu([],{},{},"",{},lt,e,null,t.root,-1,{});return new lb("",new Xr(s,[]))}(t,e),r=new vr([new Sa("",{})]),o=new vr({}),i=new vr({}),s=new vr({}),a=new vr(""),p=new as(r,o,s,a,i,lt,e,n.root);return p.snapshot=n.root,new ab(new Xr(p,[]),n)}class as{constructor(e,n,r,o,i,s,a,p){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this._futureSnapshot=p}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Q(e=>ss(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Q(e=>ss(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ub(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const o=n[r],i=n[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(i.component)break;r--}}return function(t){return t.reduce((e,n)=>({params:Object.assign(Object.assign({},e.params),n.params),data:Object.assign(Object.assign({},e.data),n.data),resolve:Object.assign(Object.assign({},e.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Mu{constructor(e,n,r,o,i,s,a,p,C,I,M){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=p,this._urlSegment=C,this._lastPathIndex=I,this._resolve=M}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ss(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ss(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lb extends sb{constructor(e,n){super(n),this.url=e,Ah(this,n)}toString(){return db(this._root)}}function Ah(t,e){e.value._routerState=t,e.children.forEach(n=>Ah(t,n))}function db(t){const e=t.children.length>0?` { ${t.children.map(db).join(", ")} } `:"";return`${t.value}${e}`}function xh(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Fr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Fr(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Fr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Fr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Rh(t,e){return Fr(t.params,e.params)&&function(t,e){return Yo(t,e)&&t.every((n,r)=>Fr(n.parameters,e[r].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||Rh(t.parent,e.parent))}function Ou(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Ou(t,r,o);return Ou(t,r)})}(t,e,n);return new Xr(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return fb(e,s),s}}const r=function(t){return new as(new vr(t.url),new vr(t.params),new vr(t.queryParams),new vr(t.fragment),new vr(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>Ou(t,i));return new Xr(r,o)}}function fb(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)fb(t.children[n],e.children[n])}function Pu(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Ta(t){return"object"==typeof t&&null!=t&&t.outlets}function Nh(t,e,n,r,o){let i={};return r&&tn(r,(s,a)=>{i[a]=Array.isArray(s)?s.map(p=>`${p}`):`${s}`}),new Ko(n.root===t?e:hb(n.root,t,e),i,o)}function hb(t,e,n){const r={};return tn(t.children,(o,i)=>{r[i]=o===e?n:hb(o,e,n)}),new ft(t.segments,r)}class pb{constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Pu(r[0]))throw new Error("Root segment cannot have matrix parameters");const o=r.find(Ta);if(o&&o!==Q_(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mh{constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function gb(t,e,n){if(t||(t=new ft([],{})),0===t.segments.length&&t.hasChildren())return Fu(t,e,n);const r=function(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(Ta(a))break;const p=`${a}`,C=r<n.length-1?n[r+1]:null;if(o>0&&void 0===p)break;if(p&&C&&"object"==typeof C&&void 0===C.outlets){if(!yb(p,C,s))return i;r+=2}else{if(!yb(p,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new ft(t.segments.slice(0,r.pathIndex),{});return i.children[lt]=new ft(t.segments.slice(r.pathIndex),t.children),Fu(i,0,o)}return r.match&&0===o.length?new ft(t.segments,{}):r.match&&!t.hasChildren()?Oh(t,e,n):r.match?Fu(t,0,o):Oh(t,e,n)}function Fu(t,e,n){if(0===n.length)return new ft(t.segments,{});{const r=function(t){return Ta(t[0])?t[0].outlets:{[lt]:t}}(n),o={};return tn(r,(i,s)=>{"string"==typeof i&&(i=[i]),null!==i&&(o[s]=gb(t.children[s],e,i))}),tn(t.children,(i,s)=>{void 0===r[s]&&(o[s]=i)}),new ft(t.segments,o)}}function Oh(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(Ta(i)){const p=rL(i.outlets);return new ft(r,p)}if(0===o&&Pu(n[0])){r.push(new Sa(t.segments[e].path,mb(n[0]))),o++;continue}const s=Ta(i)?i.outlets[lt]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Pu(a)?(r.push(new Sa(s,mb(a))),o+=2):(r.push(new Sa(s,{})),o++)}return new ft(r,{})}function rL(t){const e={};return tn(t,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(e[r]=Oh(new ft([],{}),0,n))}),e}function mb(t){const e={};return tn(t,(n,r)=>e[r]=`${n}`),e}function yb(t,e,n){return t==n.path&&Fr(e,n.parameters)}class iL{constructor(e,n,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),xh(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=Da(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),tn(o,(i,s)=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet);if(r&&r.outlet){const o=r.outlet.detach(),i=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:i})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=Da(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,n,r){const o=Da(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Dk(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Sk(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(xh(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),vb(a.route)}else{const a=function(t){for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(o.snapshot),p=a?a.module.componentFactoryResolver:null;s.attachRef=null,s.route=o,s.resolver=p,s.outlet&&s.outlet.activateWith(o,p),this.activateChildRoutes(e,null,s.children)}}else this.activateChildRoutes(e,null,r)}}function vb(t){xh(t.value),t.children.forEach(vb)}class Ph{constructor(e,n){this.routes=e,this.module=n}}function vo(t){return"function"==typeof t}function Qo(t){return t instanceof Ko}const Ia=Symbol("INITIAL_VALUE");function Aa(){return mo(t=>function(...t){let e,n;return pe(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&w(t[0])&&(t=t[0]),x(t,n).lift(new HF(e))}(t.map(e=>e.pipe(Ch(1),function(...t){const e=t[t.length-1];return pe(e)?(t.pop(),n=>vh(t,n,e)):n=>vh(t,n)}(Ia)))).pipe(B_((e,n)=>{let r=!1;return n.reduce((o,i,s)=>o!==Ia?o:(i===Ia&&(r=!0),r||!1!==i&&s!==n.length-1&&!Qo(i)?o:i),e)},Ia),qo(e=>e!==Ia),Q(e=>Qo(e)?e:!0===e),Ch(1)))}let Eb=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Do({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,r){1&n&&Fn(0,"router-outlet")},directives:function(){return[Bh]},encapsulation:2}),t})();function Cb(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];fL(r,hL(e,r))}}function fL(t,e){t.children&&Cb(t.children,e)}function hL(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Fh(t){const e=t.children&&t.children.map(Fh),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==lt&&(n.component=Eb),n}function Xn(t){return t.outlet||lt}function _b(t,e){const n=t.filter(r=>Xn(r)===e);return n.push(...t.filter(r=>Xn(r)!==e)),n}const bb={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ku(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},bb):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Ak)(n,t,e);if(!i)return Object.assign({},bb);const s={};tn(i.posParams,(p,C)=>{s[C]=p.path});const a=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:a,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Lu(t,e,n,r,o="corrected"){if(n.length>0&&function(t,e,n){return n.some(r=>Vu(t,e,r)&&Xn(r)!==lt)}(t,n,r)){const s=new ft(e,function(t,e,n,r){const o={};o[lt]=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const i of n)if(""===i.path&&Xn(i)!==lt){const s=new ft([],{});s._sourceSegment=t,s._segmentIndexShift=e.length,o[Xn(i)]=s}return o}(t,e,r,new ft(n,t.children)));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(r=>Vu(t,e,r))}(t,n,r)){const s=new ft(t.segments,function(t,e,n,r,o,i){const s={};for(const a of r)if(Vu(t,n,a)&&!o[Xn(a)]){const p=new ft([],{});p._sourceSegment=t,p._segmentIndexShift="legacy"===i?t.segments.length:e.length,s[Xn(a)]=p}return Object.assign(Object.assign({},o),s)}(t,e,n,r,t.children,o));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const i=new ft(t.segments,t.children);return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:n}}function Vu(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Sb(t,e,n,r){return!!(Xn(t)===r||r!==lt&&Vu(e,n,t))&&("**"===t.path||ku(e,t,n).matched)}function wb(t,e,n){return 0===e.length&&!t.children[n]}class xa{constructor(e){this.segmentGroup=e||null}}class Db{constructor(e){this.urlTree=e}}function Uu(t){return new R(e=>e.error(new xa(t)))}function Tb(t){return new R(e=>e.error(new Db(t)))}function vL(t){return new R(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class _L{constructor(e,n,r,o,i){this.configLoader=n,this.urlSerializer=r,this.urlTree=o,this.config=i,this.allowRedirects=!0,this.ngModule=e.get(Or)}apply(){const e=Lu(this.urlTree.root,[],[],this.config).segmentGroup,n=new ft(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,n,lt).pipe(Q(i=>this.createUrlTree(kh(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(zo(i=>{if(i instanceof Db)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof xa?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,lt).pipe(Q(o=>this.createUrlTree(kh(o),e.queryParams,e.fragment))).pipe(zo(o=>{throw o instanceof xa?this.noMatchError(o):o}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,n,r){const o=e.segments.length>0?new ft([],{[lt]:e}):e;return new Ko(o,n,r)}expandSegmentGroup(e,n,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,n,r).pipe(Q(i=>new ft([],i))):this.expandSegment(e,r,n,r.segments,o,!0)}expandChildren(e,n,r){const o=[];for(const i of Object.keys(r.children))"primary"===i?o.unshift(i):o.push(i);return ce(o).pipe(os(i=>{const s=r.children[i],a=_b(n,i);return this.expandSegmentGroup(e,a,s,i).pipe(Q(p=>({segment:p,outlet:i})))}),B_((i,s)=>(i[s.outlet]=s.segment,i),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?qo((o,i)=>t(o,i,r)):D,_h(1),n?H_(e):j_(()=>new Tu))}())}expandSegment(e,n,r,o,i,s){return ce(r).pipe(os(a=>this.expandSegmentAgainstRoute(e,n,r,a,o,i,s).pipe(zo(C=>{if(C instanceof xa)return tt(null);throw C}))),is(a=>!!a),zo((a,p)=>{if(a instanceof Tu||"EmptyError"===a.name){if(wb(n,o,i))return tt(new ft([],{}));throw new xa(n)}throw a}))}expandSegmentAgainstRoute(e,n,r,o,i,s,a){return Sb(o,n,i,s)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,n,o,i,s):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s):Uu(n):Uu(n)}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,o){const i=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Tb(i):this.lineralizeSegments(r,i).pipe(ct(s=>{const a=new ft(s,{});return this.expandSegment(e,a,n,s,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s){const{matched:a,consumedSegments:p,lastChild:C,positionalParamSegments:I}=ku(n,o,i);if(!a)return Uu(n);const M=this.applyRedirectCommands(p,o.redirectTo,I);return o.redirectTo.startsWith("/")?Tb(M):this.lineralizeSegments(o,M).pipe(ct(F=>this.expandSegment(e,n,r,F.concat(i.slice(C)),s,!1)))}matchSegmentAgainstRoute(e,n,r,o,i){if("**"===r.path)return r.loadChildren?(r._loadedConfig?tt(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe(Q(F=>(r._loadedConfig=F,new ft(o,{})))):tt(new ft(o,{}));const{matched:s,consumedSegments:a,lastChild:p}=ku(n,r,o);if(!s)return Uu(n);const C=o.slice(p);return this.getChildConfig(e,r,o).pipe(ct(M=>{const F=M.module,k=M.routes,{segmentGroup:$,slicedSegments:oe}=Lu(n,a,C,k),X=new ft($.segments,$.children);if(0===oe.length&&X.hasChildren())return this.expandChildren(F,k,X).pipe(Q(Ve=>new ft(a,Ve)));if(0===k.length&&0===oe.length)return tt(new ft(a,{}));const de=Xn(r)===i;return this.expandSegment(F,X,k,oe,de?lt:i,!0).pipe(Q(Ie=>new ft(a.concat(Ie.segments),Ie.children)))}))}getChildConfig(e,n,r){return n.children?tt(new Ph(n.children,e)):n.loadChildren?void 0!==n._loadedConfig?tt(n._loadedConfig):this.runCanLoadGuards(e.injector,n,r).pipe(ct(o=>o?this.configLoader.load(e.injector,n).pipe(Q(i=>(n._loadedConfig=i,i))):function(t){return new R(e=>e.error(Sh(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):tt(new Ph([],e))}runCanLoadGuards(e,n,r){const o=n.canLoad;return o&&0!==o.length?tt(o.map(s=>{const a=e.get(s);let p;if(function(t){return t&&vo(t.canLoad)}(a))p=a.canLoad(n,r);else{if(!vo(a))throw new Error("Invalid CanLoad guard");p=a(n,r)}return kr(p)})).pipe(Aa(),kn(s=>{if(!Qo(s))return;const a=Sh(`Redirecting to "${this.urlSerializer.serialize(s)}"`);throw a.url=s,a}),Q(s=>!0===s)):tt(!0)}lineralizeSegments(e,n){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return tt(r);if(o.numberOfChildren>1||!o.children[lt])return vL(e.redirectTo);o=o.children[lt]}}applyRedirectCommands(e,n,r){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),e,r)}applyRedirectCreatreUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new Ko(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return tn(e,(o,i)=>{if("string"==typeof o&&o.startsWith(":")){const a=o.substring(1);r[i]=n[a]}else r[i]=o}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return tn(n.children,(a,p)=>{s[p]=this.createSegmentGroup(e,a,r,o)}),new ft(i,s)}createSegments(e,n,r,o){return n.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new Error(`Cannot redirect to '${e}'. Cannot find '${n.path}'.`);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}function kh(t){const e={};for(const r of Object.keys(t.children)){const i=kh(t.children[r]);(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function(t){if(1===t.numberOfChildren&&t.children[lt]){const e=t.children[lt];return new ft(t.segments.concat(e.segments),e.children)}return t}(new ft(t.segments,e))}class Ib{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bu{constructor(e,n){this.component=e,this.route=n}}function wL(t,e,n){const r=t._root;return Ra(r,e?e._root:null,n,[r.value])}function ju(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const n=e.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ra(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=Da(e);return t.children.forEach(s=>{(function(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const p=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Yo(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Yo(t.url,e.url)||!Fr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Rh(t,e)||!Fr(t.queryParams,e.queryParams);case"paramsChange":default:return!Rh(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);p?o.canActivateChecks.push(new Ib(r)):(i.data=s.data,i._resolvedData=s._resolvedData),Ra(t,e,i.component?a?a.children:null:n,r,o),p&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Bu(a.outlet.component,s))}else s&&Na(e,a,o),o.canActivateChecks.push(new Ib(r)),Ra(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),tn(i,(s,a)=>Na(s,n.getContext(a),o)),o}function Na(t,e,n){const r=Da(t),o=t.value;tn(r,(i,s)=>{Na(i,o.component?e?e.children.getContext(s):null:e,n)}),n.canDeactivateChecks.push(new Bu(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}class LL{}function Ab(t){return new R(e=>e.error(t))}class UL{constructor(e,n,r,o,i,s){this.rootComponentType=e,this.config=n,this.urlTree=r,this.url=o,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=Lu(this.urlTree.root,[],[],this.config.filter(s=>void 0===s.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,e,lt);if(null===n)return null;const r=new Mu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new Xr(r,n),i=new lb(this.url,o);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const n=e.value,r=ub(n,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,n,r){return 0===n.segments.length&&n.hasChildren()?this.processChildren(e,n):this.processSegment(e,n,n.segments,r)}processChildren(e,n){const r=[];for(const i of Object.keys(n.children)){const s=n.children[i],a=_b(e,i),p=this.processSegmentGroup(a,s,i);if(null===p)return null;r.push(...p)}const o=xb(r);return function(t){t.sort((e,n)=>e.value.outlet===lt?-1:n.value.outlet===lt?1:e.value.outlet.localeCompare(n.value.outlet))}(o),o}processSegment(e,n,r,o){for(const i of e){const s=this.processSegmentAgainstRoute(i,n,r,o);if(null!==s)return s}return wb(n,r,o)?[]:null}processSegmentAgainstRoute(e,n,r,o){if(e.redirectTo||!Sb(e,n,r,o))return null;let i,s=[],a=[];if("**"===e.path){const k=r.length>0?Q_(r).parameters:{};i=new Mu(r,k,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mb(e),Xn(e),e.component,e,Rb(n),Nb(n)+r.length,Ob(e))}else{const k=ku(n,e,r);if(!k.matched)return null;s=k.consumedSegments,a=r.slice(k.lastChild),i=new Mu(s,k.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Mb(e),Xn(e),e.component,e,Rb(n),Nb(n)+s.length,Ob(e))}const p=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(e),{segmentGroup:C,slicedSegments:I}=Lu(n,s,a,p.filter(k=>void 0===k.redirectTo),this.relativeLinkResolution);if(0===I.length&&C.hasChildren()){const k=this.processChildren(p,C);return null===k?null:[new Xr(i,k)]}if(0===p.length&&0===I.length)return[new Xr(i,[])];const M=Xn(e)===o,F=this.processSegment(p,C,I,M?lt:o);return null===F?null:[new Xr(i,F)]}}function HL(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function xb(t){const e=[],n=new Set;for(const r of t){if(!HL(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=xb(r.children);e.push(new Xr(r.value,o))}return e.filter(r=>!n.has(r))}function Rb(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Nb(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Mb(t){return t.data||{}}function Ob(t){return t.resolve||{}}function Lh(t){return mo(e=>{const n=t(e);return n?ce(n).pipe(Q(()=>e)):tt(e)})}class QL extends class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}}{}const Vh=new st("ROUTES");class Pb{constructor(e,n,r,o){this.loader=e,this.compiler=n,this.onLoadStartListener=r,this.onLoadEndListener=o}load(e,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const o=this.loadModuleFactory(n.loadChildren).pipe(Q(i=>{this.onLoadEndListener&&this.onLoadEndListener(n);const s=i.create(e);return new Ph(Y_(s.injector.get(Vh,void 0,je.Self|je.Optional)).map(Fh),s)}),zo(i=>{throw n._loader$=void 0,i}));return n._loader$=new L(o,()=>new se).pipe(re()),n._loader$}loadModuleFactory(e){return"string"==typeof e?ce(this.loader.load(e)):kr(e()).pipe(ct(n=>n instanceof hE?tt(n):ce(this.compiler.compileModuleAsync(n))))}}class JL{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new cs,this.attachRef=null}}class cs{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){const r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){const n=this.getContext(e);n&&(n.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new JL,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}}class ZL{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}}function eV(t){throw t}function tV(t,e,n){return e.parse("/")}function Fb(t,e){return tt(null)}const nV={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},rV={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let wn=(()=>{class t{constructor(n,r,o,i,s,a,p,C){this.rootComponentType=n,this.urlSerializer=r,this.rootContexts=o,this.location=i,this.config=C,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new se,this.errorHandler=eV,this.malformedUriErrorHandler=tV,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fb,afterPreactivation:Fb},this.urlHandlingStrategy=new ZL,this.routeReuseStrategy=new QL,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(Or),this.console=s.get(Xc);const F=s.get(Vt);this.isNgZoneEnabled=F instanceof Vt&&Vt.isInAngularZone(),this.resetConfig(C),this.currentUrlTree=new Ko(new ft([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Pb(a,p,k=>this.triggerEvent(new W_(k)),k=>this.triggerEvent(new $_(k))),this.routerState=cb(this.currentUrlTree,this.rootComponentType),this.transitions=new vr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const r=this.events;return n.pipe(qo(o=>0!==o.id),Q(o=>Object.assign(Object.assign({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),mo(o=>{let i=!1,s=!1;return tt(o).pipe(kn(a=>{this.currentNavigation={id:a.id,initialUrl:a.currentRawUrl,extractedUrl:a.extractedUrl,trigger:a.source,extras:a.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),mo(a=>{const p=this.browserUrlTree.toString(),C=!this.navigated||a.extractedUrl.toString()!==p||p!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return Hu(a.source)&&(this.browserUrlTree=a.extractedUrl),tt(a).pipe(mo(M=>{const F=this.transitions.getValue();return r.next(new bh(M.id,this.serializeUrl(M.extractedUrl),M.source,M.restoredState)),F!==this.transitions.getValue()?rs:Promise.resolve(M)}),function(t,e,n,r){return mo(o=>function(t,e,n,r,o){return new _L(t,e,n,r,o).apply()}(t,e,n,o.extractedUrl,r).pipe(Q(i=>Object.assign(Object.assign({},o),{urlAfterRedirects:i}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),kn(M=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:M.urlAfterRedirects})}),function(t,e,n,r,o){return ct(i=>function(t,e,n,r,o="emptyOnly",i="legacy"){try{const s=new UL(t,e,n,r,o,i).recognize();return null===s?Ab(new LL):tt(s)}catch(s){return Ab(s)}}(t,e,i.urlAfterRedirects,n(i.urlAfterRedirects),r,o).pipe(Q(s=>Object.assign(Object.assign({},i),{targetSnapshot:s}))))}(this.rootComponentType,this.config,M=>this.serializeUrl(M),this.paramsInheritanceStrategy,this.relativeLinkResolution),kn(M=>{"eager"===this.urlUpdateStrategy&&(M.extras.skipLocationChange||this.setBrowserUrl(M.urlAfterRedirects,M),this.browserUrlTree=M.urlAfterRedirects);const F=new yk(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(M.urlAfterRedirects),M.targetSnapshot);r.next(F)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:F,extractedUrl:k,source:$,restoredState:oe,extras:X}=a,de=new bh(F,this.serializeUrl(k),$,oe);r.next(de);const ue=cb(k,this.rootComponentType).snapshot;return tt(Object.assign(Object.assign({},a),{targetSnapshot:ue,urlAfterRedirects:k,extras:Object.assign(Object.assign({},X),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=a.rawUrl,this.browserUrlTree=a.urlAfterRedirects,a.resolve(null),rs}),Lh(a=>{const{targetSnapshot:p,id:C,extractedUrl:I,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:k}}=a;return this.hooks.beforePreactivation(p,{navigationId:C,appliedUrlTree:I,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!k})}),kn(a=>{const p=new vk(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.triggerEvent(p)}),Q(a=>Object.assign(Object.assign({},a),{guards:wL(a.targetSnapshot,a.currentSnapshot,this.rootContexts)})),function(t,e){return ct(n=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=n;return 0===s.length&&0===i.length?tt(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return ce(t).pipe(ct(o=>function(t,e,n,r,o){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?tt(i.map(a=>{const p=ju(a,e,o);let C;if(function(t){return t&&vo(t.canDeactivate)}(p))C=kr(p.canDeactivate(t,e,n,r));else{if(!vo(p))throw new Error("Invalid CanDeactivate guard");C=kr(p(t,e,n,r))}return C.pipe(is())})).pipe(Aa()):tt(!0)}(o.component,o.route,n,e,r)),is(o=>!0!==o,!0))}(s,r,o,t).pipe(ct(a=>a&&function(t){return"boolean"==typeof t}(a)?function(t,e,n,r){return ce(e).pipe(os(o=>vh(function(t,e){return null!==t&&e&&e(new bk(t)),tt(!0)}(o.route.parent,r),function(t,e){return null!==t&&e&&e(new wk(t)),tt(!0)}(o.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(s)).filter(s=>null!==s).map(s=>V_(()=>tt(s.guards.map(p=>{const C=ju(p,s.node,n);let I;if(function(t){return t&&vo(t.canActivateChild)}(C))I=kr(C.canActivateChild(r,t));else{if(!vo(C))throw new Error("Invalid CanActivateChild guard");I=kr(C(r,t))}return I.pipe(is())})).pipe(Aa())));return tt(i).pipe(Aa())}(t,o.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;return r&&0!==r.length?tt(r.map(i=>V_(()=>{const s=ju(i,e,n);let a;if(function(t){return t&&vo(t.canActivate)}(s))a=kr(s.canActivate(e,t));else{if(!vo(s))throw new Error("Invalid CanActivate guard");a=kr(s(e,t))}return a.pipe(is())}))).pipe(Aa()):tt(!0)}(t,o.route,n))),is(o=>!0!==o,!0))}(r,i,t,e):tt(a)),Q(a=>Object.assign(Object.assign({},n),{guardsResult:a})))})}(this.ngModule.injector,a=>this.triggerEvent(a)),kn(a=>{if(Qo(a.guardsResult)){const C=Sh(`Redirecting to "${this.serializeUrl(a.guardsResult)}"`);throw C.url=a.guardsResult,C}const p=new Ek(a.id,this.serializeUrl(a.extractedUrl),this.serializeUrl(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);this.triggerEvent(p)}),qo(a=>!!a.guardsResult||(this.restoreHistory(a),this.cancelNavigationTransition(a,""),!1)),Lh(a=>{if(a.guards.canActivateChecks.length)return tt(a).pipe(kn(p=>{const C=new Ck(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(C)}),mo(p=>{let C=!1;return tt(p).pipe(function(t,e){return ct(n=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=n;if(!o.length)return tt(n);let i=0;return ce(o).pipe(os(s=>function(t,e,n,r){return function(t,e,n,r){const o=Object.keys(t);if(0===o.length)return tt({});const i={};return ce(o).pipe(ct(s=>function(t,e,n,r){const o=ju(t,e,r);return kr(o.resolve?o.resolve(e,n):o(e,n))}(t[s],e,n,r).pipe(kn(a=>{i[s]=a}))),_h(1),ct(()=>Object.keys(i).length===o.length?tt(i):rs))}(t._resolve,t,e,r).pipe(Q(i=>(t._resolvedData=i,t.data=Object.assign(Object.assign({},t.data),ub(t,n).resolve),null)))}(s.route,r,t,e)),kn(()=>i++),_h(1),ct(s=>i===o.length?tt(n):rs))})}(this.paramsInheritanceStrategy,this.ngModule.injector),kn({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(p),this.cancelNavigationTransition(p,"At least one route resolver didn't emit any value."))}}))}),kn(p=>{const C=new _k(p.id,this.serializeUrl(p.extractedUrl),this.serializeUrl(p.urlAfterRedirects),p.targetSnapshot);this.triggerEvent(C)}))}),Lh(a=>{const{targetSnapshot:p,id:C,extractedUrl:I,rawUrl:M,extras:{skipLocationChange:F,replaceUrl:k}}=a;return this.hooks.afterPreactivation(p,{navigationId:C,appliedUrlTree:I,rawUrlTree:M,skipLocationChange:!!F,replaceUrl:!!k})}),Q(a=>{const p=function(t,e,n){const r=Ou(t,e._root,n?n._root:void 0);return new ab(r,e)}(this.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);return Object.assign(Object.assign({},a),{targetRouterState:p})}),kn(a=>{this.currentUrlTree=a.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(a.urlAfterRedirects,a.rawUrl),this.routerState=a.targetRouterState,"deferred"===this.urlUpdateStrategy&&(a.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,a),this.browserUrlTree=a.urlAfterRedirects)}),((t,e,n)=>Q(r=>(new iL(e,r.targetRouterState,r.currentRouterState,n).activate(t),r)))(this.rootContexts,this.routeReuseStrategy,a=>this.triggerEvent(a)),kn({next(){i=!0},complete(){i=!0}}),function(t){return e=>e.lift(new pk(t))}(()=>{if(!i&&!s){const a=`Navigation ID ${o.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(o),this.cancelNavigationTransition(o,a)):this.cancelNavigationTransition(o,a)}this.currentNavigation=null}),zo(a=>{if(s=!0,function(t){return t&&t[z_]}(a)){const p=Qo(a.url);p||(this.navigated=!0,this.restoreHistory(o,!0));const C=new G_(o.id,this.serializeUrl(o.extractedUrl),a.message);r.next(C),p?setTimeout(()=>{const I=this.urlHandlingStrategy.merge(a.url,this.rawUrlTree),M={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Hu(o.source)};this.scheduleNavigation(I,"imperative",null,M,{resolve:o.resolve,reject:o.reject,promise:o.promise})},0):o.resolve(!1)}else{this.restoreHistory(o,!0);const p=new mk(o.id,this.serializeUrl(o.extractedUrl),a);r.next(p);try{o.resolve(this.errorHandler(a))}catch(C){o.reject(C)}}return rs}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}getTransition(){const n=this.transitions.value;return n.urlAfterRedirects=this.browserUrlTree,n}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const r=this.extractLocationChangeInfoFromEvent(n);this.shouldScheduleNavigation(this.lastLocationChangeInfo,r)&&setTimeout(()=>{const{source:o,state:i,urlTree:s}=r,a={replaceUrl:!0};if(i){const p=Object.assign({},i);delete p.navigationId,delete p.\u0275routerPageId,0!==Object.keys(p).length&&(a.state=p)}this.scheduleNavigation(s,o,i,a)},0),this.lastLocationChangeInfo=r}))}extractLocationChangeInfoFromEvent(n){var r;return{source:"popstate"===n.type?"popstate":"hashchange",urlTree:this.parseUrl(n.url),state:(null===(r=n.state)||void 0===r?void 0:r.navigationId)?n.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(n,r){if(!n)return!0;const o=r.urlTree.toString()===n.urlTree.toString();return r.transitionId!==n.transitionId||!o||!("hashchange"===r.source&&"popstate"===n.source||"popstate"===r.source&&"hashchange"===n.source)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){Cb(n),this.config=n.map(Fh),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:p}=r,C=o||this.routerState.root,I=p?this.currentUrlTree.fragment:s;let M=null;switch(a){case"merge":M=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":M=this.currentUrlTree.queryParams;break;default:M=i||null}return null!==M&&(M=this.removeEmptyProps(M)),function(t,e,n,r,o){if(0===n.length)return Nh(e.root,e.root,e,r,o);const i=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new pb(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return tn(i.outlets,(p,C)=>{a[C]="string"==typeof p?p.split("/"):p}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,p)=>{0==p&&"."===a||(0==p&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new pb(n,e,r)}(n);if(i.toRoot())return Nh(e.root,new ft([],{}),e,r,o);const s=function(t,e,n){if(t.isAbsolute)return new Mh(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const i=n.snapshot._urlSegment;return new Mh(i,i===e.root,0)}const r=Pu(t.commands[0])?0:1;return function(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new Error("Invalid number of '../'");o=r.segments.length}return new Mh(r,!1,o-i)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(i,e,t),a=s.processChildren?Fu(s.segmentGroup,s.index,i.commands):gb(s.segmentGroup,s.index,i.commands);return Nh(s.segmentGroup,a,e,r,o)}(C,this.currentUrlTree,n,M,null!=I?I:null)}navigateByUrl(n,r={skipLocationChange:!1}){const o=Qo(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,r)}navigate(n,r={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let r;try{r=this.urlSerializer.parse(n)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,n)}return r}isActive(n,r){let o;if(o=!0===r?Object.assign({},nV):!1===r?Object.assign({},rV):r,Qo(n))return X_(this.currentUrlTree,n,o);const i=this.parseUrl(n);return X_(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.keys(n).reduce((r,o)=>{const i=n[o];return null!=i&&(r[o]=i),r},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new ba(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,r,o,i,s){var a,p;if(this.disposed)return Promise.resolve(!1);const C=this.getTransition(),I=Hu(r)&&C&&!Hu(C.source),k=(this.lastSuccessfulId===C.id||this.currentNavigation?C.rawUrl:C.urlAfterRedirects).toString()===n.toString();if(I&&k)return Promise.resolve(!0);let $,oe,X;s?($=s.resolve,oe=s.reject,X=s.promise):X=new Promise((Ie,Ve)=>{$=Ie,oe=Ve});const de=++this.navigationId;let ue;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),ue=o&&o.\u0275routerPageId?o.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?null!==(a=this.browserPageId)&&void 0!==a?a:0:(null!==(p=this.browserPageId)&&void 0!==p?p:0)+1):ue=0,this.setTransition({id:de,targetPageId:ue,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:i,resolve:$,reject:oe,promise:X,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),X.catch(Ie=>Promise.reject(Ie))}setBrowserUrl(n,r){const o=this.urlSerializer.serialize(n),i=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",i):this.location.go(o,"",i)}restoreHistory(n,r=!1){var o,i;if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(o=this.currentNavigation)||void 0===o?void 0:o.finalUrl)||0===s?this.currentUrlTree===(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)&&0===s&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(s)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,r){const o=new G_(n.id,this.serializeUrl(n.extractedUrl),r);this.triggerEvent(o),n.resolve(!1)}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}}return t.\u0275fac=function(n){return new(n||t)(De(ac),De(wh),De(cs),De(du),De(mt),De(eu),De(Ho),De(void 0))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function Hu(t){return"imperative"!==t}let Gu=(()=>{class t{constructor(n,r,o){this.router=n,this.route=r,this.locationStrategy=o,this.commands=[],this.onChanges=new se,this.subscription=n.events.subscribe(i=>{i instanceof ba&&this.updateTargetUrlAndHref()})}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:[]}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,r,o,i,s){if(0!==n||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target)return!0;const a={skipLocationChange:us(this.skipLocationChange),replaceUrl:us(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,a),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:us(this.preserveFragment)})}}return t.\u0275fac=function(n){return new(n||t)(ve(wn),ve(as),ve(ns))},t.\u0275dir=We({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,r){1&n&&bn("click",function(i){return r.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&n&&(Bd("href",r.href,jl),xr("target",r.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[rn]}),t})();function us(t){return""===t||!!t}let Bh=(()=>{class t{constructor(n,r,o,i,s){this.parentContexts=n,this.location=r,this.resolver=o,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new Kt,this.deactivateEvents=new Kt,this.name=i||lt,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const s=(r=r||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),a=this.parentContexts.getOrCreateContext(this.name).children,p=new aV(n,a,this.location.injector);this.activated=this.location.createComponent(s,this.location.length,p),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(ve(cs),ve(lr),ve(Uo),function(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(Xp(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===e)return n[o+1];o+=2}}}return null}($t(),t)}("name"),ve(Qd))},t.\u0275dir=We({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class aV{constructor(e,n,r){this.route=e,this.childContexts=n,this.parent=r}get(e,n){return e===as?this.route:e===cs?this.childContexts:this.parent.get(e,n)}}class kb{}class Lb{preload(e,n){return tt(null)}}let Vb=(()=>{class t{constructor(n,r,o,i,s){this.router=n,this.injector=i,this.preloadingStrategy=s,this.loader=new Pb(r,o,C=>n.triggerEvent(new W_(C)),C=>n.triggerEvent(new $_(C)))}setUpPreloading(){this.subscription=this.router.events.pipe(qo(n=>n instanceof ba),os(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(Or);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const s=i._loadedConfig;o.push(this.processRoutes(s.module,s.routes))}else i.loadChildren&&!i.canLoad?o.push(this.preloadConfig(n,i)):i.children&&o.push(this.processRoutes(n,i.children));return ce(o).pipe(A(),Q(i=>{}))}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?tt(r._loadedConfig):this.loader.load(n.injector,r)).pipe(ct(i=>(r._loadedConfig=i,this.processRoutes(i.module,i.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(De(wn),De(eu),De(Ho),De(mt),De(kb))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),jh=(()=>{class t{constructor(n,r,o={}){this.router=n,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof bh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof ba&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof q_&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,r){this.router.triggerEvent(new q_(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(De(wn),De(b_),De(void 0))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const Jo=new st("ROUTER_CONFIGURATION"),Ub=new st("ROUTER_FORROOT_GUARD"),uV=[du,{provide:wh,useClass:nb},{provide:wn,useFactory:function(t,e,n,r,o,i,s,a={},p,C){const I=new wn(null,t,e,n,r,o,i,Y_(s));return p&&(I.urlHandlingStrategy=p),C&&(I.routeReuseStrategy=C),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,I),a.enableTracing&&I.events.subscribe(M=>{var F,k;null===(F=console.group)||void 0===F||F.call(console,`Router Event: ${M.constructor.name}`),console.log(M.toString()),console.log(M),null===(k=console.groupEnd)||void 0===k||k.call(console)}),I},deps:[wh,cs,du,mt,eu,Ho,Vh,Jo,[class{},new _n],[class{},new _n]]},cs,{provide:as,useFactory:function(t){return t.routerState.root},deps:[wn]},{provide:eu,useClass:QM},Vb,Lb,class{preload(e,n){return n().pipe(zo(()=>tt(null)))}},{provide:Jo,useValue:{enableTracing:!1}}];function lV(){return new Nf("Router",wn)}let Bb=(()=>{class t{constructor(n,r){}static forRoot(n,r){return{ngModule:t,providers:[uV,jb(n),{provide:Ub,useFactory:hV,deps:[[wn,new _n,new co]]},{provide:Jo,useValue:r||{}},{provide:ns,useFactory:fV,deps:[$o,[new Ei(Kf),new _n],Jo]},{provide:jh,useFactory:dV,deps:[wn,b_,Jo]},{provide:kb,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:Lb},{provide:Nf,multi:!0,useFactory:lV},[Hh,{provide:da,multi:!0,useFactory:yV,deps:[Hh]},{provide:Hb,useFactory:vV,deps:[Hh]},{provide:mC,multi:!0,useExisting:Hb}]]}}static forChild(n){return{ngModule:t,providers:[jb(n)]}}}return t.\u0275fac=function(n){return new(n||t)(De(Ub,8),De(wn,8))},t.\u0275mod=An({type:t}),t.\u0275inj=ln({}),t})();function dV(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new jh(t,e,n)}function fV(t,e,n={}){return n.useHash?new m1(t,e):new s_(t,e)}function hV(t){return"guarded"}function jb(t){return[{provide:dw,multi:!0,useValue:t},{provide:Vh,multi:!0,useValue:t}]}let Hh=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new se}appInitializer(){return this.injector.get(h1,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const o=new Promise(a=>r=a),i=this.injector.get(wn),s=this.injector.get(Jo);return"disabled"===s.initialNavigation?(i.setUpLocationChangeListener(),r(!0)):"enabled"===s.initialNavigation||"enabledBlocking"===s.initialNavigation?(i.hooks.afterPreactivation=()=>this.initNavigation?tt(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),i.initialNavigation()):r(!0),o})}bootstrapListener(n){const r=this.injector.get(Jo),o=this.injector.get(Vb),i=this.injector.get(jh),s=this.injector.get(wn),a=this.injector.get(Zi);n===a.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&s.initialNavigation(),o.setUpPreloading(),i.init(),s.resetRootComponentType(a.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(De(mt))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();function yV(t){return t.appInitializer.bind(t)}function vV(t){return t.bootstrapListener.bind(t)}const Hb=new st("Router Initializer"),CV=[{path:"about",component:LF},{path:"customerservice",component:kF},{path:"agent",component:FF}];let _V=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({imports:[[Bb.forRoot(CV)],Bb]}),t})(),bV=(()=>{class t{constructor(){this.title="CoStar"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Do({type:t,selectors:[["app-root"]],decls:30,vars:0,consts:[["lang","en"],["charset","UTF-8"],["http-equiv","X-UA-Compatible","content","IE=edge"],["name","viewport","content","width=device-width, initial-scale=1.0"],["rel","preconnect","href","https://fonts.googleapis.com"],["rel","preconnect","href","https://fonts.gstatic.com","crossorigin",""],["href","https://fonts.googleapis.com/css2?family=Poppins:wght@300&display=swap","rel","stylesheet"],[1,"navbar"],[1,"container"],["routerLink","/"],["src","https://mlt.org/wp-content/uploads/2019/01/costar-logo.jpg","alt","",1,"costar_logo"],[1,"nav_links"],["routerLink","/about"],["routerLink","/customerservice"],["routerLink","/agent"]],template:function(n,r){1&n&&(Ct(0,"html",0),Ct(1,"head"),Fn(2,"meta",1),Fn(3,"meta",2),Fn(4,"meta",3),Ct(5,"title"),ur(6,"Document"),_t(),Fn(7,"link",4),Fn(8,"link",5),Fn(9,"link",6),_t(),Ct(10,"body"),Ct(11,"div",7),Ct(12,"div",8),Ct(13,"a",9),Fn(14,"img",10),_t(),_t(),Ct(15,"nav"),Ct(16,"div",11),Ct(17,"a",9),Ct(18,"h3"),ur(19,"Home"),_t(),_t(),Ct(20,"a",12),Ct(21,"h3"),ur(22,"About"),_t(),_t(),Ct(23,"a",13),Ct(24,"h3"),ur(25,"Support"),_t(),_t(),Ct(26,"a",14),Ct(27,"h3"),ur(28,"Agent"),_t(),_t(),_t(),_t(),_t(),Fn(29,"router-outlet"),_t(),_t())},directives:[Gu,Bh],styles:['h1[_ngcontent-%COMP%]{color:#000;font-family:"Poppins",sans-serif;font-size:250%;text-align:center}.container[_ngcontent-%COMP%]{position:relative}.costar_logo[_ngcontent-%COMP%]{width:280px;height:100px;margin-top:-20px;margin-left:-25px}.navbar[_ngcontent-%COMP%]{display:flex}.nav_links[_ngcontent-%COMP%]{display:flex}.container[_ngcontent-%COMP%]{flex:1}a[_ngcontent-%COMP%]{color:#123456;padding-right:20px}a[_ngcontent-%COMP%]:hover{color:#8b2929}a[_ngcontent-%COMP%]:link{text-decoration:none}']}),t})();class Gb{}class Wb{}class Zr{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=o.toLowerCase(),s=n.slice(r+1).trim();this.maybeSetNormalizedName(o,i),this.headers.has(i)?this.headers.get(i).push(s):this.headers.set(i,[s])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(n=>{let r=e[n];const o=n.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(o,r),this.maybeSetNormalizedName(n,o))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zr?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Zr;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Zr?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class SV{encodeKey(e){return $b(e)}encodeValue(e){return $b(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const DV=/%(\d[a-f0-9])/gi,TV={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function $b(t){return encodeURIComponent(t).replace(DV,(e,n)=>{var r;return null!==(r=TV[n])&&void 0!==r?r:e})}function qb(t){return`${t}`}class Eo{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new SV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],p=n.get(s)||[];p.push(a),n.set(s,p)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n];this.map.set(n,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new Eo({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push(qb(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf(qb(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class IV{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}keys(){return this.map.keys()}}function zb(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Kb(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Yb(t){return"undefined"!=typeof FormData&&t instanceof FormData}class Ma{constructor(e,n,r,o){let i;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params)),this.headers||(this.headers=new Zr),this.context||(this.context=new IV),this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new Eo,this.urlWithParams=n}serializeBody(){return null===this.body?null:zb(this.body)||Kb(this.body)||Yb(this.body)||function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Eo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Yb(this.body)?null:Kb(this.body)?this.body.type||null:zb(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Eo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var n;const r=e.method||this.method,o=e.url||this.url,i=e.responseType||this.responseType,s=void 0!==e.body?e.body:this.body,a=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let C=e.headers||this.headers,I=e.params||this.params;const M=null!==(n=e.context)&&void 0!==n?n:this.context;return void 0!==e.setHeaders&&(C=Object.keys(e.setHeaders).reduce((F,k)=>F.set(k,e.setHeaders[k]),C)),e.setParams&&(I=Object.keys(e.setParams).reduce((F,k)=>F.set(k,e.setParams[k]),I)),new Ma(r,o,s,{params:I,headers:C,context:M,reportProgress:p,responseType:i,withCredentials:a})}}var Ht=(()=>((Ht=Ht||{})[Ht.Sent=0]="Sent",Ht[Ht.UploadProgress=1]="UploadProgress",Ht[Ht.ResponseHeader=2]="ResponseHeader",Ht[Ht.DownloadProgress=3]="DownloadProgress",Ht[Ht.Response=4]="Response",Ht[Ht.User=5]="User",Ht))();class Gh{constructor(e,n=200,r="OK"){this.headers=e.headers||new Zr,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class Wh extends Gh{constructor(e={}){super(e),this.type=Ht.ResponseHeader}clone(e={}){return new Wh({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Wu extends Gh{constructor(e={}){super(e),this.type=Ht.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Wu({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qb extends Gh{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function $h(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let Jb=(()=>{class t{constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Ma)i=n;else{let p,C;p=o.headers instanceof Zr?o.headers:new Zr(o.headers),o.params&&(C=o.params instanceof Eo?o.params:new Eo({fromObject:o.params})),i=new Ma(n,r,void 0!==o.body?o.body:null,{headers:p,context:o.context,params:C,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials})}const s=tt(i).pipe(os(p=>this.handler.handle(p)));if(n instanceof Ma||"events"===o.observe)return s;const a=s.pipe(qo(p=>p instanceof Wu));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(Q(p=>{if(null!==p.body&&!(p.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return p.body}));case"blob":return a.pipe(Q(p=>{if(null!==p.body&&!(p.body instanceof Blob))throw new Error("Response is not a Blob.");return p.body}));case"text":return a.pipe(Q(p=>{if(null!==p.body&&"string"!=typeof p.body)throw new Error("Response is not a string.");return p.body}));case"json":default:return a.pipe(Q(p=>p.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new Eo).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,$h(o,r))}post(n,r,o={}){return this.request("POST",n,$h(o,r))}put(n,r,o={}){return this.request("PUT",n,$h(o,r))}}return t.\u0275fac=function(n){return new(n||t)(De(Gb))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();class Xb{constructor(e,n){this.next=e,this.interceptor=n}handle(e){return this.interceptor.intercept(e,this.next)}}const Zb=new st("HTTP_INTERCEPTORS");let RV=(()=>{class t{intercept(n,r){return r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const NV=/^\)\]\}',?\n/;let e0=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new R(r=>{const o=this.xhrFactory.build();if(o.open(n.method,n.urlWithParams),n.withCredentials&&(o.withCredentials=!0),n.headers.forEach((k,$)=>o.setRequestHeader(k,$.join(","))),n.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const k=n.detectContentTypeHeader();null!==k&&o.setRequestHeader("Content-Type",k)}if(n.responseType){const k=n.responseType.toLowerCase();o.responseType="json"!==k?k:"text"}const i=n.serializeBody();let s=null;const a=()=>{if(null!==s)return s;const k=1223===o.status?204:o.status,$=o.statusText||"OK",oe=new Zr(o.getAllResponseHeaders()),X=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(o)||n.url;return s=new Wh({headers:oe,status:k,statusText:$,url:X}),s},p=()=>{let{headers:k,status:$,statusText:oe,url:X}=a(),de=null;204!==$&&(de=void 0===o.response?o.responseText:o.response),0===$&&($=de?200:0);let ue=$>=200&&$<300;if("json"===n.responseType&&"string"==typeof de){const Ie=de;de=de.replace(NV,"");try{de=""!==de?JSON.parse(de):null}catch(Ve){de=Ie,ue&&(ue=!1,de={error:Ve,text:de})}}ue?(r.next(new Wu({body:de,headers:k,status:$,statusText:oe,url:X||void 0})),r.complete()):r.error(new Qb({error:de,headers:k,status:$,statusText:oe,url:X||void 0}))},C=k=>{const{url:$}=a(),oe=new Qb({error:k,status:o.status||0,statusText:o.statusText||"Unknown Error",url:$||void 0});r.error(oe)};let I=!1;const M=k=>{I||(r.next(a()),I=!0);let $={type:Ht.DownloadProgress,loaded:k.loaded};k.lengthComputable&&($.total=k.total),"text"===n.responseType&&!!o.responseText&&($.partialText=o.responseText),r.next($)},F=k=>{let $={type:Ht.UploadProgress,loaded:k.loaded};k.lengthComputable&&($.total=k.total),r.next($)};return o.addEventListener("load",p),o.addEventListener("error",C),o.addEventListener("timeout",C),o.addEventListener("abort",C),n.reportProgress&&(o.addEventListener("progress",M),null!==i&&o.upload&&o.upload.addEventListener("progress",F)),o.send(i),r.next({type:Ht.Sent}),()=>{o.removeEventListener("error",C),o.removeEventListener("abort",C),o.removeEventListener("load",p),o.removeEventListener("timeout",C),n.reportProgress&&(o.removeEventListener("progress",M),null!==i&&o.upload&&o.upload.removeEventListener("progress",F)),o.readyState!==o.DONE&&o.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(De(w_))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})();const qh=new st("XSRF_COOKIE_NAME"),zh=new st("XSRF_HEADER_NAME");class t0{}let OV=(()=>{class t{constructor(n,r,o){this.doc=n,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=m_(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(De(Ut),De(Jc),De(qh))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),Kh=(()=>{class t{constructor(n,r){this.tokenService=n,this.headerName=r}intercept(n,r){const o=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||o.startsWith("http://")||o.startsWith("https://"))return r.handle(n);const i=this.tokenService.getToken();return null!==i&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,i)})),r.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(De(t0),De(zh))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),PV=(()=>{class t{constructor(n,r){this.backend=n,this.injector=r,this.chain=null}handle(n){if(null===this.chain){const r=this.injector.get(Zb,[]);this.chain=r.reduceRight((o,i)=>new Xb(o,i),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(De(Wb),De(mt))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac}),t})(),FV=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:Kh,useClass:RV}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:qh,useValue:n.cookieName}:[],n.headerName?{provide:zh,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({providers:[Kh,{provide:Zb,useExisting:Kh,multi:!0},{provide:t0,useClass:OV},{provide:qh,useValue:"XSRF-TOKEN"},{provide:zh,useValue:"X-XSRF-TOKEN"}]}),t})(),kV=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({providers:[Jb,{provide:Gb,useClass:PV},e0,{provide:Wb,useExisting:e0}],imports:[[FV.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),L0=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({}),t})();const lp=new st("NgModelWithFormControlWarning");let eS=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({imports:[[L0]]}),t})(),N2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({imports:[eS]}),t})(),M2=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:lp,useValue:n.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t}),t.\u0275inj=ln({imports:[eS]}),t})(),O2=(()=>{class t{constructor(n){this.http=n,this.APIUrl="http://customerdataservice-env.us-east-1.elasticbeanstalk.com/"}getCustomerPhone(n){return this.http.get(this.APIUrl+"/contact?phoneNumber="+n)}}return t.\u0275fac=function(n){return new(n||t)(De(Jb))},t.\u0275prov=Ke({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),P2=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=An({type:t,bootstrap:[bV]}),t.\u0275inj=ln({providers:[O2],imports:[[TF,_V,kV,N2,M2]]}),t})();(function(){if(SC)throw new Error("Cannot enable prod mode after platform setup.");bC=!1})(),wF().bootstrapModule(P2).catch(t=>console.error(t))}},Zo=>{Zo(Zo.s=111)}]);